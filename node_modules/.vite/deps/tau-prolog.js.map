{
  "version": 3,
  "sources": ["browser-external:fs", "browser-external:child_process", "browser-external:path", "browser-external:os", "browser-external:crypto", "../../readline-sync/lib/readline-sync.js", "../../tau-prolog/modules/core.js"],
  "sourcesContent": ["module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"fs\" has been externalized for browser compatibility. Cannot access \"fs.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"child_process\" has been externalized for browser compatibility. Cannot access \"child_process.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"path\" has been externalized for browser compatibility. Cannot access \"path.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"os\" has been externalized for browser compatibility. Cannot access \"os.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"crypto\" has been externalized for browser compatibility. Cannot access \"crypto.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "/*\n * readlineSync\n * https://github.com/anseki/readline-sync\n *\n * Copyright (c) 2018 anseki\n * Licensed under the MIT license.\n */\n\n'use strict';\n\nvar\n  IS_WIN = process.platform === 'win32',\n\n  ALGORITHM_CIPHER = 'aes-256-cbc',\n  ALGORITHM_HASH = 'sha256',\n  DEFAULT_ERR_MSG = 'The current environment doesn\\'t support interactive reading from TTY.',\n\n  fs = require('fs'),\n  TTY = process.binding('tty_wrap').TTY,\n  childProc = require('child_process'),\n  pathUtil = require('path'),\n\n  defaultOptions = {\n    /* eslint-disable key-spacing */\n    prompt:             '> ',\n    hideEchoBack:       false,\n    mask:               '*',\n    limit:              [],\n    limitMessage:       'Input another, please.$<( [)limit(])>',\n    defaultInput:       '',\n    trueValue:          [],\n    falseValue:         [],\n    caseSensitive:      false,\n    keepWhitespace:     false,\n    encoding:           'utf8',\n    bufferSize:         1024,\n    print:              void 0,\n    history:            true,\n    cd:                 false,\n    phContent:          void 0,\n    preCheck:           void 0\n    /* eslint-enable key-spacing */\n  },\n\n  fdR = 'none', fdW, ttyR, isRawMode = false,\n  extHostPath, extHostArgs, tempdir, salt = 0,\n  lastInput = '', inputHistory = [], rawInput,\n  _DBG_useExt = false, _DBG_checkOptions = false, _DBG_checkMethod = false;\n\nfunction getHostArgs(options) {\n  // Send any text to crazy Windows shell safely.\n  function encodeArg(arg) {\n    return arg.replace(/[^\\w\\u0080-\\uFFFF]/g, function(chr) {\n      return '#' + chr.charCodeAt(0) + ';';\n    });\n  }\n\n  return extHostArgs.concat((function(conf) {\n    var args = [];\n    Object.keys(conf).forEach(function(optionName) {\n      if (conf[optionName] === 'boolean') {\n        if (options[optionName]) { args.push('--' + optionName); }\n      } else if (conf[optionName] === 'string') {\n        if (options[optionName]) {\n          args.push('--' + optionName, encodeArg(options[optionName]));\n        }\n      }\n    });\n    return args;\n  })({\n    /* eslint-disable key-spacing */\n    display:        'string',\n    displayOnly:    'boolean',\n    keyIn:          'boolean',\n    hideEchoBack:   'boolean',\n    mask:           'string',\n    limit:          'string',\n    caseSensitive:  'boolean'\n    /* eslint-enable key-spacing */\n  }));\n}\n\n// piping via files (for Node.js v0.10-)\nfunction _execFileSync(options, execOptions) {\n\n  function getTempfile(name) {\n    var filepath, suffix = '', fd;\n    tempdir = tempdir || require('os').tmpdir();\n\n    while (true) {\n      filepath = pathUtil.join(tempdir, name + suffix);\n      try {\n        fd = fs.openSync(filepath, 'wx');\n      } catch (e) {\n        if (e.code === 'EEXIST') {\n          suffix++;\n          continue;\n        } else {\n          throw e;\n        }\n      }\n      fs.closeSync(fd);\n      break;\n    }\n    return filepath;\n  }\n\n  var hostArgs, shellPath, shellArgs, res = {}, exitCode, extMessage,\n    pathStdout = getTempfile('readline-sync.stdout'),\n    pathStderr = getTempfile('readline-sync.stderr'),\n    pathExit = getTempfile('readline-sync.exit'),\n    pathDone = getTempfile('readline-sync.done'),\n    crypto = require('crypto'), shasum, decipher, password;\n\n  shasum = crypto.createHash(ALGORITHM_HASH);\n  shasum.update('' + process.pid + (salt++) + Math.random());\n  password = shasum.digest('hex');\n  decipher = crypto.createDecipher(ALGORITHM_CIPHER, password);\n\n  hostArgs = getHostArgs(options);\n  if (IS_WIN) {\n    shellPath = process.env.ComSpec || 'cmd.exe';\n    process.env.Q = '\"'; // The quote (\") that isn't escaped.\n    // `()` for ignore space by echo\n    shellArgs = ['/V:ON', '/S', '/C',\n      '(%Q%' + shellPath + '%Q% /V:ON /S /C %Q%' + /* ESLint bug? */ // eslint-disable-line no-path-concat\n        '%Q%' + extHostPath + '%Q%' +\n          hostArgs.map(function(arg) { return ' %Q%' + arg + '%Q%'; }).join('') +\n        ' & (echo !ERRORLEVEL!)>%Q%' + pathExit + '%Q%%Q%) 2>%Q%' + pathStderr + '%Q%' +\n      ' |%Q%' + process.execPath + '%Q% %Q%' + __dirname + '\\\\encrypt.js%Q%' +\n        ' %Q%' + ALGORITHM_CIPHER + '%Q% %Q%' + password + '%Q%' +\n        ' >%Q%' + pathStdout + '%Q%' +\n      ' & (echo 1)>%Q%' + pathDone + '%Q%'];\n  } else {\n    shellPath = '/bin/sh';\n    shellArgs = ['-c',\n      // Use `()`, not `{}` for `-c` (text param)\n      '(\"' + extHostPath + '\"' + /* ESLint bug? */ // eslint-disable-line no-path-concat\n          hostArgs.map(function(arg) { return \" '\" + arg.replace(/'/g, \"'\\\\''\") + \"'\"; }).join('') +\n        '; echo $?>\"' + pathExit + '\") 2>\"' + pathStderr + '\"' +\n      ' |\"' + process.execPath + '\" \"' + __dirname + '/encrypt.js\"' +\n        ' \"' + ALGORITHM_CIPHER + '\" \"' + password + '\"' +\n        ' >\"' + pathStdout + '\"' +\n      '; echo 1 >\"' + pathDone + '\"'];\n  }\n  if (_DBG_checkMethod) { _DBG_checkMethod('_execFileSync', hostArgs); }\n  try {\n    childProc.spawn(shellPath, shellArgs, execOptions);\n  } catch (e) {\n    res.error = new Error(e.message);\n    res.error.method = '_execFileSync - spawn';\n    res.error.program = shellPath;\n    res.error.args = shellArgs;\n  }\n\n  while (fs.readFileSync(pathDone, {encoding: options.encoding}).trim() !== '1') {} // eslint-disable-line no-empty\n  if ((exitCode =\n      fs.readFileSync(pathExit, {encoding: options.encoding}).trim()) === '0') {\n    res.input =\n      decipher.update(fs.readFileSync(pathStdout, {encoding: 'binary'}),\n        'hex', options.encoding) +\n      decipher.final(options.encoding);\n  } else {\n    extMessage = fs.readFileSync(pathStderr, {encoding: options.encoding}).trim();\n    res.error = new Error(DEFAULT_ERR_MSG + (extMessage ? '\\n' + extMessage : ''));\n    res.error.method = '_execFileSync';\n    res.error.program = shellPath;\n    res.error.args = shellArgs;\n    res.error.extMessage = extMessage;\n    res.error.exitCode = +exitCode;\n  }\n\n  fs.unlinkSync(pathStdout);\n  fs.unlinkSync(pathStderr);\n  fs.unlinkSync(pathExit);\n  fs.unlinkSync(pathDone);\n\n  return res;\n}\n\nfunction readlineExt(options) {\n  var hostArgs, res = {}, extMessage,\n    execOptions = {env: process.env, encoding: options.encoding};\n\n  if (!extHostPath) {\n    if (IS_WIN) {\n      if (process.env.PSModulePath) { // Windows PowerShell\n        extHostPath = 'powershell.exe';\n        extHostArgs = ['-ExecutionPolicy', 'Bypass', '-File', __dirname + '\\\\read.ps1']; // eslint-disable-line no-path-concat\n      } else {                        // Windows Script Host\n        extHostPath = 'cscript.exe';\n        extHostArgs = ['//nologo', __dirname + '\\\\read.cs.js']; // eslint-disable-line no-path-concat\n      }\n    } else {\n      extHostPath = '/bin/sh';\n      extHostArgs = [__dirname + '/read.sh']; // eslint-disable-line no-path-concat\n    }\n  }\n  if (IS_WIN && !process.env.PSModulePath) { // Windows Script Host\n    // ScriptPW (Win XP and Server2003) needs TTY stream as STDIN.\n    // In this case, If STDIN isn't TTY, an error is thrown.\n    execOptions.stdio = [process.stdin];\n  }\n\n  if (childProc.execFileSync) {\n    hostArgs = getHostArgs(options);\n    if (_DBG_checkMethod) { _DBG_checkMethod('execFileSync', hostArgs); }\n    try {\n      res.input = childProc.execFileSync(extHostPath, hostArgs, execOptions);\n    } catch (e) { // non-zero exit code\n      extMessage = e.stderr ? (e.stderr + '').trim() : '';\n      res.error = new Error(DEFAULT_ERR_MSG + (extMessage ? '\\n' + extMessage : ''));\n      res.error.method = 'execFileSync';\n      res.error.program = extHostPath;\n      res.error.args = hostArgs;\n      res.error.extMessage = extMessage;\n      res.error.exitCode = e.status;\n      res.error.code = e.code;\n      res.error.signal = e.signal;\n    }\n  } else {\n    res = _execFileSync(options, execOptions);\n  }\n  if (!res.error) {\n    res.input = res.input.replace(/^\\s*'|'\\s*$/g, '');\n    options.display = '';\n  }\n\n  return res;\n}\n\n/*\n  display:            string\n  displayOnly:        boolean\n  keyIn:              boolean\n  hideEchoBack:       boolean\n  mask:               string\n  limit:              string (pattern)\n  caseSensitive:      boolean\n  keepWhitespace:     boolean\n  encoding, bufferSize, print\n*/\nfunction _readlineSync(options) {\n  var input = '', displaySave = options.display,\n    silent = !options.display &&\n      options.keyIn && options.hideEchoBack && !options.mask;\n\n  function tryExt() {\n    var res = readlineExt(options);\n    if (res.error) { throw res.error; }\n    return res.input;\n  }\n\n  if (_DBG_checkOptions) { _DBG_checkOptions(options); }\n\n  (function() { // open TTY\n    var fsB, constants, verNum;\n\n    function getFsB() {\n      if (!fsB) {\n        fsB = process.binding('fs'); // For raw device path\n        constants = process.binding('constants');\n      }\n      return fsB;\n    }\n\n    if (typeof fdR !== 'string') { return; }\n    fdR = null;\n\n    if (IS_WIN) {\n      // iojs-v2.3.2+ input stream can't read first line. (#18)\n      // ** Don't get process.stdin before check! **\n      // Fixed v5.1.0\n      // Fixed v4.2.4\n      // It regressed again in v5.6.0, it is fixed in v6.2.0.\n      verNum = (function(ver) { // getVerNum\n        var nums = ver.replace(/^\\D+/, '').split('.');\n        var verNum = 0;\n        if ((nums[0] = +nums[0])) { verNum += nums[0] * 10000; }\n        if ((nums[1] = +nums[1])) { verNum += nums[1] * 100; }\n        if ((nums[2] = +nums[2])) { verNum += nums[2]; }\n        return verNum;\n      })(process.version);\n      if (!(verNum >= 20302 && verNum < 40204 || verNum >= 50000 && verNum < 50100 || verNum >= 50600 && verNum < 60200) &&\n          process.stdin.isTTY) {\n        process.stdin.pause();\n        fdR = process.stdin.fd;\n        ttyR = process.stdin._handle;\n      } else {\n        try {\n          // The stream by fs.openSync('\\\\\\\\.\\\\CON', 'r') can't switch to raw mode.\n          // 'CONIN$' might fail on XP, 2000, 7 (x86).\n          fdR = getFsB().open('CONIN$', constants.O_RDWR, parseInt('0666', 8));\n          ttyR = new TTY(fdR, true);\n        } catch (e) { /* ignore */ }\n      }\n\n      if (process.stdout.isTTY) {\n        fdW = process.stdout.fd;\n      } else {\n        try {\n          fdW = fs.openSync('\\\\\\\\.\\\\CON', 'w');\n        } catch (e) { /* ignore */ }\n        if (typeof fdW !== 'number') { // Retry\n          try {\n            fdW = getFsB().open('CONOUT$', constants.O_RDWR, parseInt('0666', 8));\n          } catch (e) { /* ignore */ }\n        }\n      }\n\n    } else {\n      if (process.stdin.isTTY) {\n        process.stdin.pause();\n        try {\n          fdR = fs.openSync('/dev/tty', 'r'); // device file, not process.stdin\n          ttyR = process.stdin._handle;\n        } catch (e) { /* ignore */ }\n      } else {\n        // Node.js v0.12 read() fails.\n        try {\n          fdR = fs.openSync('/dev/tty', 'r');\n          ttyR = new TTY(fdR, false);\n        } catch (e) { /* ignore */ }\n      }\n\n      if (process.stdout.isTTY) {\n        fdW = process.stdout.fd;\n      } else {\n        try {\n          fdW = fs.openSync('/dev/tty', 'w');\n        } catch (e) { /* ignore */ }\n      }\n    }\n  })();\n\n  (function() { // try read\n    var atEol, limit,\n      isCooked = !options.hideEchoBack && !options.keyIn,\n      buffer, reqSize, readSize, chunk, line;\n    rawInput = '';\n\n    // Node.js v0.10- returns an error if same mode is set.\n    function setRawMode(mode) {\n      if (mode === isRawMode) { return true; }\n      if (ttyR.setRawMode(mode) !== 0) { return false; }\n      isRawMode = mode;\n      return true;\n    }\n\n    if (_DBG_useExt || !ttyR ||\n        typeof fdW !== 'number' && (options.display || !isCooked)) {\n      input = tryExt();\n      return;\n    }\n\n    if (options.display) {\n      fs.writeSync(fdW, options.display);\n      options.display = '';\n    }\n    if (options.displayOnly) { return; }\n\n    if (!setRawMode(!isCooked)) {\n      input = tryExt();\n      return;\n    }\n\n    reqSize = options.keyIn ? 1 : options.bufferSize;\n    // Check `allocUnsafe` to make sure of the new API.\n    buffer = Buffer.allocUnsafe && Buffer.alloc ? Buffer.alloc(reqSize) : new Buffer(reqSize);\n\n    if (options.keyIn && options.limit) {\n      limit = new RegExp('[^' + options.limit + ']',\n        'g' + (options.caseSensitive ? '' : 'i'));\n    }\n\n    while (true) {\n      readSize = 0;\n      try {\n        readSize = fs.readSync(fdR, buffer, 0, reqSize);\n      } catch (e) {\n        if (e.code !== 'EOF') {\n          setRawMode(false);\n          input += tryExt();\n          return;\n        }\n      }\n      if (readSize > 0) {\n        chunk = buffer.toString(options.encoding, 0, readSize);\n        rawInput += chunk;\n      } else {\n        chunk = '\\n';\n        rawInput += String.fromCharCode(0);\n      }\n\n      if (chunk && typeof (line = (chunk.match(/^(.*?)[\\r\\n]/) || [])[1]) === 'string') {\n        chunk = line;\n        atEol = true;\n      }\n\n      // other ctrl-chars\n      // eslint-disable-next-line no-control-regex\n      if (chunk) { chunk = chunk.replace(/[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]/g, ''); }\n      if (chunk && limit) { chunk = chunk.replace(limit, ''); }\n\n      if (chunk) {\n        if (!isCooked) {\n          if (!options.hideEchoBack) {\n            fs.writeSync(fdW, chunk);\n          } else if (options.mask) {\n            fs.writeSync(fdW, (new Array(chunk.length + 1)).join(options.mask));\n          }\n        }\n        input += chunk;\n      }\n\n      if (!options.keyIn && atEol ||\n        options.keyIn && input.length >= reqSize) { break; }\n    }\n\n    if (!isCooked && !silent) { fs.writeSync(fdW, '\\n'); }\n    setRawMode(false);\n  })();\n\n  if (options.print && !silent) {\n    options.print(displaySave + (options.displayOnly ? '' :\n        (options.hideEchoBack ? (new Array(input.length + 1)).join(options.mask)\n          : input) + '\\n'), // must at least write '\\n'\n      options.encoding);\n  }\n\n  return options.displayOnly ? '' :\n    (lastInput = options.keepWhitespace || options.keyIn ? input : input.trim());\n}\n\nfunction flattenArray(array, validator) {\n  var flatArray = [];\n  function _flattenArray(array) {\n    if (array == null) {\n      return;\n    } else if (Array.isArray(array)) {\n      array.forEach(_flattenArray);\n    } else if (!validator || validator(array)) {\n      flatArray.push(array);\n    }\n  }\n  _flattenArray(array);\n  return flatArray;\n}\n\nfunction escapePattern(pattern) {\n  return pattern.replace(/[\\x00-\\x7f]/g, // eslint-disable-line no-control-regex\n    function(s) { return '\\\\x' + ('00' + s.charCodeAt().toString(16)).substr(-2); });\n}\n\n// margeOptions(options1, options2 ... )\n// margeOptions(true, options1, options2 ... )\n//    arg1=true : Start from defaultOptions and pick elements of that.\nfunction margeOptions() {\n  var optionsList = Array.prototype.slice.call(arguments),\n    optionNames, fromDefault;\n\n  if (optionsList.length && typeof optionsList[0] === 'boolean') {\n    fromDefault = optionsList.shift();\n    if (fromDefault) {\n      optionNames = Object.keys(defaultOptions);\n      optionsList.unshift(defaultOptions);\n    }\n  }\n\n  return optionsList.reduce(function(options, optionsPart) {\n    if (optionsPart == null) { return options; }\n\n    // ======== DEPRECATED ========\n    if (optionsPart.hasOwnProperty('noEchoBack') &&\n        !optionsPart.hasOwnProperty('hideEchoBack')) {\n      optionsPart.hideEchoBack = optionsPart.noEchoBack;\n      delete optionsPart.noEchoBack;\n    }\n    if (optionsPart.hasOwnProperty('noTrim') &&\n        !optionsPart.hasOwnProperty('keepWhitespace')) {\n      optionsPart.keepWhitespace = optionsPart.noTrim;\n      delete optionsPart.noTrim;\n    }\n    // ======== /DEPRECATED ========\n\n    if (!fromDefault) { optionNames = Object.keys(optionsPart); }\n    optionNames.forEach(function(optionName) {\n      var value;\n      if (!optionsPart.hasOwnProperty(optionName)) { return; }\n      value = optionsPart[optionName];\n      switch (optionName) {\n                           // _readlineSync <- *    * -> defaultOptions\n        // ================ string\n        case 'mask':                        // *    *\n        case 'limitMessage':                //      *\n        case 'defaultInput':                //      *\n        case 'encoding':                    // *    *\n          value = value != null ? value + '' : '';\n          if (value && optionName !== 'limitMessage') { value = value.replace(/[\\r\\n]/g, ''); }\n          options[optionName] = value;\n          break;\n        // ================ number(int)\n        case 'bufferSize':                  // *    *\n          if (!isNaN(value = parseInt(value, 10)) && typeof value === 'number') {\n            options[optionName] = value; // limited updating (number is needed)\n          }\n          break;\n        // ================ boolean\n        case 'displayOnly':                 // *\n        case 'keyIn':                       // *\n        case 'hideEchoBack':                // *    *\n        case 'caseSensitive':               // *    *\n        case 'keepWhitespace':              // *    *\n        case 'history':                     //      *\n        case 'cd':                          //      *\n          options[optionName] = !!value;\n          break;\n        // ================ array\n        case 'limit':                       // *    *     to string for readlineExt\n        case 'trueValue':                   //      *\n        case 'falseValue':                  //      *\n          options[optionName] = flattenArray(value, function(value) {\n            var type = typeof value;\n            return type === 'string' || type === 'number' ||\n              type === 'function' || value instanceof RegExp;\n          }).map(function(value) {\n            return typeof value === 'string' ? value.replace(/[\\r\\n]/g, '') : value;\n          });\n          break;\n        // ================ function\n        case 'print':                       // *    *\n        case 'phContent':                   //      *\n        case 'preCheck':                    //      *\n          options[optionName] = typeof value === 'function' ? value : void 0;\n          break;\n        // ================ other\n        case 'prompt':                      //      *\n        case 'display':                     // *\n          options[optionName] = value != null ? value : '';\n          break;\n        // no default\n      }\n    });\n    return options;\n  }, {});\n}\n\nfunction isMatched(res, comps, caseSensitive) {\n  return comps.some(function(comp) {\n    var type = typeof comp;\n    return type === 'string' ?\n        (caseSensitive ? res === comp : res.toLowerCase() === comp.toLowerCase()) :\n      type === 'number' ? parseFloat(res) === comp :\n      type === 'function' ? comp(res) :\n      comp instanceof RegExp ? comp.test(res) : false;\n  });\n}\n\nfunction replaceHomePath(path, expand) {\n  var homePath = pathUtil.normalize(\n    IS_WIN ? (process.env.HOMEDRIVE || '') + (process.env.HOMEPATH || '') :\n    process.env.HOME || '').replace(/[\\/\\\\]+$/, '');\n  path = pathUtil.normalize(path);\n  return expand ? path.replace(/^~(?=\\/|\\\\|$)/, homePath) :\n    path.replace(new RegExp('^' + escapePattern(homePath) +\n      '(?=\\\\/|\\\\\\\\|$)', IS_WIN ? 'i' : ''), '~');\n}\n\nfunction replacePlaceholder(text, generator) {\n  var PTN_INNER = '(?:\\\\(([\\\\s\\\\S]*?)\\\\))?(\\\\w+|.-.)(?:\\\\(([\\\\s\\\\S]*?)\\\\))?',\n    rePlaceholder = new RegExp('(\\\\$)?(\\\\$<' + PTN_INNER + '>)', 'g'),\n    rePlaceholderCompat = new RegExp('(\\\\$)?(\\\\$\\\\{' + PTN_INNER + '\\\\})', 'g');\n\n  function getPlaceholderText(s, escape, placeholder, pre, param, post) {\n    var text;\n    return escape || typeof (text = generator(param)) !== 'string' ? placeholder :\n      text ? (pre || '') + text + (post || '') : '';\n  }\n\n  return text.replace(rePlaceholder, getPlaceholderText)\n    .replace(rePlaceholderCompat, getPlaceholderText);\n}\n\nfunction array2charlist(array, caseSensitive, collectSymbols) {\n  var values, group = [], groupClass = -1, charCode = 0, symbols = '', suppressed;\n  function addGroup(groups, group) {\n    if (group.length > 3) { // ellipsis\n      groups.push(group[0] + '...' + group[group.length - 1]);\n      suppressed = true;\n    } else if (group.length) {\n      groups = groups.concat(group);\n    }\n    return groups;\n  }\n\n  values = array.reduce(\n      function(chars, value) { return chars.concat((value + '').split('')); }, [])\n    .reduce(function(groups, curChar) {\n      var curGroupClass, curCharCode;\n      if (!caseSensitive) { curChar = curChar.toLowerCase(); }\n      curGroupClass = /^\\d$/.test(curChar) ? 1 :\n        /^[A-Z]$/.test(curChar) ? 2 : /^[a-z]$/.test(curChar) ? 3 : 0;\n      if (collectSymbols && curGroupClass === 0) {\n        symbols += curChar;\n      } else {\n        curCharCode = curChar.charCodeAt(0);\n        if (curGroupClass && curGroupClass === groupClass &&\n            curCharCode === charCode + 1) {\n          group.push(curChar);\n        } else {\n          groups = addGroup(groups, group);\n          group = [curChar];\n          groupClass = curGroupClass;\n        }\n        charCode = curCharCode;\n      }\n      return groups;\n    }, []);\n  values = addGroup(values, group); // last group\n  if (symbols) { values.push(symbols); suppressed = true; }\n  return {values: values, suppressed: suppressed};\n}\n\nfunction joinChunks(chunks, suppressed) {\n  return chunks.join(chunks.length > 2 ? ', ' : suppressed ? ' / ' : '/');\n}\n\nfunction getPhContent(param, options) {\n  var text, values, resCharlist = {}, arg;\n  if (options.phContent) {\n    text = options.phContent(param, options);\n  }\n  if (typeof text !== 'string') {\n    switch (param) {\n      case 'hideEchoBack':\n      case 'mask':\n      case 'defaultInput':\n      case 'caseSensitive':\n      case 'keepWhitespace':\n      case 'encoding':\n      case 'bufferSize':\n      case 'history':\n      case 'cd':\n        text = !options.hasOwnProperty(param) ? '' :\n          typeof options[param] === 'boolean' ? (options[param] ? 'on' : 'off') :\n          options[param] + '';\n        break;\n      // case 'prompt':\n      // case 'query':\n      // case 'display':\n      //   text = options.hasOwnProperty('displaySrc') ? options.displaySrc + '' : '';\n      //   break;\n      case 'limit':\n      case 'trueValue':\n      case 'falseValue':\n        values = options[options.hasOwnProperty(param + 'Src') ? param + 'Src' : param];\n        if (options.keyIn) { // suppress\n          resCharlist = array2charlist(values, options.caseSensitive);\n          values = resCharlist.values;\n        } else {\n          values = values.filter(function(value) {\n            var type = typeof value;\n            return type === 'string' || type === 'number';\n          });\n        }\n        text = joinChunks(values, resCharlist.suppressed);\n        break;\n      case 'limitCount':\n      case 'limitCountNotZero':\n        text = options[options.hasOwnProperty('limitSrc') ?\n          'limitSrc' : 'limit'].length;\n        text = text || param !== 'limitCountNotZero' ? text + '' : '';\n        break;\n      case 'lastInput':\n        text = lastInput;\n        break;\n      case 'cwd':\n      case 'CWD':\n      case 'cwdHome':\n        text = process.cwd();\n        if (param === 'CWD') {\n          text = pathUtil.basename(text);\n        } else if (param === 'cwdHome') {\n          text = replaceHomePath(text);\n        }\n        break;\n      case 'date':\n      case 'time':\n      case 'localeDate':\n      case 'localeTime':\n        text = (new Date())['to' +\n          param.replace(/^./, function(str) { return str.toUpperCase(); }) +\n          'String']();\n        break;\n      default: // with arg\n        if (typeof (arg = (param.match(/^history_m(\\d+)$/) || [])[1]) === 'string') {\n          text = inputHistory[inputHistory.length - arg] || '';\n        }\n    }\n  }\n  return text;\n}\n\nfunction getPhCharlist(param) {\n  var matches = /^(.)-(.)$/.exec(param), text = '', from, to, code, step;\n  if (!matches) { return null; }\n  from = matches[1].charCodeAt(0);\n  to = matches[2].charCodeAt(0);\n  step = from < to ? 1 : -1;\n  for (code = from; code !== to + step; code += step) { text += String.fromCharCode(code); }\n  return text;\n}\n\n// cmd \"arg\" \" a r g \" \"\" 'a\"r\"g' \"a\"\"rg\" \"arg\nfunction parseCl(cl) {\n  var reToken = new RegExp(/(\\s*)(?:(\"|')(.*?)(?:\\2|$)|(\\S+))/g), matches,\n    taken = '', args = [], part;\n  cl = cl.trim();\n  while ((matches = reToken.exec(cl))) {\n    part = matches[3] || matches[4] || '';\n    if (matches[1]) {\n      args.push(taken);\n      taken = '';\n    }\n    taken += part;\n  }\n  if (taken) { args.push(taken); }\n  return args;\n}\n\nfunction toBool(res, options) {\n  return (\n    (options.trueValue.length &&\n      isMatched(res, options.trueValue, options.caseSensitive)) ? true :\n    (options.falseValue.length &&\n      isMatched(res, options.falseValue, options.caseSensitive)) ? false : res);\n}\n\nfunction getValidLine(options) {\n  var res, forceNext, limitMessage,\n    matches, histInput, args, resCheck;\n\n  function _getPhContent(param) { return getPhContent(param, options); }\n  function addDisplay(text) { options.display += (/[^\\r\\n]$/.test(options.display) ? '\\n' : '') + text; }\n\n  options.limitSrc = options.limit;\n  options.displaySrc = options.display;\n  options.limit = ''; // for readlineExt\n  options.display = replacePlaceholder(options.display + '', _getPhContent);\n\n  while (true) {\n    res = _readlineSync(options);\n    forceNext = false;\n    limitMessage = '';\n\n    if (options.defaultInput && !res) { res = options.defaultInput; }\n\n    if (options.history) {\n      if ((matches = /^\\s*\\!(?:\\!|-1)(:p)?\\s*$/.exec(res))) { // `!!` `!-1` +`:p`\n        histInput = inputHistory[0] || '';\n        if (matches[1]) { // only display\n          forceNext = true;\n        } else { // replace input\n          res = histInput;\n        }\n        // Show it even if it is empty (NL only).\n        addDisplay(histInput + '\\n');\n        if (!forceNext) { // Loop may break\n          options.displayOnly = true;\n          _readlineSync(options);\n          options.displayOnly = false;\n        }\n      } else if (res && res !== inputHistory[inputHistory.length - 1]) {\n        inputHistory = [res];\n      }\n    }\n\n    if (!forceNext && options.cd && res) {\n      args = parseCl(res);\n      switch (args[0].toLowerCase()) {\n        case 'cd':\n          if (args[1]) {\n            try {\n              process.chdir(replaceHomePath(args[1], true));\n            } catch (e) {\n              addDisplay(e + '');\n            }\n          }\n          forceNext = true;\n          break;\n        case 'pwd':\n          addDisplay(process.cwd());\n          forceNext = true;\n          break;\n        // no default\n      }\n    }\n\n    if (!forceNext && options.preCheck) {\n      resCheck = options.preCheck(res, options);\n      res = resCheck.res;\n      if (resCheck.forceNext) { forceNext = true; } // Don't switch to false.\n    }\n\n    if (!forceNext) {\n      if (!options.limitSrc.length ||\n        isMatched(res, options.limitSrc, options.caseSensitive)) { break; }\n      if (options.limitMessage) {\n        limitMessage = replacePlaceholder(options.limitMessage, _getPhContent);\n      }\n    }\n\n    addDisplay((limitMessage ? limitMessage + '\\n' : '') +\n      replacePlaceholder(options.displaySrc + '', _getPhContent));\n  }\n  return toBool(res, options);\n}\n\n// for dev\nexports._DBG_set_useExt = function(val) { _DBG_useExt = val; };\nexports._DBG_set_checkOptions = function(val) { _DBG_checkOptions = val; };\nexports._DBG_set_checkMethod = function(val) { _DBG_checkMethod = val; };\nexports._DBG_clearHistory = function() { lastInput = ''; inputHistory = []; };\n\n// ------------------------------------\n\nexports.setDefaultOptions = function(options) {\n  defaultOptions = margeOptions(true, options);\n  return margeOptions(true); // copy\n};\n\nexports.question = function(query, options) {\n  /* eslint-disable key-spacing */\n  return getValidLine(margeOptions(margeOptions(true, options), {\n    display:            query\n  }));\n  /* eslint-enable key-spacing */\n};\n\nexports.prompt = function(options) {\n  var readOptions = margeOptions(true, options);\n  readOptions.display = readOptions.prompt;\n  return getValidLine(readOptions);\n};\n\nexports.keyIn = function(query, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions(margeOptions(true, options), {\n    display:            query,\n    keyIn:              true,\n    keepWhitespace:     true\n  });\n  /* eslint-enable key-spacing */\n\n  // char list\n  readOptions.limitSrc = readOptions.limit.filter(function(value) {\n    var type = typeof value;\n    return type === 'string' || type === 'number';\n  })\n  .map(function(text) { return replacePlaceholder(text + '', getPhCharlist); });\n  // pattern\n  readOptions.limit = escapePattern(readOptions.limitSrc.join(''));\n\n  ['trueValue', 'falseValue'].forEach(function(optionName) {\n    readOptions[optionName] = readOptions[optionName].reduce(function(comps, comp) {\n      var type = typeof comp;\n      if (type === 'string' || type === 'number') {\n        comps = comps.concat((comp + '').split(''));\n      } else { comps.push(comp); }\n      return comps;\n    }, []);\n  });\n\n  readOptions.display = replacePlaceholder(readOptions.display + '',\n    function(param) { return getPhContent(param, readOptions); });\n\n  return toBool(_readlineSync(readOptions), readOptions);\n};\n\n// ------------------------------------\n\nexports.questionEMail = function(query, options) {\n  if (query == null) { query = 'Input e-mail address: '; }\n  /* eslint-disable key-spacing */\n  return exports.question(query, margeOptions({\n    // -------- default\n    hideEchoBack:       false,\n    // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address\n    limit:              /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\n    limitMessage:       'Input valid e-mail address, please.',\n    trueValue:          null,\n    falseValue:         null\n  }, options, {\n    // -------- forced\n    keepWhitespace:     false,\n    cd:                 false\n  }));\n  /* eslint-enable key-spacing */\n};\n\nexports.questionNewPassword = function(query, options) {\n  /* eslint-disable key-spacing */\n  var resCharlist, min, max,\n    readOptions = margeOptions({\n      // -------- default\n      hideEchoBack:       true,\n      mask:               '*',\n      limitMessage:       'It can include: $<charlist>\\n' +\n                            'And the length must be: $<length>',\n      trueValue:          null,\n      falseValue:         null,\n      caseSensitive:      true\n    }, options, {\n      // -------- forced\n      history:            false,\n      cd:                 false,\n      // limit (by charlist etc.),\n      phContent: function(param) {\n        return param === 'charlist' ? resCharlist.text :\n          param === 'length' ? min + '...' + max : null;\n      }\n    }),\n    // added:     charlist, min, max, confirmMessage, unmatchMessage\n    charlist, confirmMessage, unmatchMessage,\n    limit, limitMessage, res1, res2;\n  /* eslint-enable key-spacing */\n  options = options || {};\n\n  charlist = replacePlaceholder(\n    options.charlist ? options.charlist + '' : '$<!-~>', getPhCharlist);\n  if (isNaN(min = parseInt(options.min, 10)) || typeof min !== 'number') { min = 12; }\n  if (isNaN(max = parseInt(options.max, 10)) || typeof max !== 'number') { max = 24; }\n  limit = new RegExp('^[' + escapePattern(charlist) +\n    ']{' + min + ',' + max + '}$');\n  resCharlist = array2charlist([charlist], readOptions.caseSensitive, true);\n  resCharlist.text = joinChunks(resCharlist.values, resCharlist.suppressed);\n\n  confirmMessage = options.confirmMessage != null ? options.confirmMessage :\n    'Reinput a same one to confirm it: ';\n  unmatchMessage = options.unmatchMessage != null ? options.unmatchMessage :\n    'It differs from first one.' +\n      ' Hit only the Enter key if you want to retry from first one.';\n\n  if (query == null) { query = 'Input new password: '; }\n\n  limitMessage = readOptions.limitMessage;\n  while (!res2) {\n    readOptions.limit = limit;\n    readOptions.limitMessage = limitMessage;\n    res1 = exports.question(query, readOptions);\n\n    readOptions.limit = [res1, ''];\n    readOptions.limitMessage = unmatchMessage;\n    res2 = exports.question(confirmMessage, readOptions);\n  }\n\n  return res1;\n};\n\nfunction _questionNum(query, options, parser) {\n  var validValue;\n  function getValidValue(value) {\n    validValue = parser(value);\n    return !isNaN(validValue) && typeof validValue === 'number';\n  }\n  /* eslint-disable key-spacing */\n  exports.question(query, margeOptions({\n    // -------- default\n    limitMessage:       'Input valid number, please.'\n  }, options, {\n    // -------- forced\n    limit:              getValidValue,\n    cd:                 false\n    // trueValue, falseValue, caseSensitive, keepWhitespace don't work.\n  }));\n  /* eslint-enable key-spacing */\n  return validValue;\n}\nexports.questionInt = function(query, options) {\n  return _questionNum(query, options, function(value) { return parseInt(value, 10); });\n};\nexports.questionFloat = function(query, options) {\n  return _questionNum(query, options, parseFloat);\n};\n\nexports.questionPath = function(query, options) {\n  /* eslint-disable key-spacing */\n  var validPath, error = '',\n    readOptions = margeOptions({\n      // -------- default\n      hideEchoBack:       false,\n      limitMessage:       '$<error(\\n)>Input valid path, please.' +\n                            '$<( Min:)min>$<( Max:)max>',\n      history:            true,\n      cd:                 true\n    }, options, {\n      // -------- forced\n      keepWhitespace:     false,\n      limit: function(value) {\n        var exists, stat, res;\n        value = replaceHomePath(value, true);\n        error = ''; // for validate\n        // mkdir -p\n        function mkdirParents(dirPath) {\n          dirPath.split(/\\/|\\\\/).reduce(function(parents, dir) {\n            var path = pathUtil.resolve((parents += dir + pathUtil.sep));\n            if (!fs.existsSync(path)) {\n              fs.mkdirSync(path);\n            } else if (!fs.statSync(path).isDirectory()) {\n              throw new Error('Non directory already exists: ' + path);\n            }\n            return parents;\n          }, '');\n        }\n\n        try {\n          exists = fs.existsSync(value);\n          validPath = exists ? fs.realpathSync(value) : pathUtil.resolve(value);\n          // options.exists default: true, not-bool: no-check\n          if (!options.hasOwnProperty('exists') && !exists ||\n              typeof options.exists === 'boolean' && options.exists !== exists) {\n            error = (exists ? 'Already exists' : 'No such file or directory') +\n              ': ' + validPath;\n            return false;\n          }\n          if (!exists && options.create) {\n            if (options.isDirectory) {\n              mkdirParents(validPath);\n            } else {\n              mkdirParents(pathUtil.dirname(validPath));\n              fs.closeSync(fs.openSync(validPath, 'w')); // touch\n            }\n            validPath = fs.realpathSync(validPath);\n          }\n          if (exists && (options.min || options.max ||\n              options.isFile || options.isDirectory)) {\n            stat = fs.statSync(validPath);\n            // type check first (directory has zero size)\n            if (options.isFile && !stat.isFile()) {\n              error = 'Not file: ' + validPath;\n              return false;\n            } else if (options.isDirectory && !stat.isDirectory()) {\n              error = 'Not directory: ' + validPath;\n              return false;\n            } else if (options.min && stat.size < +options.min ||\n                options.max && stat.size > +options.max) {\n              error = 'Size ' + stat.size + ' is out of range: ' + validPath;\n              return false;\n            }\n          }\n          if (typeof options.validate === 'function' &&\n              (res = options.validate(validPath)) !== true) {\n            if (typeof res === 'string') { error = res; }\n            return false;\n          }\n        } catch (e) {\n          error = e + '';\n          return false;\n        }\n        return true;\n      },\n      // trueValue, falseValue, caseSensitive don't work.\n      phContent: function(param) {\n        return param === 'error' ? error :\n          param !== 'min' && param !== 'max' ? null :\n          options.hasOwnProperty(param) ? options[param] + '' : '';\n      }\n    });\n    // added:     exists, create, min, max, isFile, isDirectory, validate\n  /* eslint-enable key-spacing */\n  options = options || {};\n\n  if (query == null) { query = 'Input path (you can \"cd\" and \"pwd\"): '; }\n\n  exports.question(query, readOptions);\n  return validPath;\n};\n\n// props: preCheck, args, hRes, limit\nfunction getClHandler(commandHandler, options) {\n  var clHandler = {}, hIndex = {};\n  if (typeof commandHandler === 'object') {\n    Object.keys(commandHandler).forEach(function(cmd) {\n      if (typeof commandHandler[cmd] === 'function') {\n        hIndex[options.caseSensitive ? cmd : cmd.toLowerCase()] = commandHandler[cmd];\n      }\n    });\n    clHandler.preCheck = function(res) {\n      var cmdKey;\n      clHandler.args = parseCl(res);\n      cmdKey = clHandler.args[0] || '';\n      if (!options.caseSensitive) { cmdKey = cmdKey.toLowerCase(); }\n      clHandler.hRes =\n        cmdKey !== '_' && hIndex.hasOwnProperty(cmdKey) ?\n          hIndex[cmdKey].apply(res, clHandler.args.slice(1)) :\n        hIndex.hasOwnProperty('_') ? hIndex._.apply(res, clHandler.args) : null;\n      return {res: res, forceNext: false};\n    };\n    if (!hIndex.hasOwnProperty('_')) {\n      clHandler.limit = function() { // It's called after preCheck.\n        var cmdKey = clHandler.args[0] || '';\n        if (!options.caseSensitive) { cmdKey = cmdKey.toLowerCase(); }\n        return hIndex.hasOwnProperty(cmdKey);\n      };\n    }\n  } else {\n    clHandler.preCheck = function(res) {\n      clHandler.args = parseCl(res);\n      clHandler.hRes = typeof commandHandler === 'function' ?\n        commandHandler.apply(res, clHandler.args) : true; // true for break loop\n      return {res: res, forceNext: false};\n    };\n  }\n  return clHandler;\n}\n\nexports.promptCL = function(commandHandler, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n      // -------- default\n      hideEchoBack:       false,\n      limitMessage:       'Requested command is not available.',\n      caseSensitive:      false,\n      history:            true\n    }, options),\n      // -------- forced\n      // trueValue, falseValue, keepWhitespace don't work.\n      // preCheck, limit (by clHandler)\n    clHandler = getClHandler(commandHandler, readOptions);\n  /* eslint-enable key-spacing */\n  readOptions.limit = clHandler.limit;\n  readOptions.preCheck = clHandler.preCheck;\n  exports.prompt(readOptions);\n  return clHandler.args;\n};\n\nexports.promptLoop = function(inputHandler, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n    // -------- default\n    hideEchoBack:       false,\n    trueValue:          null,\n    falseValue:         null,\n    caseSensitive:      false,\n    history:            true\n  }, options);\n  /* eslint-enable key-spacing */\n  while (true) { if (inputHandler(exports.prompt(readOptions))) { break; } }\n  return;\n};\n\nexports.promptCLLoop = function(commandHandler, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n      // -------- default\n      hideEchoBack:       false,\n      limitMessage:       'Requested command is not available.',\n      caseSensitive:      false,\n      history:            true\n    }, options),\n      // -------- forced\n      // trueValue, falseValue, keepWhitespace don't work.\n      // preCheck, limit (by clHandler)\n    clHandler = getClHandler(commandHandler, readOptions);\n  /* eslint-enable key-spacing */\n  readOptions.limit = clHandler.limit;\n  readOptions.preCheck = clHandler.preCheck;\n  while (true) {\n    exports.prompt(readOptions);\n    if (clHandler.hRes) { break; }\n  }\n  return;\n};\n\nexports.promptSimShell = function(options) {\n  /* eslint-disable key-spacing */\n  return exports.prompt(margeOptions({\n    // -------- default\n    hideEchoBack:       false,\n    history:            true\n  }, options, {\n    // -------- forced\n    prompt:             (function() {\n      return IS_WIN ?\n        '$<cwd>>' :\n        // 'user@host:cwd$ '\n        (process.env.USER || '') +\n        (process.env.HOSTNAME ?\n          '@' + process.env.HOSTNAME.replace(/\\..*$/, '') : '') +\n        ':$<cwdHome>$ ';\n    })()\n  }));\n  /* eslint-enable key-spacing */\n};\n\nfunction _keyInYN(query, options, limit) {\n  var res;\n  if (query == null) { query = 'Are you sure? '; }\n  if ((!options || options.guide !== false) && (query += '')) {\n    query = query.replace(/\\s*:?\\s*$/, '') + ' [y/n]: ';\n  }\n  /* eslint-disable key-spacing */\n  res = exports.keyIn(query, margeOptions(options, {\n    // -------- forced\n    hideEchoBack:       false,\n    limit:              limit,\n    trueValue:          'y',\n    falseValue:         'n',\n    caseSensitive:      false\n    // mask doesn't work.\n  }));\n  // added:     guide\n  /* eslint-enable key-spacing */\n  return typeof res === 'boolean' ? res : '';\n}\nexports.keyInYN = function(query, options) { return _keyInYN(query, options); };\nexports.keyInYNStrict = function(query, options) { return _keyInYN(query, options, 'yn'); };\n\nexports.keyInPause = function(query, options) {\n  if (query == null) { query = 'Continue...'; }\n  if ((!options || options.guide !== false) && (query += '')) {\n    query = query.replace(/\\s+$/, '') + ' (Hit any key)';\n  }\n  /* eslint-disable key-spacing */\n  exports.keyIn(query, margeOptions({\n    // -------- default\n    limit:              null\n  }, options, {\n    // -------- forced\n    hideEchoBack:       true,\n    mask:               ''\n  }));\n  // added:     guide\n  /* eslint-enable key-spacing */\n  return;\n};\n\nexports.keyInSelect = function(items, query, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n      // -------- default\n      hideEchoBack:       false\n    }, options, {\n      // -------- forced\n      trueValue:          null,\n      falseValue:         null,\n      caseSensitive:      false,\n      // limit (by items),\n      phContent: function(param) {\n        return param === 'itemsCount' ? items.length + '' :\n          param === 'firstItem' ? (items[0] + '').trim() :\n          param === 'lastItem' ? (items[items.length - 1] + '').trim() : null;\n      }\n    }),\n    // added:     guide, cancel\n    keylist = '', key2i = {}, charCode = 49 /* '1' */, display = '\\n';\n  /* eslint-enable key-spacing */\n  if (!Array.isArray(items) || !items.length || items.length > 35) {\n    throw '`items` must be Array (max length: 35).';\n  }\n\n  items.forEach(function(item, i) {\n    var key = String.fromCharCode(charCode);\n    keylist += key;\n    key2i[key] = i;\n    display += '[' + key + '] ' + (item + '').trim() + '\\n';\n    charCode = charCode === 57 /* '9' */ ? 97 /* 'a' */ : charCode + 1;\n  });\n  if (!options || options.cancel !== false) {\n    keylist += '0';\n    key2i['0'] = -1;\n    display += '[0] ' +\n      (options && options.cancel != null && typeof options.cancel !== 'boolean' ?\n        (options.cancel + '').trim() : 'CANCEL') + '\\n';\n  }\n  readOptions.limit = keylist;\n  display += '\\n';\n\n  if (query == null) { query = 'Choose one from list: '; }\n  if ((query += '')) {\n    if (!options || options.guide !== false) {\n      query = query.replace(/\\s*:?\\s*$/, '') + ' [$<limit>]: ';\n    }\n    display += query;\n  }\n\n  return key2i[exports.keyIn(display, readOptions).toLowerCase()];\n};\n\nexports.getRawInput = function() { return rawInput; };\n\n// ======== DEPRECATED ========\nfunction _setOption(optionName, args) {\n  var options;\n  if (args.length) { options = {}; options[optionName] = args[0]; }\n  return exports.setDefaultOptions(options)[optionName];\n}\nexports.setPrint = function() { return _setOption('print', arguments); };\nexports.setPrompt = function() { return _setOption('prompt', arguments); };\nexports.setEncoding = function() { return _setOption('encoding', arguments); };\nexports.setMask = function() { return _setOption('mask', arguments); };\nexports.setBufferSize = function() { return _setOption('bufferSize', arguments); };\n", "(function() {\r\n\t\r\n\t// VERSION\r\n\tvar version = { major: 0, minor: 3, patch: 4, status: \"beta\" };\r\n\r\n\r\n\r\n\t// IO FILE SYSTEM\r\n\t\r\n\t// Virtual file\r\n\tfunction TauFile(name, type, parent, text) {\r\n\t\ttext = text === undefined ? \"\" : text;\r\n\t\tthis.name = name;\r\n\t\tthis.type = type;\r\n\t\tthis.parent = parent;\r\n\t\tthis.text = text;\r\n\t\tthis.created = Date.now() / 1000;\r\n\t\tthis.modified = this.created;\r\n\t}\r\n\r\n\tTauFile.prototype.get = function(length, position) {\r\n\t\tif(position === this.text.length) {\r\n\t\t\treturn \"end_of_stream\";\r\n\t\t} else if(position > this.text.length) {\r\n\t\t\treturn \"end_of_stream\";\r\n\t\t} else {\r\n\t\t\treturn this.text.substring(position, position+length);\r\n\t\t}\r\n\t};\r\n\r\n\tTauFile.prototype.eof = function(position) {\r\n\t\treturn position === this.text.length;\r\n\t};\r\n\r\n\tTauFile.prototype.put = function(text, position) {\r\n\t\tif(position === \"end_of_stream\") {\r\n\t\t\tthis.text += text;\r\n\t\t\treturn true;\r\n\t\t} else if(position === \"past_end_of_stream\") {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tthis.text = this.text.substring(0, position) + text + this.text.substring(position+text.length);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\r\n\tTauFile.prototype.get_byte = function(position) {\r\n\t\tif(position === \"end_of_stream\")\r\n\t\t\treturn -1;\r\n\t\tvar index = Math.floor(position/2);\r\n\t\tif(this.text.length <= index)\r\n\t\t\treturn -1;\r\n\t\tvar code = codePointAt(this.text[Math.floor(position/2)], 0);\r\n\t\tif(position % 2 === 0)\r\n\t\t\treturn code & 0xff;\r\n\t\telse\r\n\t\t\treturn code / 256 >>> 0;\r\n\t};\r\n\r\n\tTauFile.prototype.put_byte = function(byte, position) {\r\n\t\tvar index = position === \"end_of_stream\" ? this.text.length : Math.floor(position/2);\r\n\t\tif(this.text.length < index)\r\n\t\t\treturn null;\r\n\t\tvar code = this.text.length === index ? -1 : codePointAt(this.text[Math.floor(position/2)], 0);\r\n\t\tif(position % 2 === 0) {\r\n\t\t\tcode = code / 256 >>> 0;\r\n\t\t\tcode = ((code & 0xff) << 8) | (byte & 0xff);\r\n\t\t} else {\r\n\t\t\tcode = code & 0xff;\r\n\t\t\tcode = ((byte & 0xff) << 8) | (code & 0xff);\r\n\t\t}\r\n\t\tif(this.text.length === index)\r\n\t\t\tthis.text += fromCodePoint(code);\r\n\t\telse \r\n\t\t\tthis.text = this.text.substring(0, index) + fromCodePoint(code) + this.text.substring(index+1);\r\n\t\treturn true;\r\n\t};\r\n\r\n\tTauFile.prototype.flush = function() {\r\n\t\treturn true;\r\n\t};\r\n\r\n\tTauFile.prototype.close = function() {\r\n\t\tthis.modified = Date.now() / 1000;\r\n\t\treturn true;\r\n\t};\r\n\r\n\tTauFile.prototype.size = function() {\r\n\t\treturn this.text.length;\r\n\t};\r\n\r\n\t// Virtual directory\r\n\tfunction TauDirectory(name, parent) {\r\n\t\tthis.name = name;\r\n\t\tthis.parent = parent;\r\n\t\tthis.files = {};\r\n\t\tthis.length = 0;\r\n\t\tthis.created = Date.now() / 1000;\r\n\t\tthis.modified = this.created;\r\n\t}\r\n\r\n\tTauDirectory.prototype.lookup = function(file) {\r\n\t\tif(this.files.hasOwnProperty(file))\r\n\t\t\treturn this.files[file];\r\n\t\treturn null;\r\n\t};\r\n\r\n\tTauDirectory.prototype.push = function(name, file) {\r\n\t\tif(!this.files.hasOwnProperty(name))\r\n\t\t\tthis.length++;\r\n\t\tthis.files[name] = file;\r\n\t\tthis.modified = Date.now() / 1000;\r\n\t};\r\n\r\n\tTauDirectory.prototype.remove = function(name) {\r\n\t\tif(this.files.hasOwnProperty(name)) {\r\n\t\t\tthis.length--;\r\n\t\t\tdelete this.files[name];\r\n\t\t\tthis.modified = Date.now() / 1000;\r\n\t\t}\r\n\t};\r\n\r\n\tTauDirectory.prototype.empty = function() {\r\n\t\treturn this.length === 0;\r\n\t};\r\n\r\n\tTauDirectory.prototype.size = function() {\r\n\t\treturn 4096;\r\n\t};\r\n\r\n\t// Virtual file system for browser\r\n\ttau_file_system = {\r\n\t\t// Current files\r\n\t\tfiles: new TauDirectory(\"/\", \"/\", null),\r\n\t\t// Open file\r\n\t\topen: function(path, type, mode) {\r\n\t\t\tvar dirs = path.replace(/\\/$/, \"\").split(\"/\");\r\n\t\t\tvar dir = tau_file_system.files;\r\n\t\t\tvar name = dirs[dirs.length-1];\r\n\t\t\tfor(var i = 1; i < dirs.length-1; i++) {\r\n\t\t\t\tdir = dir.lookup(dirs[i]);\r\n\t\t\t\tif(!pl.type.is_directory(dir))\r\n\t\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tvar file = dir.lookup(name);\r\n\t\t\tif(file === null) {\r\n\t\t\t\tif(mode === \"read\")\r\n\t\t\t\t\treturn null;\r\n\t\t\t\tfile = new TauFile(name, type, dir);\r\n\t\t\t\tdir.push(name, file);\r\n\t\t\t} else if(!pl.type.is_file(file)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif(mode === \"write\")\r\n\t\t\t\tfile.text = \"\";\r\n\t\t\treturn file;\r\n\t\t},\r\n\t\t// Get item\r\n\t\tget: function(path) {\r\n\t\t\tvar dirs = path.replace(/\\/$/, \"\").split(\"/\");\r\n\t\t\tvar file = tau_file_system.files;\r\n\t\t\tfor(var i = 1; i < dirs.length; i++)\r\n\t\t\t\tif(pl.type.is_directory(file))\r\n\t\t\t\t\tfile = file.lookup(dirs[i]);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn null;\r\n\t\t\treturn file;\r\n\t\t}\r\n\t};\r\n\r\n\t// User input for browser\r\n\ttau_user_input = {\r\n\t\tbuffer: \"\",\r\n\t\tget: function( length, _ ) {\r\n\t\t\tvar text;\r\n\t\t\twhile( tau_user_input.buffer.length < length ) {\r\n\t\t\t\ttext = window.prompt();\r\n\t\t\t\tif( text.length === 0 )\r\n\t\t\t\t\treturn \"end_of_stream\";\r\n\t\t\t\tif( text ) {\r\n\t\t\t\t\ttau_user_input.buffer += text;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttext = tau_user_input.buffer.substr( 0, length );\r\n\t\t\ttau_user_input.buffer = tau_user_input.buffer.substr( length );\r\n\t\t\treturn text;\r\n\t\t},\r\n\t\teof: function(_) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t// User output for browser\r\n\ttau_user_output = {\r\n\t\tput: function( text, _ ) {\r\n\t\t\tconsole.log( text );\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tflush: function() {\r\n\t\t\treturn true;\r\n\t\t} \r\n\t};\r\n\r\n\t// User error for browser\r\n\ttau_user_error = {\r\n\t\tput: function( text, _ ) {\r\n\t\t\t(console.error || console.log)( text );\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tflush: function() {\r\n\t\t\treturn true;\r\n\t\t} \r\n\t};\r\n\r\n\t// Virtual file system for Node.js\r\n\tnodejs_file_system = {\r\n\t\t// Open file\r\n\t\topen: function( path, type, mode ) {\r\n\t\t\tvar fd, fs = require('fs');\r\n\t\t\tif( mode === \"read\" && !fs.existsSync( path ) )\r\n\t\t\t\treturn null;\r\n\t\t\ttry {\r\n\t\t\t\tfd = fs.openSync( path, mode[0] );\r\n\t\t\t} catch(ex) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tget: function( length, position ) {\r\n\t\t\t\t\tvar buffer = new Buffer( length );\r\n\t\t\t\t\tfs.readSync( fd, buffer, 0, length, position );\r\n\t\t\t\t\tvar end_of_file = true;\r\n\t\t\t\t\tvar text = buffer.toString();\r\n\t\t\t\t\tfor(var i = 0; i < length && end_of_file; i++)\r\n\t\t\t\t\t\tend_of_file = text[i] === \"\\u0000\";\r\n\t\t\t\t\treturn end_of_file ? \"end_of_stream\" : buffer.toString();\r\n\t\t\t\t},\r\n\t\t\t\teof: function(position) {\r\n\t\t\t\t\tvar stats = fs.statSync(path)\r\n\t\t\t\t\treturn position === stats[\"size\"];\r\n\t\t\t\t},\r\n\t\t\t\tput: function( text, position ) {\r\n\t\t\t\t\tvar buffer = Buffer.from( text );\r\n\t\t\t\t\tif( position === \"end_of_stream\" )\r\n\t\t\t\t\t\tfs.writeSync( fd, buffer );\r\n\t\t\t\t\telse if( position === \"past_end_of_stream\" )\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tfs.writeSync( fd, buffer, 0, buffer.length, position );\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tget_byte: function( position ) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar buffer = Buffer.alloc(1);\r\n\t\t\t\t\t\tvar bytesRead = fs.readSync(fd, buffer, 0, 1, position);\r\n\t\t\t\t\t\t//var _text = buffer.toString(\"utf8\", 0, bytesRead);\r\n\t\t\t\t\t\tvar end_of_file = bytesRead < 1;\r\n\t\t\t\t\t\treturn end_of_file ? \"end_of_stream\" : buffer.readUInt8(0);\r\n\t\t\t\t\t} catch(ex) {\r\n\t\t\t\t\t\treturn \"end_of_stream\";\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tput_byte: function(byte, position) {\r\n\t\t\t\t\tvar buffer = Buffer.from([byte]);\r\n\t\t\t\t\tif(position === \"end_of_stream\")\r\n\t\t\t\t\t\tfs.writeSync(fd, buffer);\r\n\t\t\t\t\telse if(position === \"past_end_of_stream\")\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tfs.writeSync(fd, buffer, 0, buffer.length, position);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tflush: function() {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tclose: function() {\r\n\t\t\t\t\tfs.closeSync( fd );\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t// User input for Node.js\r\n\tnodejs_user_input = {\r\n\t\tbuffer: \"\",\r\n\t\tget: function( length, _ ) {\r\n\t\t\tvar text;\r\n\t\t\tvar readlineSync = require('readline-sync');\r\n\t\t\twhile( nodejs_user_input.buffer.length < length )\r\n\t\t\t\tnodejs_user_input.buffer += readlineSync.question(\"\", {keepWhitespace: true}) + \"\\n\";\r\n\t\t\ttext = nodejs_user_input.buffer.substr( 0, length );\r\n\t\t\tnodejs_user_input.buffer = nodejs_user_input.buffer.substr( length );\r\n\t\t\treturn text;\r\n\t\t},\r\n\t\teof: function(length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t// User output for Node.js\r\n\tnodejs_user_output = {\r\n\t\tput: function( text, _ ) {\r\n\t\t\tprocess.stdout.write( text );\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tflush: function() {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\r\n\t// User error for Node.js\r\n\tnodejs_user_error = {\r\n\t\tput: function( text, _ ) {\r\n\t\t\tprocess.stderr.write( text );\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tflush: function() {\r\n\t\t\treturn true;\r\n\t\t} \r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// COMPATITBILITY\r\n\t\r\n\tvar indexOf;\r\n\tif(!Array.prototype.indexOf) {\r\n\t\tindexOf = function(array, elem) {\r\n\t\t\tvar len = array.length;\r\n\t\t\tfor(var i = 0; i < len; i++) {\r\n\t\t\t\tif(elem === array[i]) return i;\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t};\r\n\t} else {\r\n\t\tindexOf = function(array, elem) {\r\n\t\t\treturn array.indexOf(elem);\r\n\t\t};\r\n\t}\r\n\r\n\tvar reduce = function(array, fn) {\r\n\t\tif(array.length === 0) return undefined;\r\n\t\tvar elem = array[0];\r\n\t\tvar len = array.length;\r\n\t\tfor(var i = 1; i < len; i++) {\r\n\t\t\telem = fn(elem, array[i]);\r\n\t\t}\r\n\t\treturn elem;\r\n\t};\r\n\r\n\tvar map;\r\n\tif(!Array.prototype.map) {\r\n\t\tmap = function(array, fn) {\r\n\t\t\tvar a = [];\r\n\t\t\tvar len = array.length;\r\n\t\t\tfor(var i = 0; i < len; i++) {\r\n\t\t\t\ta.push( fn(array[i]) );\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t};\r\n\t} else {\r\n\t\tmap = function(array, fn) {\r\n\t\t\treturn array.map(fn);\r\n\t\t};\r\n\t}\r\n\t\r\n\tvar filter;\r\n\tif(!Array.prototype.filter) {\r\n\t\tfilter = function(array, fn) {\r\n\t\t\tvar a = [];\r\n\t\t\tvar len = array.length;\r\n\t\t\tfor(var i = 0; i < len; i++) {\r\n\t\t\t\tif(fn(array[i]))\r\n\t\t\t\t\ta.push( array[i] );\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t};\r\n\t} else {\r\n\t\tfilter = function(array, fn) {\r\n\t\t\treturn array.filter(fn);\r\n\t\t};\r\n\t}\r\n\t\r\n\tvar codePointAt;\r\n\tif(!String.prototype.codePointAt) {\r\n\t\tcodePointAt = function(str, i) {\r\n\t\t\treturn str.charCodeAt(i);\r\n\t\t};\r\n\t} else {\r\n\t\tcodePointAt = function(str, i) {\r\n\t\t\treturn str.codePointAt(i);\r\n\t\t};\r\n\t}\r\n\t\r\n\tvar fromCodePoint;\r\n\tif(!String.fromCodePoint) {\r\n\t\tfromCodePoint = function() {\r\n\t\t\treturn String.fromCharCode.apply(null, arguments);\r\n\t\t};\r\n\t} else {\r\n\t\tfromCodePoint = function() {\r\n\t\t\treturn String.fromCodePoint.apply(null, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tvar stringLength;\r\n\tvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\r\n\tif(Array.from)\r\n\t\tstringLength = function(str) {\r\n\t\t\treturn Array.from(str).length;\r\n\t\t};\r\n\telse\r\n\t\tstringLength = function(str) {\r\n\t\t\treturn str.replace(regexAstralSymbols, '_').length;\r\n\t\t};\r\n\r\n\t\r\n\t\r\n\t// PARSER\r\n\r\n\tvar ERROR = 0;\r\n\tvar SUCCESS = 1;\r\n\r\n\tvar regex_escape = /(\\\\a)|(\\\\b)|(\\\\d)|(\\\\e)|(\\\\f)|(\\\\n)|(\\\\r)|(\\\\s)|(\\\\t)|(\\\\v)|\\\\x([0-9a-fA-F]+)\\\\|\\\\([0-7]+)\\\\|(\\\\\\\\)|(\\\\')|('')|(\\\\\")|(\\\\`)|(\\\\.)|(.)/g;\r\n\tvar escape_map = {\"\\\\a\": 7, \"\\\\b\": 8, \"\\\\d\": 127, \"\\\\e\": 27, \"\\\\f\": 12, \"\\\\n\": 10, \"\\\\r\": 13, \"\\\\s\": 32, \"\\\\t\": 9, \"\\\\v\": 11};\r\n\tfunction escape(str) {\r\n\t\tvar stack = [];\r\n\t\tvar _error = false;\r\n\t\tstr.replace(regex_escape, function(match, a, b, d, e, f, n, r, s, t, v, hex, octal, back, single, dsingle, double, backquote, error, char) {\r\n\t\t\tswitch(true) {\r\n\t\t\t\tcase hex !== undefined:\r\n\t\t\t\t\tstack.push( parseInt(hex, 16) );\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\tcase octal !== undefined:\r\n\t\t\t\t\tstack.push( parseInt(octal, 8) );\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\tcase back !== undefined:\r\n\t\t\t\tcase single !== undefined:\r\n\t\t\t\tcase dsingle !== undefined:\r\n\t\t\t\tcase double !== undefined:\r\n\t\t\t\tcase backquote !== undefined:\r\n\t\t\t\t\tstack.push( codePointAt(match.substr(1),0) );\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\tcase char !== undefined:\r\n\t\t\t\t\tstack.push( codePointAt(char,0) );\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\tcase error !== undefined:\r\n\t\t\t\t\t_error = true;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tstack.push(escape_map[match]);\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t});\r\n\t\tif(_error)\r\n\t\t\treturn null;\r\n\t\treturn stack;\r\n\t}\r\n\r\n\t// Escape atoms\r\n\tfunction escapeAtom(str, quote) {\r\n\t\tvar atom = '';\r\n\t\tif( str === \"\\\\\" ) return null;\r\n\t\tif( str.length < 2 ) return str;\r\n\t\ttry {\r\n\t\t\tstr = str.replace(/((?:\\\\\\\\)+)|\\\\([0-7]+)\\\\/g, function(match, g1, g2) {\r\n\t\t\t\treturn g1 || fromCodePoint(parseInt(g2, 8));\r\n\t\t\t});\r\n\t\t\tstr = str.replace(/((?:\\\\\\\\)+)|\\\\x([0-9a-fA-F]+)\\\\/g, function(match, g1, g2) {\r\n\t\t\t\treturn g1 || fromCodePoint(parseInt(g2, 16));\r\n\t\t\t});\r\n\t\t\tstr = str.replace(/((?:\\\\\\\\)+)|\\\\u([0-9a-fA-F]{4})/g, function(match, g1, g2) {\r\n\t\t\t\treturn g1 || fromCodePoint(parseInt(g2, 16));\r\n\t\t\t});\r\n\t\t} catch(error) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tfor( var i = 0; i < str.length; i++) {\r\n\t\t\tvar a = str.charAt(i);\r\n\t\t\tvar b = str.charAt(i+1);\r\n\t\t\tif( a === quote && b === quote ) {\r\n\t\t\t\ti++;\r\n\t\t\t\tatom += quote;\r\n\t\t\t} else if( a === '\\\\' ) {\r\n\t\t\t\tif( ['a','b','f','n','r','t','v',\"'\",'\"','\\\\','\\a','\\b','\\f','\\n','\\r','\\t','\\v'].indexOf(b) !== -1 ) {\r\n\t\t\t\t\ti += 1;\r\n\t\t\t\t\tswitch( b ) {\r\n\t\t\t\t\t\tcase 'a': atom += '\\a'; break;\r\n\t\t\t\t\t\tcase 'b': atom += '\\b'; break;\r\n\t\t\t\t\t\tcase 'f': atom += '\\f'; break;\r\n\t\t\t\t\t\tcase 'n': atom += '\\n'; break;\r\n\t\t\t\t\t\tcase 'r': atom += '\\r'; break;\r\n\t\t\t\t\t\tcase 't': atom += '\\t'; break;\r\n\t\t\t\t\t\tcase 'v': atom += '\\v'; break;\r\n\t\t\t\t\t\tcase \"'\": atom += \"'\"; break;\r\n\t\t\t\t\t\tcase '\"': atom += '\"'; break;\r\n\t\t\t\t\t\tcase '\\\\': atom += '\\\\'; break;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tatom += a;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn atom;\r\n\t}\r\n\t\r\n\t// Redo escape\r\n\tfunction redoEscape(str) {\r\n\t\tvar atom = '';\r\n\t\tfor( var i = 0; i < str.length; i++) {\r\n\t\t\tswitch( str.charAt(i) ) {\r\n\t\t\t\tcase \"'\": atom += \"\\\\'\"; break;\r\n\t\t\t\tcase '\\\\': atom += '\\\\\\\\'; break;\r\n\t\t\t\t//case '\\a': atom += '\\\\a'; break;\r\n\t\t\t\tcase '\\b': atom += '\\\\b'; break;\r\n\t\t\t\tcase '\\f': atom += '\\\\f'; break;\r\n\t\t\t\tcase '\\n': atom += '\\\\n'; break;\r\n\t\t\t\tcase '\\r': atom += '\\\\r'; break;\r\n\t\t\t\tcase '\\t': atom += '\\\\t'; break;\r\n\t\t\t\tcase '\\v': atom += '\\\\v'; break;\r\n\t\t\t\tdefault: atom += str.charAt(i); break;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn atom;\r\n\t}\r\n\r\n\t// String to num\r\n\tfunction convertNum(num) {\r\n\t\tvar n = num.substr(2);\r\n\t\tswitch(num.substr(0,2).toLowerCase()) {\r\n\t\t\tcase \"0x\":\r\n\t\t\t\treturn parseInt(n, 16);\r\n\t\t\tcase \"0b\":\r\n\t\t\t\treturn parseInt(n, 2);\r\n\t\t\tcase \"0o\":\r\n\t\t\t\treturn parseInt(n, 8);\r\n\t\t\tcase \"0'\":\r\n\t\t\t\treturn escape(n)[0];\r\n\t\t\tdefault:\r\n\t\t\t\treturn parseFloat(num);\r\n\t\t}\r\n\t}\r\n\r\n\t// Is graphic token\r\n\tfunction is_graphic_token(string) {\r\n\t\treturn /^[#\\$\\&\\*\\+\\-\\.\\/\\:\\<\\=\\>\\?\\@\\^\\~\\\\]+/.test(string);\r\n\t}\r\n\r\n\t// Regular expressions for tokens\r\n\tvar rules = {\r\n\t\twhitespace: /^\\s*(?:(?:%.*)|(?:\\/\\*(?:\\n|\\r|.)*?(?:\\*\\/|$))|(?:\\s+))\\s*/,\r\n\t\tvariable: /^(?:[A-Z_][a-zA-Z0-9_]*)/,\r\n\t\tatom: /^(\\!|,|;|[a-z][0-9a-zA-Z_]*|[#\\$\\&\\*\\+\\-\\.\\/\\:\\<\\=\\>\\?\\@\\^\\~\\\\]+|'(?:(?:'')|(?:\\\\\\\\)|(?:\\\\')|[^'])*')/,\r\n\t\tnumber: /^(?:0o[0-7]+|0x[0-9a-fA-F]+|0b[01]+|0'(?:''|\\\\[abdefnrstv\\\\'\"`]|\\\\x?\\d+\\\\|[^\\\\])|\\d+(?:\\.\\d+(?:[eE][+-]?\\d+)?)?)/,\r\n\t\tstring: /^(?:\"([^\"]|\"\"|\\\\\")*\"|`([^`]|``|\\\\`)*`)/,\r\n\t\tl_brace: /^(?:\\[)/,\r\n\t\tr_brace: /^(?:\\])/,\r\n\t\tl_bracket: /^(?:\\{)/,\r\n\t\tr_bracket: /^(?:\\})/,\r\n\t\tbar: /^(?:\\|)/,\r\n\t\tl_paren: /^(?:\\()/,\r\n\t\tr_paren: /^(?:\\))/\r\n\t};\r\n\r\n\t// Replace chars of char_conversion session\r\n\tfunction replace( thread, text ) {\r\n\t\tif( thread.get_flag( \"char_conversion\" ).id === \"on\" ) {\r\n\t\t\treturn text.replace(/./g, function(char) {\r\n\t\t\t\treturn thread.get_char_conversion( char );\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\t// Tokenize strings\r\n\tfunction Tokenizer(thread) {\r\n\t\tthis.thread = thread;\r\n\t\tthis.text = \"\"; // Current text to be analized\r\n\t\tthis.tokens = []; // Consumed tokens\r\n\t}\r\n\r\n\tTokenizer.prototype.set_last_tokens = function(tokens) {\r\n\t\treturn this.tokens = tokens;\r\n\t};\r\n\r\n\tTokenizer.prototype.new_text = function(text) {\r\n\t\tthis.text = text;\r\n\t\tthis.tokens = [];\r\n\t};\r\n\r\n\tTokenizer.prototype.get_tokens = function(init) {\r\n\t\tvar text;\r\n\t\tvar len = 0; // Total length respect to text\r\n\t\tvar line = 0;\r\n\t\tvar start = 0;\r\n\t\tvar tokens = [];\r\n\t\tvar last_is_blank;\r\n\r\n\t\tif(init) {\r\n\t\t\tvar token = this.tokens[init-1];\r\n\t\t\tlen = token.len;\r\n\t\t\ttext = replace( this.thread, this.text.substr(token.len) );\r\n\t\t\tline = token.line;\r\n\t\t\tstart = token.start;\r\n\t\t}\r\n\t\telse\r\n\t\t\ttext = this.text;\r\n\r\n\r\n\t\t// If there is nothing to be analized, return null\r\n\t\tif(/^\\s*$/.test(text))\r\n\t\t\treturn null;\r\n\r\n\t\twhile(text !== \"\") {\r\n\t\t\tvar matches = [];\r\n\t\t\tlast_is_blank = false;\r\n\r\n\t\t\tif(/^\\n/.exec(text) !== null) {\r\n\t\t\t\tline++;\r\n\t\t\t\tstart = 0;\r\n\t\t\t\tlen++;\r\n\t\t\t\ttext = text.replace(/\\n/, \"\");\r\n\t\t\t\tlast_is_blank = true;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var rule in rules) {\r\n\t\t\t\tif(rules.hasOwnProperty(rule)) {\r\n\t\t\t\t\tvar matchs = rules[rule].exec( text );\r\n\t\t\t\t\tif(matchs) {\r\n\t\t\t\t\t\tmatches.push({\r\n\t\t\t\t\t\t\tvalue: matchs[0],\r\n\t\t\t\t\t\t\tname: rule,\r\n\t\t\t\t\t\t\tmatches: matchs\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Lexical error\r\n\t\t\tif(!matches.length)\r\n\t\t\t\treturn this.set_last_tokens( [{ value: text, matches: [], name: \"lexical\", line: line, start: start }] );\r\n\r\n\t\t\tvar token = reduce( matches, function(a, b) {\r\n\t\t\t\treturn a.value.length >= b.value.length ? a : b;\r\n\t\t\t} );\r\n\r\n\t\t\ttoken.start = start;\r\n\t\t\ttoken.line = line;\r\n\r\n\t\t\ttext = text.replace(token.value, \"\");\r\n\t\t\tstart += token.value.length;\r\n\t\t\tlen += token.value.length;\r\n\r\n\t\t\tvar nl = (token.value.match(/\\n/g) || []).length;\r\n\t\t\tline += nl;\r\n\t\t\tif(nl > 0) \r\n\t\t\t\tstart = token.value.length - token.value.lastIndexOf(\"\\n\") - 1;\r\n\t\t\ttoken.line_count = line;\r\n\t\t\ttoken.line_position = start;\r\n\r\n\t\t\tswitch(token.name) {\r\n\t\t\t\tcase \"atom\":\r\n\t\t\t\t\ttoken.raw = token.value;\r\n\t\t\t\t\tif(token.value.charAt(0) === \"'\") {\r\n\t\t\t\t\t\ttoken.value = escapeAtom( token.value.substring(1, token.value.length - 1), \"'\" );\r\n\t\t\t\t\t\tif( token.value === null ) {\r\n\t\t\t\t\t\t\ttoken.name = \"lexical\";\r\n\t\t\t\t\t\t\ttoken.value = token.raw;\r\n\t\t\t\t\t\t\ttoken.error = \"unknown_escape_sequence\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"number\":\r\n\t\t\t\t\tvar substr = token.value.substring(0,2);\r\n\t\t\t\t\ttoken.raw = token.value;\r\n\t\t\t\t\ttoken.float = substr !== \"0x\" && substr !== \"0'\" && token.value.match(/[.eE]/) !== null;\r\n\t\t\t\t\ttoken.value = convertNum( token.value );\r\n\t\t\t\t\ttoken.blank = last_is_blank;\r\n\t\t\t\t\tif(!token.float && pl.flag.bounded.value.indicator === \"true/0\" && token.value > pl.flag.max_integer.value.value) {\r\n\t\t\t\t\t\ttoken.name = \"lexical\";\r\n\t\t\t\t\t\ttoken.value = token.raw;\r\n\t\t\t\t\t\ttoken.error = \"int_overflow\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\t\tvar del = token.value.charAt(0);\r\n\t\t\t\t\ttoken.raw = token.value;\r\n\t\t\t\t\ttoken.value = escapeAtom( token.value.substring(1, token.value.length - 1), del );\r\n\t\t\t\t\tif( token.value === null ) {\r\n\t\t\t\t\t\ttoken.name = \"lexical\";\r\n\t\t\t\t\t\ttoken.value = token.raw;\r\n\t\t\t\t\t\ttoken.error = \"unknown_escape_sequence\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"whitespace\":\r\n\t\t\t\t\tvar last = tokens[tokens.length-1];\r\n\t\t\t\t\tif(last) last.space = true;\r\n\t\t\t\t\tlast_is_blank = true;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcase \"r_bracket\":\r\n\t\t\t\t\tif( tokens.length > 0 && tokens[tokens.length-1].name === \"l_bracket\" ) {\r\n\t\t\t\t\t\ttoken = tokens.pop();\r\n\t\t\t\t\t\ttoken.name = \"atom\";\r\n\t\t\t\t\t\ttoken.value = \"{}\";\r\n\t\t\t\t\t\ttoken.raw = \"{}\";\r\n\t\t\t\t\t\ttoken.space = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"r_brace\":\r\n\t\t\t\t\tif( tokens.length > 0 && tokens[tokens.length-1].name === \"l_brace\" ) {\r\n\t\t\t\t\t\ttoken = tokens.pop();\r\n\t\t\t\t\t\ttoken.name = \"atom\";\r\n\t\t\t\t\t\ttoken.value = \"[]\";\r\n\t\t\t\t\t\ttoken.raw = \"[]\";\r\n\t\t\t\t\t\ttoken.space = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\ttoken.len = len;\r\n\t\t\ttokens.push( token );\r\n\t\t\tlast_is_blank = false;\r\n\t\t}\r\n\r\n\t\tvar t = this.set_last_tokens( tokens );\r\n\t\treturn t.length === 0 ? null : t;\r\n\t};\r\n\r\n\t// Parse an expression\r\n\tfunction parseExpr(thread, tokens, start, priority, toplevel) {\r\n\t\tif(!tokens[start]) return {type: ERROR, value: pl.error.syntax(tokens[start-1], \"expression expected\", true)};\r\n\t\tvar error;\r\n\r\n\t\tif(priority === \"0\") {\r\n\t\t\tvar token = tokens[start];\r\n\t\t\tswitch(token.name) {\r\n\t\t\t\tcase \"number\":\r\n\t\t\t\t\treturn {type: SUCCESS, len: start+1, value: new pl.type.Num(token.value, token.float)};\r\n\t\t\t\tcase \"variable\":\r\n\t\t\t\t\treturn {type: SUCCESS, len: start+1, value: new pl.type.Var(token.value)};\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\t\tvar str;\r\n\t\t\t\t\tswitch( thread.get_flag( \"double_quotes\" ).id ) {\r\n\t\t\t\t\t\tcase \"atom\":;\r\n\t\t\t\t\t\t\tstr = new Term( token.value, [] );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"codes\":\r\n\t\t\t\t\t\t\tstr = new Term( \"[]\", [] );\r\n\t\t\t\t\t\t\tfor(var i = token.value.length-1; i >= 0; i-- )\r\n\t\t\t\t\t\t\t\tstr = new Term( \".\", [new pl.type.Num( codePointAt(token.value,i), false ), str] );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"chars\":\r\n\t\t\t\t\t\t\tstr = new Term( \"[]\", [] );\r\n\t\t\t\t\t\t\tfor(var i = token.value.length-1; i >= 0; i-- )\r\n\t\t\t\t\t\t\t\tstr = new Term( \".\", [new pl.type.Term( token.value.charAt(i), [] ), str] );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {type: SUCCESS, len: start+1, value: str};\r\n\t\t\t\tcase \"l_paren\":\r\n\t\t\t\t\tvar expr = parseExpr(thread, tokens, start+1, thread.__get_max_priority(), true);\r\n\t\t\t\t\tif(expr.type !== SUCCESS) return expr;\r\n\t\t\t\t\tif(tokens[expr.len] && tokens[expr.len].name === \"r_paren\") {\r\n\t\t\t\t\t\texpr.len++;\r\n\t\t\t\t\t\treturn expr;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {type: ERROR, derived: true, value: pl.error.syntax(tokens[expr.len] ? tokens[expr.len] : tokens[expr.len-1], \") or operator expected\", !tokens[expr.len])}\r\n\t\t\t\tcase \"l_bracket\":\r\n\t\t\t\t\tvar expr = parseExpr(thread, tokens, start+1, thread.__get_max_priority(), true);\r\n\t\t\t\t\tif(expr.type !== SUCCESS) return expr;\r\n\t\t\t\t\tif(tokens[expr.len] && tokens[expr.len].name === \"r_bracket\") {\r\n\t\t\t\t\t\texpr.len++;\r\n\t\t\t\t\t\texpr.value = new Term( \"{}\", [expr.value] );\r\n\t\t\t\t\t\treturn expr;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {type: ERROR, derived: true, value: pl.error.syntax(tokens[expr.len] ? tokens[expr.len] : tokens[expr.len-1], \"} or operator expected\", !tokens[expr.len])}\r\n\t\t\t}\r\n\t\t\t// Compound term\r\n\t\t\tvar result = parseTerm(thread, tokens, start, toplevel);\r\n\t\t\tif(result.type === SUCCESS || result.derived)\r\n\t\t\t\treturn result;\r\n\t\t\t// List\r\n\t\t\tresult = parseList(thread, tokens, start);\r\n\t\t\tif(result.type === SUCCESS || result.derived)\r\n\t\t\t\treturn result;\r\n\t\t\t// Unexpected\r\n\t\t\treturn {type: ERROR, derived: false, value: pl.error.syntax(tokens[start], token.error || \"unexpected token\")};\r\n\t\t}\r\n\r\n\t\tvar max_priority = thread.__get_max_priority();\r\n\t\tvar next_priority = thread.__get_next_priority(priority);\r\n\t\tvar aux_start = start;\r\n\t\t\r\n\t\t// Prefix operators\r\n\t\tif(tokens[start].name === \"atom\" && tokens[start+1] && (tokens[start].space || tokens[start+1].name !== \"l_paren\")) {\r\n\t\t\tvar token = tokens[start++];\r\n\t\t\tvar classes = thread.__lookup_operator_classes(priority, token.value);\r\n\t\t\t\r\n\t\t\t// Associative prefix operator\r\n\t\t\tif(classes && classes.indexOf(\"fy\") > -1) {\r\n\t\t\t\tvar expr = parseExpr(thread, tokens, start, priority, toplevel);\r\n\t\t\t\tif(expr.type !== ERROR) {\r\n\t\t\t\t\tif( token.value === \"-\" && !token.space && pl.type.is_number( expr.value ) ) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tvalue: new pl.type.Num(-expr.value.value, expr.value.is_float),\r\n\t\t\t\t\t\t\tlen: expr.len,\r\n\t\t\t\t\t\t\ttype: SUCCESS\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tvalue: new pl.type.Term(token.value, [expr.value]),\r\n\t\t\t\t\t\t\tlen: expr.len,\r\n\t\t\t\t\t\t\ttype: SUCCESS\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\terror = expr;\r\n\t\t\t\t}\r\n\t\t\t// Non-associative prefix operator\r\n\t\t\t} else if(classes && classes.indexOf(\"fx\") > -1) {\r\n\t\t\t\tvar expr = parseExpr(thread, tokens, start, next_priority, toplevel);\r\n\t\t\t\tif(expr.type !== ERROR) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tvalue: new pl.type.Term(token.value, [expr.value]),\r\n\t\t\t\t\t\tlen: expr.len,\r\n\t\t\t\t\t\ttype: SUCCESS\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\terror = expr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tstart = aux_start;\r\n\t\tvar expr = parseExpr(thread, tokens, start, next_priority, toplevel);\r\n\t\tif(expr.type === SUCCESS) {\r\n\t\t\tstart = expr.len;\r\n\t\t\tvar token = tokens[start];\r\n\t\t\tif(tokens[start] && (\r\n\t\t\t\ttokens[start].name === \"atom\" && thread.__lookup_operator_classes(priority, token.value) ||\r\n\t\t\t\ttokens[start].name === \"bar\" && thread.__lookup_operator_classes(priority, \"|\")\r\n\t\t\t) ) {\r\n\t\t\t\tvar next_priority_lt = next_priority;\r\n\t\t\t\tvar next_priority_eq = priority;\r\n\t\t\t\tvar classes = thread.__lookup_operator_classes(priority, token.value);\r\n\r\n\t\t\t\tif(classes.indexOf(\"xf\") > -1) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tvalue: new pl.type.Term(token.value, [expr.value]),\r\n\t\t\t\t\t\tlen: ++expr.len,\r\n\t\t\t\t\t\ttype: SUCCESS\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if(classes.indexOf(\"xfx\") > -1) {\r\n\t\t\t\t\tvar expr2 = parseExpr(thread, tokens, start + 1, next_priority_lt, toplevel);\r\n\t\t\t\t\tif(expr2.type === SUCCESS) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tvalue: new pl.type.Term(token.value, [expr.value, expr2.value]),\r\n\t\t\t\t\t\t\tlen: expr2.len,\r\n\t\t\t\t\t\t\ttype: SUCCESS\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\texpr2.derived = true;\r\n\t\t\t\t\t\treturn expr2;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if(classes.indexOf(\"xfy\") > -1) {\r\n\t\t\t\t\tvar expr2 = parseExpr(thread, tokens, start + 1, next_priority_eq, toplevel);\r\n\t\t\t\t\tif(expr2.type === SUCCESS) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tvalue: new pl.type.Term(token.value, [expr.value, expr2.value]),\r\n\t\t\t\t\t\t\tlen: expr2.len,\r\n\t\t\t\t\t\t\ttype: SUCCESS\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\texpr2.derived = true;\r\n\t\t\t\t\t\treturn expr2;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if(expr.type !== ERROR) {\r\n\t\t\t\t\twhile(true) {\r\n\t\t\t\t\t\tstart = expr.len;\r\n\t\t\t\t\t\tvar token = tokens[start];\r\n\t\t\t\t\t\tif(token && token.name === \"atom\" && thread.__lookup_operator_classes(priority, token.value)) {\r\n\t\t\t\t\t\t\tvar classes = thread.__lookup_operator_classes(priority, token.value);\r\n\t\t\t\t\t\t\tif( classes.indexOf(\"yf\") > -1 ) {\r\n\t\t\t\t\t\t\t\texpr = {\r\n\t\t\t\t\t\t\t\t\tvalue: new pl.type.Term(token.value, [expr.value]),\r\n\t\t\t\t\t\t\t\t\tlen: ++start,\r\n\t\t\t\t\t\t\t\t\ttype: SUCCESS\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t} else if( classes.indexOf(\"yfx\") > -1 ) {\r\n\t\t\t\t\t\t\t\tvar expr2 = parseExpr(thread, tokens, ++start, next_priority_lt, toplevel);\r\n\t\t\t\t\t\t\t\tif(expr2.type === ERROR) {\r\n\t\t\t\t\t\t\t\t\texpr2.derived = true;\r\n\t\t\t\t\t\t\t\t\treturn expr2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tstart = expr2.len;\r\n\t\t\t\t\t\t\t\texpr = {\r\n\t\t\t\t\t\t\t\t\tvalue: new pl.type.Term(token.value, [expr.value, expr2.value]),\r\n\t\t\t\t\t\t\t\t\tlen: start,\r\n\t\t\t\t\t\t\t\t\ttype: SUCCESS\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t} else { break; }\r\n\t\t\t\t\t\t} else { break; }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\terror = {type: ERROR, value: pl.error.syntax(tokens[expr.len-1], \"operator expected\")};\r\n\t\t\t}\r\n\t\t\treturn expr;\r\n\t\t}\r\n\t\treturn expr;\r\n\t}\r\n\r\n\t// Parse a compound term\r\n\tfunction parseTerm(thread, tokens, start, toplevel) {\r\n\t\tif(!tokens[start] || (tokens[start].name === \"atom\" && tokens[start].raw === \".\" && !toplevel && (tokens[start].space || !tokens[start+1] || tokens[start+1].name !== \"l_paren\")))\r\n\t\t\treturn {type: ERROR, derived: false, value: pl.error.syntax(tokens[start-1], \"unfounded token\")};\r\n\t\tvar atom = tokens[start];\r\n\t\tvar exprs = [];\r\n\t\tif(tokens[start].name === \"atom\" && tokens[start].raw !== \",\") {\r\n\t\t\tstart++;\r\n\t\t\tif(tokens[start-1].space) return {type: SUCCESS, len: start, value: new pl.type.Term(atom.value, exprs)};\r\n\t\t\tif(tokens[start] && tokens[start].name === \"l_paren\") {\r\n\t\t\t\tif(tokens[start+1] && tokens[start+1].name === \"r_paren\") \r\n\t\t\t\t\treturn {type: ERROR, derived: true, value: pl.error.syntax(tokens[start+1], \"argument expected\")};\r\n\t\t\t\tvar expr = parseExpr(thread, tokens, ++start, \"999\", true);\r\n\t\t\t\tif(expr.type === ERROR) {\r\n\t\t\t\t\tif( expr.derived )\r\n\t\t\t\t\t\treturn expr;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn {type: ERROR, derived: true, value: pl.error.syntax(tokens[start] ? tokens[start] : tokens[start-1], \"argument expected\", !tokens[start])};\r\n\t\t\t\t}\r\n\t\t\t\texprs.push(expr.value);\r\n\t\t\t\tstart = expr.len;\r\n\t\t\t\twhile(tokens[start] && tokens[start].name === \"atom\" && tokens[start].value === \",\") {\r\n\t\t\t\t\texpr = parseExpr(thread, tokens, start+1, \"999\", true);\r\n\t\t\t\t\tif(expr.type === ERROR) {\r\n\t\t\t\t\t\tif( expr.derived )\r\n\t\t\t\t\t\t\treturn expr;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\treturn {type: ERROR, derived: true, value: pl.error.syntax(tokens[start+1] ? tokens[start+1] : tokens[start], \"argument expected\", !tokens[start+1])};\r\n\t\t\t\t\t}\r\n\t\t\t\t\texprs.push(expr.value);\r\n\t\t\t\t\tstart = expr.len;\r\n\t\t\t\t}\r\n\t\t\t\tif(tokens[start] && tokens[start].name === \"r_paren\") start++;\r\n\t\t\t\telse return {type: ERROR, derived: true, value: pl.error.syntax(tokens[start] ? tokens[start] : tokens[start-1], \", or ) expected\", !tokens[start])};\r\n\t\t\t}\r\n\t\t\treturn {type: SUCCESS, len: start, value: new pl.type.Term(atom.value, exprs)};\r\n\t\t}\r\n\t\treturn {type: ERROR, derived: false, value: pl.error.syntax(tokens[start], \"term expected\")};\r\n\t}\r\n\r\n\t// Parse a list\r\n\tfunction parseList(thread, tokens, start) {\r\n\t\tif(!tokens[start]) \r\n\t\t\treturn {type: ERROR, derived: false, value: pl.error.syntax(tokens[start-1], \"[ expected\")};\r\n\t\tif(tokens[start] && tokens[start].name === \"l_brace\") {\r\n\t\t\tvar expr = parseExpr(thread, tokens, ++start, \"999\", true);\r\n\t\t\tvar exprs = [expr.value];\r\n\t\t\tvar cons = undefined;\r\n\r\n\t\t\tif(expr.type === ERROR) {\r\n\t\t\t\tif(tokens[start] && tokens[start].name === \"r_brace\") {\r\n\t\t\t\t\treturn {type: SUCCESS, len: start+1, value: new pl.type.Term(\"[]\", [])};\r\n\t\t\t\t}\r\n\t\t\t\treturn {type: ERROR, derived: true, value: pl.error.syntax(tokens[start], \"] expected\")};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstart = expr.len;\r\n\r\n\t\t\twhile(tokens[start] && tokens[start].name === \"atom\" && tokens[start].value === \",\") {\r\n\t\t\t\texpr = parseExpr(thread, tokens, start+1, \"999\", true);\r\n\t\t\t\tif(expr.type === ERROR) {\r\n\t\t\t\t\tif( expr.derived )\r\n\t\t\t\t\t\treturn expr;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn {type: ERROR, derived: true, value: pl.error.syntax(tokens[start+1] ? tokens[start+1] : tokens[start], \"argument expected\", !tokens[start+1])};\r\n\t\t\t\t}\r\n\t\t\t\texprs.push(expr.value);\r\n\t\t\t\tstart = expr.len;\r\n\t\t\t}\r\n\t\t\tvar bar = false\r\n\t\t\tif(tokens[start] && tokens[start].name === \"bar\") {\r\n\t\t\t\tbar = true;\r\n\t\t\t\texpr = parseExpr(thread, tokens, start+1, \"999\", true);\r\n\t\t\t\tif(expr.type === ERROR) {\r\n\t\t\t\t\tif( expr.derived )\r\n\t\t\t\t\t\treturn expr;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn {type: ERROR, derived: true, value: pl.error.syntax(tokens[start+1] ? tokens[start+1] : tokens[start], \"argument expected\", !tokens[start+1])};\r\n\t\t\t\t}\r\n\t\t\t\tcons = expr.value;\r\n\t\t\t\tstart = expr.len;\r\n\t\t\t}\r\n\t\t\tif(tokens[start] && tokens[start].name === \"r_brace\")\r\n\t\t\t\treturn {type: SUCCESS, len: start+1, value: arrayToList(exprs, cons) };\r\n\t\t\telse\r\n\t\t\t\treturn {type: ERROR, derived: true, value: pl.error.syntax(tokens[start] ? tokens[start] : tokens[start-1], bar ? \"] expected\" : \", or | or ] expected\", !tokens[start])};\r\n\t\t}\r\n\t\treturn {type: ERROR, derived: false, value: pl.error.syntax(tokens[start], \"list expected\")};\r\n\t}\r\n\r\n\t// Parse a rule\r\n\tfunction parseRule(thread, tokens, start) {\r\n\t\tvar line = tokens[start].line;\r\n\t\tvar expr = parseExpr(thread, tokens, start, thread.__get_max_priority(), false);\r\n\t\tvar rule = null;\r\n\t\tvar obj;\r\n\t\tif(expr.type !== ERROR) {\r\n\t\t\tstart = expr.len;\r\n\t\t\tif(tokens[start] && tokens[start].name === \"atom\" && tokens[start].raw === \".\") {\r\n\t\t\t\tstart++;\r\n\t\t\t\tif( pl.type.is_term(expr.value) ) {\r\n\t\t\t\t\tif(expr.value.indicator === \":-/2\") {\r\n\t\t\t\t\t\trule = new pl.type.Rule(expr.value.args[0], body_conversion(expr.value.args[1]));\r\n\t\t\t\t\t\tobj = {\r\n\t\t\t\t\t\t\tvalue: rule,\r\n\t\t\t\t\t\t\tlen: start,\r\n\t\t\t\t\t\t\ttype: SUCCESS\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else if(expr.value.indicator === \"-->/2\") {\r\n\t\t\t\t\t\trule = new pl.type.Rule(expr.value.args[0], body_conversion(expr.value.args[1]));\r\n\t\t\t\t\t\trule = rule_to_dcg(rule, thread);\r\n\t\t\t\t\t\trule.body = body_conversion(rule.body);\r\n\t\t\t\t\t\tif(!pl.type.is_rule(rule))\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tvalue: rule,\r\n\t\t\t\t\t\t\t\tlen: start,\r\n\t\t\t\t\t\t\t\ttype: ERROR\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\tobj = {\r\n\t\t\t\t\t\t\tvalue: rule,\r\n\t\t\t\t\t\t\tlen: start,\r\n\t\t\t\t\t\t\ttype: pl.type.is_rule( rule ) ? SUCCESS : ERROR\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trule = new pl.type.Rule(expr.value, null);\r\n\t\t\t\t\t\tobj = {\r\n\t\t\t\t\t\t\tvalue: rule,\r\n\t\t\t\t\t\t\tlen: start,\r\n\t\t\t\t\t\t\ttype: SUCCESS\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( rule ) {\r\n\t\t\t\t\t\tvar singleton = rule.singleton_variables();\r\n\t\t\t\t\t\tif( singleton.length > 0 )\r\n\t\t\t\t\t\t\tthread.throw_warning( pl.warning.singleton( singleton, rule.head.indicator, line ) );\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn { type: ERROR, value: pl.error.syntax(tokens[start], \"callable expected\") };\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn { type: ERROR, value: pl.error.syntax(tokens[start] ? tokens[start] : tokens[start-1], \". or operator expected\") };\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn expr;\r\n\t}\r\n\r\n\t// Parse a program\r\n\tfunction parseProgram(thread, string, options) {\r\n\t\tvar opts = {};\r\n\t\toptions = options ? options : {};\r\n\t\topts.success = options.success ? options.success : function(){};\r\n\t\topts.error = options.error ? options.error : function(){};\r\n\t\topts.from = options.from ? options.from : \"$tau-js\";\r\n\t\topts.reconsult = options.reconsult !== undefined ? options.reconsult : true;\r\n\t\topts.reconsulted = options.reconsulted === undefined ? {} : options.reconsulted;\r\n\t\topts.context_module = options.context_module === undefined ? \"user\" : options.context_module;\r\n\t\topts.initialization = options.initialization === undefined ? [] : options.initialization;\r\n\t\topts.current_token = options.current_token === undefined ? 0 : options.current_token;\r\n\t\topts.tokenizer = options.tokenizer === undefined ? null : options.tokenizer;\r\n\t\topts.tokens = options.tokens === undefined ? null : options.tokens;\r\n\t\topts.string = string;\r\n\t\topts.term_expansion = false;\r\n\t\tvar reconsulted = opts.reconsulted;\r\n\t\tvar tokenizer = opts.tokenizer;\r\n\t\tvar tokens = opts.tokens;\r\n\t\tif(tokenizer === null) {\r\n\t\t\ttokenizer = new Tokenizer(thread);\r\n\t\t\ttokenizer.new_text(string);\r\n\t\t\topts.tokenizer = tokenizer;\r\n\t\t\ttokens = tokenizer.get_tokens(0);\r\n\t\t\topts.tokens = tokens;\r\n\t\t}\r\n\t\tvar n = opts.current_token;\r\n\t\twhile(tokens !== null && tokens[n]) {\r\n\t\t\tvar expr = parseRule(thread, tokens, n);\r\n\t\t\topts.current_token = expr.len;\r\n\t\t\tif(expr.type === ERROR) {\r\n\t\t\t\tif(opts.error !== undefined)\r\n\t\t\t\topts.error(new Term(\"throw\", [expr.value]));\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\t// Term expansion\r\n\t\t\t\tvar context_module = opts.context_module;\r\n\t\t\t\tvar term_expansion = thread.session.modules[context_module].rules[\"term_expansion/2\"];\r\n\t\t\t\tif(term_expansion && term_expansion.length > 0) {\r\n\t\t\t\t\topts.term_expansion = true;\r\n\t\t\t\t\tvar n_thread = new Thread(thread.session);\r\n\t\t\t\t\tvar term = expr.value.body ? new Term(\":-\", [expr.value.head, expr.value.body]) : expr.value.head;\r\n\t\t\t\t\tthread.session.renamed_variables = {};\r\n\t\t\t\t\tterm = term.rename(thread.session);\r\n\t\t\t\t\tn_thread.query(context_module + \":term_expansion(\" + term.toString({quoted: true}) + \", X).\");\r\n\t\t\t\t\tn_thread.answer((function(thread, opts, reconsulted, expr) {\r\n\t\t\t\t\t\treturn function(answer) {\r\n\t\t\t\t\t\t\tif(answer && !pl.type.is_error(answer) && pl.type.is_term(answer.links['X'])) {\r\n\t\t\t\t\t\t\t\tvar term = answer.links['X'];\r\n\t\t\t\t\t\t\t\tvar rule = term.indicator === \":-/2\" ? new Rule(term.args[0], term.args[1]) : new Rule(term, null);\r\n\t\t\t\t\t\t\t\tparseProgramExpansion(thread, opts, reconsulted, {value: rule, len: expr.len, type: expr.type});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tparseProgramExpansion(thread, opts, reconsulted, expr);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})(thread, opts, reconsulted, expr));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\topts.term_expansion = false;\r\n\t\t\t\t\tvar async = parseProgramExpansion(thread, opts, reconsulted, expr);\r\n\t\t\t\t\tif(async)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tn = expr.len;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// run goals from initialization/1 directive\r\n\t\tvar callback = opts.success;\r\n\t\tvar nthread = new Thread(thread.session);\r\n\t\tfor(var i = opts.initialization.length-1; i > 0; i--) {\r\n\t\t\tvar next_callback = (function(init, callback) {\r\n\t\t\t\treturn function(answer) {\r\n\t\t\t\t\tif(answer === null) {\r\n\t\t\t\t\t\tnthread.answer();\r\n\t\t\t\t\t} else if(pl.type.is_error(answer)) {\r\n\t\t\t\t\t\topts.error(answer);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnthread.add_goal(init);\r\n\t\t\t\t\t\tnthread.answer(callback);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t})(opts.initialization[i], callback);\r\n\t\t\tcallback = next_callback;\r\n\t\t}\r\n\t\tif(opts.initialization.length > 0) {\r\n\t\t\tnthread.add_goal(opts.initialization[0]);\r\n\t\t\tnthread.answer(callback);\r\n\t\t} else {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseGoalExpansion(thread, options, expr) {\r\n\t\tvar n_thread = new Thread( thread.session );\r\n\t\tn_thread.__goal_expansion = true;\r\n\t\tvar varterm = thread.next_free_variable();\r\n\t\tvar varhead = thread.next_free_variable();\r\n\t\tvar goal = varhead + \" = \" + expr.value.head + \", goal_expansion(\" + expr.value.body.toString({\r\n\t\t\tquoted: true\r\n\t\t}) + \", \" + varterm.toString({\r\n\t\t\tquoted: true\r\n\t\t}) + \").\";\r\n\t\tn_thread.query(goal);\r\n\t\tn_thread.answer(function(answer) {\r\n\t\t\tif(answer && !pl.type.is_error(answer) && answer.links[varterm]) {\r\n\t\t\t\texpr.value.head = answer.links[varhead];\r\n\t\t\t\texpr.value.body = body_conversion(answer.links[varterm]);\r\n\t\t\t\tparseGoalExpansion(thread, options, expr);\r\n\t\t\t} else {\r\n\t\t\t\tthread.add_rule(expr.value, options);\r\n\t\t\t\tparseProgram(thread, options.string, options);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction parseQueryExpansion(thread, term, options) {\r\n\t\tvar n_thread = new Thread(thread.session);\r\n\t\tn_thread.__goal_expansion = true;\r\n\t\tvar varterm = thread.next_free_variable();\r\n\t\tvar goal = \"goal_expansion(\" + term.toString({\r\n\t\t\tquoted: true\r\n\t\t}) + \", \" + varterm.toString({\r\n\t\t\tquoted: true\r\n\t\t}) + \").\";\r\n\t\tn_thread.query(goal);\r\n\t\tvar variables = n_thread.head_point().substitution.domain();\r\n\t\tn_thread.answer(function(answer) {\r\n\t\t\tif(answer && !pl.type.is_error(answer) && answer.links[varterm]) {\r\n\t\t\t\tfor(var i = 0; i < variables.length; i++) {\r\n\t\t\t\t\tif(variables[i] !== varterm.id && answer.links[variables[i]]) {\r\n\t\t\t\t\t\tvar subs = new Substitution();\r\n\t\t\t\t\t\tsubs.links[answer.links[variables[i]]] = variables[i];\r\n\t\t\t\t\t\tanswer.links[varterm] = answer.links[varterm].apply( subs );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tparseQueryExpansion(thread, body_conversion(answer.links[varterm]), options);\r\n\t\t\t} else {\r\n\t\t\t\tthread.add_goal(term);\r\n\t\t\t\toptions.success(term);\r\n\t\t\t\tparseQuery(thread, options.string, options);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction parseProgramExpansion(thread, options, reconsulted, expr) {\r\n\t\tvar async = options.term_expansion === true;\r\n\t\tif(expr.value.body === null && expr.value.head.indicator === \"?-/1\") {\r\n\t\t\tasync = true;\r\n\t\t\tvar n_thread = new Thread(thread.session);\r\n\t\t\tn_thread.add_goal(expr.value.head.args[0]);\r\n\t\t\tn_thread.answer(function(answer) {\r\n\t\t\t\tif(pl.type.is_error(answer)) {\r\n\t\t\t\t\tthread.throw_warning(answer.args[0]);\r\n\t\t\t\t} else if(answer === false || answer === null) {\r\n\t\t\t\t\tthread.throw_warning(pl.warning.failed_goal(expr.value.head.args[0], expr.len));\r\n\t\t\t\t}\r\n\t\t\t\tparseProgram(thread, options.string, options);\r\n\t\t\t});\r\n\t\t} else if(expr.value.body === null && expr.value.head.indicator === \":-/1\") {\r\n\t\t\tvar result = thread.run_directive(expr.value.head.args[0], options);\r\n\t\t\tasync = async || (result === true);\r\n\t\t\tif(async)\r\n\t\t\t\tparseProgram(thread, options.string, options);\r\n\t\t} else {\r\n\t\t\tvar context_module = options.context_module;\r\n\t\t\tvar indicator = expr.value.head.indicator;\r\n\t\t\tif(expr.value.head.indicator === \":/2\") {\r\n\t\t\t\tcontext_module = expr.value.head.args[0].id;\r\n\t\t\t\tindicator = expr.value.head.args[1].indicator;\r\n\t\t\t}\r\n\t\t\tif(!reconsulted.hasOwnProperty(context_module))\r\n\t\t\t\treconsulted[context_module] = {};\r\n\t\t\tif(options.reconsult !== false && reconsulted[context_module][indicator] !== true && !thread.is_multifile_predicate(indicator)) {\r\n\t\t\t\tvar get_module = thread.session.modules[context_module];\r\n\t\t\t\tif(context_module !== \"system\" && get_module && get_module.rules[indicator]) {\r\n\t\t\t\t\tget_module.rules[indicator] = filter(get_module.rules[indicator], function(rule) {\r\n\t\t\t\t\t\treturn rule.dynamic;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tget_module.update_indices_predicate(indicator);\r\n\t\t\t\t}\r\n\t\t\t\treconsulted[context_module][indicator] = true;\r\n\t\t\t}\r\n\t\t\tvar goal_expansion = thread.session.modules.user.rules[\"goal_expansion/2\"];\r\n\t\t\tif(expr.value.body !== null && goal_expansion && goal_expansion.length > 0) {\r\n\t\t\t\tasync = true;\r\n\t\t\t\tthread.session.renamed_variables = {};\r\n\t\t\t\tvar origin = {\r\n\t\t\t\t\thead: function() { return expr.value.head; },\r\n\t\t\t\t\tterm: function() { return expr.value.body; },\r\n\t\t\t\t\tset: function(h, p){\r\n\t\t\t\t\t\texpr.value.head = h;\r\n\t\t\t\t\t\texpr.value.body = p;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tparseGoalExpansion(thread, options, expr, body_conversion(expr.value.body), origin.set, origin);\r\n\t\t\t} else {\r\n\t\t\t\tthread.add_rule(expr.value, options);\r\n\t\t\t\tif(async)\r\n\t\t\t\t\tparseProgram(thread, options.string, options);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn async;\r\n\t}\r\n\t\r\n\t// Parse a query\r\n\tfunction parseQuery(thread, string, options) {\r\n\t\tvar opts = {};\r\n\t\tvar callback = typeof options === \"function\" ? options : function(){};\r\n\t\toptions = options === undefined || typeof options === \"function\" ? {} : options;\r\n\t\topts.success = options.success === undefined ? callback : options.success;\r\n\t\topts.error = options.error === undefined ? callback : options.error;\r\n\t\topts.tokenizer = options.tokenizer === undefined ? null : options.tokenizer;\r\n\t\topts.current_token = options.current_token === undefined ? 0 : options.current_token;\r\n\t\topts.string = string;\r\n\t\tvar tokenizer = opts.tokenizer;\r\n\t\tvar n = opts.current_token;\r\n\t\tif(tokenizer === null) {\r\n\t\t\ttokenizer = new Tokenizer(thread);\r\n\t\t\topts.tokenizer = tokenizer;\r\n\t\t\ttokenizer.new_text(string);\r\n\t\t}\r\n\t\tdo {\r\n\t\t\tvar tokens = tokenizer.get_tokens(n);\r\n\t\t\tif(tokens === null)\r\n\t\t\t\tbreak;\r\n\t\t\tvar expr = parseExpr(thread, tokens, 0, thread.__get_max_priority(), false);\r\n\t\t\tif(expr.type !== ERROR) {\r\n\t\t\t\tvar expr_position = expr.len;\r\n\t\t\t\tn = expr.len + 1;\r\n\t\t\t\topts.current_token = n;\r\n\t\t\t\tif(tokens[expr_position] && tokens[expr_position].name === \"atom\" && tokens[expr_position].raw === \".\") {\r\n\t\t\t\t\texpr.value = body_conversion(expr.value);\r\n\t\t\t\t\t// Goal expansion\r\n\t\t\t\t\tvar goal_expansion = thread.session.modules.user.rules[\"goal_expansion/2\"];\r\n\t\t\t\t\tif(!thread.__goal_expansion && goal_expansion && goal_expansion.length > 0) {\r\n\t\t\t\t\t\tparseQueryExpansion(thread, expr.value, opts);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthread.add_goal(expr.value);\r\n\t\t\t\t\t\topts.success(expr.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar token = tokens[expr_position];\r\n\t\t\t\t\topts.error(\r\n\t\t\t\t\t\tnew Term(\"throw\", [\r\n\t\t\t\t\t\t\tpl.error.syntax(\r\n\t\t\t\t\t\t\t\ttoken ? token : tokens[expr_position-1],\r\n\t\t\t\t\t\t\t\ttoken && token.error ? token.error : \". or operator expected\",\r\n\t\t\t\t\t\t\t\t!token\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\topts.error(new Term(\"throw\", [expr.value]));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} while(true);\r\n\t}\r\n\r\n\r\n\t\r\n\t// UTILS\r\n\r\n\t// Rule to DCG\r\n\tfunction rule_to_dcg(rule, thread) {\r\n\t\tthread.session.renamed_variables = {};\r\n\t\trule = rule.rename(thread);\r\n\t\tvar begin = thread.next_free_variable();\r\n\t\tvar dcg = body_to_dcg( rule.body, begin, thread );\r\n\t\tif( dcg.error )\r\n\t\t\treturn dcg.value;\r\n\t\trule.body = dcg.value;\r\n\t\t// push-back lists\r\n\t\tif(rule.head.indicator === \",/2\") {\r\n\t\t\tvar terminals = rule.head.args[1];\r\n\t\t\trule.head = rule.head.args[0];\r\n\t\t\tvar last = thread.next_free_variable();\r\n\t\t\tvar pointer = terminals;\r\n\t\t\tif(!pl.type.is_list(pointer)) {\r\n\t\t\t\treturn pl.error.type(\"list\", pointer, \"DCG/0\");\r\n\t\t\t}\r\n\t\t\tif(pointer.indicator === \"[]/0\") {\r\n\t\t\t\tterminals = dcg.variable;\r\n\t\t\t} else {\r\n\t\t\t\twhile(pointer.indicator === \"./2\" && pl.type.is_list(pointer) && pointer.args[1].indicator !== \"[]/0\") {\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif(pl.type.is_variable(pointer))\r\n\t\t\t\t\treturn pl.error.instantiation(\"DCG/0\");\r\n\t\t\t\telse if(!pl.type.is_list(pointer))\r\n\t\t\t\t\treturn pl.error.type(\"list\", terminals, \"DCG/0\");\r\n\t\t\t\tpointer.args[1] = dcg.variable;\r\n\t\t\t}\r\n\t\t\trule.body = new Term(\",\", [rule.body, new Term(\"=\", [last, terminals])]);\r\n\t\t\trule.head = new Term(rule.head.id, rule.head.args.concat([begin, last]));\r\n\t\t} else {\r\n\t\t\t// replace first assignment\r\n\t\t\tvar first_assign = rule.body;\r\n\t\t\tif(pl.type.is_term(first_assign) && first_assign.indicator === \",/2\")\r\n\t\t\t\tfirst_assign = first_assign.args[0];\r\n\t\t\tif(pl.type.is_term(first_assign) && first_assign.indicator === \"=/2\" &&\r\n\t\t\t   pl.type.is_variable(first_assign.args[0]) && first_assign.args[0] === begin) {\r\n\t\t\t\tbegin = first_assign.args[1];\r\n\t\t\t\trule.body = rule.body.replace(null);\r\n\t\t\t}\r\n\t\t\t// add first and last variables to the head\r\n\t\t\tif(rule.head.indicator === \":/2\")\r\n\t\t\t\trule.head = new Term(\":\", [\r\n\t\t\t\t\tnew Term(rule.head.args[0].id, []),\r\n\t\t\t\t\tnew Term(rule.head.args[1].id, rule.head.args[1].args.concat([begin, dcg.variable]))\r\n\t\t\t\t]);\r\n\t\t\telse\r\n\t\t\t\trule.head = new Term(rule.head.id, rule.head.args.concat([begin, dcg.variable]));\r\n\t\t}\r\n\t\treturn rule;\r\n\t}\r\n\r\n\t// Body to DCG\r\n\tfunction body_to_dcg(expr, last, thread) {\r\n\t\tvar free;\r\n\t\tif( pl.type.is_term( expr ) && expr.indicator === \"!/0\" ) {\r\n\t\t\tfree = thread.next_free_variable();\r\n\t\t\treturn {\r\n\t\t\t\tvalue: new Term(\",\", [expr, new Term(\"=\", [last, free])]),\r\n\t\t\t\tvariable: free,\r\n\t\t\t\terror: false\r\n\t\t\t};\r\n\t\t} else if( pl.type.is_term( expr ) && expr.indicator === \":/2\" ) {\r\n\t\t\tvar right = body_to_dcg(expr.args[1], last, thread);\r\n\t\t\tif( right.error ) return right;\r\n\t\t\treturn {\r\n\t\t\t\tvalue: new Term(\":\", [expr.args[0], right.value]),\r\n\t\t\t\tvariable: right.variable,\r\n\t\t\t\terror: false\r\n\t\t\t};\r\n\t\t} else if( pl.type.is_term( expr ) && expr.indicator === \"\\\\+/1\" ) {\r\n\t\t\tvar left = body_to_dcg(expr.args[0], last, thread);\r\n\t\t\tif( left.error ) return left;\r\n\t\t\tfree = thread.next_free_variable();\r\n\t\t\treturn {\r\n\t\t\t\tvalue: new Term(\",\", [new Term(expr.id, [left.value]), new Term(\"=\", [last, free])]),\r\n\t\t\t\tvariable: free,\r\n\t\t\t\terror: false\r\n\t\t\t};\r\n\t\t} else if( pl.type.is_term( expr ) && (expr.indicator === \",/2\" || expr.indicator === \"->/2\") ) {\r\n\t\t\tvar left = body_to_dcg(expr.args[0], last, thread);\r\n\t\t\tif( left.error ) return left;\r\n\t\t\tvar right = body_to_dcg(expr.args[1], left.variable, thread);\r\n\t\t\tif( right.error ) return right;\r\n\t\t\treturn {\r\n\t\t\t\tvalue: new Term(expr.id, [left.value, right.value]),\r\n\t\t\t\tvariable: right.variable,\r\n\t\t\t\terror: false\r\n\t\t\t};\r\n\t\t} else if( pl.type.is_term( expr ) && expr.indicator === \";/2\" ) {\r\n\t\t\tvar left = body_to_dcg(expr.args[0], last, thread);\r\n\t\t\tif( left.error ) return left;\r\n\t\t\tvar right = body_to_dcg(expr.args[1], last, thread);\r\n\t\t\tif( right.error ) return right;\r\n\t\t\treturn {\r\n\t\t\t\tvalue: new Term(\",\", [new Term(\";\", [left.value, right.value]), new Term(\"=\", [left.variable, right.variable])]),\r\n\t\t\t\tvariable: right.variable,\r\n\t\t\t\terror: false\r\n\t\t\t};\r\n\t\t} else if( pl.type.is_term( expr ) && expr.indicator === \"{}/1\" ) {\r\n\t\t\tfree = thread.next_free_variable();\r\n\t\t\treturn {\r\n\t\t\t\tvalue: new Term(\",\", [expr.args[0], new Term(\"=\", [last, free])]),\r\n\t\t\t\tvariable: free,\r\n\t\t\t\terror: false\r\n\t\t\t};\r\n\t\t} else if( pl.type.is_empty_list( expr ) ) {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: new Term(\"true\", []),\r\n\t\t\t\tvariable: last,\r\n\t\t\t\terror: false\r\n\t\t\t};\r\n\t\t} else if( pl.type.is_list( expr ) ) {\r\n\t\t\tfree = thread.next_free_variable();\r\n\t\t\tvar pointer = expr;\r\n\t\t\tvar prev;\r\n\t\t\twhile( pointer.indicator === \"./2\" ) {\r\n\t\t\t\tprev = pointer;\r\n\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t}\r\n\t\t\tif( pl.type.is_variable( pointer ) ) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tvalue: pl.error.instantiation(\"DCG/0\"),\r\n\t\t\t\t\tvariable: last,\r\n\t\t\t\t\terror: true\r\n\t\t\t\t};\r\n\t\t\t} else if( !pl.type.is_empty_list( pointer ) ) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tvalue: pl.error.type(\"list\", expr, \"DCG/0\"),\r\n\t\t\t\t\tvariable: last,\r\n\t\t\t\t\terror: true\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tprev.args[1] = free;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tvalue: new Term(\"=\", [last, expr]),\r\n\t\t\t\t\tvariable: free,\r\n\t\t\t\t\terror: false\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} else if( pl.type.is_callable( expr ) ) {\r\n\t\t\tfree = thread.next_free_variable();\r\n\t\t\texpr = new Term( expr.id, expr.args.concat([last,free]) );\r\n\t\t\treturn {\r\n\t\t\t\tvalue: expr,\r\n\t\t\t\tvariable: free,\r\n\t\t\t\terror: false\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: pl.error.type( \"callable\", expr, \"DCG/0\" ),\r\n\t\t\t\tvariable: last,\r\n\t\t\t\terror: true\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Body conversion\r\n\tfunction body_conversion( expr ) {\r\n\t\tif( pl.type.is_variable( expr ) )\r\n\t\t\treturn new Term( \"call\", [expr] );\r\n\t\telse if( pl.type.is_term( expr ) && [\",/2\", \";/2\", \"->/2\"].indexOf(expr.indicator) !== -1 )\r\n\t\t\treturn new Term( expr.id, [body_conversion( expr.args[0] ), body_conversion( expr.args[1] )] );\r\n\t\telse if( pl.type.is_term(expr) && expr.indicator === \":/2\" ) {\r\n\t\t\tvar body = body_conversion(expr.args[1]);\r\n\t\t\treturn new Term(\":\", [expr.args[0], body]);\r\n\t\t}\r\n\t\treturn expr;\r\n\t}\r\n\t\r\n\t// List to Prolog list\r\n\tfunction arrayToList( array, cons ) {\r\n\t\tvar list = cons ? cons : new Term( \"[]\", [] );\r\n\t\tfor(var i = array.length-1; i >= 0; i-- )\r\n\t\t\tlist = new Term( \".\", [array[i], list] );\r\n\t\treturn list;\r\n\t}\r\n\r\n\t// Array difference\r\n\tfunction difference(xs, ys) {\r\n\t\tvar zs = [];\r\n\t\tfor(var i = 0; i < xs.length; i++) {\r\n\t\t\tif(indexOf(zs, xs[i]) === -1 && indexOf(ys, xs[i]) === -1)\r\n\t\t\t\tzs.push(xs[i]);\r\n\t\t}\r\n\t\treturn zs;\r\n\t}\r\n\t\r\n\t// Remove element from array\r\n\tfunction remove( array, element ) {\r\n\t\tfor( var i = array.length - 1; i >= 0; i-- ) {\r\n\t\t\tif( array[i] === element ) {\r\n\t\t\t\tarray.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Remove duplicate elements\r\n\tfunction nub( array ) {\r\n\t\tvar seen = {};\r\n\t\tvar unique = [];\r\n\t\tfor( var i = 0; i < array.length; i++ ) {\r\n\t\t\tif( !(array[i] in seen) ) {\r\n\t\t\t\tunique.push( array[i] );\r\n\t\t\t\tseen[array[i]] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn unique;\r\n\t}\r\n\r\n\t// Retract a rule\r\n\tfunction retract(thread, point, indicator, rule, get_module) {\r\n\t\tif(get_module.rules[indicator]) {\r\n\t\t\tfor(var i = 0; i < get_module.rules[indicator].length; i++) {\r\n\t\t\t\tif(get_module.rules[indicator][i] === rule) {\r\n\t\t\t\t\tget_module.rules[indicator].splice(i, 1);\r\n\t\t\t\t\tget_module.update_indices_predicate(indicator);\r\n\t\t\t\t\tthread.success( point );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t// call/n\r\n\tfunction callN(n) {\r\n\t\treturn function(thread, point, atom) {\r\n\t\t\tvar closure = atom.args[0], args = atom.args.slice(1, n);\r\n\t\t\tvar module_atom;\r\n\t\t\tif(pl.type.is_term(closure) && closure.indicator === \":/2\") {\r\n\t\t\t\tif(!pl.type.is_atom(closure.args[0])) {\r\n\t\t\t\t\tthread.throw_error(pl.error.type(\"module\", closure.args[0], atom.indicator));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tmodule_atom = closure.args[0];\r\n\t\t\t\tclosure = closure.args[1];\r\n\t\t\t}\r\n\t\t\tif(pl.type.is_variable(closure)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(closure)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", closure, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar goal = body_conversion(new Term(closure.id, closure.args.concat(args)));\r\n\t\t\t\tif(!pl.type.is_callable(goal)) {\r\n\t\t\t\t\tthread.throw_error(pl.error.type(\"callable\", goal, atom.indicator));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(module_atom)\r\n\t\t\t\t\tgoal = new Term(\":\", [module_atom, goal]);\r\n\t\t\t\tthread.prepend([new State(point.goal.replace(goal), point.substitution, point)]);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\t// String to indicator\r\n\tfunction str_indicator( str ) {\r\n\t\tfor( var i = str.length - 1; i >= 0; i-- )\r\n\t\t\tif( str.charAt(i) === \"/\" )\r\n\t\t\t\treturn new Term( \"/\", [new Term( str.substring(0, i) ), new Num( parseInt(str.substring(i+1)), false )] );\r\n\t}\r\n\r\n\t// Greatest common divisor\r\n\tfunction gcd(a, b) {\r\n\t\tif(b === 0)\r\n\t\t\treturn a;\r\n\t\treturn Math.abs(gcd(b, a % b));\r\n\t}\r\n\t\r\n\t\r\n\r\n\t// PROLOG OBJECTS\r\n\t\r\n\t// Variables\r\n\tfunction Var( id ) {\r\n\t\tthis.id = id;\r\n\t\tthis.ground = false;\r\n\t}\r\n\t\r\n\t// Numbers\r\n\tfunction Num( value, is_float ) {\r\n\t\tthis.is_float = is_float !== undefined ? is_float : Math.trunc(value) !== value;\r\n\t\tthis.value = this.is_float ? value : Math.trunc(value);\r\n\t\tthis.index = this.value;\r\n\t\tthis.ground = true;\r\n\t}\r\n\t\r\n\t// Terms\r\n\tvar term_ref = 0;\r\n\tfunction Term( id, args, ref ) {\r\n\t\tterm_ref++;\r\n\t\tthis.ref = ref || term_ref;\r\n\t\tthis.id = id;\r\n\t\tthis.args = args || [];\r\n\t\tthis.indicator = id + \"/\" + this.args.length;\r\n\t\tthis.index = this.indicator;\r\n\t\tthis.ground = true;\r\n\t\tfor(var i = 0; i < this.args.length; i++) {\r\n\t\t\tif(this.args[i].hasOwnProperty(\"ground\") && this.args[i].ground === false) {\r\n\t\t\t\tthis.ground = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Streams\r\n\tvar stream_ref = 0;\r\n\tfunction Stream( stream, mode, alias, type, reposition, eof_action ) {\r\n\t\tthis.id = stream_ref++;\r\n\t\tthis.stream = stream;\r\n\t\tthis.mode = mode; // \"read\" or \"write\" or \"append\"\r\n\t\tthis.alias = alias;\r\n\t\tthis.type = type !== undefined ? type : \"text\"; // \"text\" or \"binary\"\r\n\t\tthis.reposition = reposition !== undefined ? reposition : true; // true or false\r\n\t\tthis.eof_action = eof_action !== undefined ? eof_action : \"eof_code\"; // \"error\" or \"eof_code\" or \"reset\"\r\n\t\tthis.position = this.mode === \"append\" ? \"end_of_stream\" : 0;\r\n\t\tthis.output = this.mode === \"write\" || this.mode === \"append\";\r\n\t\tthis.input = this.mode === \"read\";\r\n\t\tthis.line_position = 0;\r\n\t\tthis.line_count = 1;\r\n\t\tthis.char_count = 0;\r\n\t}\r\n\t\r\n\t// Substitutions\r\n\tfunction Substitution( links, attrs ) {\r\n\t\tlinks = links || {};\r\n\t\tattrs = attrs || {};\r\n\t\tthis.links = links;\r\n\t\tthis.attrs = attrs;\r\n\t}\r\n\t\r\n\t// States\r\n\tfunction State( goal, subs, parent ) {\r\n\t\tsubs = subs || new Substitution();\r\n\t\tparent = parent || null;\r\n\t\tthis.goal = goal;\r\n\t\tthis.substitution = subs;\r\n\t\tthis.parent = parent;\r\n\t}\r\n\t\r\n\t// Rules\r\n\tfunction Rule( head, body, dynamic ) {\r\n\t\tthis.head = head;\r\n\t\tthis.body = body;\r\n\t\tthis.dynamic = dynamic ? dynamic : false;\r\n\t}\r\n\r\n\t// Session\r\n\tfunction Session( limit ) {\r\n\t\tlimit = typeof limit === \"number\" && limit > 0 ? limit : null;\r\n\t\tthis.rename = 0;\r\n\t\tthis.modules = {};\r\n\t\tthis.modules.user = new Module(\"user\", {}, \"all\", {\r\n\t\t\tsession: this,\r\n\t\t\tdependencies: [\"system\"]\r\n\t\t});\r\n\t\tthis.modules.system = pl.modules.system;\r\n\t\tthis.rules = this.modules.user.rules;\r\n\t\tthis.total_threads = 0;\r\n\t\tthis.renamed_variables = {};\r\n\t\tthis.public_predicates = this.modules.user.public_predicates;\r\n\t\tthis.multifile_predicates = this.modules.user.multifile_predicates;\r\n\t\tthis.limit = limit;\r\n\t\tthis.streams = {\r\n\t\t\t\"user_input\": new Stream(\r\n\t\t\t\tnodejs_flag ? nodejs_user_input : tau_user_input,\r\n\t\t\t\t\"read\", \"user_input\", \"text\", false, \"reset\" ),\r\n\t\t\t\"user_output\": new Stream(\r\n\t\t\t\tnodejs_flag ? nodejs_user_output : tau_user_output,\r\n\t\t\t\t\"append\", \"user_output\", \"text\", false, \"reset\" ),\r\n\t\t\t\"user_error\": new Stream(\r\n\t\t\t\tnodejs_flag ? nodejs_user_error : tau_user_error,\r\n\t\t\t\t\"append\", \"user_error\", \"text\", false, \"reset\" ),\r\n\t\t};\r\n\t\tthis.file_system = nodejs_flag ? nodejs_file_system : tau_file_system;\r\n\t\tthis.standard_input = this.streams[\"user_input\"];\r\n\t\tthis.standard_output = this.streams[\"user_output\"];\r\n\t\tthis.standard_error = this.streams[\"user_error\"];\r\n\t\tthis.current_input = this.streams[\"user_input\"];\r\n\t\tthis.current_output = this.streams[\"user_output\"];\r\n\t\tthis.working_directory = \"/\"; // only for browser\r\n\t\tthis.format_success = function( state ) { return state.substitution; };\r\n\t\tthis.format_error = function( state ) { return state.goal; };\r\n\t\tthis.flag = {\t\r\n\t\t\tbounded: pl.flag.bounded.value,\r\n\t\t\tmax_integer: pl.flag.max_integer.value,\r\n\t\t\tmin_integer: pl.flag.min_integer.value,\r\n\t\t\tinteger_rounding_function: pl.flag.integer_rounding_function.value,\r\n\t\t\tchar_conversion: pl.flag.char_conversion.value,\r\n\t\t\tdebug: pl.flag.debug.value,\r\n\t\t\tmax_arity: pl.flag.max_arity.value,\r\n\t\t\tunknown: pl.flag.unknown.value,\r\n\t\t\tdouble_quotes: pl.flag.double_quotes.value,\r\n\t\t\toccurs_check: pl.flag.occurs_check.value,\r\n\t\t\tdialect: pl.flag.dialect.value,\r\n\t\t\tversion_data: pl.flag.version_data.value,\r\n\t\t\tnodejs: pl.flag.nodejs.value,\r\n\t\t\targv: pl.flag.argv.value\r\n\t\t};\r\n\t\tthis.__loaded_modules = [];\r\n\t\tthis.__char_conversion = {};\r\n\t\tthis.__operators = {\r\n\t\t\t1200: { \":-\": [\"fx\", \"xfx\"],  \"-->\": [\"xfx\"], \"?-\": [\"fx\"] },\r\n\t\t\t1150: { \"meta_predicate\": [\"fx\"] },\r\n\t\t\t1100: { \";\": [\"xfy\"] },\r\n\t\t\t1050: { \"->\": [\"xfy\"], \"*->\": [\"xfy\"] },\r\n\t\t\t1000: { \",\": [\"xfy\"] },\r\n\t\t\t900: { \"\\\\+\": [\"fy\"] },\r\n\t\t\t700: {\r\n\t\t\t\t\"=\": [\"xfx\"], \"\\\\=\": [\"xfx\"], \"==\": [\"xfx\"], \"\\\\==\": [\"xfx\"],\r\n\t\t\t\t\"@<\": [\"xfx\"], \"@=<\": [\"xfx\"], \"@>\": [\"xfx\"], \"@>=\": [\"xfx\"],\r\n\t\t\t\t\"=..\": [\"xfx\"], \"is\": [\"xfx\"], \"=:=\": [\"xfx\"], \"=\\\\=\": [\"xfx\"],\r\n\t\t\t\t\"<\": [\"xfx\"], \"=<\": [\"xfx\"], \">\": [\"xfx\"], \">=\": [\"xfx\"]\r\n\t\t\t},\r\n\t\t\t600: { \":\": [\"xfy\"] },\r\n\t\t\t500: { \"+\": [\"yfx\"], \"-\": [\"yfx\"], \"/\\\\\": [\"yfx\"], \"\\\\/\": [\"yfx\"] },\r\n\t\t\t400: {\r\n\t\t\t\t\"*\": [\"yfx\"], \"/\": [\"yfx\"], \"//\": [\"yfx\"], \"rem\": [\"yfx\"],\r\n\t\t\t\t\"mod\": [\"yfx\"], \"<<\": [\"yfx\"], \">>\": [\"yfx\"], \"div\": [\"yfx\"]\r\n\t\t\t},\r\n\t\t\t200: { \"**\": [\"xfx\"], \"^\": [\"xfy\"], \"-\": [\"fy\"], \"+\": [\"fy\"], \"\\\\\": [\"fy\"] }\r\n\t\t};\r\n\t\tthis.thread = new Thread( this );\r\n\t}\r\n\t\r\n\t// Threads\r\n\tfunction Thread( session ) {\r\n\t\tthis.epoch = Date.now();\r\n\t\tthis.session = session;\r\n\t\tthis.session.total_threads++;\r\n\t\tthis.format_success = session.format_success;\r\n\t\tthis.format_error = session.format_error;\r\n\t\tthis.total_steps = 0;\r\n\t\tthis.cpu_time = 0;\r\n\t\tthis.points = [];\r\n\t\tthis.debugger = false;\r\n\t\tthis.debugger_states = [];\r\n\t\tthis.level = new Term(\"top_level\");\r\n\t\tthis.current_limit = this.session.limit;\r\n\t\tthis.has_limit = this.session.limit !== null;\r\n\t\tthis.warnings = [];\r\n\t\tthis.__calls = [];\r\n\t\tthis.__goal_expansion = false;\r\n\t\tthis.__stacks = {};\r\n\t}\r\n\t\r\n\t// Modules\r\n\tfunction Module(id, rules, exports, options) {\r\n\t\toptions = options === undefined ? {} : options;\r\n\t\toptions.public_predicates = options.public_predicates === undefined ? {} : options.public_predicates;\r\n\t\toptions.multifile_predicates = options.multifile_predicates === undefined ? {} : options.multifile_predicates;\r\n\t\toptions.meta_predicates = options.meta_predicates === undefined ? {} : options.meta_predicates;\r\n\t\toptions.session = options.session === undefined ? null : options.session;\r\n\t\toptions.dependencies = options.dependencies === undefined ? [] : options.dependencies;\r\n\t\tthis.id = id;\r\n\t\tthis.rules = rules;\r\n\t\tthis.indexed_clauses = {};\r\n\t\tthis.non_indexable_clauses = {};\r\n\t\tthis.public_predicates = options.public_predicates;\r\n\t\tthis.multifile_predicates = options.multifile_predicates;\r\n\t\tthis.meta_predicates = options.meta_predicates;\r\n\t\tthis.src_predicates = {};\r\n\t\tthis.dependencies = options.dependencies;\r\n\t\tthis.exports = exports;\r\n\t\tthis.is_library = options.session === null;\r\n\t\tthis.modules = {};\r\n\t\tif(options.session) {\r\n\t\t\toptions.session.modules[id] = this;\r\n\t\t\tfor(var i = 0; i < options.dependencies.length; i++) {\r\n\t\t\t\tvar lib = options.dependencies[i];\r\n\t\t\t\tif(!options.session.modules.hasOwnProperty(lib))\r\n\t\t\t\t\toptions.session.modules[lib] = pl.modules[lib];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tpl.modules[id] = this;\r\n\t\t}\r\n\t\tif(exports !== \"all\") {\r\n\t\t\tfor(var i = 0; i < exports.length; i++) {\r\n\t\t\t\tthis.public_predicates[exports[i]] =\r\n\t\t\t\t\toptions.public_predicates.hasOwnProperty(exports[i]) &&\r\n\t\t\t\t\toptions.public_predicates[exports[i]] === true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.update_indices_clauses();\r\n\t}\r\n\t\r\n\t// Check if a predicate is exported\r\n\tModule.prototype.exports_predicate = function(indicator) {\r\n\t\treturn this.exports === \"all\" || indexOf(this.exports, indicator) !== -1;\r\n\t};\r\n\r\n\t// Check if a predicate is public\r\n\tModule.prototype.is_public_predicate = function(indicator) {\r\n\t\treturn !this.public_predicates.hasOwnProperty(indicator) || this.public_predicates[indicator] === true;\r\n\t};\r\n\t\r\n\t// Check if a predicate is multifile\r\n\tModule.prototype.is_multifile_predicate = function( indicator ) {\r\n\t\treturn this.multifile_predicates.hasOwnProperty(indicator) && this.multifile_predicates[indicator] === true;\r\n\t};\r\n\r\n\t// Check if a predicate is a meta-predicate\r\n\tModule.prototype.is_meta_predicate = function( indicator ) {\r\n\t\tif(this.meta_predicates.hasOwnProperty(indicator))\r\n\t\t\treturn this.meta_predicates[indicator];\r\n\t\treturn null;\r\n\t};\r\n\r\n\t// Update indices of all predicates\r\n\tModule.prototype.update_indices_clauses = function() {\r\n\t\tthis.indexed_clauses = {};\r\n\t\tthis.non_indexable_clauses = {};\r\n\t\tfor(var indicator in this.rules)\r\n\t\t\tthis.update_indices_predicate(indicator);\r\n\t};\r\n\r\n\t// Update indices of a predicate\r\n\tModule.prototype.update_indices_predicate = function(indicator) {\r\n\t\tthis.indexed_clauses[indicator] = {};\r\n\t\tthis.non_indexable_clauses[indicator] = [];\r\n\t\tif(!Array.isArray(this.rules[indicator]))\r\n\t\t\treturn;\r\n\t\tfor(var i = 0; i < this.rules[indicator].length; i++) {\r\n\t\t\tvar clause = this.rules[indicator][i];\r\n\t\t\tthis.add_index_predicate(clause);\r\n\t\t}\r\n\t};\r\n\r\n\t// Add indexed cluuse to a predicate\r\n\tModule.prototype.add_index_predicate = function(clause) {\r\n\t\tvar indicator = clause.head.indicator;\r\n\t\tvar index = clause.head.args.length > 0 ? clause.head.args[0].index : undefined;\r\n\t\tif(index) {\r\n\t\t\tif(!this.indexed_clauses.hasOwnProperty(indicator))\r\n\t\t\t\tthis.indexed_clauses[indicator] = {};\r\n\t\t\tif(!this.indexed_clauses[indicator].hasOwnProperty(index)) {\r\n\t\t\t\tthis.indexed_clauses[indicator][index] = [];\r\n\t\t\t\tif(this.non_indexable_clauses.hasOwnProperty(indicator))\r\n\t\t\t\t\tfor(var j = 0; j < this.non_indexable_clauses[indicator].length; j++)\r\n\t\t\t\t\t\tthis.indexed_clauses[indicator][index].push(this.non_indexable_clauses[indicator][j]);\r\n\t\t\t}\r\n\t\t\tthis.indexed_clauses[indicator][index].push(clause);\r\n\t\t} else {\r\n\t\t\tif(!this.non_indexable_clauses.hasOwnProperty(indicator))\r\n\t\t\t\tthis.non_indexable_clauses[indicator] = [];\r\n\t\t\tthis.non_indexable_clauses[indicator].push(clause);\r\n\t\t\tfor(var index in this.indexed_clauses[indicator])\r\n\t\t\t\tthis.indexed_clauses[indicator][index].push(clause);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t// UNIFY PROLOG OBJECTS\r\n\r\n\t// Variables\r\n\tVar.prototype.unify = function(obj, occurs_check) {\r\n\t\tif(occurs_check && indexOf(obj.variables(), this.id) !== -1 && !pl.type.is_variable(obj))\r\n\t\t\treturn null;\r\n\t\tvar links = {};\r\n\t\tlinks[this.id] = obj;\r\n\t\treturn new Substitution(links);\r\n\t};\r\n\r\n\t// Numbers\r\n\tNum.prototype.unify = function(obj, occurs_check) {\r\n\t\tif(pl.type.is_number(obj) && this.value === obj.value && this.is_float === obj.is_float)\r\n\t\t\treturn new Substitution();\r\n\t\treturn null;\r\n\t};\r\n\r\n\t// Terms\r\n\tTerm.prototype.unify = function(obj, occurs_check) {\r\n\t\tif(!pl.type.is_term(obj) && obj.unify !== undefined) {\r\n\t\t\treturn obj.unify(this, occurs_check);\r\n\t\t} else if(pl.type.is_term(obj) && this.indicator === obj.indicator) {\r\n\t\t\tvar subs = new Substitution();\r\n\t\t\tfor(var i = 0; i < this.args.length; i++) {\r\n\t\t\t\tvar mgu = pl.unify(this.args[i].apply(subs), obj.args[i].apply(subs), occurs_check);\r\n\t\t\t\tif(mgu === null)\r\n\t\t\t\t\treturn null;\r\n\t\t\t\tfor(var x in mgu.links)\r\n\t\t\t\t\tsubs.links[x] = mgu.links[x];\r\n\t\t\t\tsubs = subs.apply(mgu);\r\n\t\t\t}\r\n\t\t\treturn subs;\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\t// Streams\r\n\tStream.prototype.unify = function(obj, _occurs_check) {\r\n\t\tif(pl.type.is_stream(obj) && this.id === obj.id)\r\n\t\t\treturn new Substitution();\r\n\t\treturn null;\r\n\t};\r\n\r\n\tStream.prototype.compare = function(obj) {\r\n\t\tif(this.id < obj.id)\r\n\t\t\treturn -1;\r\n\t\telse if(this.id === obj.id)\r\n\t\t\treturn 0;\r\n\t\telse\r\n\t\t\treturn 1;\r\n\t};\r\n\t\r\n\t\r\n\r\n\t// PROLOG OBJECTS TO STRING\r\n\t\r\n\t// Variables\r\n\tVar.prototype.toString = function( options ) {\r\n\t\toptions = options === undefined ? {} : options;\r\n\t\tif(options.variable_names) {\r\n\t\t\tvar pointer = options.variable_names;\r\n\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"./2\") {\r\n\t\t\t\tvar head = pointer.args[0];\r\n\t\t\t\tif(pl.type.is_term(head) && head.indicator === \"=/2\"\r\n\t\t\t\t&& pl.type.is_variable(head.args[1]) && head.args[1].id === this.id\r\n\t\t\t\t&& pl.type.is_atom(head.args[0]))\r\n\t\t\t\t\treturn head.args[0].id;\r\n\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.id;\r\n\t};\r\n\t\r\n\t// Numbers\r\n\tNum.prototype.toString = function( _ ) {\r\n\t\tvar str = this.value.toString();\r\n\t\tvar e = str.indexOf(\"e\");\r\n\t\tif(e !== -1) {\r\n\t\t\tif(str.indexOf(\".\") !== -1)\r\n\t\t\t\treturn str;\r\n\t\t\telse\r\n\t\t\t\treturn str.replace(\"e\", \".0e\");\r\n\t\t}\r\n\t\treturn this.is_float && indexOf(str, \".\") === -1 ? this.value + \".0\" : str;\r\n\t};\r\n\t\r\n\t// Terms\r\n\tTerm.prototype.toString = function( options, priority, from ) {\r\n\t\toptions = !options ? {} : options;\r\n\t\toptions.quoted = options.quoted === undefined ? false: options.quoted;\r\n\t\toptions.ignore_ops = options.ignore_ops === undefined ? false : options.ignore_ops;\r\n\t\toptions.numbervars = options.numbervars === undefined ? false : options.numbervars;\r\n\t\toptions.variable_names = options.variable_names === undefined ? false : options.variable_names;\r\n\t\tpriority = priority === undefined ? {priority: 1200, class: \"\", indicator: \"\"} : priority;\r\n\t\tfrom = from === undefined ? \"\" : from;\r\n\t\tvar arg_priority = {priority: 999, class: \"\", indicator: \"\"};\r\n\t\tif( options.numbervars && this.indicator === \"$VAR/1\" && pl.type.is_integer( this.args[0] ) && this.args[0].value >= 0 ) {\r\n\t\t\tvar i = this.args[0].value;\r\n\t\t\tvar number = Math.floor( i/26 );\r\n\t\t\tvar letter =  i % 26;\r\n\t\t\treturn \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"[letter] + (number !== 0 ? number : \"\");\r\n\t\t}\r\n\t\tswitch( this.indicator ){\r\n\t\t\tcase \"[]/0\":\r\n\t\t\tcase \"{}/0\":\r\n\t\t\tcase \"!/0\":\r\n\t\t\t\treturn this.id;\r\n\t\t\tcase \"{}/1\":\r\n\t\t\t\tif( options.ignore_ops === false ) {\r\n\t\t\t\t\treturn \"{\" + this.args[0].toString( options ) + \"}\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"{}(\" + this.args[0].toString( options ) + \")\";\r\n\t\t\t\t}\r\n\t\t\tcase \"./2\":\r\n\t\t\t\tif( options.ignore_ops === false ) {\r\n\t\t\t\t\tvar list = \"[\" + this.args[0].toString( options, arg_priority );\r\n\t\t\t\t\tvar pointer = this.args[1];\r\n\t\t\t\t\twhile( pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\t\tlist += \",\" + pointer.args[0].toString( options, arg_priority );\r\n\t\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( pointer.indicator !== \"[]/0\" ) {\r\n\t\t\t\t\t\tlist += \"|\" + pointer.toString( options, arg_priority );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist += \"]\";\r\n\t\t\t\t\treturn list;\r\n\t\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\tvar id = this.id;\r\n\t\t\t\tvar operator = options.session ? options.session.lookup_operator( this.id, this.args.length ) : null;\r\n\t\t\t\tif( options.session === undefined || options.ignore_ops || operator === null ) {\r\n\t\t\t\t\tif( options.quoted && (! /^(!|[a-z][0-9a-zA-Z_]*|[#\\$\\&\\*\\+\\-\\.\\/\\:\\<\\=\\>\\?\\@\\^\\~\\\\]+)$/.test( id ) && id !== \"{}\" && id !== \"[]\" || indexOf([\".\",\",\",\";\"], id) !== -1 || id.substring(0,2) === \"/*\") )\r\n\t\t\t\t\t\tid = \"'\" + redoEscape(id) + \"'\";\r\n\t\t\t\t\tif( this.args.length === 0 && is_graphic_token(this.id) && priority.indicator !== \"\")\r\n\t\t\t\t\t\treturn \"(\" + id + \")\";\r\n\t\t\t\t\treturn id + (this.args.length > 0 ? \"(\" + map( this.args,\r\n\t\t\t\t\t\tfunction(x) { return x.toString(options, arg_priority); }\r\n\t\t\t\t\t).join(\",\") + \")\" : \"\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar priority_op = parseInt(operator.priority);\r\n\t\t\t\t\tvar priority_arg = parseInt(priority.priority);\r\n\t\t\t\t\tvar cond = priority_op > priority_arg || priority_op === priority_arg && (\r\n\t\t\t\t\t\toperator.class === \"xfx\" ||\r\n\t\t\t\t\t\toperator.class === \"xfy\" && this.indicator !== priority.indicator ||\r\n\t\t\t\t\t\toperator.class === \"yfx\" && this.indicator !== priority.indicator ||\r\n\t\t\t\t\t\tthis.indicator === priority.indicator && operator.class === \"yfx\" && from === \"right\" ||\r\n\t\t\t\t\t\tthis.indicator === priority.indicator && operator.class === \"xfy\" && from === \"left\" ||\r\n\t\t\t\t\t\tthis.indicator === priority.indicator && operator.class === \"xf\" && from === \"left\" ||\r\n\t\t\t\t\t\tthis.indicator === priority.indicator && operator.class === \"fx\" && from === \"right\");\r\n\t\t\t\t\toperator.indicator = this.indicator;\r\n\t\t\t\t\tvar lpar = cond ? \"(\" : \"\";\r\n\t\t\t\t\tvar rpar = cond ? \")\" : \"\";\r\n\t\t\t\t\tvar space = !(is_graphic_token(this.id) || this.id === \",\" || this.id === \";\")\r\n\t\t\t\t\t\t|| operator.class.length === 2\r\n\t\t\t\t\t\t|| operator.class.length === 3 && pl.type.is_number(this.args[1]) && this.args[1].value < 0 ? \" \" : \"\";\r\n\t\t\t\t\tif( this.args.length === 0 ) {\r\n\t\t\t\t\t\treturn lpar + this.id + rpar;\r\n\t\t\t\t\t} else if( [\"fy\",\"fx\"].indexOf( operator.class) !== -1 ) {\r\n\t\t\t\t\t\treturn lpar + id + space + this.args[0].toString( options, operator, \"right\" ) + rpar;\r\n\t\t\t\t\t} else if( [\"yf\",\"xf\"].indexOf( operator.class) !== -1 ) {\r\n\t\t\t\t\t\treturn lpar + this.args[0].toString( options, operator, \"left\" ) + space + id + rpar;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn lpar + this.args[0].toString( options, operator, \"left\" ) + space + this.id + space + this.args[1].toString( options, operator, \"right\" ) +  rpar;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Streams\r\n\tStream.prototype.toString = function( _ ) {\r\n\t\treturn \"<stream>(\" + this.id + \")\";\r\n\t};\r\n\t\r\n\t// Substitutions\r\n\tSubstitution.prototype.toString = function( options ) {\r\n\t\tvar str = \"{\";\r\n\t\tfor( var link in this.links ) {\r\n\t\t\tif(!this.links.hasOwnProperty(link)) continue;\r\n\t\t\tif( str !== \"{\" ) {\r\n\t\t\t\tstr += \", \";\r\n\t\t\t}\r\n\t\t\tstr += link + \"/\" + this.links[link].toString( options );\r\n\t\t}\r\n\t\tstr += \"}\";\r\n\t\treturn str;\r\n\t};\r\n\t\r\n\t// States\r\n\tState.prototype.toString = function( options ) {\r\n\t\tif( this.goal === null ) {\r\n\t\t\treturn \"<\" + this.substitution.toString( options ) + \">\";\r\n\t\t} else {\r\n\t\t\treturn \"<\" + this.goal.toString( options ) + \", \" + this.substitution.toString( options ) + \">\";\r\n\t\t}\r\n\t};\r\n\t\r\n\t// Rules\r\n\tRule.prototype.toString = function( options ) {\r\n\t\tif( !this.body ) {\r\n\t\t\treturn this.head.toString( options ) + \".\";\r\n\t\t} else {\r\n\t\t\treturn this.head.toString( options, 1200, \"left\" ) + \" :- \" + this.body.toString( options, 1200, \"right\" ) + \".\";\r\n\t\t}\r\n\t};\r\n\t\r\n\t// Session\r\n\tSession.prototype.toString = function( options ) {\r\n\t\tvar str = \"\";\r\n\t\tfor(var prop in this.modules) {\r\n\t\t\tif(this.modules.hasOwnProperty(prop) && this.modules[prop].is_library)\r\n\t\t\t\tstr += \":- use_module(library(\" + this.modules[prop] + \")).\\n\";\r\n\t\t}\r\n\t\tstr += \"\\n\";\r\n\t\tfor(var key in this.modules.user.rules) {\r\n\t\t\tif(!this.modules.user.rules.hasOwnProperty(key)) continue;\r\n\t\t\tfor(i = 0; i < this.modules.user.rules[key].length; i++) {\r\n\t\t\t\tstr += this.modules.user.rules[key][i].toString(options);\r\n\t\t\t\tstr += \"\\n\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn str;\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// CLONE PROLOG OBJECTS\r\n\t\r\n\t// Variables\r\n\tVar.prototype.clone = function() {\r\n\t\treturn new Var( this.id );\r\n\t};\r\n\t\r\n\t// Numbers\r\n\tNum.prototype.clone = function() {\r\n\t\treturn new Num( this.value, this.is_float );\r\n\t};\r\n\t\r\n\t// Terms\r\n\tTerm.prototype.clone = function() {\r\n\t\tvar term = new Term( this.id, map( this.args, function( arg ) {\r\n\t\t\treturn arg.clone();\r\n\t\t} ) );\r\n\t\tif(this.definition_module)\r\n\t\t\tterm.definition_module = this.definition_module;\r\n\t\treturn term;\r\n\t};\r\n\r\n\t// Streams\r\n\tStream.prototype.clone = function() {\r\n\t\treturn new Stream( this.stream, this.mode, this.alias, this.type, this.reposition, this.eof_action );\r\n\t};\r\n\t\r\n\t// Substitutions\r\n\tSubstitution.prototype.clone = function() {\r\n\t\tvar links = {};\r\n\t\tvar attrs = {};\r\n\t\tfor( var link in this.links ) {\r\n\t\t\tif(!this.links.hasOwnProperty(link)) continue;\r\n\t\t\tlinks[link] = this.links[link].clone();\r\n\t\t}\r\n\t\tfor( var attr in this.attrs ) {\r\n\t\t\tif(!this.attrs.hasOwnProperty(attrs)) continue;\r\n\t\t\tattrs[attr] = {};\r\n\t\t\tfor( var m in this.attrs[attr] ) {\r\n\t\t\t\tif(!this.attrs[attr].hasOwnProperty(m)) continue;\r\n\t\t\t\tattrs[attr][m] = this.attrs[attr][m].clone();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new Substitution( links, attrs );\r\n\t};\r\n\t\r\n\t// States\r\n\tState.prototype.clone = function() {\r\n\t\treturn new State( this.goal.clone(), this.substitution.clone(), this.parent );\r\n\t};\r\n\t\r\n\t// Rules\r\n\tRule.prototype.clone = function() {\r\n\t\treturn new Rule( this.head.clone(), this.body !== null ? this.body.clone() : null );\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// COMPARE PROLOG OBJECTS\r\n\t\r\n\t// Variables\r\n\tVar.prototype.equals = function( obj ) {\r\n\t\treturn pl.type.is_variable( obj ) && this.id === obj.id;\r\n\t};\r\n\t\r\n\t// Numbers\r\n\tNum.prototype.equals = function( obj ) {\r\n\t\treturn pl.type.is_number( obj ) && this.value === obj.value && this.is_float === obj.is_float;\r\n\t};\r\n\t\r\n\t// Terms\r\n\tTerm.prototype.equals = function( obj ) {\r\n\t\tif( !pl.type.is_term( obj ) || this.indicator !== obj.indicator ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfor( var i = 0; i < this.args.length; i++ ) {\r\n\t\t\tif( !this.args[i].equals( obj.args[i] ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t// Streams\r\n\tStream.prototype.equals = function( obj ) {\r\n\t\treturn pl.type.is_stream( obj ) && this.id === obj.id;\r\n\t};\r\n\t\r\n\t// Substitutions\r\n\tSubstitution.prototype.equals = function( obj ) {\r\n\tvar link;\r\n\t\tif( !pl.type.is_substitution( obj ) ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfor( link in this.links ) {\r\n\t\t\tif(!this.links.hasOwnProperty(link)) continue;\r\n\t\t\tif( !obj.links[link] || !this.links[link].equals( obj.links[link] ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor( link in obj.links ) {\r\n\t\t\tif(!obj.links.hasOwnProperty(link)) continue;\r\n\t\t\tif( !this.links[link] ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\t\r\n\t// States\r\n\tState.prototype.equals = function( obj ) {\r\n\t\treturn pl.type.is_state( obj ) && this.goal.equals( obj.goal ) && this.substitution.equals( obj.substitution ) && this.parent === obj.parent;\r\n\t};\r\n\t\r\n\t// Rules\r\n\tRule.prototype.equals = function( obj ) {\r\n\t\treturn pl.type.is_rule( obj ) && this.head.equals( obj.head ) && (this.body === null && obj.body === null || this.body !== null && this.body.equals( obj.body ));\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// RENAME VARIABLES OF PROLOG OBJECTS\r\n\t\r\n\t// Variables\r\n\tVar.prototype.rename = function( thread ) {\r\n\t\treturn thread.get_free_variable( this );\r\n\t};\r\n\t\r\n\t// Numbers\r\n\tNum.prototype.rename = function( _ ) {\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t// Terms\r\n\tTerm.prototype.rename = function( thread ) {\r\n\t\t// ground\r\n\t\tif(this.ground)\r\n\t\t\treturn new Term(this.id, this.args);\r\n\t\t// list\r\n\t\tif(this.indicator === \"./2\") {\r\n\t\t\tvar arr = [];\r\n\t\t\tvar pointer = this;\r\n\t\t\twhile(pointer.indicator === \"./2\" && !pointer.ground) {\r\n\t\t\t\tvar app = pointer.args[0].rename(thread);\r\n\t\t\t\tarr.push(app);\r\n\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t}\r\n\t\t\tvar list = pointer.rename(thread);\r\n\t\t\tfor(var i = arr.length-1; i >= 0; i--)\r\n\t\t\t\tlist = new Term(\".\", [arr[i], list]);\r\n\t\t\treturn list;\r\n\t\t}\r\n\t\t// compound term\r\n\t\tvar args = [];\r\n\t\tfor(var i = 0; i < this.args.length; i++) {\r\n\t\t\tvar app = this.args[i].rename(thread);\r\n\t\t\targs.push(app);\r\n\t\t}\r\n\t\treturn new Term(this.id, args);\r\n\t};\r\n\r\n\t// Streams\r\n\tStream.prototype.rename = function( thread ) {\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t// Rules\r\n\tRule.prototype.rename = function( thread ) {\r\n\t\treturn new Rule( this.head.rename( thread ), this.body !== null ? this.body.rename( thread ) : null );\r\n\t};\r\n\r\n\r\n\r\n\t// CHECK IF RENAME\r\n\r\n\t// Variables\r\n\tVar.prototype.is_rename = function(obj, links) {\r\n\t\tlinks = links || {};\r\n\t\tif(!pl.type.is_variable(obj)\r\n\t\t|| links.hasOwnProperty(this.id) && links[this.id] !== obj.id\r\n\t\t|| links.hasOwnProperty(obj.id) && links[obj.id] !== this.id)\r\n\t\t\treturn false;\r\n\t\tlinks[this.id] = obj.id;\r\n\t\tlinks[obj.id] = this.id;\r\n\t\treturn true;\r\n\t};\r\n\t\r\n\t// Numbers\r\n\tNum.prototype.is_rename = function(obj, _links) {\r\n\t\treturn this.equals(obj);\r\n\t};\r\n\t\r\n\t// Terms\r\n\tTerm.prototype.is_rename = function(obj, links) {\r\n\t\tlinks = links || {};\r\n\t\tif(!pl.type.is_term(obj) || this.indicator !== obj.indicator)\r\n\t\t\treturn false;\r\n\t\tfor(var i = 0; i < this.args.length; i++) {\r\n\t\t\tif(!pl.is_rename(this.args[i], obj.args[i], links))\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t// Streams\r\n\tStream.prototype.is_rename = function(obj, _links) {\r\n\t\treturn this.equals(obj);\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// GET ID OF VARIABLES FROM PROLOG OBJECTS\r\n\t\r\n\t// Variables\r\n\tVar.prototype.variables = function() {\r\n\t\treturn [this.id];\r\n\t};\r\n\t\r\n\t// Numbers\r\n\tNum.prototype.variables = function() {\r\n\t\treturn [];\r\n\t};\r\n\t\r\n\t// Terms\r\n\tTerm.prototype.variables = function() {\r\n\t\tif(this.ground)\r\n\t\t\treturn [];\r\n\t\treturn [].concat.apply( [], map( this.args, function( arg ) {\r\n\t\t\treturn arg.variables();\r\n\t\t} ) );\r\n\t};\r\n\r\n\t// Streams\r\n\tStream.prototype.variables = function() {\r\n\t\treturn [];\r\n\t};\r\n\t\r\n\t// Rules\r\n\tRule.prototype.variables = function() {\r\n\t\tif( this.body === null ) {\r\n\t\t\treturn this.head.variables();\r\n\t\t} else {\r\n\t\t\treturn this.head.variables().concat( this.body.variables() );\r\n\t\t}\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// APPLY SUBSTITUTIONS TO PROLOG OBJECTS\r\n\t\r\n\t// Variables\r\n\tVar.prototype.apply = function( subs ) {\r\n\t\tif( subs.lookup( this.id ) ) {\r\n\t\t\treturn subs.lookup( this.id );\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t// Numbers\r\n\tNum.prototype.apply = function( _ ) {\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t// Terms\r\n\tTerm.prototype.apply = function( subs ) {\r\n\t\t// ground atom\r\n\t\tif(this.ground)\r\n\t\t\treturn this;\r\n\t\t// list\r\n\t\tif(this.indicator === \"./2\") {\r\n\t\t\tvar arr = [];\r\n\t\t\tvar pointer = this;\r\n\t\t\twhile(pointer.indicator === \"./2\" && !pointer.ground) {\r\n\t\t\t\tvar app = pointer.args[0].apply(subs);\r\n\t\t\t\tarr.push(app);\r\n\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t}\r\n\t\t\tvar list = pointer.apply(subs);\r\n\t\t\tfor(var i = arr.length-1; i >= 0; i--)\r\n\t\t\t\tlist = new Term(\".\", [arr[i], list]);\r\n\t\t\treturn list;\r\n\t\t}\r\n\t\t// compound term\r\n\t\tvar args = [];\r\n\t\tfor(var i = 0; i < this.args.length; i++) {\r\n\t\t\tvar app = this.args[i].apply(subs);\r\n\t\t\targs.push(app);\r\n\t\t}\r\n\t\treturn new Term(this.id, args, this.ref);\r\n\t};\r\n\r\n\t// Streams\r\n\tStream.prototype.apply = function( _ ) {\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t// Rules\r\n\tRule.prototype.apply = function( subs ) {\r\n\t\treturn new Rule( this.head.apply( subs ), this.body !== null ? this.body.apply( subs ) : null );\r\n\t};\r\n\t\r\n\t// Substitutions\r\n\tSubstitution.prototype.apply = function( subs ) {\r\n\t\tvar link, links = {}, attr, attrs = {}, m;\r\n\t\tfor( link in this.links ) {\r\n\t\t\tif(!this.links.hasOwnProperty(link)) continue;\r\n\t\t\tlinks[link] = this.links[link].apply(subs);\r\n\t\t}\r\n\t\tfor( attr in this.attrs ) {\r\n\t\t\tif(!this.attrs.hasOwnProperty(attr)) continue;\r\n\t\t\tattrs[attr] = {};\r\n\t\t\tfor( m in this.attrs[attr] ) {\r\n\t\t\t\tif(!this.attrs[attr].hasOwnProperty(m)) continue;\r\n\t\t\t\tattrs[attr][m] = this.attrs[attr][m].apply(subs);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new Substitution( links, attrs );\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// SELECTION FUNCTION\r\n\t\r\n\t// Select term\r\n\tTerm.prototype.select = function() {\r\n\t\tvar pointer = this;\r\n\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \",/2\")\r\n\t\t\tpointer = pointer.args[0];\r\n\t\treturn pointer;\r\n\t};\r\n\t\r\n\t// Replace term\r\n\tTerm.prototype.replace = function( expr ) {\r\n\t\tif( this.indicator === \",/2\" ) {\r\n\t\t\tif( this.args[0].indicator === \",/2\" ) {\r\n\t\t\t\treturn new Term( \",\", [this.args[0].replace( expr ), this.args[1]] );\r\n\t\t\t} else {\r\n\t\t\t\treturn expr === null ? this.args[1] : new Term( \",\", [expr, this.args[1]] );\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn expr;\r\n\t\t}\r\n\t};\r\n\r\n\t// Search term\r\n\tTerm.prototype.search = function( expr ) {\r\n\t\tif(this == expr || this.ref === expr.ref)\r\n\t\t\treturn true;\r\n\t\tfor( var i = 0; i < this.args.length; i++ )\r\n\t\t\tif( pl.type.is_term( this.args[i] ) && this.args[i].search( expr ) )\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// PROLOG SESSIONS AND THREADS\r\n\r\n\t// Push to a global stack\r\n\tSession.prototype.push_global_stack = function(stack, value) {\r\n\t\treturn this.thread.push_global_stack(stack, value);\r\n\t};\r\n\tThread.prototype.push_global_stack = function(stack, value) {\r\n\t\tif(!this.__stacks.hasOwnProperty(stack))\r\n\t\t\tthis.__stacks[stack] = [];\r\n\t\tthis.__stacks[stack].push(value);\r\n\t};\r\n\r\n\t// Pop all from a global stack\r\n\tSession.prototype.flush_global_stack = function(stack, tail) {\r\n\t\treturn this.thread.push_global_stack(stack, tail);\r\n\t};\r\n\tThread.prototype.flush_global_stack = function(stack, tail) {\r\n\t\tvar list = tail || new Term(\"[]\", []);\r\n\t\tif(this.__stacks.hasOwnProperty(stack)) {\r\n\t\t\twhile(this.__stacks[stack].length > 0)\r\n\t\t\t\tlist = new Term(\".\", [this.__stacks[stack].pop(), list]);\r\n\t\t\tdelete this.__stacks[stack];\r\n\t\t}\r\n\t\treturn list;\r\n\t};\r\n\r\n\t// Set max inferences\r\n\tSession.prototype.setMaxInferences = function(max) {\r\n\t\tthis.limit = typeof max === \"number\" && max > 0 ? max : null;\r\n\t};\r\n\tThread.prototype.setMaxInferences = function(max) {\r\n\t\tthis.session.setMaxInferences(max);\r\n\t\tthis.current_limit = this.session.limit;\r\n\t\tthis.has_limit = this.session.limit !== null;\r\n\t};\r\n\r\n\t// Format answer\r\n\tSession.prototype.format_answer = function(answer, options) {\r\n\t\treturn this.thread.format_answer(answer, options);\r\n\t};\r\n\tThread.prototype.format_answer = function(answer, options) {\r\n\t\treturn pl.format_answer(answer, this, options);\r\n\t};\r\n\r\n\t// Get current input\r\n\tSession.prototype.get_current_input = function() {\r\n\t\treturn this.current_input;\r\n\t};\r\n\tThread.prototype.get_current_input = function() {\r\n\t\treturn this.session.get_current_input();\r\n\t};\r\n\r\n\t// Get current output\r\n\tSession.prototype.get_current_output = function() {\r\n\t\treturn this.current_output;\r\n\t};\r\n\tThread.prototype.get_current_output = function() {\r\n\t\treturn this.session.get_current_output();\r\n\t};\r\n\r\n\t// Set current input\r\n\tSession.prototype.set_current_input = function( input ) {\r\n\t\tthis.current_input = input;\r\n\t};\r\n\tThread.prototype.set_current_input = function( input ) {\r\n\t\treturn this.session.set_current_input( input );\r\n\t};\r\n\r\n\t// Set current output\r\n\tSession.prototype.set_current_output = function( output ) {\r\n\t\tthis.current_output = output;\r\n\t};\r\n\tThread.prototype.set_current_output = function( output ) {\r\n\t\treturn this.session.set_current_output( output);\r\n\t};\r\n\r\n\t// Get stream by alias\r\n\tSession.prototype.get_stream_by_alias = function( alias ) {\r\n\t\treturn this.streams[alias];\r\n\t};\r\n\tThread.prototype.get_stream_by_alias = function( alias ) {\r\n\t\treturn this.session.get_stream_by_alias( alias );\r\n\t};\r\n\r\n\t// Open file\r\n\tSession.prototype.file_system_open = function( path, type, mode ) {\r\n\t\tif(this.get_flag(\"nodejs\").indicator === \"false/0\")\r\n\t\t\tpath = this.absolute_file_name(path);\r\n\t\treturn this.file_system.open( path, type, mode );\r\n\t};\r\n\tThread.prototype.file_system_open = function( path, type, mode ) {\r\n\t\treturn this.session.file_system_open( path, type, mode );\r\n\t};\r\n\r\n\t// Absolute file name\r\n\tSession.prototype.absolute_file_name = function(filename) {\r\n\t\tvar absolute;\r\n\t\t// node.js\r\n\t\tif(this.get_flag(\"nodejs\").indicator === \"true/0\") {\r\n\t\t\tvar path = require(\"path\");\r\n\t\t\tabsolute = filename;\r\n\t\t\tfor(var prop in process.env) {\r\n\t\t\t\tif(!process.env.hasOwnProperty(prop))\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tabsolute = absolute.replace(new RegExp(\"\\\\$\" + prop, \"g\"), process.env[prop]);\r\n\t\t\t}\r\n\t\t\treturn path.resolve(absolute);\r\n\t\t// browser\r\n\t\t} else {\r\n\t\t\tvar cwd = this.working_directory;\r\n\t\t\tif(filename[0] === \"/\")\r\n\t\t\t\tabsolute = filename;\r\n\t\t\telse\r\n\t\t\t\tabsolute = cwd + (cwd[cwd.length-1] === \"/\" ? filename : \"/\" + filename);\r\n\t\t\tabsolute = absolute.replace(/\\/\\.\\//g, \"/\");\r\n\t\t\tvar dirs = absolute.split(\"/\");\r\n\t\t\tvar dirs2 = [];\r\n\t\t\tfor(var i = 0; i < dirs.length; i++) {\r\n\t\t\t\tif(dirs[i] !== \"..\") {\r\n\t\t\t\t\tdirs2.push(dirs[i]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(dirs2.length !== 0)\r\n\t\t\t\t\t\tdirs2.pop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tabsolute = dirs2.join(\"/\").replace(/\\/\\.$/, \"/\");\r\n\t\t}\r\n\t\treturn absolute;\r\n\t};\r\n\tThread.prototype.absolute_file_name = function(path, cwd) {\r\n\t\treturn this.session.absolute_file_name(path, cwd);\r\n\t};\r\n\r\n\t// Get conversion of the char\r\n\tSession.prototype.get_char_conversion = function( char ) {\r\n\t\treturn this.__char_conversion[char] || char;\r\n\t};\r\n\tThread.prototype.get_char_conversion = function( char ) {\r\n\t\treturn this.session.get_char_conversion( char );\r\n\t};\r\n\t\r\n\t// Parse an expression\r\n\tSession.prototype.parse = function( string ) {\r\n\t\treturn this.thread.parse( string );\r\n\t};\r\n\tThread.prototype.parse = function( string ) {\r\n\t\tvar tokenizer = new Tokenizer( this );\r\n\t\ttokenizer.new_text( string );\r\n\t\tvar tokens = tokenizer.get_tokens();\r\n\t\tif( tokens === null )\r\n\t\t\treturn false;\r\n\t\tvar expr = parseExpr(this, tokens, 0, this.__get_max_priority(), false);\r\n\t\tif( expr.len !== tokens.length )\r\n\t\t\treturn false;\r\n\t\treturn { value: expr.value, expr: expr, tokens: tokens };\r\n\t};\r\n\t\r\n\t// Get flag value\r\n\tSession.prototype.get_flag = function( flag ) {\r\n\t\treturn this.flag[flag];\r\n\t};\r\n\tThread.prototype.get_flag = function( flag ) {\r\n\t\treturn this.session.get_flag( flag );\r\n\t};\r\n\r\n\t// Add a rule\r\n\tSession.prototype.add_rule = function(rule, options) {\r\n\t\treturn this.thread.add_rule(rule, options);\r\n\t};\r\n\tThread.prototype.add_rule = function(rule, options) {\r\n\t\toptions = options ? options : {};\r\n\t\toptions.from = options.from ? options.from : \"$tau-js\";\r\n\t\tvar module_id, get_module;\r\n\t\tif(pl.type.is_term(rule.head) && rule.head.indicator === \":/2\") {\r\n\t\t\tif(!pl.type.is_atom(rule.head.args[0])) {\r\n\t\t\t\tthis.throw_warning(pl.error.type(\"module\", rule.head.args[0], \"top_level/0\"));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tmodule_id = rule.head.args[0].id;\r\n\t\t\trule.head = rule.head.args[1];\r\n\t\t}\r\n\t\tif(module_id) {\r\n\t\t\tget_module = this.session.modules[module_id];\r\n\t\t\tif(!pl.type.is_module(get_module)) {\r\n\t\t\t\tget_module = new Module(module_id, {}, \"all\", {session: this.session});\r\n\t\t\t\tthis.session.modules[module_id] = get_module;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tget_module = this.session.modules[options.context_module];\r\n\t\t}\r\n\t\tget_module.src_predicates[rule.head.indicator] = options.from;\r\n\t\tif(!get_module.rules.hasOwnProperty(rule.head.indicator)) {\r\n\t\t\tget_module.rules[rule.head.indicator] = [];\r\n\t\t}\r\n\t\tget_module.rules[rule.head.indicator].push(rule);\r\n\t\tif(!get_module.public_predicates.hasOwnProperty(rule.head.indicator))\r\n\t\t\tget_module.public_predicates[rule.head.indicator] = false;\r\n\t\t// update term indexing\r\n\t\tget_module.add_index_predicate(rule);\r\n\t\treturn true;\r\n\t};\r\n\r\n\t// Run a directive\r\n\tSession.prototype.run_directive = function(directive, options) {\r\n\t\treturn this.thread.run_directive(directive, options);\r\n\t};\r\n\tThread.prototype.run_directive = function(directive, options) {\r\n\t\tif(pl.type.is_directive(directive)) {\r\n\t\t\tif(pl.directive[directive.indicator])\r\n\t\t\t\treturn pl.directive[directive.indicator](this, directive, options);\r\n\t\t\telse\r\n\t\t\t\treturn pl.directive[directive.id + \"/*\"](this, directive, options);\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\t\r\n\t// Get maximum priority of the operators\r\n\tSession.prototype.__get_max_priority = function() {\r\n\t\treturn \"1200\";\r\n\t};\r\n\tThread.prototype.__get_max_priority = function() {\r\n\t\treturn this.session.__get_max_priority();\r\n\t};\r\n\t\r\n\t// Get next priority of the operators\r\n\tSession.prototype.__get_next_priority = function( priority ) {\r\n\t\tvar max = 0;\r\n\t\tpriority = parseInt( priority );\r\n\t\tfor( var key in this.__operators ) {\r\n\t\t\tif( !this.__operators.hasOwnProperty(key) ) continue;\r\n\t\t\tvar n = parseInt(key);\r\n\t\t\tif( n > max && n < priority ) max = n;\r\n\t\t}\r\n\t\treturn max.toString();\r\n\t};\r\n\tThread.prototype.__get_next_priority = function( priority ) {\r\n\t\treturn this.session.__get_next_priority( priority );\r\n\t};\r\n\t\r\n\t// Get classes of an operator\r\n\tSession.prototype.__lookup_operator_classes = function( priority, operator ) {\r\n\t\tif( this.__operators.hasOwnProperty( priority ) && this.__operators[priority][operator] instanceof Array ) {\r\n\t\t\treturn this.__operators[priority][operator]  || false;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\tThread.prototype.__lookup_operator_classes = function( priority, operator ) {\r\n\t\treturn this.session.__lookup_operator_classes( priority, operator );\r\n\t};\r\n\r\n\t// Get operator\r\n\tSession.prototype.lookup_operator = function( name, arity ) {\r\n\t\tfor(var p in this.__operators)\r\n\t\t\tif(this.__operators[p][name])\r\n\t\t\t\tfor(var i = 0; i < this.__operators[p][name].length; i++)\r\n\t\t\t\t\tif( this.__operators[p][name][i].length === arity+1 )\r\n\t\t\t\t\t\treturn {priority: p, class: this.__operators[p][name][i]};\r\n\t\treturn null;\r\n\t};\r\n\tThread.prototype.lookup_operator = function( name, arity ) {\r\n\t\treturn this.session.lookup_operator( name, arity );\r\n\t};\r\n\t\r\n\t// Throw a warning\r\n\tSession.prototype.throw_warning = function( warning ) {\r\n\t\tthis.thread.throw_warning( warning );\r\n\t};\r\n\tThread.prototype.throw_warning = function( warning ) {\r\n\t\tthis.warnings.push( warning );\r\n\t};\r\n\t\r\n\t// Get warnings\r\n\tSession.prototype.get_warnings = function() {\r\n\t\treturn this.thread.get_warnings();\r\n\t};\r\n\tThread.prototype.get_warnings = function() {\r\n\t\treturn this.warnings;\r\n\t};\r\n\r\n\t// Add a goal\r\n\tSession.prototype.add_goal = function( goal, unique ) {\r\n\t\tthis.thread.add_goal( goal, unique );\r\n\t};\r\n\tThread.prototype.add_goal = function( goal, unique, parent ) {\r\n\t\tparent = parent ? parent : null;\r\n\t\tif( unique === true )\r\n\t\t\tthis.points = [];\r\n\t\tvar vars = goal.variables();\r\n\t\tvar links = {};\r\n\t\tfor( var i = 0; i < vars.length; i++ )\r\n\t\t\tlinks[vars[i]] = new Var(vars[i]);\r\n\t\tthis.points.push( new State( goal, new Substitution(links), parent ) );\r\n\t};\r\n\r\n\t// Consult a program from a string\r\n\tSession.prototype.consult = function(program, options) {\r\n\t\treturn this.thread.consult(program, options);\r\n\t};\r\n\tThread.prototype.consult = function(program, options) {\r\n\t\tvar string = \"\", success = false;\r\n\t\tvar opts = {};\r\n\t\tvar callback = typeof options === \"function\" ? options : function(){};\r\n\t\toptions = options === undefined || typeof options === \"function\" ? {} : options;\r\n\t\topts.context_module = options.context_module === undefined ? \"user\" : options.context_module;\r\n\t\topts.text = options.text === undefined ? true : options.text;\r\n\t\topts.html = options.html === undefined ? true : options.html;\r\n\t\topts.url = options.url === undefined ? true : options.url;\r\n\t\topts.file = options.file === undefined ? true : options.file;\r\n\t\topts.script = options.script === undefined ? true : options.script;\r\n\t\topts.success = options.success === undefined ? callback : options.success;\r\n\t\topts.error = options.error === undefined ? callback : options.error;\r\n\t\t// string\r\n\t\tif(typeof program === \"string\") {\r\n\t\t\tstring = program;\r\n\t\t\t// script id\r\n\t\t\tif(opts.script && this.get_flag(\"nodejs\").indicator === \"false/0\" && program != \"\" && document.getElementById(string)) {\r\n\t\t\t\tvar script = document.getElementById(string);\r\n\t\t\t\tvar type = script.getAttribute(\"type\");\r\n\t\t\t\tif(type !== null && type.replace(/ /g, \"\").toLowerCase() === \"text/prolog\") {\r\n\t\t\t\t\tstring = script.text;\r\n\t\t\t\t\tsuccess = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// file (node.js)\r\n\t\t\tif(!success && opts.file && this.get_flag(\"nodejs\").indicator === \"true/0\") {\r\n\t\t\t\tvar fs = require(\"fs\");\r\n\t\t\t\tvar thread = this;\r\n\t\t\t\tfs.readFile(program, function(error, data) {\r\n\t\t\t\t\tif(error) {\r\n\t\t\t\t\t\topts.file = false;\r\n\t\t\t\t\t\tthread.consult(program, opts);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tparseProgram(thread, data.toString(), opts);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// http request\r\n\t\t\tif(!success && this.get_flag(\"nodejs\").indicator === \"false/0\" && opts.url && program !== \"\" && !(/\\s/.test(program))) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar xhttp = new XMLHttpRequest();\r\n\t\t\t\t\tvar thread = this;\r\n\t\t\t\t\txhttp.onreadystatechange = function() {\r\n\t\t\t\t\t\tif(this.readyState == 4) {\r\n\t\t\t\t\t\t\tif(this.status == 200) {\r\n\t\t\t\t\t\t\t\tstring = xhttp.responseText;\r\n\t\t\t\t\t\t\t\tsuccess = true;\r\n\t\t\t\t\t\t\t\tparseProgram(thread, string, opts);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\topts.url = false;\r\n\t\t\t\t\t\t\t\tthread.consult(program, opts);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\txhttp.open(\"GET\", program, true);\r\n\t\t\t\t\txhttp.send();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} catch(ex) {\r\n\t\t\t\t\topts.error(ex);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// text\r\n\t\t\tif(!success && opts.text) {\r\n\t\t\t\tsuccess = true;\r\n\t\t\t}\r\n\t\t// html\r\n\t\t} else if(opts.html && program.nodeName) {\r\n\t\t\tswitch(program.nodeName.toLowerCase()) {\r\n\t\t\t\tcase \"input\":\r\n\t\t\t\tcase \"textarea\":\r\n\t\t\t\t\tstring = program.value;\r\n\t\t\t\t\tsuccess = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tstring = program.innerHTML;\r\n\t\t\t\t\tsuccess = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\topts.error(pl.error.existence(\"source_sink\", new Term(string), \"top_level/0\"));\r\n\t\t}\r\n\t\tthis.warnings = [];\r\n\t\tparseProgram(this, string, opts);\r\n\t};\r\n\r\n\t// Query goal from a string (without ?-)\r\n\tSession.prototype.query = function(string, options) {\r\n\t\treturn this.thread.query(string, options);\r\n\t};\r\n\tThread.prototype.query = function(string, options) {\r\n\t\tthis.points = [];\r\n\t\tthis.debugger_states = [];\r\n\t\tthis.level = new Term(\"top_level\");\r\n\t\treturn parseQuery(this, string, options);\r\n\t};\r\n\t\r\n\t// Get first choice point\r\n\tSession.prototype.head_point = function() {\r\n\t\treturn this.thread.head_point();\r\n\t};\r\n\tThread.prototype.head_point = function() {\r\n\t\treturn this.points[this.points.length-1];\r\n\t};\r\n\t\r\n\t// Get free variable\r\n\tSession.prototype.get_free_variable = function( variable ) {\r\n\t\treturn this.thread.get_free_variable( variable );\r\n\t};\r\n\tThread.prototype.get_free_variable = function( variable ) {\r\n\t\tvar variables = [];\r\n\t\tif( variable.id === \"_\" || this.session.renamed_variables[variable.id] === undefined ) {\r\n\t\t\tthis.session.rename++;\r\n\t\t\tif( this.current_point )\r\n\t\t\t\tvariables = this.current_point.substitution.domain();\r\n\t\t\twhile( indexOf( variables, pl.format_variable( this.session.rename, variable.id ) ) !== -1 ) {\r\n\t\t\t\tthis.session.rename++;\r\n\t\t\t}\r\n\t\t\tif( variable.id === \"_\" ) {\r\n\t\t\t\treturn new Var( pl.format_variable( this.session.rename, variable.id ) );\r\n\t\t\t} else {\r\n\t\t\t\tthis.session.renamed_variables[variable.id] = pl.format_variable( this.session.rename, variable.id );\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new Var( this.session.renamed_variables[variable.id] );\r\n\t};\r\n\t\r\n\t// Get next free variable\r\n\tSession.prototype.next_free_variable = function() {\r\n\t\treturn this.thread.next_free_variable();\r\n\t};\r\n\tThread.prototype.next_free_variable = function() {\r\n\t\tthis.session.rename++;\r\n\t\tvar variables = [];\r\n\t\tif( this.current_point )\r\n\t\t\tvariables = this.current_point.substitution.domain();\r\n\t\twhile( indexOf( variables, pl.format_variable( this.session.rename ) ) !== -1 ) {\r\n\t\t\tthis.session.rename++;\r\n\t\t}\r\n\t\treturn new Var( pl.format_variable( this.session.rename ) );\r\n\t};\r\n\t\r\n\t// Check if a predicate is public\r\n\tSession.prototype.is_public_predicate = function(indicator, module_id) {\r\n\t\tmodule_id = module_id === undefined ? \"user\" : module_id;\r\n\t\treturn pl.type.is_module(this.modules[module_id]) && this.modules[module_id].is_public_predicate(indicator);\r\n\t};\r\n\tThread.prototype.is_public_predicate = function(indicator, module_id) {\r\n\t\treturn this.session.is_public_predicate(indicator, module_id);\r\n\t};\r\n\t\r\n\t// Check if a predicate is multifile\r\n\tSession.prototype.is_multifile_predicate = function(indicator, module_id) {\r\n\t\tmodule_id = module_id === undefined ? \"user\" : module_id;\r\n\t\treturn pl.type.is_module(this.modules[module_id]) && this.modules[module_id].is_multifile_predicate(indicator);\r\n\t};\r\n\tThread.prototype.is_multifile_predicate = function(indicator, module_id) {\r\n\t\treturn this.session.is_multifile_predicate(indicator, module_id);\r\n\t};\r\n\r\n\t// Check if a predicate is a meta-predicate\r\n\tSession.prototype.is_meta_predicate = function(indicator, module_id) {\r\n\t\tmodule_id = module_id === undefined ? \"user\" : module_id;\r\n\t\tif(pl.type.is_module(this.modules[module_id]))\r\n\t\t\treturn this.modules[module_id].is_meta_predicate(indicator);\r\n\t\treturn null;\r\n\t};\r\n\tThread.prototype.is_meta_predicate = function(indicator, module_id) {\r\n\t\treturn this.session.is_meta_predicate(indicator, module_id);\r\n\t};\r\n\t\r\n\t// Insert states at the beginning\r\n\tSession.prototype.prepend = function( states ) {\r\n\t\treturn this.thread.prepend( states );\r\n\t};\r\n\tThread.prototype.prepend = function( states ) {\r\n\t\tfor(var i = states.length-1; i >= 0; i--)\r\n\t\t\tthis.points.push( states[i] );\r\n\t};\r\n\t\r\n\t// Remove the selected term and prepend the current state\r\n\tSession.prototype.success = function( point, parent ) {\r\n\t\treturn this.thread.success( point, parent );\r\n\t}\r\n\tThread.prototype.success = function( point, parent ) {\r\n\t\tvar parent = typeof parent === \"undefined\" ? point : parent;\r\n\t\tthis.prepend( [new State( point.goal.replace( null ), point.substitution, parent ) ] );\r\n\t};\r\n\t\r\n\t// Throw error\r\n\tSession.prototype.throw_error = function(error) {\r\n\t\treturn this.thread.throw_error(error);\r\n\t};\r\n\tThread.prototype.throw_error = function(error) {\r\n\t\tif(pl.type.is_variable(error))\r\n\t\t\terror = pl.error.instantiation(this.level.indicator);\r\n\t\tvar state = new State(\r\n\t\t\tnew Term(\"throw\", [error]),\r\n\t\t\tnew Substitution(),\r\n\t\t\tnull\r\n\t\t);\r\n\t\tstate.error = true;\r\n\t\tthis.prepend([state]);\r\n\t};\r\n\t\r\n\t// Get the module of a predicate\r\n\tSession.prototype.lookup_module = function(atom, context_module) {\r\n\t\treturn this.thread.lookup_module(atom, context_module);\r\n\t}\r\n\tThread.prototype.lookup_module = function(atom, context_module) {\r\n\t\tvar get_module = this.session.modules[context_module];\r\n\t\tif(!pl.type.is_module(get_module))\r\n\t\t\tget_module = this.session.modules.user;\r\n\t\tif(get_module.rules.hasOwnProperty(atom.indicator) && (\r\n\t\t\tget_module.exports_predicate(atom.indicator) ||\r\n\t\t\tget_module.rules.hasOwnProperty(this.level.indicator) ||\r\n\t\t\tcontext_module === get_module.id))\r\n\t\t\t\treturn get_module;\r\n\t\tget_module.modules.system = pl.modules.system;\r\n\t\tget_module.modules.user = this.session.modules.user;\r\n\t\tfor(var prop in get_module.modules) {\r\n\t\t\tif(!this.session.modules.hasOwnProperty(prop))\r\n\t\t\t\tcontinue;\r\n\t\t\tvar get_module = this.session.modules[prop];\r\n\t\t\tif(get_module.rules.hasOwnProperty(atom.indicator) && (\r\n\t\t\t\tget_module.exports_predicate(atom.indicator) ||\r\n\t\t\t\tget_module.rules.hasOwnProperty(this.level.indicator) ||\r\n\t\t\t\tcontext_module === get_module.id))\r\n\t\t\t\t\treturn get_module;\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\t// Expand a meta-predicate\r\n\tSession.prototype.expand_meta_predicate = function(atom, definition_module, context_module) {\r\n\t\treturn this.thread.expand_meta_predicate(atom, definition_module, context_module);\r\n\t};\r\n\tThread.prototype.expand_meta_predicate = function(atom, definition_module, context_module) {\r\n\t\tvar get_module = this.session.modules[definition_module];\r\n\t\tif(!get_module)\r\n\t\t\treturn;\r\n\t\tvar meta = get_module.is_meta_predicate(atom.indicator);\r\n\t\tif(!meta)\r\n\t\t\treturn;\r\n\t\tfor(var i = 0; i < meta.args.length; i++) {\r\n\t\t\tif(pl.type.is_integer(meta.args[i]) || pl.type.is_atom(meta.args[i]) && indexOf([\":\"], meta.args[i].id) !== -1) {\r\n\t\t\t\tif(!pl.type.is_term(atom.args[i]) || atom.args[i].indicator !== \":/2\") {\r\n\t\t\t\t\tatom.args[i] = new Term(\":\", [new Term(context_module), atom.args[i]]);\r\n\t\t\t\t}\r\n\t\t\t} else if(pl.type.is_atom(meta.args[i]) && meta.args[i].id === \"^\") {\r\n\t\t\t\tvar pointer_last = atom;\r\n\t\t\t\tvar pointer_index = i;\r\n\t\t\t\tvar pointer = atom.args[i];\r\n\t\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"^/2\") {\r\n\t\t\t\t\tpointer_last = pointer;\r\n\t\t\t\t\tpointer_index = 1;\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif(!pl.type.is_term(pointer) || pointer.indicator !== \":/2\") {\r\n\t\t\t\t\tpointer_last.args[pointer_index] = new Term(\":\", [new Term(context_module), pointer]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t// Resolution step\r\n\tSession.prototype.step = function() {\r\n\t\treturn this.thread.step();\r\n\t}\r\n\tThread.prototype.step = function() {\r\n\t\tif(this.points.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar asyn = false;\r\n\t\tvar point = this.points.pop();\r\n\t\tthis.current_point = point;\r\n\t\tif(this.debugger)\r\n\t\t\tthis.debugger_states.push(point);\r\n\t\tvar atom = pl.type.is_term(point.goal) ? point.goal.select() : point.goal;\r\n\t\tif(pl.type.is_term(atom) && (atom.indicator !== \":/2\" || pl.type.is_term(atom.args[1]))) {\r\n\t\t\tvar context_module = null;\r\n\t\t\tvar states = [];\r\n\t\t\tif(atom !== null) {\r\n\t\t\t\tthis.total_steps++;\r\n\t\t\t\tvar level = point;\r\n\t\t\t\twhile(level.parent !== null && level.parent.goal.search(atom))\r\n\t\t\t\t\tlevel = level.parent;\r\n\t\t\t\tif(level.parent === null) {\r\n\t\t\t\t\tthis.level = new Term(\"top_level\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.level = level.parent.goal.select();\r\n\t\t\t\t\tif(this.level.indicator === \":/2\")\r\n\t\t\t\t\t\tthis.level = this.level.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif(pl.type.is_term(atom) && atom.indicator === \":/2\") {\r\n\t\t\t\t\tcontext_module = atom.args[0];\r\n\t\t\t\t\tatom = atom.args[1];\r\n\t\t\t\t\tif(!pl.type.is_atom(context_module)) {\r\n\t\t\t\t\t\tthis.throw_error(pl.error.type(\"module\", context_module, this.level.indicator));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontext_module = context_module.id;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(this.level.definition_module) {\r\n\t\t\t\t\t\tcontext_module = this.level.definition_module;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontext_module = \"user\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tatom.context_module = context_module;\r\n\t\t\t\tif(atom.indicator === \",/2\") {\r\n\t\t\t\t\tthis.prepend([new State(\r\n\t\t\t\t\t\tpoint.goal.replace(new Term(\",\", [\r\n\t\t\t\t\t\t\tnew Term(\":\", [new Term(context_module), atom.args[0]]),\r\n\t\t\t\t\t\t\tnew Term(\":\", [new Term(context_module), atom.args[1]])])),\r\n\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\tpoint\r\n\t\t\t\t\t)]);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.__call_indicator = atom.indicator;\r\n\t\t\t\tvar get_module = this.lookup_module(atom, context_module);\r\n\t\t\t\tatom.definition_module = pl.type.is_module(get_module) ? get_module.id : \"user\";\r\n\t\t\t\tthis.expand_meta_predicate(atom, atom.definition_module, context_module);\r\n\t\t\t\tvar clauses = null;\r\n\t\t\t\tif(get_module && atom.args.length > 0 && atom.args[0].index && get_module.indexed_clauses.hasOwnProperty(atom.indicator) && get_module.indexed_clauses[atom.indicator].hasOwnProperty(atom.args[0].index))\r\n\t\t\t\t\tclauses = get_module.indexed_clauses[atom.indicator][atom.args[0].index];\r\n\t\t\t\telse\r\n\t\t\t\t\tclauses = get_module === null ? null : get_module.rules[atom.indicator];\r\n\t\t\t\tif(clauses === null) {\r\n\t\t\t\t\tif(!this.session.modules.user.rules.hasOwnProperty(atom.indicator)) {\r\n\t\t\t\t\t\tif(this.get_flag(\"unknown\").id === \"error\") {\r\n\t\t\t\t\t\t\tthis.throw_error( pl.error.existence( \"procedure\", atom.indicator, this.level.indicator));\r\n\t\t\t\t\t\t} else if(this.get_flag(\"unknown\").id === \"warning\") {\r\n\t\t\t\t\t\t\tthis.throw_warning(\"unknown procedure \" + atom.indicator + \" (from \" + this.level.indicator + \")\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if(clauses instanceof Function) {\r\n\t\t\t\t\tasyn = clauses(this, point, atom);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Goal expansion\r\n\t\t\t\t\tif(this.__goal_expansion && atom.indicator === \"goal_expansion/2\")\r\n\t\t\t\t\t\tclauses = clauses.concat(pl.builtin.rules[\"goal_expansion/2\"]);\r\n\t\t\t\t\tfor(var i = 0; i < clauses.length; i++) {\r\n\t\t\t\t\t\tthis.session.renamed_variables = {};\r\n\t\t\t\t\t\tvar clause = clauses[i].rename(this);\r\n\t\t\t\t\t\tvar occurs_check = this.get_flag(\"occurs_check\").indicator === \"true/0\";\r\n\t\t\t\t\t\tvar mgu = pl.unify(atom, clause.head, occurs_check);\r\n\t\t\t\t\t\tif(mgu !== null) {\r\n\t\t\t\t\t\t\tvar state = new State();\r\n\t\t\t\t\t\t\tstate.goal = point.goal.replace(clause.body);\r\n\t\t\t\t\t\t\tif(state.goal !== null)\r\n\t\t\t\t\t\t\t\tstate.goal = state.goal.apply(mgu);\r\n\t\t\t\t\t\t\tstate.substitution = point.substitution.apply(mgu);\r\n\t\t\t\t\t\t\tstate.parent = point;\r\n\t\t\t\t\t\t\tstates.push(state);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.prepend(states);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar term = pl.type.is_term(atom) && atom.indicator === \":/2\" ? atom.args[1] : atom;\r\n\t\t\tif(pl.type.is_variable(term))\r\n\t\t\t\tthis.throw_error(pl.error.instantiation(this.level.indicator));\r\n\t\t\telse\r\n\t\t\t\tthis.throw_error(pl.error.type(\"callable\", term, this.level.indicator));\r\n\t\t}\r\n\t\treturn asyn;\r\n\t};\r\n\t\r\n\t// Find next computed answer\r\n\tSession.prototype.answer = function(options) {\r\n\t\treturn this.thread.answer(options);\r\n\t};\r\n\tThread.prototype.answer = function(options) {\r\n\t\tvar opts = {};\r\n\t\toptions = options || function() {};\r\n\t\tif(typeof options === \"function\") {\r\n\t\t\topts = {\r\n\t\t\t\tsuccess: options,\r\n\t\t\t\terror: options,\r\n\t\t\t\tfail: options,\r\n\t\t\t\tlimit: options\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\topts.success = options.success === undefined ? function() {} : options.success;\r\n\t\t\topts.error = options.error === undefined ? function() {} : options.error;\r\n\t\t\topts.fail = options.fail === undefined ? function() {} : options.fail;\r\n\t\t\topts.limit = options.limit === undefined ? function() {} : options.limit;\r\n\t\t}\r\n\t\tthis.__calls.push(opts);\r\n\t\tif( this.__calls.length > 1 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.again();\r\n\t};\r\n\t\r\n\t// Find all computed answers\r\n\tSession.prototype.answers = function( callback, max, after ) {\r\n\t\treturn this.thread.answers( callback, max, after );\r\n\t}\r\n\tThread.prototype.answers = function( callback, max, after ) {\r\n\t\tvar answers = max === undefined ? 1000 : max;\r\n\t\tvar thread = this;\r\n\t\tif( answers <= 0 ) {\r\n\t\t\tif(after)\r\n\t\t\t\tafter();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.answer( function( answer ) {\r\n\t\t\tcallback( answer );\r\n\t\t\tif( answer !== false ) {\r\n\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\tthread.answers( callback, answers-1, after );\r\n\t\t\t\t}, 0 );\r\n\t\t\t} else if(after) {\r\n\t\t\t\tafter();\r\n\t\t\t}\r\n\t\t} );\r\n\t};\r\n\r\n\t// Again finding next computed answer\r\n\tSession.prototype.again = function(reset_limit) {\r\n\t\treturn this.thread.again(reset_limit);\r\n\t};\r\n\tThread.prototype.again = function(reset_limit) {\r\n\t\twhile(this.__calls.length > 0) {\r\n\t\t\tthis.warnings = [];\r\n\t\t\tif(reset_limit !== false)\r\n\t\t\t\tthis.current_limit = this.session.limit;\r\n\t\t\twhile((!this.has_limit || this.current_limit > 0) && this.points.length > 0 && this.head_point().goal !== null && !pl.type.is_error_state(this.head_point())) {\r\n\t\t\t\tif(this.has_limit)\r\n\t\t\t\t\tthis.current_limit--;\r\n\t\t\t\tvar t0 = Date.now();\r\n\t\t\t\tvar asyn = this.step();\r\n\t\t\t\tvar t1 = Date.now();\r\n\t\t\t\tthis.cpu_time += t1-t0;\r\n\t\t\t\tif(asyn === true)\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar call = this.__calls.shift();\r\n\t\t\t// limit of inferences\r\n\t\t\tif(this.has_limit && this.current_limit <= 0) {\r\n\t\t\t\t(function(call) {\r\n\t\t\t\t\treturn setTimeout(function() {\r\n\t\t\t\t\t\tcall.limit(null);\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t})(call);\r\n\t\t\t// no answer\r\n\t\t\t} else if(this.points.length === 0) {\r\n\t\t\t\t(function(call) {\r\n\t\t\t\t\treturn setTimeout(function() {\r\n\t\t\t\t\t\tcall.fail(false);\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t})(call);\r\n\t\t\t// error\r\n\t\t\t} else if(pl.type.is_error(this.head_point().goal)) {\r\n\t\t\t\tvar error = this.format_error(this.points.pop());\r\n\t\t\t\tthis.points = [];\r\n\t\t\t\t(function(error, call) {\r\n\t\t\t\t\treturn setTimeout(function() {\r\n\t\t\t\t\t\tcall.error(error);\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t})(error, call);\r\n\t\t\t// computed answer\r\n\t\t\t} else {\r\n\t\t\t\tif(this.debugger)\r\n\t\t\t\t\tthis.debugger_states.push(this.head_point());\r\n\t\t\t\tvar answer = this.format_success(this.points.pop());\r\n\t\t\t\t(function(answer, call) {\r\n\t\t\t\t\treturn setTimeout(function() {\r\n\t\t\t\t\t\tcall.success(answer);\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t})(answer, call);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t// Unfolding transformation\r\n\tSession.prototype.unfold = function( rule ) {\r\n\t\tif(rule.body === null)\r\n\t\t\treturn false;\r\n\t\tvar head = rule.head;\r\n\t\tvar body = rule.body;\r\n\t\tvar atom = body.select();\r\n\t\tvar thread = new Thread( this );\r\n\t\tvar unfolded = [];\r\n\t\tthread.add_goal( atom );\r\n\t\tthread.step();\r\n\t\tfor( var i = thread.points.length-1; i >= 0; i-- ) {\r\n\t\t\tvar point = thread.points[i];\r\n\t\t\tvar head2 = head.apply( point.substitution );\r\n\t\t\tvar body2 = body.replace( point.goal );\r\n\t\t\tif( body2 !== null )\r\n\t\t\t\tbody2 = body2.apply( point.substitution );\r\n\t\t\tunfolded.push( new Rule( head2, body2 ) );\r\n\t\t}\r\n\t\tvar rules = this.modules.user.rules[head.indicator];\r\n\t\tvar index = indexOf( rules, rule );\r\n\t\tif( unfolded.length > 0 && index !== -1 ) {\r\n\t\t\trules.splice.apply( rules, [index, 1].concat(unfolded) );\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\tThread.prototype.unfold = function(rule) {\r\n\t\treturn this.session.unfold(rule);\r\n\t};\r\n\r\n\t\r\n\t\r\n\t// INTERPRET EXPRESSIONS\r\n\t\r\n\t// Variables\r\n\tVar.prototype.interpret = function( thread ) {\r\n\t\treturn pl.error.instantiation( thread.level.indicator );\r\n\t};\r\n\t\r\n\t// Numbers\r\n\tNum.prototype.interpret = function( thread ) {\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t// Terms\r\n\tTerm.prototype.interpret = function( thread ) {\r\n\t\tif( pl.type.is_unitary_list( this ) ) {\r\n\t\t\treturn this.args[0].interpret( thread );\r\n\t\t} else {\r\n\t\t\treturn pl.operate( thread, this );\r\n\t\t}\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// COMPARE PROLOG OBJECTS\r\n\t\r\n\t// Variables\r\n\tVar.prototype.compare = function( obj ) {\r\n\t\tif( this.id < obj.id ) {\r\n\t\t\treturn -1;\r\n\t\t} else if( this.id > obj.id ) {\r\n\t\t\treturn 1;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t};\r\n\t\r\n\t// Numbers\r\n\tNum.prototype.compare = function( obj ) {\r\n\t\tif( this.value === obj.value && this.is_float === obj.is_float ) {\r\n\t\t\treturn 0;\r\n\t\t} else if( this.value < obj.value || this.value === obj.value && this.is_float && !obj.is_float ) {\r\n\t\t\treturn -1;\r\n\t\t} else if( this.value > obj.value ) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t};\r\n\t\r\n\t// Terms\r\n\tTerm.prototype.compare = function( obj ) {\r\n\t\tif( this.args.length < obj.args.length || this.args.length === obj.args.length && this.id < obj.id ) {\r\n\t\t\treturn -1;\r\n\t\t} else if( this.args.length > obj.args.length || this.args.length === obj.args.length && this.id > obj.id ) {\r\n\t\t\treturn 1;\r\n\t\t} else {\r\n\t\t\tfor( var i = 0; i < this.args.length; i++ ) {\r\n\t\t\t\tvar arg = pl.compare( this.args[i], obj.args[i] );\r\n\t\t\t\tif( arg !== 0 ) {\r\n\t\t\t\t\treturn arg;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t};\r\n\t\r\n\r\n\t\r\n\t// SUBSTITUTIONS\r\n\t\r\n\t// Lookup variable\r\n\tSubstitution.prototype.lookup = function( variable ) {\r\n\t\tif( this.links[variable] ) {\r\n\t\t\treturn this.links[variable];\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\t\r\n\t// Filter variables\r\n\tSubstitution.prototype.filter = function( predicate ) {\r\n\t\tvar links = {};\r\n\t\tfor( var id in this.links ) {\r\n\t\t\tif(!this.links.hasOwnProperty(id)) continue;\r\n\t\t\tvar value = this.links[id];\r\n\t\t\tif( predicate( id, value ) ) {\r\n\t\t\t\tlinks[id] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new Substitution( links, this.attrs );\r\n\t};\r\n\t\r\n\t// Exclude variables\r\n\tSubstitution.prototype.exclude = function( variables ) {\r\n\t\tvar links = {};\r\n\t\tfor( var variable in this.links ) {\r\n\t\t\tif(!this.links.hasOwnProperty(variable)) continue;\r\n\t\t\tif( indexOf( variables, variable ) === -1 ) {\r\n\t\t\t\tlinks[variable] = this.links[variable];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new Substitution( links, this.attrs );\r\n\t};\r\n\t\r\n\t// Add link\r\n\tSubstitution.prototype.add = function( variable, value ) {\r\n\t\tthis.links[variable] = value;\r\n\t};\r\n\t\r\n\t// Get domain\r\n\tSubstitution.prototype.domain = function( plain ) {\r\n\t\tvar f = plain === true ? function(x){return x;} : function(x){return new Var(x);};\r\n\t\tvar vars = [];\r\n\t\tfor( var x in this.links )\r\n\t\t\tvars.push( f(x) );\r\n\t\treturn vars;\r\n\t};\r\n\r\n\t// Get an attribute\r\n\tSubstitution.prototype.get_attribute = function( variable, module ) {\r\n\t\tif( this.attrs[variable] )\r\n\t\t\treturn this.attrs[variable][module];\r\n\t}\r\n\r\n\t// Set an attribute (in a new substitution)\r\n\tSubstitution.prototype.set_attribute = function( variable, module, value ) {\r\n\t\tvar subs = new Substitution( this.links );\r\n\t\tfor( var v in this.attrs ) {\r\n\t\t\tif( v === variable ) {\r\n\t\t\t\tsubs.attrs[v] = {};\r\n\t\t\t\tfor( var m in this.attrs[v] ) {\r\n\t\t\t\t\tsubs.attrs[v][m] = this.attrs[v][m];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsubs.attrs[v] = this.attrs[v];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif( !subs.attrs[variable] ) {\r\n\t\t\tsubs.attrs[variable] = {};\r\n\t\t}\r\n\t\tsubs.attrs[variable][module] = value;\r\n\t\treturn subs;\r\n\t}\r\n\r\n\t// Check if a variables has attributes\r\n\tSubstitution.prototype.has_attributes = function( variable ) {\r\n\t\treturn this.attrs[variable] && this.attrs[variable] !== {};\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t// GENERATE JAVASCRIPT CODE FROM PROLOG OBJECTS\r\n\t\r\n\t// Variables\r\n\tVar.prototype.compile = function() {\r\n\t\treturn 'new pl.type.Var(\"' + this.id.toString() + '\")';\r\n\t};\r\n\t\r\n\t// Numbers\r\n\tNum.prototype.compile = function() {\r\n\t\treturn 'new pl.type.Num(' + this.value.toString() + ', ' + this.is_float.toString() + ')';\r\n\t};\r\n\t\r\n\t// Terms\r\n\tTerm.prototype.compile = function() {\r\n\t\treturn 'new pl.type.Term(\"' + this.id.replace(/\"/g, '\\\\\"') + '\", [' + map( this.args, function( arg ) {\r\n\t\t\treturn arg.compile();\r\n\t\t} ) + '])';\r\n\t};\r\n\t\r\n\t// Rules\r\n\tRule.prototype.compile = function() {\r\n\t\treturn 'new pl.type.Rule(' + this.head.compile() + ', ' + (this.body === null ? 'null' : this.body.compile()) + ')';\r\n\t};\r\n\t\r\n\t// Sessions\r\n\tSession.prototype.compile = function() {\r\n\t\tvar str, obj = [], rules;\r\n\t\tfor( var _indicator in this.modules.user.rules ) {\r\n\t\t\tif(!this.modules.user.rules.hasOwnProperty(_indicator)) continue;\r\n\t\t\tvar indicator = this.modules.user.rules[_indicator];\r\n\t\t\trules = [];\r\n\t\t\tstr = \"\\\"\" + _indicator + \"\\\": [\";\r\n\t\t\tfor(var i = 0; i < indicator.length; i++) {\r\n\t\t\t\trules.push(indicator[i].compile());\r\n\t\t\t}\r\n\t\t\tstr += rules.join();\r\n\t\t\tstr += \"]\";\r\n\t\t\tobj.push( str );\r\n\t\t}\r\n\t\treturn \"{\" + obj.join() + \"};\";\r\n\t};\r\n\r\n\t// Module\r\n\tModule.prototype.compile = function() {\r\n\t\tvar length = 0;\r\n\t\tvar dependencies = 0;\r\n\t\tvar str = \"var pl;\\n\";\r\n\t\tstr += \"(function(pl) {\\n\";\r\n\t\t// name\r\n\t\tstr += \"\\tvar name = \\\"\" + this.id + \"\\\";\\n\";\r\n\t\t// predicates\r\n\t\tstr += \"\\tvar predicates = function() {\\n\";\r\n\t\tstr += \"\\t\\treturn {\\n\";\r\n\t\tfor(var prop in this.rules) {\r\n\t\t\tif(length > 0)\r\n\t\t\t\tstr += \",\\n\";\r\n\t\t\tstr += \"\\t\\t\\t\\\"\" + prop + \"\\\": \";\r\n\t\t\tif(typeof this.rules[prop] === \"function\") {\r\n\t\t\t\tstr += this.rules[prop];\r\n\t\t\t} else {\r\n\t\t\t\tstr += \"[\\n\";\r\n\t\t\t\tfor(var i = 0; i < this.rules[prop].length; i++) {\r\n\t\t\t\t\tstr += \"\\t\\t\\t\\t\" + this.rules[prop][i].compile();\r\n\t\t\t\t\tif(i < this.rules[prop].length-1)\r\n\t\t\t\t\t\tstr += \",\";\r\n\t\t\t\t\tstr += \"\\n\";\r\n\t\t\t\t}\r\n\t\t\t\tstr += \"\\t\\t\\t]\";\r\n\t\t\t}\r\n\t\t\tlength++;\r\n\t\t}\r\n\t\tstr += \"\\n\\t\\t};\\n\";\r\n\t\tstr += \"\\t};\\n\";\r\n\t\t// exports\r\n\t\tstr += \"\\tvar exports = [\";\r\n\t\tfor(var i = 0; i < this.exports.length; i++) {\r\n\t\t\tif(i > 0)\r\n\t\t\t\tstr += \", \";\r\n\t\t\tstr += \"\\\"\" + this.exports[i] + \"\\\"\";\r\n\t\t}\r\n\t\tstr += \"];\\n\";\r\n\t\t// options\r\n\t\tstr += \"\\tvar options = function() {\\n\";\r\n\t\tstr += \"\\t\\treturn {\\n\";\r\n\t\t// dependencies\r\n\t\tstr += \"\\t\\t\\tdependencies: [\";\r\n\t\tfor(var prop in this.modules) {\r\n\t\t\tif(dependencies > 0)\r\n\t\t\t\tstr += \", \";\r\n\t\t\tstr += \"\\\"\" + prop + \"\\\"\";\r\n\t\t\tdependencies++;\r\n\t\t}\r\n\t\tstr += \"]\\n\";\r\n\t\tstr += \"\\t\\t};\\n\";\r\n\t\tstr += \"};\\n\";\r\n\t\t// fixed code\r\n\t\tstr += \"\\tif(typeof module !== 'undefined') {\\n\";\r\n\t\tstr += \"\\t\\tmodule.exports = function(p) {\\n\";\r\n\t\tstr += \"\\t\\t\\tpl = p;\\n\";\r\n\t\tstr += \"\\t\\t\\tnew pl.type.Module(name, predicates(), exports, options());\\n\";\r\n\t\tstr += \"\\t\\t};\\n\";\r\n\t\tstr += \"\\t} else {\\n\";\r\n\t\tstr += \"\\t\\tnew pl.type.Module(name, predicates(), exports, options());\\n\";\r\n\t\tstr += \"\\t}\\n\";\r\n\t\tstr += \"})(pl);\\n\";\r\n\t\treturn str;\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// PROLOG TO JAVASCRIPT\r\n\tVar.prototype.toJavaScript = function() {\r\n\t\treturn this.toString();\r\n\t};\r\n\t\r\n\t// Numbers\r\n\tNum.prototype.toJavaScript = function() {\r\n\t\treturn this.value;\r\n\t};\r\n\t\r\n\t// Terms\r\n\tTerm.prototype.toJavaScript = function(options) {\r\n\t\t// Atom => String\r\n\t\tif( this.args.length === 0 && this.indicator !== \"[]/0\" ) {\r\n\t\t\treturn this.toString(options);\r\n\t\t} else if( pl.type.is_list( this ) ) {\r\n\t\t\t// List => Array\r\n\t\t\tvar all_obj = true;\r\n\t\t\tvar arr = [];\r\n\t\t\tvar obj = {};\r\n\t\t\tvar pointer = this;\r\n\t\t\tvar value;\r\n\t\t\twhile( pointer.indicator === \"./2\" ) {\r\n\t\t\t\tvalue = pointer.args[0].toJavaScript(options);\r\n\t\t\t\tarr.push( value );\r\n\t\t\t\tall_obj = all_obj && pl.type.is_term(pointer.args[0]) && pointer.args[0].indicator === \"-/2\" && pl.type.is_atom(pointer.args[0].args[0]);\r\n\t\t\t\tif(all_obj)\r\n\t\t\t\t\tobj[pointer.args[0].args[0].id] = pointer.args[0].args[1].toJavaScript(options);\r\n\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t}\r\n\t\t\tif( pointer.indicator === \"[]/0\" )\r\n\t\t\t\treturn all_obj && arr.length > 0 ? obj : arr;\r\n\r\n\t\t}\r\n\t\treturn this.toString(options);\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// RULES\r\n\t\r\n\t// Return singleton variables in the session\r\n\tRule.prototype.singleton_variables = function(include_named) {\r\n\t\tinclude_named = include_named || false;\r\n\t\tvar variables = this.head.variables();\r\n\t\tvar count = {};\r\n\t\tvar singleton = [];\r\n\t\tif(this.body !== null)\r\n\t\t\tvariables = variables.concat(this.body.variables());\r\n\t\tfor(var i = 0; i < variables.length; i++) {\r\n\t\t\tif(count[variables[i]] === undefined)\r\n\t\t\t\tcount[variables[i]] = 0;\r\n\t\t\tcount[variables[i]]++;\r\n\t\t}\r\n\t\tfor(var key in count) {\r\n\t\t\tif(!count.hasOwnProperty(key))\r\n\t\t\t\tcontinue;\r\n\t\t\tif(count[key] === 1) {\r\n\t\t\t\tvar charcode = codePointAt(key, 1);\r\n\t\t\t\tif(!include_named || key === \"_\")\r\n\t\t\t\t\tif(key === \"_\" || key[0] === \"_\" && (charcode === 95 || charcode >= 65 && charcode <= 90))\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\tsingleton.push(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn singleton;\r\n\t};\r\n\r\n\r\n\r\n\t// NODEJS\r\n\r\n\tvar nodejs_flag = typeof process !== 'undefined' && !process.browser\r\n\r\n\tvar nodejs_arguments = nodejs_flag ?\r\n\t\tarrayToList( map(process.argv.slice(1), function(arg) { return new Term( arg ); })) :\r\n\t\tnew Term(\"[]\", []);\r\n\t\r\n\t\r\n\t\r\n\t// PROLOG\r\n\r\n\tvar pl = {\r\n\t\t\r\n\t\t// Environment\r\n\t\t__env: nodejs_flag ? global : window,\r\n\t\t\r\n\t\t// Modules\r\n\t\tmodules: {},\r\n\t\t\r\n\t\t// Version\r\n\t\tversion: version,\r\n\t\t\r\n\t\t// Parser\r\n\t\tparser: {\r\n\t\t\ttokenizer: Tokenizer,\r\n\t\t\texpression: parseExpr\r\n\t\t},\r\n\t\t\r\n\t\t// Utils\r\n\t\tutils: {\r\n\t\t\t\r\n\t\t\t// String to indicator\r\n\t\t\tstr_indicator: str_indicator,\r\n\t\t\t// Code point at\r\n\t\t\tcodePointAt: codePointAt,\r\n\t\t\t// From code point\r\n\t\t\tfromCodePoint: fromCodePoint,\r\n\t\t\t// Length of string\r\n\t\t\tstringLength: stringLength\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t// Statistics\r\n\t\tstatistics: {\r\n\t\t\t\r\n\t\t\t// Number of created terms\r\n\t\t\tgetCountTerms: function() {\r\n\t\t\t\treturn term_ref;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t// JavaScript to Prolog\r\n\t\tfromJavaScript: {\r\n\t\t\t\r\n\t\t\t// Type testing\r\n\t\t\ttest: {\r\n\t\t\t\t\r\n\t\t\t\t// Boolean\r\n\t\t\t\tboolean: function( obj, tobj ) {\r\n\t\t\t\t\treturn obj === true || obj === false;\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t// Number\r\n\t\t\t\tnumber: function( obj, tobj ) {\r\n\t\t\t\t\treturn typeof obj === \"number\";\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t// String\r\n\t\t\t\tstring: function( obj, tobj ) {\r\n\t\t\t\t\treturn typeof obj === \"string\";\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t// List\r\n\t\t\t\tlist: function( obj, tobj ) {\r\n\t\t\t\t\treturn obj instanceof Array;\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t// Variable\r\n\t\t\t\tvariable: function( obj, tobj ) {\r\n\t\t\t\t\treturn obj === undefined;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Object\r\n\t\t\t\tobject: function( obj, tobj ) {\r\n\t\t\t\t\ttobj = tobj === undefined ? false : tobj;\r\n\t\t\t\t\treturn tobj && !(obj instanceof Array) && typeof obj === \"object\";\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t// Any\r\n\t\t\t\tany: function( _, tobj ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Function conversion\r\n\t\t\tconversion: {\r\n\t\t\t\t\r\n\t\t\t\t// Bolean\r\n\t\t\t\tboolean: function( obj, tobj ) {\r\n\t\t\t\t\treturn new Term( obj ? \"true\" : \"false\", [] );\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t// Number\r\n\t\t\t\tnumber: function( obj, tobj ) {\r\n\t\t\t\t\treturn new Num( obj, obj % 1 !== 0 );\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t// String\r\n\t\t\t\tstring: function( obj, tobj ) {\r\n\t\t\t\t\treturn new Term( obj, [] );\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t// List\r\n\t\t\t\tlist: function( obj, tobj ) {\r\n\t\t\t\t\ttobj = tobj === undefined ? false : tobj;\r\n\t\t\t\t\tvar arr = [];\r\n\t\t\t\t\tvar elem;\r\n\t\t\t\t\tfor( var i = 0; i < obj.length; i++ ) {\r\n\t\t\t\t\t\telem = pl.fromJavaScript.apply( obj[i], tobj );\r\n\t\t\t\t\t\tif( elem === undefined )\r\n\t\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t\t\tarr.push( elem );\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn arrayToList( arr );\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t// Variable\r\n\t\t\t\tvariable: function( obj, tobj ) {\r\n\t\t\t\t\treturn new Var( \"_\" );\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Object\r\n\t\t\t\tobject: function( obj, tobj ) {\r\n\t\t\t\t\ttobj = tobj === undefined ? false : tobj;\r\n\t\t\t\t\tvar list = new Term(\"[]\", []);\r\n\t\t\t\t\tvar arr = [];\r\n\t\t\t\t\tfor(var prop in obj) {\r\n\t\t\t\t\t\tif(!obj.hasOwnProperty(prop)) continue;\r\n\t\t\t\t\t\tarr.push(new Term(\"-\", [\r\n\t\t\t\t\t\t\tpl.fromJavaScript.apply(prop, tobj),\r\n\t\t\t\t\t\t\tpl.fromJavaScript.apply(obj[prop], tobj)\r\n\t\t\t\t\t\t]));\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn arrayToList(arr);\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t// Any\r\n\t\t\t\tany: function( obj, tobj ) {\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Transform object\r\n\t\t\tapply: function( obj, tobj ) {\r\n\t\t\t\ttobj = tobj === undefined ? false : tobj;\r\n\t\t\t\tfor( var i in pl.fromJavaScript.test )\r\n\t\t\t\t\tif( i !== \"any\" && pl.fromJavaScript.test[i]( obj, tobj ) )\r\n\t\t\t\t\t\treturn pl.fromJavaScript.conversion[i]( obj, tobj );\r\n\t\t\t\treturn pl.fromJavaScript.conversion.any( obj, tobj );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// Types\r\n\t\ttype: {\r\n\t\t\t\r\n\t\t\t// Objects\r\n\t\t\tVar: Var,\r\n\t\t\tNum: Num,\r\n\t\t\tTerm: Term,\r\n\t\t\tRule: Rule,\r\n\t\t\tState: State,\r\n\t\t\tStream: Stream,\r\n\t\t\tModule: Module,\r\n\t\t\tThread: Thread,\r\n\t\t\tSession: Session,\r\n\t\t\tSubstitution: Substitution,\r\n\t\t\tFile: TauFile,\r\n\t\t\tDirectory: TauDirectory,\r\n\t\t\t\r\n\t\t\t// Order\r\n\t\t\torder: [Var, Num, Term, Stream],\r\n\t\t\t\r\n\t\t\t// Compare types\r\n\t\t\tcompare: function( x, y ) {\r\n\t\t\t\tvar ord_x = indexOf( pl.type.order, x.constructor );\r\n\t\t\t\tvar ord_y = indexOf( pl.type.order, y.constructor );\r\n\t\t\t\tif( ord_x < ord_y ) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else if( ord_x > ord_y ) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif( x.constructor === Num )\r\n\t\t\t\t\t\tif( x.is_float && y.is_float )\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\telse if( x.is_float )\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\telse if( y.is_float )\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a substitution\r\n\t\t\tis_substitution: function( obj ) {\r\n\t\t\t\treturn obj instanceof Substitution;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a state\r\n\t\t\tis_state: function( obj ) {\r\n\t\t\t\treturn obj instanceof State;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a rule\r\n\t\t\tis_rule: function( obj ) {\r\n\t\t\t\treturn obj instanceof Rule;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a variable\r\n\t\t\tis_variable: function( obj ) {\r\n\t\t\t\treturn obj instanceof Var;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a stream\r\n\t\t\tis_stream: function( obj ) {\r\n\t\t\t\treturn obj instanceof Stream;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is an anonymous variable\r\n\t\t\tis_anonymous_var: function( obj ) {\r\n\t\t\t\treturn obj instanceof Var && obj.id === \"_\";\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a callable term\r\n\t\t\tis_callable: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term\r\n\t\t\t\t&& (indexOf([\",/2\",\";/2\",\"->/2\"], obj.indicator) === -1\r\n\t\t\t\t|| pl.type.is_callable(obj.args[0]) && pl.type.is_callable(obj.args[1]))\r\n\t\t\t\t|| obj instanceof Var;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a number\r\n\t\t\tis_number: function( obj ) {\r\n\t\t\t\treturn obj instanceof Num;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is an integer\r\n\t\t\tis_integer: function( obj ) {\r\n\t\t\t\treturn obj instanceof Num && !obj.is_float;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a float\r\n\t\t\tis_float: function( obj ) {\r\n\t\t\t\treturn obj instanceof Num && obj.is_float;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a term\r\n\t\t\tis_term: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is an atom\r\n\t\t\tis_atom: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && obj.args.length === 0;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a ground term\r\n\t\t\tis_ground: function( obj ) {\r\n\t\t\t\tif( obj instanceof Var ) return false;\r\n\t\t\t\tif( obj instanceof Term )\r\n\t\t\t\t\tfor( var i = 0; i < obj.args.length; i++ )\r\n\t\t\t\t\t\tif( !pl.type.is_ground( obj.args[i] ) )\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is atomic\r\n\t\t\tis_atomic: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && obj.args.length === 0 || obj instanceof Num;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is compound\r\n\t\t\tis_compound: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && obj.args.length > 0;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a list\r\n\t\t\tis_list: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && (obj.indicator === \"[]/0\" || obj.indicator === \"./2\");\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is an empty list\r\n\t\t\tis_empty_list: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && obj.indicator === \"[]/0\";\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a non empty list\r\n\t\t\tis_non_empty_list: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && obj.indicator === \"./2\";\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a fully list\r\n\t\t\tis_fully_list: function( obj ) {\r\n\t\t\t\twhile( obj instanceof Term && obj.indicator === \"./2\" ) {\r\n\t\t\t\t\tobj = obj.args[1];\r\n\t\t\t\t}\r\n\t\t\t\treturn obj instanceof Var || obj instanceof Term && obj.indicator === \"[]/0\";\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a instantiated list\r\n\t\t\tis_instantiated_list: function( obj ) {\r\n\t\t\t\twhile( obj instanceof Term && obj.indicator === \"./2\" ) {\r\n\t\t\t\t\tobj = obj.args[1];\r\n\t\t\t\t}\r\n\t\t\t\treturn obj instanceof Term && obj.indicator === \"[]/0\";\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is an unitary list\r\n\t\t\tis_unitary_list: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && obj.indicator === \"./2\" && obj.args[1] instanceof Term && obj.args[1].indicator === \"[]/0\";\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a character\r\n\t\t\tis_character: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && obj.args.length === 0 && (obj.id.length === 1 || obj.id.length > 0 && obj.id.length <= 2 && codePointAt( obj.id, 0 ) >= 65536);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a in_character\r\n\t\t\tis_in_character: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && (obj.indicator === \"end_of_file/0\"\r\n\t\t\t\t|| obj.id.length === 1\r\n\t\t\t\t|| obj.id.length > 0 && obj.id.length <= 2 && codePointAt(obj.id, 0) >= 65536);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a character_code\r\n\t\t\tis_character_code: function( obj ) {\r\n\t\t\t\treturn obj instanceof Num && !obj.is_float && obj.value >= 0 && obj.value <= 1114111;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a in_character_code\r\n\t\t\tis_in_character_code: function( obj ) {\r\n\t\t\t\treturn obj instanceof Num && !obj.is_float && obj.value >= -1 && obj.value <= 1114111;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a byte\r\n\t\t\tis_byte: function( obj ) {\r\n\t\t\t\treturn obj instanceof Num && !obj.is_float && obj.value >= 0 && obj.value <= 255;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a in_byte\r\n\t\t\tis_in_byte: function( obj ) {\r\n\t\t\t\treturn obj instanceof Num && !obj.is_float && obj.value >= -1 && obj.value <= 255;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is an operator\r\n\t\t\tis_operator: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && pl.arithmetic.evaluation[obj.indicator];\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a directive\r\n\t\t\tis_directive: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && (pl.directive[obj.indicator] !== undefined || pl.directive[obj.id + \"/*\"] !== undefined);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a built-in predicate\r\n\t\t\tis_builtin: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && pl.builtin.rules.hasOwnProperty(obj.indicator) && obj.indicator !== \"goal_expansion/2\";\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is an error\r\n\t\t\tis_error: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && obj.indicator === \"throw/1\";\r\n\t\t\t},\r\n\r\n\t\t\t// Is an error state\r\n\t\t\tis_error_state: function( obj ) {\r\n\t\t\t\treturn pl.type.is_state( obj ) && obj.error && obj.error === true;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a predicate indicator\r\n\t\t\tis_predicate_indicator: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && obj.indicator === \"//2\" && obj.args[0] instanceof Term && obj.args[0].args.length === 0 && obj.args[1] instanceof Num && obj.args[1].is_float === false;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a flag\r\n\t\t\tis_flag: function( obj ) {\r\n\t\t\t\treturn obj instanceof Term && obj.args.length === 0 && pl.flag[obj.id] !== undefined;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a valid value for a flag\r\n\t\t\tis_value_flag: function( flag, obj ) {\r\n\t\t\t\tif( !pl.type.is_flag( flag ) ) return false;\r\n\t\t\t\tfor( var value in pl.flag[flag.id].allowed ) {\r\n\t\t\t\t\tif(!pl.flag[flag.id].allowed.hasOwnProperty(value)) continue;\r\n\t\t\t\t\tif( pl.flag[flag.id].allowed[value].equals( obj ) ) return true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a io mode\r\n\t\t\tis_io_mode: function( obj ) {\r\n\t\t\t\treturn pl.type.is_atom( obj ) && [\"read\",\"write\",\"append\"].indexOf( obj.id ) !== -1;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a stream option\r\n\t\t\tis_stream_option: function( obj ) {\r\n\t\t\t\treturn pl.type.is_term( obj ) && (\r\n\t\t\t\t\tobj.indicator === \"alias/1\" && pl.type.is_atom(obj.args[0]) ||\r\n\t\t\t\t\tobj.indicator === \"reposition/1\" && pl.type.is_atom(obj.args[0]) && (obj.args[0].id === \"true\" || obj.args[0].id === \"false\") ||\r\n\t\t\t\t\tobj.indicator === \"type/1\" && pl.type.is_atom(obj.args[0]) && (obj.args[0].id === \"text\" || obj.args[0].id === \"binary\") ||\r\n\t\t\t\t\tobj.indicator === \"eof_action/1\" && pl.type.is_atom(obj.args[0]) && (obj.args[0].id === \"error\" || obj.args[0].id === \"eof_code\" || obj.args[0].id === \"reset\")\r\n\t\t\t\t);\r\n\t\t\t},\r\n\r\n\t\t\t// Is a stream position\r\n\t\t\tis_stream_position: function( obj ) {\r\n\t\t\t\treturn pl.type.is_term(obj) && (\r\n\t\t\t\t\tobj.indicator === \"end_of_stream/0\" ||\r\n\t\t\t\t\tobj.indicator === \"past_end_of_stream/0\" ||\r\n\t\t\t\t\tobj.indicator === \"position/3\"\r\n\t\t\t\t\t\t&& pl.type.is_integer(obj.args[0])\r\n\t\t\t\t\t\t&& pl.type.is_integer(obj.args[1])\r\n\t\t\t\t\t\t&& pl.type.is_integer(obj.args[2])\r\n\t\t\t\t)\r\n\t\t\t},\r\n\r\n\t\t\t// Is a stream property\r\n\t\t\tis_stream_property: function( obj ) {\r\n\t\t\t\treturn pl.type.is_term( obj ) && (\r\n\t\t\t\t\tobj.indicator === \"input/0\" || \r\n\t\t\t\t\tobj.indicator === \"output/0\" || \r\n\t\t\t\t\tobj.indicator === \"alias/1\" && (pl.type.is_variable( obj.args[0] ) || pl.type.is_atom( obj.args[0] )) ||\r\n\t\t\t\t\tobj.indicator === \"file_name/1\" && (pl.type.is_variable( obj.args[0] ) || pl.type.is_atom( obj.args[0] )) ||\r\n\t\t\t\t\tobj.indicator === \"reposition/1\" && (pl.type.is_variable( obj.args[0] ) || pl.type.is_atom(obj.args[0]) && (obj.args[0].id === \"true\" || obj.args[0].id === \"false\")) ||\r\n\t\t\t\t\tobj.indicator === \"type/1\" && (pl.type.is_variable( obj.args[0] ) || pl.type.is_atom(obj.args[0]) && (obj.args[0].id === \"text\" || obj.args[0].id === \"binary\")) ||\r\n\t\t\t\t\tobj.indicator === \"mode/1\" && (pl.type.is_variable( obj.args[0] ) || pl.type.is_atom(obj.args[0]) && (obj.args[0].id === \"read\" || obj.args[0].id === \"write\" || obj.args[0].id === \"append\")) ||\r\n\t\t\t\t\tobj.indicator === \"eof_action/1\" && (pl.type.is_variable( obj.args[0] ) || pl.type.is_atom(obj.args[0]) && (obj.args[0].id === \"error\" || obj.args[0].id === \"eof_code\" || obj.args[0].id === \"reset\")) ||\r\n\t\t\t\t\tobj.indicator === \"end_of_stream/1\" && (pl.type.is_variable( obj.args[0] ) || pl.type.is_atom(obj.args[0]) && (obj.args[0].id === \"at\" || obj.args[0].id === \"past\" || obj.args[0].id === \"not\")) ||\r\n\t\t\t\t\tobj.indicator === \"position/1\"\r\n\t\t\t\t\t\t&& (pl.type.is_variable(obj.args[0]) || pl.type.is_term(obj.args[0]) && obj.args[0].indicator === \"position/3\"\r\n\t\t\t\t\t\t\t&& (pl.type.is_variable(obj.args[0].args[0]) || pl.type.is_integer(obj.args[0].args[0]))\r\n\t\t\t\t\t\t\t&& (pl.type.is_variable(obj.args[0].args[1]) || pl.type.is_integer(obj.args[0].args[1]))\r\n\t\t\t\t\t\t\t&& (pl.type.is_variable(obj.args[0].args[2]) || pl.type.is_integer(obj.args[0].args[2])))\r\n\t\t\t\t);\r\n\t\t\t},\r\n\r\n\t\t\t// Is a streamable term\r\n\t\t\tis_streamable: function( obj ) {\r\n\t\t\t\treturn obj.__proto__.stream !== undefined;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a read option\r\n\t\t\tis_read_option: function( obj ) {\r\n\t\t\t\treturn pl.type.is_term( obj ) && [\"variables/1\",\"variable_names/1\",\"singletons/1\"].indexOf( obj.indicator ) !== -1;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a write option\r\n\t\t\tis_write_option: function( obj ) {\r\n\t\t\t\treturn pl.type.is_term( obj ) && (\r\n\t\t\t\t\tobj.indicator === \"quoted/1\" && pl.type.is_atom(obj.args[0]) && (obj.args[0].id === \"true\" || obj.args[0].id === \"false\") ||\r\n\t\t\t\t\tobj.indicator === \"ignore_ops/1\" && pl.type.is_atom(obj.args[0]) && (obj.args[0].id === \"true\" || obj.args[0].id === \"false\") ||\r\n\t\t\t\t\tobj.indicator === \"numbervars/1\" && pl.type.is_atom(obj.args[0]) && (obj.args[0].id === \"true\" || obj.args[0].id === \"false\") ||\r\n\t\t\t\t\tobj.indicator === \"variable_names/1\" && pl.type.is_fully_list(obj.args[0])\r\n\t\t\t\t);\r\n\t\t\t},\r\n\r\n\t\t\t// Is a close option\r\n\t\t\tis_close_option: function( obj ) {\r\n\t\t\t\treturn pl.type.is_term( obj ) &&\r\n\t\t\t\t\tobj.indicator === \"force/1\" &&\r\n\t\t\t\t\tpl.type.is_atom(obj.args[0]) &&\r\n\t\t\t\t\t(obj.args[0].id === \"true\" || obj.args[0].id === \"false\");\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Is a modifiable flag\r\n\t\t\tis_modifiable_flag: function( obj ) {\r\n\t\t\t\treturn pl.type.is_flag( obj ) && pl.flag[obj.id].changeable;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a module\r\n\t\t\tis_module: function( obj ) {\r\n\t\t\t\treturn obj instanceof Module;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a virtual file\r\n\t\t\tis_file: function( obj ) {\r\n\t\t\t\treturn obj instanceof TauFile;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a virtual directory\r\n\t\t\tis_directory: function( obj ) {\r\n\t\t\t\treturn obj instanceof TauDirectory;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a predicate property\r\n\t\t\tis_predicate_property: function(obj) {\r\n\t\t\t\treturn pl.type.is_term(obj) && (\r\n\t\t\t\t\tobj.indicator === \"built_in/0\" ||\r\n\t\t\t\t\tobj.indicator === \"static/0\" ||\r\n\t\t\t\t\tobj.indicator === \"dynamic/0\" ||\r\n\t\t\t\t\tobj.indicator === \"native_code/0\" ||\r\n\t\t\t\t\tobj.indicator === \"multifile/0\" ||\r\n\t\t\t\t\tobj.indicator === \"meta_predicate/1\"\r\n\t\t\t\t);\r\n\t\t\t},\r\n\r\n\t\t\t// Is a meta-argument specifier\r\n\t\t\tis_meta_argument_specifier: function(obj) {\r\n\t\t\t\treturn pl.type.is_integer(obj) && obj.value >= 0 ||\r\n\t\t\t\t\tpl.type.is_atom(obj) && indexOf([\"+\", \"-\", \"?\", \"*\", \"^\", \":\", \"//\"], obj.id) !== -1;\r\n\t\t\t},\r\n\r\n\t\t\t// Is a time property\r\n\t\t\tis_time_property: function( obj ) {\r\n\t\t\t\treturn pl.type.is_term(obj) && obj.args.length === 1 \r\n\t\t\t\t&& (pl.type.is_variable(obj.args[0]) || pl.type.is_integer(obj.args[0]))\r\n\t\t\t\t&& indexOf([\"year\", \"month\", \"day\", \"hours\", \"minutes\", \"seconds\", \"milliseconds\", \"weekday\"], obj.id) !== -1;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t},\r\n\r\n\t\t// Arithmetic functions\r\n\t\tarithmetic: {\r\n\t\t\t\r\n\t\t\t// Evaluation\r\n\t\t\tevaluation: {\r\n\t\t\t\t\"e/0\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( _ ) { return Math.E; }\r\n\t\t\t\t},\r\n\t\t\t\t\"pi/0\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( _ ) { return Math.PI; }\r\n\t\t\t\t},\r\n\t\t\t\t\"tau/0\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( _ ) { return 2*Math.PI; }\r\n\t\t\t\t},\r\n\t\t\t\t\"epsilon/0\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( _ ) { return Number.EPSILON; }\r\n\t\t\t\t},\r\n\t\t\t\t\"+/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: null,\r\n\t\t\t\t\tfn: function( x, _ ) { return x; }\r\n\t\t\t\t},\r\n\t\t\t\t\"-/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: null,\r\n\t\t\t\t\tfn: function( x, _ ) { return -x; }\r\n\t\t\t\t},\r\n\t\t\t\t\"\\\\/1\": {\r\n\t\t\t\t\ttype_args: false,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, _ ) { return ~x; }\r\n\t\t\t\t},\r\n\t\t\t\t\"abs/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: null,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.abs( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"sign/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: null,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.sign( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"float_integer_part/1\": {\r\n\t\t\t\t\ttype_args: true,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, _ ) { return parseInt( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"float_fractional_part/1\": {\r\n\t\t\t\t\ttype_args: true,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, _ ) { return x - parseInt( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"float/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, _ ) { return parseFloat( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"floor/1\": {\r\n\t\t\t\t\ttype_args: true,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.floor( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"truncate/1\": {\r\n\t\t\t\t\ttype_args: true,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, _ ) { return parseInt( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"round/1\": {\r\n\t\t\t\t\ttype_args: true,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.round( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"ceiling/1\": {\r\n\t\t\t\t\ttype_args: true,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.ceil( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"sin/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.sin( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"cos/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.cos( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"tan/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.tan( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"asin/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, thread ) { return Math.abs(x) <= 1 ? Math.asin(x) : pl.error.evaluation(\"undefined\", thread.__call_indicator); }\r\n\t\t\t\t},\r\n\t\t\t\t\"acos/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, thread ) { return Math.abs(x) <= 1 ? Math.acos(x) : pl.error.evaluation(\"undefined\", thread.__call_indicator); }\r\n\t\t\t\t},\r\n\t\t\t\t\"atan/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.atan( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"atan2/2\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, y, thread ) { return x === 0 && y === 0 ? pl.error.evaluation(\"undefined\", thread.__call_indicator) : Math.atan2(x, y); }\r\n\t\t\t\t},\r\n\t\t\t\t\"acosh/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, thread ) { return x >= 1 ? Math.acosh(x) : pl.error.evaluation(\"undefined\", thread.__call_indicator); }\r\n\t\t\t\t},\r\n\t\t\t\t\"asinh/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.asinh( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"atanh/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, thread ) { return Math.abs(x) < 1 ? Math.atanh(x) : pl.error.evaluation(\"undefined\", thread.__call_indicator); }\r\n\t\t\t\t},\r\n\t\t\t\t\"cosh/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.cosh( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"sinh/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.sinh( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"tanh/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.tanh( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"exp/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, _ ) { return Math.exp( x ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"sqrt/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, thread ) { return x >= 0 ? Math.sqrt( x ) : pl.error.evaluation( \"undefined\", thread.__call_indicator ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"log/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, thread ) { return x > 0 ? Math.log( x ) : pl.error.evaluation( \"undefined\", thread.__call_indicator ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"log/2\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, y, thread ) { return x > 0 && y > 0 ? Math.log(y)/Math.log(x) : pl.error.evaluation( \"undefined\", thread.__call_indicator ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"log10/1\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, thread ) { return x > 0 ? Math.log(x)/Math.log(10) : pl.error.evaluation( \"undefined\", thread.__call_indicator ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"+/2\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: null,\r\n\t\t\t\t\tfn: function( x, y, _ ) { return x + y; }\r\n\t\t\t\t},\r\n\t\t\t\t\"-/2\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: null,\r\n\t\t\t\t\tfn:  function( x, y, _ ) { return x - y; }\r\n\t\t\t\t},\r\n\t\t\t\t\"*/2\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: null,\r\n\t\t\t\t\tfn: function( x, y, _ ) { return x * y; }\r\n\t\t\t\t},\r\n\t\t\t\t\"//2\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, y, thread ) { return y ? x / y : pl.error.evaluation( \"zero_divisor\", thread.__call_indicator ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"///2\": {\r\n\t\t\t\t\ttype_args: false,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, y, thread ) { return y ? Math.trunc( x / y ) : pl.error.evaluation( \"zero_divisor\", thread.__call_indicator ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"div/2\": {\r\n\t\t\t\t\ttype_args: false,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, y, thread ) { return y ? Math.floor( x / y ) : pl.error.evaluation( \"zero_divisor\", thread.__call_indicator ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"**/2\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: true,\r\n\t\t\t\t\tfn: function( x, y, thread ) { return x == 0 && y < 0 ? pl.error.evaluation(\"zero_divisor\", thread.__call_indicator) : Math.pow(x, y); }\r\n\t\t\t\t},\r\n\t\t\t\t\"^/2\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: null,\r\n\t\t\t\t\tfn: function( x, y, thread ) { return x == 0 && y < 0 ? pl.error.evaluation(\"zero_divisor\", thread.__call_indicator) : Math.pow(x, y); }\r\n\t\t\t\t},\r\n\t\t\t\t\"<</2\": {\r\n\t\t\t\t\ttype_args: false,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, y, _ ) { return x << y; }\r\n\t\t\t\t},\r\n\t\t\t\t\">>/2\": {\r\n\t\t\t\t\ttype_args: false,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, y, _ ) { return x >> y; }\r\n\t\t\t\t},\r\n\t\t\t\t\"/\\\\/2\": {\r\n\t\t\t\t\ttype_args: false,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, y, _ ) { return x & y; }\r\n\t\t\t\t},\r\n\t\t\t\t\"\\\\//2\": {\r\n\t\t\t\t\ttype_args: false,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, y, _ ) { return x | y; }\r\n\t\t\t\t},\r\n\t\t\t\t\"xor/2\": {\r\n\t\t\t\t\ttype_args: false,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, y, _ ) { return x ^ y; }\r\n\t\t\t\t},\r\n\t\t\t\t\"rem/2\": {\r\n\t\t\t\t\ttype_args: false,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, y, thread ) { return y ? x % y : pl.error.evaluation( \"zero_divisor\", thread.__call_indicator ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"mod/2\": {\r\n\t\t\t\t\ttype_args: false,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, y, thread ) { return y ? x - Math.floor( x / y ) * y : pl.error.evaluation( \"zero_divisor\", thread.__call_indicator ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"max/2\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: null,\r\n\t\t\t\t\tfn: function( x, y, _ ) { return Math.max( x, y ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"min/2\": {\r\n\t\t\t\t\ttype_args: null,\r\n\t\t\t\t\ttype_result: null,\r\n\t\t\t\t\tfn: function( x, y, _ ) { return Math.min( x, y ); }\r\n\t\t\t\t},\r\n\t\t\t\t\"gcd/2\": {\r\n\t\t\t\t\ttype_args: false,\r\n\t\t\t\t\ttype_result: false,\r\n\t\t\t\t\tfn: function( x, y, _ ) { return gcd(x, y); }\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t// Directives\r\n\t\tdirective: {\r\n\t\t\t\r\n\t\t\t// dynamic/1\r\n\t\t\t\"dynamic/1\": function( thread, atom, options ) {\r\n\t\t\t\tvar indicators = atom.args[0];\r\n\t\t\t\tif(!pl.type.is_list(indicators))\r\n\t\t\t\t\tindicators = arrayToList([indicators]);\r\n\t\t\t\tvar pointer = indicators;\r\n\t\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"./2\") {\r\n\t\t\t\t\tindicator = pointer.args[0];\r\n\t\t\t\t\tif( pl.type.is_variable( indicator ) ) {\r\n\t\t\t\t\t\tthread.throw_warning( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t} else if( !pl.type.is_compound( indicator ) || indicator.indicator !== \"//2\" ) {\r\n\t\t\t\t\t\tthread.throw_warning( pl.error.type( \"predicate_indicator\", indicator, atom.indicator ) );\r\n\t\t\t\t\t} else if( pl.type.is_variable( indicator.args[0] ) || pl.type.is_variable( indicator.args[1] ) ) {\r\n\t\t\t\t\t\tthread.throw_warning( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t} else if( !pl.type.is_atom( indicator.args[0] ) ) {\r\n\t\t\t\t\t\tthread.throw_warning( pl.error.type( \"atom\", indicator.args[0], atom.indicator ) );\r\n\t\t\t\t\t} else if( !pl.type.is_integer( indicator.args[1] ) ) {\r\n\t\t\t\t\t\tthread.throw_warning( pl.error.type( \"integer\", indicator.args[1], atom.indicator ) );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar key = indicator.args[0].id + \"/\" + indicator.args[1].value;\r\n\t\t\t\t\t\tvar get_module = thread.session.modules[options.context_module];\r\n\t\t\t\t\t\tget_module.public_predicates[key] = true;\r\n\t\t\t\t\t\tif( !get_module.rules[key] )\r\n\t\t\t\t\t\tget_module.rules[key] = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif(pl.type.is_variable(pointer)) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t} else if(!pl.type.is_term(pointer) || pointer.indicator !== \"[]/0\") {\r\n\t\t\t\t\tthread.throw_warning( pl.error.type( \"predicate_indicator\", indicator, atom.indicator ) );\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// dynamic/[2..]\r\n\t\t\t\"dynamic/*\": function( thread, atom ) {\r\n\t\t\t\tfor(var i = 0; i < atom.args.length; i++) {\r\n\t\t\t\t\tpl.directive[\"dynamic/1\"](thread, new Term(\"dynamic\", [atom.args[i]]));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// multifile/1\r\n\t\t\t\"multifile/1\": function( thread, atom, options ) {\r\n\t\t\t\tvar indicator = atom.args[0];\r\n\t\t\t\tif( pl.type.is_variable( indicator ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_compound( indicator ) || indicator.indicator !== \"//2\" ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.type( \"predicate_indicator\", indicator, atom.indicator ) );\r\n\t\t\t\t} else if( pl.type.is_variable( indicator.args[0] ) || pl.type.is_variable( indicator.args[1] ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_atom( indicator.args[0] ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.type( \"atom\", indicator.args[0], atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_integer( indicator.args[1] ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.type( \"integer\", indicator.args[1], atom.indicator ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar predicate_indicator = atom.args[0].args[0].id + \"/\" + atom.args[0].args[1].value;\r\n\t\t\t\t\tvar get_module = thread.session.modules[options.context_module];\r\n\t\t\t\t\tget_module.multifile_predicates[predicate_indicator] = true;\r\n\t\t\t\t\tif(!get_module.rules.hasOwnProperty(predicate_indicator)) {\r\n\t\t\t\t\t\tget_module.rules[predicate_indicator] = [];\r\n\t\t\t\t\t\tget_module.public_predicates[predicate_indicator] = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// meta_predicate/1\r\n\t\t\t\"meta_predicate/1\": function(thread, atom, options) {\r\n\t\t\t\tvar options = options === undefined ? {} : options;\r\n\t\t\t\tvar head = atom.args[0];\r\n\t\t\t\tif( pl.type.is_variable(head) ) {\r\n\t\t\t\t\tthread.throw_warning(pl.error.instantiation(atom.indicator));\r\n\t\t\t\t} else if(!pl.type.is_callable(head)) {\r\n\t\t\t\t\tthread.throw_warning(pl.error.type(\"callable\", head, atom.indicator));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor(var i = 0; i < head.args.length; i++) {\r\n\t\t\t\t\t\tvar arg = head.args[i];\r\n\t\t\t\t\t\tif(!pl.type.is_meta_argument_specifier(arg)) {\r\n\t\t\t\t\t\t\tthread.throw_warning(pl.error.type(\"meta_argument_specifier\", arg, atom.indicator));\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.session.modules[options.context_module].meta_predicates[head.indicator] = head;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// set_prolog_flag\r\n\t\t\t\"set_prolog_flag/2\": function( thread, atom ) {\r\n\t\t\t\tvar flag = atom.args[0], value = atom.args[1];\r\n\t\t\t\tif( pl.type.is_variable( flag ) || pl.type.is_variable( value ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_atom( flag ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.type( \"atom\", flag, atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_flag( flag ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.domain( \"prolog_flag\", flag, atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_modifiable_flag( flag ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.permission( \"modify\", \"flag\", flag, atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_value_flag( flag, value ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.domain( \"flag_value\", new Term( \"+\", [flag, value] ), atom.indicator ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthread.session.flag[flag.id] = value;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// module/2\r\n\t\t\t\"module/2\": function(thread, atom, options) {\r\n\t\t\t\tvar options = options === undefined ? {} : options;\r\n\t\t\t\toptions.context_module = options.context_module === undefined ? \"user\" : options.context_module;\r\n\t\t\t\tvar module_id = atom.args[0], exports = atom.args[1];\r\n\t\t\t\tif(pl.type.is_variable(module_id) || pl.type.is_variable(exports)) {\r\n\t\t\t\t\tthread.throw_warning(pl.error.instantiation(atom.indicator));\r\n\t\t\t\t} else if(!pl.type.is_atom(module_id)) {\r\n\t\t\t\t\tthread.throw_warning(pl.error.type(\"atom\", module_id, atom.indicator));\r\n\t\t\t\t} else if(!pl.type.is_list(exports)) {\r\n\t\t\t\t\tthread.throw_warning(pl.error.type(\"list\", exports, atom.indicator));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(!pl.type.is_module(thread.session.modules[module_id.indicator])) {\r\n\t\t\t\t\t\tvar pointer = exports;\r\n\t\t\t\t\t\tvar indicators = [];\r\n\t\t\t\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"./2\") {\r\n\t\t\t\t\t\t\tvar predicate = pointer.args[0];\r\n\t\t\t\t\t\t\tif(!pl.type.is_predicate_indicator(predicate)) {\r\n\t\t\t\t\t\t\t\tthread.throw_warning(pl.error.type(\"predicate_indicator\", predicate, atom.indicator));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tindicators.push(predicate.args[0].id + \"/\" + predicate.args[1].value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(pl.type.is_variable(pointer)) {\r\n\t\t\t\t\t\t\tthread.throw_warning(pl.error.instantiation(atom.indicator));\r\n\t\t\t\t\t\t} else if(!pl.type.is_empty_list(pointer)) {\r\n\t\t\t\t\t\t\tthread.throw_warning(pl.error.type(\"list\", exports, atom.indicator));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar new_module = new Module(module_id.id, {}, indicators, {\r\n\t\t\t\t\t\t\tsession: thread.session\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthread.session.modules[module_id.id] = new_module;\r\n\t\t\t\t\t\tthread.session.modules[options.context_module].modules[module_id.id] = new_module;\r\n\t\t\t\t\t\toptions.context_module = module_id.id;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthread.throw_warning(pl.error.permission(\"create\", \"module\", module_id, atom.indicator));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// use_module/1\r\n\t\t\t\"use_module/1\": function(thread, atom, options) {\r\n\t\t\t\tvar options = options === undefined ? {} : options;\r\n\t\t\t\toptions.context_module = options.context_module === undefined ? \"user\" : options.context_module;\r\n\t\t\t\tvar module_id = atom.args[0];\r\n\t\t\t\tif(pl.type.is_variable(module_id)) {\r\n\t\t\t\t\tthread.throw_warning(pl.error.instantiation(atom.indicator));\r\n\t\t\t\t} else if(!pl.type.is_term(module_id)) {\r\n\t\t\t\t\tthread.throw_warning(pl.error.type(\"term\", module_id, atom.indicator));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(module_id.indicator === \"library/1\") {\r\n\t\t\t\t\t\tvar name = module_id.args[0].id;\r\n\t\t\t\t\t\tvar get_module = pl.modules[name];\r\n\t\t\t\t\t\tif(pl.type.is_module(get_module)) {\r\n\t\t\t\t\t\t\tif(!thread.session.modules[options.context_module].modules.hasOwnProperty(name)) {\r\n\t\t\t\t\t\t\t\tthread.session.modules[name] = get_module;\r\n\t\t\t\t\t\t\t\tthread.session.modules[options.context_module].modules[name] = get_module;\r\n\t\t\t\t\t\t\t\tfor(var i = 0; i < get_module.dependencies.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar term = new Term(\"use_module\", [new Term(\"library\", [new Term(get_module.dependencies[i])])]);\r\n\t\t\t\t\t\t\t\t\tpl.directive[\"use_module/1\"](thread, term, {\r\n\t\t\t\t\t\t\t\t\t\tcontext_module: name\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthread.throw_warning(pl.error.existence(\"module\", module_id, atom.indicator));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar name = module_id.id;\r\n\t\t\t\t\t\tthread.consult(name, {\r\n\t\t\t\t\t\t\tcontext_module: options.context_module,\r\n\t\t\t\t\t\t\ttext: false,\r\n\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\tparseProgram(thread, options.string, options);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\terror: function() {\r\n\t\t\t\t\t\t\t\toptions.error(pl.error.existence(\"module\", module_id, atom.indicator));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// char_conversion/2\r\n\t\t\t\"char_conversion/2\": function(thread, atom, options) {\r\n\t\t\t\tvar inchar = atom.args[0], outchar = atom.args[1];\r\n\t\t\t\tif(pl.type.is_variable(inchar) || pl.type.is_variable(outchar)) {\r\n\t\t\t\t\tthread.throw_warning(pl.error.instantiation(atom.indicator));\r\n\t\t\t\t} else if(!pl.type.is_character(inchar)) {\r\n\t\t\t\t\tthread.throw_warning(pl.error.type(\"character\", inchar, atom.indicator));\r\n\t\t\t\t} else if(!pl.type.is_character(outchar)) {\r\n\t\t\t\t\tthread.throw_warning(pl.error.type(\"character\", outchar, atom.indicator));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(inchar.id === outchar.id) {\r\n\t\t\t\t\t\tdelete thread.session.__char_conversion[inchar.id];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthread.session.__char_conversion[inchar.id] = outchar.id;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions.tokens = options.tokenizer.get_tokens(options.current_token);\r\n\t\t\t\t\toptions.current_token = 0;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// op/3\r\n\t\t\t\"op/3\": function( thread, atom ) {\r\n\t\t\t\tvar priority = atom.args[0], type = atom.args[1], operators = atom.args[2];\r\n\t\t\t\tif(pl.type.is_atom(operators))\r\n\t\t\t\t\toperators = new Term(\".\", [operators, new Term(\"[]\")]);\r\n\t\t\t\tif( pl.type.is_variable( priority ) || pl.type.is_variable( type ) || pl.type.is_variable( operators ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_integer( priority ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.type( \"integer\", priority, atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_atom( type ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.type( \"atom\", type, atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_list( operators ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.type( \"list\", operators, atom.indicator ) );\r\n\t\t\t\t} else if( pl.type.is_empty_list( operators ) ) {\r\n\t\t\t\t\tthread.throw_warning( pl.error.permission( \"create\", \"operator\", operators, atom.indicator ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar pointer = operators;\r\n\t\t\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"./2\") {\r\n\t\t\t\t\t\tvar operator = pointer.args[0];\r\n\t\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\t\tif( pl.type.is_variable( operator ) ) {\r\n\t\t\t\t\t\t\tthread.throw_warning( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\t} else if( !pl.type.is_atom( operator ) ) {\r\n\t\t\t\t\t\t\tthread.throw_warning( pl.error.type( \"atom\", operator, atom.indicator ) );\r\n\t\t\t\t\t\t} else if( priority.value < 0 || priority.value > 1200 ) {\r\n\t\t\t\t\t\t\tthread.throw_warning( pl.error.domain( \"operator_priority\", priority, atom.indicator ) );\r\n\t\t\t\t\t\t} else if( operator.id === \",\" ) {\r\n\t\t\t\t\t\t\tthread.throw_error( pl.error.permission( \"modify\", \"operator\", operator, atom.indicator ) );\r\n\t\t\t\t\t\t} else if( operator.id === \"{}\" ) {\r\n\t\t\t\t\t\t\tthread.throw_warning( pl.error.permission( \"create\", \"operator\", operator, atom.indicator ) );\r\n\t\t\t\t\t\t} else if( operator.id === \"[]\" ) {\r\n\t\t\t\t\t\t\tthread.throw_warning( pl.error.permission( \"create\", \"operator\", operator, atom.indicator ) );\r\n\t\t\t\t\t\t} else if( operator.id === \"|\" && priority.value !== 0 && (priority.value < 1001 || type.id.length !== 3 ) ) {\r\n\t\t\t\t\t\t\tthread.throw_warning( pl.error.permission( \"create\", \"operator\", operator, atom.indicator ) );\r\n\t\t\t\t\t\t} else if( [\"fy\", \"fx\", \"yf\", \"xf\", \"xfx\", \"yfx\", \"xfy\"].indexOf( type.id ) === -1 ) {\r\n\t\t\t\t\t\t\tthread.throw_warning( pl.error.domain( \"operator_specifier\", type, atom.indicator ) );\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar fix = { prefix: null, infix: null, postfix: null };\r\n\t\t\t\t\t\t\tfor( var p in thread.session.__operators ) {\r\n\t\t\t\t\t\t\t\tif(!thread.session.__operators.hasOwnProperty(p)) continue;\r\n\t\t\t\t\t\t\t\tvar classes = thread.session.__operators[p][operator.id];\r\n\t\t\t\t\t\t\t\tif( classes ) {\r\n\t\t\t\t\t\t\t\t\tif( indexOf( classes, \"fx\" ) !== -1 ) { fix.prefix = { priority: p, type: \"fx\" }; }\r\n\t\t\t\t\t\t\t\t\tif( indexOf( classes, \"fy\" ) !== -1 ) { fix.prefix = { priority: p, type: \"fy\" }; }\r\n\t\t\t\t\t\t\t\t\tif( indexOf( classes, \"xf\" ) !== -1 ) { fix.postfix = { priority: p, type: \"xf\" }; }\r\n\t\t\t\t\t\t\t\t\tif( indexOf( classes, \"yf\" ) !== -1 ) { fix.postfix = { priority: p, type: \"yf\" }; }\r\n\t\t\t\t\t\t\t\t\tif( indexOf( classes, \"xfx\" ) !== -1 ) { fix.infix = { priority: p, type: \"xfx\" }; }\r\n\t\t\t\t\t\t\t\t\tif( indexOf( classes, \"xfy\" ) !== -1 ) { fix.infix = { priority: p, type: \"xfy\" }; }\r\n\t\t\t\t\t\t\t\t\tif( indexOf( classes, \"yfx\" ) !== -1 ) { fix.infix = { priority: p, type: \"yfx\" }; }\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar current_class;\r\n\t\t\t\t\t\t\tswitch( type.id ) {\r\n\t\t\t\t\t\t\t\tcase \"fy\": case \"fx\": current_class = \"prefix\"; break;\r\n\t\t\t\t\t\t\t\tcase \"yf\": case \"xf\": current_class = \"postfix\"; break;\r\n\t\t\t\t\t\t\t\tdefault: current_class = \"infix\"; break;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(fix.infix && current_class === \"postfix\" || fix.postfix && current_class === \"infix\") {\r\n\t\t\t\t\t\t\t\tthread.throw_warning( pl.error.permission( \"create\", \"operator\", operator, atom.indicator ) );\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif( fix[current_class] ) {\r\n\t\t\t\t\t\t\t\t\tremove( thread.session.__operators[fix[current_class].priority][operator.id], fix[current_class].type );\r\n\t\t\t\t\t\t\t\t\tif( thread.session.__operators[fix[current_class].priority][operator.id].length === 0 ) {\r\n\t\t\t\t\t\t\t\t\t\tdelete thread.session.__operators[fix[current_class].priority][operator.id];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif( priority.value > 0 ) {\r\n\t\t\t\t\t\t\t\t\tif( !thread.session.__operators[priority.value] ) thread.session.__operators[priority.value.toString()] = {};\r\n\t\t\t\t\t\t\t\t\tif( !thread.session.__operators[priority.value][operator.id] ) thread.session.__operators[priority.value][operator.id] = [];\r\n\t\t\t\t\t\t\t\t\tthread.session.__operators[priority.value][operator.id].push( type.id );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pl.type.is_variable(pointer)) {\r\n\t\t\t\t\t\tthread.throw_warning( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if(!pl.type.is_term(pointer) || pointer.indicator !== \"[]/0\") {\r\n\t\t\t\t\t\tthread.throw_warning( pl.error.type( \"list\", operators, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// initialization/1\r\n\t\t\t\"initialization/1\": function(thread, atom, options) {\r\n\t\t\t\tvar goal = atom.args[0];\r\n\t\t\t\toptions.initialization.push(goal);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t// Flags\r\n\t\tflag: {\r\n\t\t\t\r\n\t\t\t// Bounded numbers\r\n\t\t\tbounded: {\r\n\t\t\t\tallowed: [new Term( \"true\" ), new Term( \"false\" )],\r\n\t\t\t\tvalue: new Term( \"true\" ),\r\n\t\t\t\tchangeable: false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Maximum integer\r\n\t\t\tmax_integer: {\r\n\t\t\t\tallowed: [new Num( Number.MAX_SAFE_INTEGER )],\r\n\t\t\t\tvalue: new Num( Number.MAX_SAFE_INTEGER ),\r\n\t\t\t\tchangeable: false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Minimum integer\r\n\t\t\tmin_integer: {\r\n\t\t\t\tallowed: [new Num( Number.MIN_SAFE_INTEGER )],\r\n\t\t\t\tvalue: new Num( Number.MIN_SAFE_INTEGER ),\r\n\t\t\t\tchangeable: false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Rounding function\r\n\t\t\tinteger_rounding_function: {\r\n\t\t\t\tallowed: [new Term( \"down\" ), new Term( \"toward_zero\" )],\r\n\t\t\t\tvalue: new Term( \"toward_zero\" ),\r\n\t\t\t\tchangeable: false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Character conversion\r\n\t\t\tchar_conversion: {\r\n\t\t\t\tallowed: [new Term( \"on\" ), new Term( \"off\" )],\r\n\t\t\t\tvalue: new Term( \"on\" ),\r\n\t\t\t\tchangeable: true\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Debugger\r\n\t\t\tdebug: {\r\n\t\t\t\tallowed: [new Term( \"on\" ), new Term( \"off\" )],\r\n\t\t\t\tvalue: new Term( \"off\" ),\r\n\t\t\t\tchangeable: true\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Maximum arity of predicates\r\n\t\t\tmax_arity: {\r\n\t\t\t\tallowed: [new Term( \"unbounded\" )],\r\n\t\t\t\tvalue: new Term( \"unbounded\" ),\r\n\t\t\t\tchangeable: false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Unkwnow predicates behavior\r\n\t\t\tunknown: {\r\n\t\t\t\tallowed: [new Term( \"error\" ), new Term( \"fail\" ), new Term( \"warning\" )],\r\n\t\t\t\tvalue: new Term( \"error\" ),\r\n\t\t\t\tchangeable: true\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Double quotes behavior\r\n\t\t\tdouble_quotes: {\r\n\t\t\t\tallowed: [new Term( \"chars\" ), new Term( \"codes\" ), new Term( \"atom\" )],\r\n\t\t\t\tvalue: new Term( \"chars\" ),\r\n\t\t\t\tchangeable: true\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Occurs check behavior\r\n\t\t\toccurs_check: {\r\n\t\t\t\tallowed: [new Term( \"false\" ), new Term( \"true\" )],\r\n\t\t\t\tvalue: new Term( \"false\" ),\r\n\t\t\t\tchangeable: true\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Dialect\r\n\t\t\tdialect: {\r\n\t\t\t\tallowed: [new Term( \"tau\" )],\r\n\t\t\t\tvalue: new Term( \"tau\" ),\r\n\t\t\t\tchangeable: false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Version\r\n\t\t\tversion_data: {\r\n\t\t\t\tallowed: [new Term( \"tau\", [new Num(version.major,false), new Num(version.minor,false), new Num(version.patch,false), new Term(version.status)] )],\r\n\t\t\t\tvalue: new Term( \"tau\", [new Num(version.major,false), new Num(version.minor,false), new Num(version.patch,false), new Term(version.status)] ),\r\n\t\t\t\tchangeable: false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// NodeJS\r\n\t\t\tnodejs: {\r\n\t\t\t\tallowed: [new Term( \"true\" ), new Term( \"false\" )],\r\n\t\t\t\tvalue: new Term( nodejs_flag ? \"true\" : \"false\" ),\r\n\t\t\t\tchangeable: false\r\n\t\t\t},\r\n\r\n\t\t\t// Arguments\r\n\t\t\targv: {\r\n\t\t\t\tallowed: [nodejs_arguments],\r\n\t\t\t\tvalue: nodejs_arguments,\r\n\t\t\t\tchangeble: false\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t// Unify\r\n\t\tunify: function(t1, t2, occurs_check) {\r\n\t\t\toccurs_check = occurs_check === undefined ? false : occurs_check;\r\n\t\t\tvar left = Array.isArray(t1) ? t1 : [t1];\r\n\t\t\tvar right = Array.isArray(t2) ? t2 : [t2];\r\n\t\t\tif(left.length !== right.length)\r\n\t\t\t\treturn null;\r\n\t\t\tvar subs = new Substitution();\r\n\t\t\twhile(left.length > 0) {\r\n\t\t\t\tvar s = left.pop();\r\n\t\t\t\tvar t = right.pop();\r\n\t\t\t\tif(pl.type.is_variable(s))\r\n\t\t\t\t\ts = s.apply(subs);\r\n\t\t\t\tif(pl.type.is_variable(t))\r\n\t\t\t\t\tt = t.apply(subs);\r\n\t\t\t\t// same object\r\n\t\t\t\tif(s == t)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t// compound terms\r\n\t\t\t\tif(pl.type.is_term(s) && pl.type.is_term(t)) {\r\n\t\t\t\t\tif(s.indicator !== t.indicator)\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\tfor(var i = s.args.length-1; i >= 0; i--) {\r\n\t\t\t\t\t\tleft.push(s.args[i]);\r\n\t\t\t\t\t\tright.push(t.args[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t// numbers\r\n\t\t\t\t} else if(pl.type.is_number(s) && pl.type.is_number(t)) {\r\n\t\t\t\t\tif(s.value !== t.value || s.is_float !== t.is_float)\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t// variable - term\r\n\t\t\t\t} else if(pl.type.is_variable(s)) {\r\n\t\t\t\t\tt = t.apply(subs);\r\n\t\t\t\t\t// x = x\r\n\t\t\t\t\tif(pl.type.is_variable(t) && s.id === t.id)\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t// occurs check\r\n\t\t\t\t\tif(occurs_check === true && indexOf(t.variables(), s.id) !== -1)\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t// anonymous variable\r\n\t\t\t\t\tif(s.id !== \"_\")\r\n\t\t\t\t\t\tsubs.add(s.id, t);\r\n\t\t\t\t// term - variable\r\n\t\t\t\t} else if(pl.type.is_variable(t)) {\r\n\t\t\t\t\tleft.push(t);\r\n\t\t\t\t\tright.push(s);\r\n\t\t\t\t// user-defined terms\r\n\t\t\t\t} else if(s.unify !== undefined) {\r\n\t\t\t\t\tvar user_subs = s.apply(subs).unify(t.apply(subs), occurs_check);\r\n\t\t\t\t\tif(user_subs == null)\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\tfor(var i in user_subs.links)\r\n\t\t\t\t\t\tsubs.add(i, user_subs.links[i]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn subs.apply(subs);\r\n\t\t},\r\n\r\n\t\t// Is rename\r\n\t\tis_rename: function(obj1, obj2, links) {\r\n\t\t\tlinks = links || {};\r\n\t\t\tif(obj1.is_rename && obj2.is_rename)\r\n\t\t\t\treturn obj1.is_rename(obj2, links);\r\n\t\t\telse if(obj1.equals && obj2.equals)\r\n\t\t\t\treturn obj1.equals(obj2);\r\n\t\t\telse\r\n\t\t\t\treturn false;\r\n\t\t},\r\n\t\t\r\n\t\t// Compare\r\n\t\tcompare: function( obj1, obj2 ) {\r\n\t\t\tvar type = pl.type.compare( obj1, obj2 );\r\n\t\t\treturn type !== 0 ? type : obj1.compare( obj2 );\r\n\t\t},\r\n\t\t\r\n\t\t// Arithmetic comparison\r\n\t\tarithmetic_compare: function( thread, obj1, obj2 ) {\r\n\t\t\tvar expr1 = obj1.interpret( thread );\r\n\t\t\tif( !pl.type.is_number( expr1 ) ) {\r\n\t\t\t\treturn expr1;\r\n\t\t\t} else {\r\n\t\t\t\tvar expr2 = obj2.interpret( thread );\r\n\t\t\t\tif( !pl.type.is_number( expr2 ) ) {\r\n\t\t\t\t\treturn expr2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn expr1.value < expr2.value ? -1 : (expr1.value > expr2.value ? 1 : 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// Operate\r\n\t\toperate: function( thread, obj ) {\r\n\t\t\tif( pl.type.is_operator( obj ) ) {\r\n\t\t\t\tvar op = pl.type.is_operator( obj );\r\n\t\t\t\tvar args = [], value;\r\n\t\t\t\tvar type = false;\r\n\t\t\t\tfor( var i = 0; i < obj.args.length; i++ ) {\r\n\t\t\t\t\tvalue = obj.args[i].interpret( thread );\r\n\t\t\t\t\tif( !pl.type.is_number( value ) ) {\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t} else if( op.type_args !== null && value.is_float !== op.type_args ) {\r\n\t\t\t\t\t\treturn pl.error.type( op.type_args ? \"float\" : \"integer\", value, thread.__call_indicator );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\targs.push( value.value );\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttype = type || value.is_float;\r\n\t\t\t\t}\r\n\t\t\t\targs.push( thread );\r\n\t\t\t\tvalue = pl.arithmetic.evaluation[obj.indicator].fn.apply( this, args );\r\n\t\t\t\tif(obj.indicator === \"^/2\" && !type && value !== parseInt(value, 10))\r\n\t\t\t\t\treturn pl.error.type( \"float\", new Num(args[0],false), thread.__call_indicator );\r\n\t\t\t\ttype = op.type_result === null ? type : op.type_result;\r\n\t\t\t\tif( pl.type.is_term( value ) ) {\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t} else if( value === Number.POSITIVE_INFINITY || value === Number.NEGATIVE_INFINITY ) {\r\n\t\t\t\t\treturn pl.error.evaluation( \"float_overflow\", thread.__call_indicator );\r\n\t\t\t\t} else if( type === false && thread.get_flag( \"bounded\" ).id === \"true\" && (value > thread.get_flag( \"max_integer\" ).value || value < thread.get_flag( \"min_integer\" ).value) ) {\r\n\t\t\t\t\treturn pl.error.evaluation( \"int_overflow\", thread.__call_indicator );\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn new Num( value, type );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn pl.error.type( \"evaluable\", str_indicator(obj.indicator), thread.__call_indicator );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// Errors\r\n\t\terror: {\r\n\t\t\t\r\n\t\t\t// Existence error\r\n\t\t\texistence: function( type, object, indicator ) {\r\n\t\t\t\tif( typeof object === \"string\" )\r\n\t\t\t\t\tobject = str_indicator( object );\r\n\t\t\t\treturn new Term( \"error\", [new Term( \"existence_error\", [new Term( type ), object] ), str_indicator( indicator )] );\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Type error\r\n\t\t\ttype: function( expected, found, indicator ) {\r\n\t\t\t\treturn new Term( \"error\", [new Term( \"type_error\", [new Term( expected ), found] ), str_indicator( indicator )] );\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Instantation error\r\n\t\t\tinstantiation: function( indicator ) {\r\n\t\t\t\treturn new Term( \"error\", [new Term( \"instantiation_error\" ), str_indicator( indicator )] );\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Uninstantation error\r\n\t\t\tuninstantiation: function( found, indicator ) {\r\n\t\t\t\treturn new Term( \"error\", [new Term( \"uninstantiation_error\", [new Term( found )] ), str_indicator( indicator )] );\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Domain error\r\n\t\t\tdomain: function( expected, found, indicator ) {\r\n\t\t\t\treturn new Term( \"error\", [new Term( \"domain_error\", [new Term( expected ), found]), str_indicator( indicator )] );\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Representation error\r\n\t\t\trepresentation: function( flag, indicator ) {\r\n\t\t\t\treturn new Term( \"error\", [new Term( \"representation_error\", [new Term( flag )] ), str_indicator( indicator )] );\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Permission error\r\n\t\t\tpermission: function( operation, type, found, indicator ) {\r\n\t\t\t\treturn new Term( \"error\", [new Term( \"permission_error\", [new Term( operation ), new Term( type ), found] ), str_indicator( indicator )] );\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Evaluation error\r\n\t\t\tevaluation: function( error, indicator ) {\r\n\t\t\t\treturn new Term( \"error\", [new Term( \"evaluation_error\", [new Term( error )] ), str_indicator( indicator )] );\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Syntax error\r\n\t\t\tsyntax: function( token, expected, last ) {\r\n\t\t\t\ttoken = token || {value: \"\", line: 0, column: 0, matches: [\"\"], start: 0};\r\n\t\t\t\tvar position = last && token.matches.length > 0 ? token.start + token.matches[0].length : token.start;\r\n\t\t\t\tvar found = last ? new Term(\"token_not_found\") : new Term(\"found\", [new Term(token.value.toString())]);\r\n\t\t\t\tvar info = new Term( \".\", [new Term( \"line\", [new Num(token.line+1)] ), new Term( \".\", [new Term( \"column\", [new Num(position)] ), new Term( \".\", [found, new Term( \"[]\", [] )] )] )] );\r\n\t\t\t\treturn new Term( \"error\", [new Term( \"syntax_error\", [new Term( expected )] ), info] );\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Syntax error by predicate\r\n\t\t\tsyntax_by_predicate: function( expected, indicator ) {\r\n\t\t\t\treturn new Term( \"error\", [new Term( \"syntax_error\", [new Term( expected ) ] ), str_indicator( indicator )] );\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t// Warnings\r\n\t\twarning: {\r\n\t\t\t\r\n\t\t\t// Singleton variables\r\n\t\t\tsingleton: function( variables, rule, line ) {\r\n\t\t\t\tvar list = new Term( \"[]\" );\r\n\t\t\t\tfor( var i = variables.length-1; i >= 0; i-- )\r\n\t\t\t\t\tlist = new Term( \".\", [new Var(variables[i]), list] );\r\n\t\t\t\treturn new Term( \"warning\", [new Term( \"singleton_variables\", [list, str_indicator(rule)]), new Term(\".\",[new Term( \"line\", [ new Num( line, false ) ]), new Term(\"[]\")])] );\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Failed goal\r\n\t\t\tfailed_goal: function( goal, line ) {\r\n\t\t\t\treturn new Term( \"warning\", [new Term( \"failed_goal\", [goal]), new Term(\".\",[new Term( \"line\", [ new Num( line, false ) ]), new Term(\"[]\")])] );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t\r\n\t\t// Format of renamed variables\r\n\t\tformat_variable: function( id, variable ) {\r\n\t\t\tvar charcode = variable && variable.length > 0 ? codePointAt(variable, 1) : 0;\r\n\t\t\tif(variable === \"_\" || variable && variable[0] === \"_\" && (charcode === 95 || charcode >= 65 && charcode <= 90))\r\n\t\t\t\treturn \"__\" + id;\r\n\t\t\treturn \"_\" + id;\r\n\t\t},\r\n\t\t\r\n\t\t// Format of computed answers\r\n\t\tformat_answer: function( answer, thread, options ) {\r\n\t\t\tif( thread instanceof Session )\r\n\t\t\t\tthread = thread.thread;\r\n\t\t\tvar options = options ? options : {};\r\n\t\t\toptions.session = thread ? thread.session : undefined;\r\n\t\t\tif( pl.type.is_error( answer ) ) {\r\n\t\t\t\treturn \"uncaught exception: \" + answer.args[0].toString(options);\r\n\t\t\t} else if( answer === false ) {\r\n\t\t\t\treturn \"false\";\r\n\t\t\t} else if( answer === null ) {\r\n\t\t\t\treturn \"limit exceeded\";\r\n\t\t\t} else {\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\tvar str = \"\";\r\n\t\t\t\tif( pl.type.is_substitution( answer ) ) {\r\n\t\t\t\t\tvar dom = answer.domain( true );\r\n\t\t\t\t\tfor( var link in answer.links ){\r\n\t\t\t\t\t\tif( !answer.links.hasOwnProperty(link) ) continue;\r\n\t\t\t\t\t\tif( pl.type.is_variable(answer.links[link]) ) {\r\n\t\t\t\t\t\t\tvar links = {};\r\n\t\t\t\t\t\t\tlinks[answer.links[link].id] = new Var(link);\r\n\t\t\t\t\t\t\tanswer = answer.apply( new Substitution(links) );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tanswer = answer.filter( function( id, value ) {\r\n\t\t\t\t\t\treturn !pl.type.is_variable( value ) ||\r\n\t\t\t\t\t\t\tpl.type.is_variable( value ) && answer.has_attributes( id ) ||\r\n\t\t\t\t\t\t\tindexOf( dom, value.id ) !== -1 && id !== value.id;\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t\tfor( var link in answer.links ) {\r\n\t\t\t\t\tif(!answer.links.hasOwnProperty(link))\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tif( pl.type.is_variable( answer.links[link] ) && link === answer.links[link].id ) {\r\n\t\t\t\t\t\tvar attrs = answer.attrs[link];\r\n\t\t\t\t\t\tfor( var module in attrs ) {\r\n\t\t\t\t\t\t\tif(!attrs.hasOwnProperty(module))\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\ti++;\r\n\t\t\t\t\t\t\tif( str !== \"\" )\r\n\t\t\t\t\t\t\t\tstr += \", \";\r\n\t\t\t\t\t\t\tstr += \"put_attr(\" + link + \", \" + module + \", \" + attrs[module].toString(options) + \")\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t\tif( str !== \"\" )\r\n\t\t\t\t\t\t\tstr += \", \";\r\n\t\t\t\t\t\tstr += link.toString( options ) + \" = \" +\r\n\t\t\t\t\t\t\tanswer.links[link].toString( options, {priority: \"700\", class: \"xfx\", indicator: \"=/2\"}, \"right\" );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif( i === 0 ) {\r\n\t\t\t\t\treturn \"true\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn str;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// Flatten default errors\r\n\t\tflatten_error: function( error ) {\r\n\t\t\tif( !pl.type.is_error( error ) ) return null;\r\n\t\t\terror = error.args[0];\r\n\t\t\tvar obj = {};\r\n\t\t\tobj.type = error.args[0].id;\r\n\t\t\tobj.thrown = obj.type === \"syntax_error\" ? null : error.args[1].id;\r\n\t\t\tobj.expected = null;\r\n\t\t\tobj.found = null;\r\n\t\t\tobj.representation = null;\r\n\t\t\tobj.existence = null;\r\n\t\t\tobj.existence_type = null;\r\n\t\t\tobj.line = null;\r\n\t\t\tobj.column = null;\r\n\t\t\tobj.permission_operation = null;\r\n\t\t\tobj.permission_type = null;\r\n\t\t\tobj.evaluation_type = null;\r\n\t\t\tif( obj.type === \"type_error\" || obj.type === \"domain_error\" ) {\r\n\t\t\t\tobj.expected = error.args[0].args[0].id;\r\n\t\t\t\tobj.found = error.args[0].args[1].toString();\r\n\t\t\t} else if( obj.type === \"syntax_error\" ) {\r\n\t\t\t\tif( error.args[1].indicator === \"./2\" ) {\r\n\t\t\t\t\tobj.expected = error.args[0].args[0].id;\r\n\t\t\t\t\tobj.found = error.args[1].args[1].args[1].args[0];\r\n\t\t\t\t\tobj.found = obj.found.id === \"token_not_found\" ? obj.found.id : obj.found.args[0].id;\r\n\t\t\t\t\tobj.line = error.args[1].args[0].args[0].value;\r\n\t\t\t\t\tobj.column = error.args[1].args[1].args[0].args[0].value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj.thrown = error.args[1].id;\r\n\t\t\t\t}\r\n\t\t\t} else if( obj.type === \"permission_error\" ) {\r\n\t\t\t\tobj.found = error.args[0].args[2].toString();\r\n\t\t\t\tobj.permission_operation = error.args[0].args[0].id;\r\n\t\t\t\tobj.permission_type = error.args[0].args[1].id;\r\n\t\t\t} else if( obj.type === \"evaluation_error\" ) {\r\n\t\t\t\tobj.evaluation_type = error.args[0].args[0].id;\r\n\t\t\t} else if( obj.type === \"representation_error\" ) {\r\n\t\t\t\tobj.representation = error.args[0].args[0].id;\r\n\t\t\t} else if( obj.type === \"existence_error\" ) {\r\n\t\t\t\tobj.existence = error.args[0].args[1].toString();\r\n\t\t\t\tobj.existence_type = error.args[0].args[0].id;\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\t\r\n\t\t// Create new session\r\n\t\tcreate: function( limit ) {\r\n\t\t\treturn new pl.type.Session( limit );\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\t// Built-in predicates\r\n\tpl.builtin = new Module(\"system\", {\r\n\r\n\t\t// TERM AND GOAL EXPANSION\r\n\r\n\t\t// goal_expansion/2\r\n\t\t\"goal_expansion/2\": [\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\",\", [new Var(\"X\"),new Var(\"Y\")]),new Term(\",\", [new Var(\"X_\"),new Var(\"Y_\")])]), new Term(\";\", [new Term(\",\", [new Term(\"goal_expansion\", [new Var(\"X\"),new Var(\"X_\")]),new Term(\";\", [new Term(\"goal_expansion\", [new Var(\"Y\"),new Var(\"Y_\")]),new Term(\"=\", [new Var(\"Y_\"),new Var(\"Y\")])])]),new Term(\",\", [new Term(\"=\", [new Var(\"X\"),new Var(\"X_\")]),new Term(\"goal_expansion\", [new Var(\"Y\"),new Var(\"Y_\")])])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\";\", [new Var(\"X\"),new Var(\"Y\")]),new Term(\";\", [new Var(\"X_\"),new Var(\"Y_\")])]), new Term(\";\", [new Term(\",\", [new Term(\"goal_expansion\", [new Var(\"X\"),new Var(\"X_\")]),new Term(\";\", [new Term(\"goal_expansion\", [new Var(\"Y\"),new Var(\"Y_\")]),new Term(\"=\", [new Var(\"Y_\"),new Var(\"Y\")])])]),new Term(\",\", [new Term(\"=\", [new Var(\"X\"),new Var(\"X_\")]),new Term(\"goal_expansion\", [new Var(\"Y\"),new Var(\"Y_\")])])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"->\", [new Var(\"X\"),new Var(\"Y\")]),new Term(\"->\", [new Var(\"X_\"),new Var(\"Y_\")])]), new Term(\";\", [new Term(\",\", [new Term(\"goal_expansion\", [new Var(\"X\"),new Var(\"X_\")]),new Term(\";\", [new Term(\"goal_expansion\", [new Var(\"Y\"),new Var(\"Y_\")]),new Term(\"=\", [new Var(\"Y_\"),new Var(\"Y\")])])]),new Term(\",\", [new Term(\"=\", [new Var(\"X\"),new Var(\"X_\")]),new Term(\"goal_expansion\", [new Var(\"Y\"),new Var(\"Y_\")])])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"catch\", [new Var(\"X\"),new Var(\"Y\"),new Var(\"Z\")]),new Term(\"catch\", [new Var(\"X_\"),new Var(\"Y\"),new Var(\"Z_\")])]), new Term(\";\", [new Term(\",\", [new Term(\"goal_expansion\", [new Var(\"X\"),new Var(\"X_\")]),new Term(\";\", [new Term(\"goal_expansion\", [new Var(\"Z\"),new Var(\"Z_\")]),new Term(\"=\", [new Var(\"Z_\"),new Var(\"Z\")])])]),new Term(\",\", [new Term(\"=\", [new Var(\"X_\"),new Var(\"X\")]),new Term(\"goal_expansion\", [new Var(\"Z\"),new Var(\"Z_\")])])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"\\\\+\", [new Var(\"X\")]),new Term(\"\\\\+\", [new Var(\"X_\")])]), new Term(\",\", [new Term(\"nonvar\", [new Var(\"X\")]),new Term(\"goal_expansion\", [new Var(\"X\"),new Var(\"X_\")])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"once\", [new Var(\"X\")]),new Term(\"once\", [new Var(\"X_\")])]), new Term(\",\", [new Term(\"nonvar\", [new Var(\"X\")]),new Term(\"goal_expansion\", [new Var(\"X\"),new Var(\"X_\")])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"findall\", [new Var(\"X\"),new Var(\"Y\"),new Var(\"Z\")]),new Term(\"findall\", [new Var(\"X\"),new Var(\"Y_\"),new Var(\"Z\")])]), new Term(\"goal_expansion\", [new Var(\"Y\"),new Var(\"Y_\")])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"setof\", [new Var(\"X\"),new Var(\"Y\"),new Var(\"Z\")]),new Term(\"findall\", [new Var(\"X\"),new Var(\"Y_\"),new Var(\"Z\")])]), new Term(\"goal_expansion\", [new Var(\"Y\"),new Var(\"Y_\")])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"bagof\", [new Var(\"X\"),new Var(\"Y\"),new Var(\"Z\")]),new Term(\"findall\", [new Var(\"X\"),new Var(\"Y_\"),new Var(\"Z\")])]), new Term(\"goal_expansion\", [new Var(\"Y\"),new Var(\"Y_\")])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"call\", [new Var(\"X\")]),new Term(\"call\", [new Var(\"X_\")])]), new Term(\",\", [new Term(\"nonvar\", [new Var(\"X\")]),new Term(\"goal_expansion\", [new Var(\"X\"),new Var(\"X_\")])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"call\", [new Var(\"X\"),new Var(\"A1\")]),new Term(\"call\", [new Var(\"F_\")])]), new Term(\",\", [new Term(\"=..\", [new Var(\"F\"),new Term(\".\", [new Var(\"X\"),new Term(\".\", [new Var(\"A1\"),new Term(\"[]\", [])])])]),new Term(\"goal_expansion\", [new Var(\"F\"),new Var(\"F_\")])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"call\", [new Var(\"X\"),new Var(\"A1\"),new Var(\"A2\")]),new Term(\"call\", [new Var(\"F_\")])]), new Term(\",\", [new Term(\"=..\", [new Var(\"F\"),new Term(\".\", [new Var(\"X\"),new Term(\".\", [new Var(\"A1\"),new Term(\".\", [new Var(\"A2\"),new Term(\"[]\", [])])])])]),new Term(\"goal_expansion\", [new Var(\"F\"),new Var(\"F_\")])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"call\", [new Var(\"X\"),new Var(\"A1\"),new Var(\"A2\"),new Var(\"A3\")]),new Term(\"call\", [new Var(\"F_\")])]), new Term(\",\", [new Term(\"=..\", [new Var(\"F\"),new Term(\".\", [new Var(\"X\"),new Term(\".\", [new Var(\"A1\"),new Term(\".\", [new Var(\"A2\"),new Term(\".\", [new Var(\"A3\"),new Term(\"[]\", [])])])])])]),new Term(\"goal_expansion\", [new Var(\"F\"),new Var(\"F_\")])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"call\", [new Var(\"X\"),new Var(\"A1\"),new Var(\"A2\"),new Var(\"A3\"),new Var(\"A4\")]),new Term(\"call\", [new Var(\"F_\")])]), new Term(\",\", [new Term(\"=..\", [new Var(\"F\"),new Term(\".\", [new Var(\"X\"),new Term(\".\", [new Var(\"A1\"),new Term(\".\", [new Var(\"A2\"),new Term(\".\", [new Var(\"A3\"),new Term(\".\", [new Var(\"A4\"),new Term(\"[]\", [])])])])])])]),new Term(\"goal_expansion\", [new Var(\"F\"),new Var(\"F_\")])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"call\", [new Var(\"X\"),new Var(\"A1\"),new Var(\"A2\"),new Var(\"A3\"),new Var(\"A4\"),new Var(\"A5\")]),new Term(\"call\", [new Var(\"F_\")])]), new Term(\",\", [new Term(\"=..\", [new Var(\"F\"),new Term(\".\", [new Var(\"X\"),new Term(\".\", [new Var(\"A1\"),new Term(\".\", [new Var(\"A2\"),new Term(\".\", [new Var(\"A3\"),new Term(\".\", [new Var(\"A4\"),new Term(\".\", [new Var(\"A5\"),new Term(\"[]\", [])])])])])])])]),new Term(\"goal_expansion\", [new Var(\"F\"),new Var(\"F_\")])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"call\", [new Var(\"X\"),new Var(\"A1\"),new Var(\"A2\"),new Var(\"A3\"),new Var(\"A4\"),new Var(\"A5\"),new Var(\"A6\")]),new Term(\"call\", [new Var(\"F_\")])]), new Term(\",\", [new Term(\"=..\", [new Var(\"F\"),new Term(\".\", [new Var(\"X\"),new Term(\".\", [new Var(\"A1\"),new Term(\".\", [new Var(\"A2\"),new Term(\".\", [new Var(\"A3\"),new Term(\".\", [new Var(\"A4\"),new Term(\".\", [new Var(\"A5\"),new Term(\".\", [new Var(\"A6\"),new Term(\"[]\", [])])])])])])])])]),new Term(\"goal_expansion\", [new Var(\"F\"),new Var(\"F_\")])])),\r\n\t\t\tnew Rule(new Term(\"goal_expansion\", [new Term(\"call\", [new Var(\"X\"),new Var(\"A1\"),new Var(\"A2\"),new Var(\"A3\"),new Var(\"A4\"),new Var(\"A5\"),new Var(\"A6\"),new Var(\"A7\")]),new Term(\"call\", [new Var(\"F_\")])]), new Term(\",\", [new Term(\"=..\", [new Var(\"F\"),new Term(\".\", [new Var(\"X\"),new Term(\".\", [new Var(\"A1\"),new Term(\".\", [new Var(\"A2\"),new Term(\".\", [new Var(\"A3\"),new Term(\".\", [new Var(\"A4\"),new Term(\".\", [new Var(\"A5\"),new Term(\".\", [new Var(\"A6\"),new Term(\".\", [new Var(\"A7\"),new Term(\"[]\", [])])])])])])])])])]),new Term(\"goal_expansion\", [new Var(\"F\"),new Var(\"F_\")])]))\r\n\t\t],\r\n\r\n\r\n\r\n\t\t// SYSTEM PREDICATES ($)\r\n\r\n\t\t// '$push_global_stack'/2\r\n\t\t\"$push_global_stack/2\": function(thread, point, atom) {\r\n\t\t\tvar stack = atom.args[0], value = atom.args[1];\r\n\t\t\tif(!pl.type.is_variable(stack)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tthread.push_global_stack(stack.id, value);\r\n\t\t\t\tthread.success(point);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// '$flush_global_stack'/3\r\n\t\t\"$flush_global_stack/3\": function(thread, point, atom) {\r\n\t\t\tvar stack = atom.args[0], list = atom.args[1], tail = atom.args[2];\r\n\t\t\tif(!pl.type.is_variable(stack)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar values = thread.flush_global_stack(stack.id, tail);\r\n\t\t\t\tthread.prepend([new State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\"=\", [list, values])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// '$free_variable_set'/3\r\n\t\t\"$free_variable_set/3\": function(thread, point, atom) {\r\n\t\t\tvar goal_in = atom.args[0], goal_out = atom.args[1], vars = atom.args[2];\r\n\t\t\tvar bv = [];\r\n\t\t\tvar pointer = goal_in;\r\n\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"^/2\") {\r\n\t\t\t\tbv = bv.concat(pointer.args[0].variables());\r\n\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t}\r\n\t\t\tvar gv = pointer.variables();\r\n\t\t\tvar fv = arrayToList(map(difference(gv, bv), function(v) {\r\n\t\t\t\treturn new Var(v);\r\n\t\t\t}));\r\n\t\t\tthread.prepend([\r\n\t\t\t\tnew State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\",\", [\r\n\t\t\t\t\t\tnew Term(\"=\", [goal_out, pointer]),\r\n\t\t\t\t\t\tnew Term(\"=\", [vars, fv]) \r\n\t\t\t\t\t])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)\r\n\t\t\t]);\r\n\t\t},\r\n\r\n\t\t// '$member'/2\r\n\t\t\"$member/2\": [\r\n\t\t\tnew pl.type.Rule(new pl.type.Term(\"$member\", [new pl.type.Var(\"X\"),new pl.type.Term(\".\", [new pl.type.Var(\"X\"),new pl.type.Var(\"_\")])]), null),\r\n\t\t\tnew pl.type.Rule(new pl.type.Term(\"$member\", [new pl.type.Var(\"X\"),new pl.type.Term(\".\", [new pl.type.Var(\"_\"),new pl.type.Var(\"Xs\")])]), new pl.type.Term(\"$member\", [new pl.type.Var(\"X\"),new pl.type.Var(\"Xs\")]))\r\n\t\t],\r\n\r\n\t\t// '$bind_bagof_keys/2'/2\r\n\t\t\"$bind_bagof_keys/2\": [\r\n\t\t\tnew pl.type.Rule(new pl.type.Term(\"$bind_bagof_keys\", [new pl.type.Term(\"[]\", []),new pl.type.Var(\"_\")]), null),\r\n\t\t\tnew pl.type.Rule(new pl.type.Term(\"$bind_bagof_keys\", [new pl.type.Term(\".\", [new pl.type.Term(\"-\", [new pl.type.Var(\"Key\"),new pl.type.Var(\"_\")]),new pl.type.Var(\"Bag\")]),new pl.type.Var(\"Vars\")]), new pl.type.Term(\",\", [new pl.type.Term(\"term_variables\", [new pl.type.Var(\"Key\"),new pl.type.Var(\"Vars\"),new pl.type.Var(\"_\")]),new pl.type.Term(\"$bind_bagof_keys\", [new pl.type.Var(\"Bag\"),new pl.type.Var(\"Vars\")])]))\r\n\t\t],\r\n\r\n\t\t// '$findall'/4\r\n\t\t\"$findall/4\": [\r\n\t\t\tnew pl.type.Rule(new pl.type.Term(\"$findall\", [new pl.type.Var(\"Template0\"),new pl.type.Var(\"Goal0\"),new pl.type.Var(\"Instances\"),new pl.type.Var(\"Tail\")]), new pl.type.Term(\";\", [new pl.type.Term(\",\", [new pl.type.Term(\"copy_term\", [new pl.type.Term(\"-\", [new pl.type.Var(\"Template0\"),new pl.type.Var(\"Goal0\")]),new pl.type.Term(\"-\", [new pl.type.Var(\"Template1\"),new pl.type.Var(\"Goal1\")])]),new pl.type.Term(\",\", [new pl.type.Term(\"call\", [new pl.type.Var(\"Goal1\")]),new pl.type.Term(\",\", [new pl.type.Term(\"copy_term\", [new pl.type.Var(\"Template1\"),new pl.type.Var(\"Template2\")]),new pl.type.Term(\",\", [new pl.type.Term(\"$push_global_stack\", [new pl.type.Var(\"Var\"),new pl.type.Var(\"Template2\")]),new pl.type.Term(\"false\", [])])])])]),new pl.type.Term(\"$flush_global_stack\", [new pl.type.Var(\"Var\"),new pl.type.Var(\"Instances\"),new pl.type.Var(\"Tail\")])]))\r\n\t\t],\r\n\r\n\t\t// '$bagof'/3\r\n\t\t\"$bagof/3\": [\r\n\t\t\tnew pl.type.Rule(new pl.type.Term(\"$bagof\", [new pl.type.Var(\"Template\"),new pl.type.Var(\"Goal0\"),new pl.type.Var(\"Answer\")]), new pl.type.Term(\",\", [new pl.type.Term(\"$free_variable_set\", [new pl.type.Term(\"^\", [new pl.type.Var(\"Template\"),new pl.type.Var(\"Goal0\")]),new pl.type.Var(\"Goal1\"),new pl.type.Var(\"FV\")]),new pl.type.Term(\",\", [new pl.type.Term(\"findall\", [new pl.type.Term(\"-\", [new pl.type.Var(\"FV\"),new pl.type.Var(\"Template\")]),new pl.type.Var(\"Goal1\"),new pl.type.Var(\"Answers\"),new pl.type.Term(\"[]\", [])]),new pl.type.Term(\",\", [new pl.type.Term(\"$bind_bagof_keys\", [new pl.type.Var(\"Answers\"),new pl.type.Var(\"_\")]),new pl.type.Term(\",\", [new pl.type.Term(\"keygroup\", [new pl.type.Var(\"Answers\"),new pl.type.Var(\"KeyGroups\")]),new pl.type.Term(\",\", [new pl.type.Term(\"keysort\", [new pl.type.Var(\"KeyGroups\"),new pl.type.Var(\"KeySorted\")]),new pl.type.Term(\"$member\", [new pl.type.Term(\"-\", [new pl.type.Var(\"FV\"),new pl.type.Var(\"Answer\")]),new pl.type.Var(\"KeySorted\")])])])])])]))\r\n\t\t],\r\n\r\n\t\t// '$setof'/3\r\n\t\t\"$setof/3\": [\r\n\t\t\tnew pl.type.Rule(new pl.type.Term(\"$setof\", [new pl.type.Var(\"Template\"),new pl.type.Var(\"Goal0\"),new pl.type.Var(\"Answer\")]), new pl.type.Term(\",\", [new pl.type.Term(\"$free_variable_set\", [new pl.type.Term(\"^\", [new pl.type.Var(\"Template\"),new pl.type.Var(\"Goal0\")]),new pl.type.Var(\"Goal1\"),new pl.type.Var(\"FV\")]),new pl.type.Term(\",\", [new pl.type.Term(\"findall\", [new pl.type.Term(\"-\", [new pl.type.Var(\"FV\"),new pl.type.Var(\"Template\")]),new pl.type.Var(\"Goal1\"),new pl.type.Var(\"Answers\"),new pl.type.Term(\"[]\", [])]),new pl.type.Term(\",\", [new pl.type.Term(\"$bind_bagof_keys\", [new pl.type.Var(\"Answers\"),new pl.type.Var(\"_\")]),new pl.type.Term(\",\", [new pl.type.Term(\"keygroup\", [new pl.type.Var(\"Answers\"),new pl.type.Var(\"KeyGroups\")]),new pl.type.Term(\",\", [new pl.type.Term(\"keysort\", [new pl.type.Var(\"KeyGroups\"),new pl.type.Var(\"KeySorted\")]),new pl.type.Term(\",\", [new pl.type.Term(\"$member\", [new pl.type.Term(\"-\", [new pl.type.Var(\"FV\"),new pl.type.Var(\"Unsorted\")]),new pl.type.Var(\"KeySorted\")]),new pl.type.Term(\"sort\", [new pl.type.Var(\"Unsorted\"),new pl.type.Var(\"Answer\")])])])])])])]))\r\n\t\t],\r\n\r\n\t\t// '$if/3'\r\n\t\t\"$if/3\": [\r\n\t\t\tnew pl.type.Rule(new pl.type.Term(\"$if\", [new pl.type.Var(\"If\"),new pl.type.Var(\"Then\"),new pl.type.Var(\"Else\")]), new pl.type.Term(\";\", [new pl.type.Term(\",\", [new pl.type.Term(\"call\", [new pl.type.Var(\"If\")]),new pl.type.Term(\",\", [new pl.type.Term(\"$push_global_stack\", [new pl.type.Var(\"Stack\"),new pl.type.Var(\"_\")]),new pl.type.Term(\"call\", [new pl.type.Var(\"Then\")])])]),new pl.type.Term(\",\", [new pl.type.Term(\"$flush_global_stack\", [new pl.type.Var(\"Stack\"),new pl.type.Term(\"[]\", []),new pl.type.Term(\"[]\", [])]),new pl.type.Term(\"call\", [new pl.type.Var(\"Else\")])])]))\r\n\t\t],\r\n\r\n\r\n\t\t// ATTRIBUTED VARIABLES\r\n\t\t\r\n\t\t//put_attr/3\r\n\t\t\"put_attr/3\": function( thread, point, atom ) {\r\n\t\t\tvar variable = atom.args[0], module = atom.args[1], value = atom.args[2];\r\n\t\t\tif( !pl.type.is_variable(variable) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"variable\", variable, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atom(module) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", module, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar subs = point.substitution.set_attribute( variable.id, module, value );\r\n\t\t\t\tthread.prepend( [new State( point.goal.replace(null), subs, point )] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// get_attr/3\r\n\t\t\"get_attr/3\": function( thread, point, atom ) {\r\n\t\t\tvar variable = atom.args[0], module = atom.args[1], value = atom.args[2];\r\n\t\t\tif( !pl.type.is_variable(variable) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"variable\", variable, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atom(module) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", module, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar attr = point.substitution.get_attribute( variable.id, module );\r\n\t\t\t\tif( attr ) {\r\n\t\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\t\tpoint.goal.replace( new Term(\"=\", [value, attr]) ),\r\n\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\tpoint\r\n\t\t\t\t\t)] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t\r\n\t\t// INPUT AND OUTPUT\r\n\t\t\r\n\t\t// op/3\r\n\t\t\"op/3\": function( thread, point, atom ) {\r\n\t\t\tvar priority = atom.args[0], type = atom.args[1], operators = atom.args[2];\r\n\t\t\tif(pl.type.is_atom(operators))\r\n\t\t\t\toperators = new Term(\".\", [operators, new Term(\"[]\")]);\r\n\t\t\tif( pl.type.is_variable( priority ) || pl.type.is_variable( type ) || pl.type.is_variable( operators ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_integer( priority ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", priority, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atom( type ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", type, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_list( operators ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", operators, atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_empty_list( operators ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"create\", \"operator\", operators, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar pointer = operators;\r\n\t\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"./2\") {\r\n\t\t\t\t\tvar operator = pointer.args[0];\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\tif( pl.type.is_variable( operator ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( !pl.type.is_atom( operator ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.type( \"atom\", operator, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( priority.value < 0 || priority.value > 1200 ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.domain( \"operator_priority\", priority, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( operator.id === \",\" ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.permission( \"modify\", \"operator\", operator, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( operator.id === \"{}\" ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.permission( \"create\", \"operator\", operator, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( operator.id === \"[]\" ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.permission( \"create\", \"operator\", operator, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( operator.id === \"|\" && priority.value !== 0 && (priority.value < 1001 || type.id.length !== 3 ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.permission( \"create\", \"operator\", operator, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( [\"fy\", \"fx\", \"yf\", \"xf\", \"xfx\", \"yfx\", \"xfy\"].indexOf( type.id ) === -1 ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.domain( \"operator_specifier\", type, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar fix = { prefix: null, infix: null, postfix: null };\r\n\t\t\t\t\t\tfor( var p in thread.session.__operators ) {\r\n\t\t\t\t\t\t\tif(!thread.session.__operators.hasOwnProperty(p)) continue;\r\n\t\t\t\t\t\t\tvar classes = thread.session.__operators[p][operator.id];\r\n\t\t\t\t\t\t\tif( classes ) {\r\n\t\t\t\t\t\t\t\tif( indexOf( classes, \"fx\" ) !== -1 ) { fix.prefix = { priority: p, type: \"fx\" }; }\r\n\t\t\t\t\t\t\t\tif( indexOf( classes, \"fy\" ) !== -1 ) { fix.prefix = { priority: p, type: \"fy\" }; }\r\n\t\t\t\t\t\t\t\tif( indexOf( classes, \"xf\" ) !== -1 ) { fix.postfix = { priority: p, type: \"xf\" }; }\r\n\t\t\t\t\t\t\t\tif( indexOf( classes, \"yf\" ) !== -1 ) { fix.postfix = { priority: p, type: \"yf\" }; }\r\n\t\t\t\t\t\t\t\tif( indexOf( classes, \"xfx\" ) !== -1 ) { fix.infix = { priority: p, type: \"xfx\" }; }\r\n\t\t\t\t\t\t\t\tif( indexOf( classes, \"xfy\" ) !== -1 ) { fix.infix = { priority: p, type: \"xfy\" }; }\r\n\t\t\t\t\t\t\t\tif( indexOf( classes, \"yfx\" ) !== -1 ) { fix.infix = { priority: p, type: \"yfx\" }; }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar current_class;\r\n\t\t\t\t\t\tswitch( type.id ) {\r\n\t\t\t\t\t\t\tcase \"fy\": case \"fx\": current_class = \"prefix\"; break;\r\n\t\t\t\t\t\t\tcase \"yf\": case \"xf\": current_class = \"postfix\"; break;\r\n\t\t\t\t\t\t\tdefault: current_class = \"infix\"; break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(fix.infix && current_class === \"postfix\" || fix.postfix && current_class === \"infix\") {\r\n\t\t\t\t\t\t\tthread.throw_error( pl.error.permission( \"create\", \"operator\", operator, atom.indicator ) );\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif( fix[current_class] ) {\r\n\t\t\t\t\t\t\t\tremove( thread.session.__operators[fix[current_class].priority][operator.id], fix[current_class].type );\r\n\t\t\t\t\t\t\t\tif( thread.session.__operators[fix[current_class].priority][operator.id].length === 0 ) {\r\n\t\t\t\t\t\t\t\t\tdelete thread.session.__operators[fix[current_class].priority][operator.id];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif( priority.value > 0 ) {\r\n\t\t\t\t\t\t\t\tif( !thread.session.__operators[priority.value] ) thread.session.__operators[priority.value.toString()] = {};\r\n\t\t\t\t\t\t\t\tif( !thread.session.__operators[priority.value][operator.id] ) thread.session.__operators[priority.value][operator.id] = [];\r\n\t\t\t\t\t\t\t\tthread.session.__operators[priority.value][operator.id].push( type.id );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(pl.type.is_variable(pointer)) {\r\n\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if(!pl.type.is_term(pointer) || pointer.indicator !== \"[]/0\") {\r\n\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", operators, atom.indicator ) );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthread.success(point);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// current_op/3\r\n\t\t\"current_op/3\": function( thread, point, atom ) {\r\n\t\t\tvar priority = atom.args[0], specifier = atom.args[1], operator = atom.args[2];\r\n\t\t\tvar points = [];\r\n\t\t\tif( !pl.type.is_variable( priority ) && !pl.type.is_integer( priority ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", priority, atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_integer( priority ) && ( priority.value < 0 || priority.value > 1200 ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"operator_priority\", priority, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( specifier ) && !pl.type.is_atom( specifier ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", specifier, atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_atom( specifier ) && indexOf( [\"fy\", \"fx\", \"yf\", \"xf\", \"xfx\", \"yfx\", \"xfy\"], specifier.id ) === -1 ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"operator_specifier\", specifier, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( operator ) && !pl.type.is_atom( operator ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", operator, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tfor( var p in thread.session.__operators )\r\n\t\t\t\t\tfor( var o in thread.session.__operators[p] )\r\n\t\t\t\t\t\tfor( var i = 0; i < thread.session.__operators[p][o].length; i++ )\r\n\t\t\t\t\t\t\tpoints.push( new State(\r\n\t\t\t\t\t\t\t\tpoint.goal.replace(\r\n\t\t\t\t\t\t\t\t\tnew Term( \",\", [\r\n\t\t\t\t\t\t\t\t\t\tnew Term( \"=\", [new Num( p, false ), priority] ),\r\n\t\t\t\t\t\t\t\t\t\tnew Term( \",\", [\r\n\t\t\t\t\t\t\t\t\t\t\tnew Term( \"=\", [new Term( thread.session.__operators[p][o][i], [] ), specifier] ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew Term( \"=\", [new Term( o, [] ), operator] )\r\n\t\t\t\t\t\t\t\t\t\t] )\r\n\t\t\t\t\t\t\t\t\t] )\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t\t) );\r\n\t\t\t\tthread.prepend( points );\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\r\n\r\n\t\t// LOGIC AND CONTROL STRUCTURES\r\n\t\r\n\t\t// ;/2 (disjunction)\r\n\t\t\";/2\": function(thread, point, atom) {\r\n\t\t\tvar left = atom.args[0], right = atom.args[1];\r\n\t\t\tvar context_left = left.args[0];\r\n\t\t\tvar free_left = left.indicator === \":/2\" ? left.args[1] : left;\r\n\t\t\t// if then else\r\n\t\t\tif(pl.type.is_term(free_left) && free_left.indicator === \"->/2\") {\r\n\t\t\t\tvar cond = left.indicator === \":/2\" ? new Term(\":\", [context_left, new Term(\"call\", [free_left.args[0]])]) : free_left.args[0];\r\n\t\t\t\tvar then = left.indicator === \":/2\" ? new Term(\":\", [context_left, free_left.args[1]]) : free_left.args[1];\r\n\t\t\t\tvar otherwise = right;\r\n\t\t\t\tvar goal_fst = point.goal.replace(new Term( \",\", [cond, new Term(\",\", [new Term(\"!\"), then])] ) );\r\n\t\t\t\tvar goal_snd = point.goal.replace(new Term( \",\", [new Term(\"!\"), otherwise]));\r\n\t\t\t\tthread.prepend([\r\n\t\t\t\t\tnew State(goal_fst, point.substitution, point),\r\n\t\t\t\t\tnew State(goal_snd, point.substitution, point)\r\n\t\t\t\t]);\r\n\t\t\t// soft-cut\r\n\t\t\t} else if(pl.type.is_term(free_left) && free_left.indicator === \"*->/2\") {\r\n\t\t\t\tvar cond = left.indicator === \":/2\" ? new Term(\":\", [context_left, free_left.args[0]]) : free_left.args[0];\r\n\t\t\t\tvar then = left.indicator === \":/2\" ? new Term(\":\", [context_left, free_left.args[1]]) : free_left.args[1];\r\n\t\t\t\tvar otherwise = right;\r\n\t\t\t\tthread.prepend([new State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\"$if\", [cond, then, otherwise])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)]);\r\n\t\t\t// otherwise\r\n\t\t\t} else {\r\n\t\t\t\tthread.prepend([\r\n\t\t\t\t\tnew State(point.goal.replace(left), point.substitution, point),\r\n\t\t\t\t\tnew State(point.goal.replace(right), point.substitution, point)\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// !/0 (cut)\r\n\t\t\"!/0\": function( thread, point, atom ) {\r\n\t\t\tvar parent_cut, last_cut, states = [];\r\n\t\t\tparent_cut = point;\r\n\t\t\tlast_cut = null;\r\n\t\t\twhile( parent_cut.parent !== null && parent_cut.parent.goal.search( atom ) ) {\r\n\t\t\t\tlast_cut = parent_cut;\r\n\t\t\t\tparent_cut = parent_cut.parent;\r\n\t\t\t\tif(parent_cut.goal !== null) {\r\n\t\t\t\t\tvar selected = parent_cut.goal.select();\r\n\t\t\t\t\tif(selected && selected.indicator === \":/2\")\r\n\t\t\t\t\t\tselected = selected.args[1];\r\n\t\t\t\t\tif( selected && selected.id === \"call\" && selected.search(atom) ) {\r\n\t\t\t\t\t\tparent_cut = last_cut;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar setup_call_cleanup = null;\r\n\t\t\tfor( var i = thread.points.length-1; i >= 0; i-- ) {\r\n\t\t\t\tvar state = thread.points[i];\r\n\t\t\t\tvar node = state.parent;\r\n\t\t\t\twhile( node !== null && node !== parent_cut.parent ) {\r\n\t\t\t\t\tnode = node.parent;\r\n\t\t\t\t}\r\n\t\t\t\tif( node === null && node !== parent_cut.parent )\r\n\t\t\t\t\tstates.push( state );\r\n\t\t\t\telse if(state.setup_call_cleanup_goal)\r\n\t\t\t\t\tsetup_call_cleanup = state.setup_call_cleanup_goal\r\n\t\t\t}\r\n\t\t\tthread.points = states.reverse();\r\n\t\t\tthread.prepend([new State(\r\n\t\t\t\tpoint.goal.replace(setup_call_cleanup),\r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)]);\r\n\t\t},\r\n\t\t\r\n\t\t// \\+ (negation)\r\n\t\t\"\\\\+/1\": function( thread, point, atom ) {\r\n\t\t\tvar goal = atom.args[0];\r\n\t\t\tif( pl.type.is_variable( goal ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_callable( goal ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"callable\", goal, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\t// TRANSPARENT VERSION OF THE NEGATION\r\n\t\t\t\t/*var neg_thread;\r\n\t\t\t\tif(point.negation_thread) {\r\n\t\t\t\t\tneg_thread = point.negation_thread;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tneg_thread = new Thread( thread.session );\r\n\t\t\t\t\tneg_thread.add_goal( goal );\r\n\t\t\t\t\tpoint.negation_thread = neg_thread;\r\n\t\t\t\t}\r\n\t\t\t\tneg_thread.answer( function( answer ) {\r\n\t\t\t\t\tif(answer === false) {\r\n\t\t\t\t\t\tthread.success( point );\r\n\t\t\t\t\t} else if(pl.type.is_error( answer )) {\r\n\t\t\t\t\t\tthread.throw_error( answer.args[0] );\r\n\t\t\t\t\t} else if(answer === null) {\r\n\t\t\t\t\t\tthread.prepend( [point] );\r\n\t\t\t\t\t\tthread.current_limit = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.again( answer !== null );\r\n\t\t\t\t} );\r\n\t\t\t\treturn true;*/\r\n\t\t\t\t\r\n\t\t\t\t// '\\+'(X) :- call(X), !, fail.\r\n\t\t\t\t// '\\+'(_).\r\n\t\t\t\tthread.prepend( [\r\n\t\t\t\t\tnew State( point.goal.replace( new Term( \",\", [new Term( \",\", [ new Term( \"call\", [goal] ), new Term( \"!\", [] ) ] ), new Term( \"fail\", [] ) ] ) ), point.substitution, point ),\r\n\t\t\t\t\tnew State( point.goal.replace( null ), point.substitution, point )\r\n\t\t\t\t] );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// ->/2 (implication)\r\n\t\t\"->/2\": function( thread, point, atom ) {\r\n\t\t\tvar cond = atom.args[0], then = atom.args[1];\r\n\t\t\tvar goal = point.goal.replace(new Term(\",\", [\r\n\t\t\t\tnew Term(\"call\", [cond]),\r\n\t\t\t\tnew Term(\",\", [new Term(\"!\"), then])\r\n\t\t\t]));\r\n\t\t\tthread.prepend( [new State( goal, point.substitution, point )] );\r\n\t\t},\r\n\r\n\t\t// *->/2 (soft-cut)\r\n\t\t\"*->/2\": function(thread, point, atom) {\r\n\t\t\tvar cond = atom.args[0], then = atom.args[1];\r\n\t\t\tvar goal = point.goal.replace(new Term(\",\", [\r\n\t\t\t\tnew Term(\"call\", [cond]), then]));\r\n\t\t\tthread.prepend([new State(goal, point.substitution, point)]);\r\n\t\t},\r\n\t\t\r\n\t\t// fail/0\r\n\t\t\"fail/0\": function( _1, _2, _3 ) {},\r\n\t\t\r\n\t\t// false/0\r\n\t\t\"false/0\": function( _1, _2, _3 ) {},\r\n\t\t\r\n\t\t// true/0\r\n\t\t\"true/0\": function( thread, point, _ ) {\r\n\t\t\tthread.success( point );\r\n\t\t},\r\n\t\t\r\n\t\t// call/1..8\r\n\t\t\"call/1\": callN(1),\r\n\t\t\"call/2\": callN(2),\r\n\t\t\"call/3\": callN(3),\r\n\t\t\"call/4\": callN(4),\r\n\t\t\"call/5\": callN(5),\r\n\t\t\"call/6\": callN(6),\r\n\t\t\"call/7\": callN(7),\r\n\t\t\"call/8\": callN(8),\r\n\t\t\r\n\t\t// once/1\r\n\t\t\"once/1\": function( thread, point, atom ) {\r\n\t\t\tvar goal = atom.args[0];\r\n\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \",\", [new Term( \"call\", [goal] ), new Term( \"!\", [] )] ) ), point.substitution, point )] );\r\n\t\t},\r\n\t\t\r\n\t\t// forall/2\r\n\t\t\"forall/2\": function( thread, point, atom ) {\r\n\t\t\tvar generate = atom.args[0], test = atom.args[1];\r\n\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"\\\\+\", [new Term( \",\", [new Term( \"call\", [generate] ), new Term( \"\\\\+\", [new Term( \"call\", [test] )] )] )] ) ), point.substitution, point )] );\r\n\t\t},\r\n\t\t\r\n\t\t// repeat/0\r\n\t\t\"repeat/0\": function( thread, point, _ ) {\r\n\t\t\tthread.prepend( [new State( point.goal.replace( null ), point.substitution, point ), point] );\r\n\t\t},\r\n\r\n\t\t// EXCEPTIONS\r\n\t\t\r\n\t\t// throw/1\r\n\t\t\"throw/1\": function( thread, point, atom ) {\r\n\t\t\tvar error = atom.args[0];\r\n\t\t\tif(pl.type.is_variable(error)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(thread.level.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tfor(var i = 0; i < thread.points.length; i++) {\r\n\t\t\t\t\tvar state = thread.points[i];\r\n\t\t\t\t\tif(state.setup_call_cleanup_catch) {\r\n\t\t\t\t\t\tthread.points = [new State(\r\n\t\t\t\t\t\t\tnew Term(\",\", [\r\n\t\t\t\t\t\t\t\tnew Term(\"catch\", [\r\n\t\t\t\t\t\t\t\t\tstate.setup_call_cleanup_catch,\r\n\t\t\t\t\t\t\t\t\tnew Var(\"_\"),\r\n\t\t\t\t\t\t\t\t\tnew Term(\"throw\", [error])\r\n\t\t\t\t\t\t\t\t]),\r\n\t\t\t\t\t\t\t\tnew Term(\"throw\", [error])\r\n\t\t\t\t\t\t\t]),\r\n\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t)];\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tthread.throw_error(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// catch/3\r\n\t\t\"catch/3\": function(thread, point, atom) {\r\n\t\t\tvar goal = atom.args[0], catcher = atom.args[1], recover = atom.args[2];\r\n\t\t\tvar nthread;\r\n\t\t\tif(!point.catch) {\r\n\t\t\t\tnthread = new Thread(thread.session);\r\n\t\t\t\tnthread.debugger = thread.debugger;\r\n\t\t\t\tnthread.format_success = function(state) { return state.substitution; };\r\n\t\t\t\tnthread.format_error = function(state) { return state.goal; };\r\n\t\t\t\tnthread.add_goal(goal, true, point);\r\n\t\t\t\tpoint.catch = nthread;\r\n\t\t\t} else {\r\n\t\t\t\tnthread = point.catch;\r\n\t\t\t}\r\n\t\t\tvar callback = function(answer) {\r\n\t\t\t\tif(pl.type.is_error(answer)) {\r\n\t\t\t\t\tvar occurs_check = thread.get_flag(\"occurs_check\").indicator === \"true/0\";\r\n\t\t\t\t\tvar state = new State();\r\n\t\t\t\t\tvar mgu = pl.unify(answer.args[0], catcher, occurs_check);\r\n\t\t\t\t\tif(mgu !== null) {\r\n\t\t\t\t\t\tstate.substitution = point.substitution.apply(mgu);\r\n\t\t\t\t\t\tstate.goal = point.goal.replace(recover).apply(mgu);\r\n\t\t\t\t\t\tstate.parent = point;\r\n\t\t\t\t\t\tthread.prepend([state]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthread.throw_error(answer.args[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if(answer !== false && answer !== null) {\r\n\t\t\t\t\tvar state = answer === null ? [] : new State(\r\n\t\t\t\t\t\tpoint.goal.apply(answer).replace(null),\r\n\t\t\t\t\t\tpoint.substitution.apply(answer),\r\n\t\t\t\t\t\tpoint\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthread.prepend([state, point]);\r\n\t\t\t\t} else if(answer === null) {\r\n\t\t\t\t\tthread.prepend([point]);\r\n\t\t\t\t\tif(thread.has_limit)\r\n\t\t\t\t\t\tthread.current_limit = 0;\r\n\t\t\t\t}\r\n\t\t\t\tthread.again(answer !== null);\r\n\t\t\t};\r\n\t\t\tnthread.answer(callback);\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\t// call_cleanup/2\r\n\t\t\"call_cleanup/2\": function(thread, point, atom) {\r\n\t\t\tvar call = atom.args[0], cleanup = atom.args[1];\r\n\t\t\tif(pl.type.is_variable(call) || pl.type.is_variable(cleanup)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(call)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", call, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(cleanup)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", cleanup, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar nthread, callback;\r\n\t\t\t\tif(point.hasOwnProperty(\"setup_call_cleanup_thread\")) {\r\n\t\t\t\t\tnthread = point.setup_call_cleanup_thread;\r\n\t\t\t\t\tcallback = point.setup_call_cleanup_callback;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar goal = new Term(\"call\", [call]);\r\n\t\t\t\t\tnthread = new Thread(thread.session);\r\n\t\t\t\t\tnthread.add_goal(goal, true, point);\r\n\t\t\t\t\tcallback = function(answer) {\r\n\t\t\t\t\t\tif(answer === null) {\r\n\t\t\t\t\t\t\tvar state = new State(\r\n\t\t\t\t\t\t\t\tpoint.goal,\r\n\t\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tstate.setup_call_cleanup_thread = nthread;\r\n\t\t\t\t\t\t\tstate.setup_call_cleanup_callback = callback;\r\n\t\t\t\t\t\t\tthread.prepend([state]);\r\n\t\t\t\t\t\t} else if(answer === false) {\r\n\t\t\t\t\t\t\tvar cleanup_and_fail = new Term(\",\", [\r\n\t\t\t\t\t\t\t\tnew Term(\"call\", [cleanup]),\r\n\t\t\t\t\t\t\t\tnew Term(\"fail\")\r\n\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\tvar state = new State(\r\n\t\t\t\t\t\t\t\tpoint.goal.replace(cleanup_and_fail),\r\n\t\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthread.prepend([state]);\r\n\t\t\t\t\t\t} else if(pl.type.is_error(answer)) {\r\n\t\t\t\t\t\t\tvar cleanup_and_throw = new Term(\",\", [\r\n\t\t\t\t\t\t\t\tnew Term(\"call\", [cleanup]),\r\n\t\t\t\t\t\t\t\tanswer\r\n\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\tvar state = new State(\r\n\t\t\t\t\t\t\t\tpoint.goal.replace(cleanup_and_throw),\r\n\t\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthread.prepend([state]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(nthread.points.length === 0) {\r\n\t\t\t\t\t\t\t\tvar state = new State(\r\n\t\t\t\t\t\t\t\t\tpoint.goal.replace(\r\n\t\t\t\t\t\t\t\t\t\tnew Term(\"call\", [cleanup])\r\n\t\t\t\t\t\t\t\t\t).apply(answer),\r\n\t\t\t\t\t\t\t\t\tpoint.substitution.apply(answer),\r\n\t\t\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tthread.prepend([state]);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar state1 = new State(\r\n\t\t\t\t\t\t\t\t\tpoint.goal.apply(answer).replace(null),\r\n\t\t\t\t\t\t\t\t\tpoint.substitution.apply(answer),\r\n\t\t\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tvar state2 = new State(\r\n\t\t\t\t\t\t\t\t\tpoint.goal,\r\n\t\t\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tstate2.setup_call_cleanup_thread = nthread;\r\n\t\t\t\t\t\t\t\tstate2.setup_call_cleanup_callback = callback;\r\n\t\t\t\t\t\t\t\tstate2.setup_call_cleanup_goal = cleanup.apply(answer);\r\n\t\t\t\t\t\t\t\tstate2.setup_call_cleanup_catch = cleanup;\r\n\t\t\t\t\t\t\t\tthread.prepend([state1, state2]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthread.again();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnthread.answer(callback);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// setup_call_cleanup/3\r\n\t\t\"setup_call_cleanup/3\": function(thread, point, atom) {\r\n\t\t\tvar setup = atom.args[0], call = atom.args[1], cleanup = atom.args[2];\r\n\t\t\tif(pl.type.is_variable(setup) || pl.type.is_variable(call) || pl.type.is_variable(cleanup)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(setup)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", setup, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(call)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", call, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(cleanup)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", cleanup, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tthread.prepend([new State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\",\", [\r\n\t\t\t\t\t\tnew Term(\"once\", [setup]),\r\n\t\t\t\t\t\tnew Term(\"call_cleanup\", [call, cleanup])\r\n\t\t\t\t\t])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)]);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// UNIFICATION\r\n\t\t\r\n\t\t// =/2 (unification)\r\n\t\t\"=/2\": function( thread, point, atom ) {\r\n\t\t\tvar occurs_check = thread.get_flag( \"occurs_check\" ).indicator === \"true/0\";\r\n\t\t\tvar state = new State();\r\n\t\t\tvar mgu = pl.unify( atom.args[0], atom.args[1], occurs_check );\r\n\t\t\tif( mgu !== null ) {\r\n\t\t\t\tstate.goal = point.goal.apply( mgu ).replace( null );\r\n\t\t\t\tstate.substitution = point.substitution.apply( mgu );\r\n\t\t\t\tstate.parent = point;\r\n\t\t\t\tthread.prepend( [state] );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// unify_with_occurs_check/2\r\n\t\t\"unify_with_occurs_check/2\": function( thread, point, atom ) {\r\n\t\t\tvar state = new State();\r\n\t\t\tvar mgu = pl.unify( atom.args[0], atom.args[1], true );\r\n\t\t\tif( mgu !== null ) {\r\n\t\t\t\tstate.goal = point.goal.apply( mgu ).replace( null );\r\n\t\t\t\tstate.substitution = point.substitution.apply( mgu );\r\n\t\t\t\tstate.parent = point;\r\n\t\t\t\tthread.prepend( [state] );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// \\=/2\r\n\t\t\"\\\\=/2\": function( thread, point, atom ) {\r\n\t\t\tvar occurs_check = thread.get_flag( \"occurs_check\" ).indicator === \"true/0\";\r\n\t\t\tvar mgu = pl.unify( atom.args[0], atom.args[1], occurs_check );\r\n\t\t\tif( mgu === null ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// subsumes_term/2\r\n\t\t/*\r\n\t\tsubsumes_term(General, Specific) :-\r\n\t\t\t\\+ \\+ (\r\n\t\t\tterm_variables(Specific, Vars1),\r\n\t\t\tunify_with_occurs_check(General, Specific),\r\n\t\t\tterm_variables(Vars1, Vars2),\r\n\t\t\tVars1 == Vars2\r\n\t\t).\r\n\t\t*/\r\n\t\t\"subsumes_term/2\": function( thread, point, atom ) {\r\n\t\t\tvar general = atom.args[0], specific = atom.args[1];\r\n\t\t\tvar vars1 = thread.next_free_variable();\r\n\t\t\tvar vars2 = thread.next_free_variable();\r\n\t\t\tthread.prepend([new State(\r\n\t\t\t\tpoint.goal.replace(new Term(\"\\\\+\", [\r\n\t\t\t\t\tnew Term(\"\\\\+\", [\r\n\t\t\t\t\t\tnew Term(\",\", [\r\n\t\t\t\t\t\t\tnew Term(\"term_variables\", [specific, vars1]),\r\n\t\t\t\t\t\t\tnew Term(\",\", [\r\n\t\t\t\t\t\t\t\tnew Term(\"unify_with_occurs_check\", [general, specific]),\r\n\t\t\t\t\t\t\t\tnew Term(\",\", [\r\n\t\t\t\t\t\t\t\t\tnew Term(\"term_variables\", [vars1, vars2]),\r\n\t\t\t\t\t\t\t\t\tnew Term(\"==\", [vars1, vars2])\r\n\t\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t])\r\n\t\t\t\t])),\r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)]);\r\n\t\t},\r\n\t\t\r\n\t\t// ALL SOLUTIONS\r\n\r\n\t\t// findall/3\r\n\t\t\"findall/3\": function(thread, point, atom) {\r\n\t\t\tvar template = atom.args[0], goal = atom.args[1], instances = atom.args[2];\r\n\t\t\tvar tail = new Term(\"[]\", []);\r\n\t\t\tthread.prepend([new State(\r\n\t\t\t\tpoint.goal.replace(new Term(\"findall\", [template, goal, instances, tail])),\r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)]);\r\n\t\t},\r\n\r\n\t\t// findall/4\r\n\t\t\"findall/4\": function(thread, point, atom) {\r\n\t\t\tvar template = atom.args[0], goal = atom.args[1], instances = atom.args[2], tail = atom.args[3];\r\n\t\t\tvar proper_goal = goal;\r\n\t\t\tif(pl.type.is_term(goal) && goal.indicator === \":/2\")\r\n\t\t\t\tproper_goal = goal.args[1];\r\n\t\t\tif(pl.type.is_variable(proper_goal)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(proper_goal)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", goal, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(instances) && !pl.type.is_list(instances)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"list\", instances, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(tail) && !pl.type.is_list(tail)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"list\", tail, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tthread.prepend([new State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\"$findall\", [template, goal, instances, tail])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)]);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// bagof/3\r\n\t\t\"bagof/3\": function(thread, point, atom) {\r\n\t\t\tvar template = atom.args[0], goal = atom.args[1], instances = atom.args[2];\r\n\t\t\tif(pl.type.is_variable(goal)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(goal)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", goal, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(instances) && !pl.type.is_list(instances)) {\r\n\t\t\t\tthread.throw_error( pl.error.type(\"list\", instances, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tthread.prepend([new State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\"$bagof\", [template, goal, instances])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// setof/3\r\n\t\t\"setof/3\": function(thread, point, atom) {\r\n\t\t\tvar template = atom.args[0], goal = atom.args[1], instances = atom.args[2];\r\n\t\t\tif(pl.type.is_variable(goal)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(goal)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", goal, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(instances) && !pl.type.is_list(instances)) {\r\n\t\t\t\tthread.throw_error( pl.error.type(\"list\", instances, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tthread.prepend([new State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\"$setof\", [template, goal, instances])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)]);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// TERM CREATION AND DECOMPOSITION\r\n\t\t\r\n\t\t// functor/3\r\n\t\t\"functor/3\": function( thread, point, atom ) {\r\n\t\t\tvar subs;\r\n\t\t\tvar term = atom.args[0], name = atom.args[1], arity = atom.args[2];\r\n\t\t\tif( pl.type.is_variable( term ) && (pl.type.is_variable( name ) || pl.type.is_variable( arity )) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( arity ) && !pl.type.is_integer( arity ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", atom.args[2], atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( name ) && !pl.type.is_atomic( name ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atomic\", atom.args[1], atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_variable( term ) && !pl.type.is_atom( name ) && pl.type.is_integer( arity ) && arity.value > 0 ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", atom.args[1], atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_variable( term ) && pl.type.is_integer( arity ) && arity.value < 0 ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"not_less_than_zero\", atom.args[2], atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_variable( term ) ) {\r\n\t\t\t\tif( atom.args[2].value >= 0 ) {\r\n\t\t\t\t\tvar args = [];\r\n\t\t\t\t\tfor( var i = 0; i < arity.value; i++ )\r\n\t\t\t\t\t\targs.push( thread.next_free_variable() );\r\n\t\t\t\t\tvar functor = pl.type.is_number( name ) ? name : new Term( name.id, args );\r\n\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [term, functor] ) ), point.substitution, point )] );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar id = pl.type.is_number( term ) ? term : new Term( term.id, [] );\r\n\t\t\t\tvar length = pl.type.is_number( term ) ? new Num( 0, false ) : new Num( term.args.length, false );\r\n\t\t\t\tvar goal = new Term( \",\", [new Term( \"=\", [id, name] ), new Term( \"=\", [length, arity] )] );\r\n\t\t\t\tthread.prepend( [new State( point.goal.replace( goal ), point.substitution, point )] );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// arg/3\r\n\t\t\"arg/3\": function( thread, point, atom ) {\r\n\t\t\tif( pl.type.is_variable( atom.args[0] ) || pl.type.is_variable( atom.args[1] ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_integer( atom.args[0] ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", atom.args[0], atom.indicator ) );\r\n\t\t\t} else if( atom.args[0].value < 0 ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"not_less_than_zero\", atom.args[0], atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_compound( atom.args[1] ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"compound\", atom.args[1], atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar n = atom.args[0].value;\r\n\t\t\t\tif( n > 0 && n <= atom.args[1].args.length ) {\r\n\t\t\t\t\tvar goal = new Term( \"=\", [atom.args[1].args[n-1], atom.args[2]] );\r\n\t\t\t\t\tthread.prepend( [new State( point.goal.replace( goal ), point.substitution, point )] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// =../2 (univ)\r\n\t\t\"=../2\": function( thread, point, atom ) {\r\n\t\t\tvar list;\r\n\t\t\tif( pl.type.is_variable( atom.args[0] ) && (pl.type.is_variable( atom.args[1] )\r\n\t\t\t|| pl.type.is_non_empty_list( atom.args[1] ) && pl.type.is_variable( atom.args[1].args[0] )) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_fully_list( atom.args[1] ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", atom.args[1], atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_variable( atom.args[0] ) && pl.type.is_empty_list( atom.args[1] ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"non_empty_list\", atom.args[1], atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( atom.args[0] ) ) {\r\n\t\t\t\tif( pl.type.is_term( atom.args[0] ) && atom.args[0].args.length > 0 ) {\r\n\t\t\t\t\tlist = new Term( \"[]\" );\r\n\t\t\t\t\tfor( var i = atom.args[0].args.length - 1; i >= 0; i-- ) {\r\n\t\t\t\t\t\tlist = new Term( \".\", [atom.args[0].args[i], list] );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist = new Term( \".\", [new Term( atom.args[0].id ), list] );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlist = new Term( \".\", [atom.args[0], new Term( \"[]\" )] );\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [list, atom.args[1]] ) ), point.substitution, point )] );\r\n\t\t\t} else if( !pl.type.is_variable( atom.args[1] ) ) {\r\n\t\t\t\tvar args = [];\r\n\t\t\t\tlist = atom.args[1].args[1];\r\n\t\t\t\twhile( list.indicator === \"./2\" ) {\r\n\t\t\t\t\targs.push( list.args[0] );\r\n\t\t\t\t\tlist = list.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif( pl.type.is_variable( atom.args[0] ) && pl.type.is_variable( list ) ) {\r\n\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t} else if( args.length === 0 && pl.type.is_compound( atom.args[1].args[0] ) ) {\r\n\t\t\t\t\tthread.throw_error( pl.error.type( \"atomic\", atom.args[1].args[0], atom.indicator ) );\r\n\t\t\t\t} else if( args.length > 0 && (pl.type.is_compound( atom.args[1].args[0] ) || pl.type.is_number( atom.args[1].args[0] )) ) {\r\n\t\t\t\t\tthread.throw_error( pl.error.type( \"atom\", atom.args[1].args[0], atom.indicator ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif( args.length === 0 ) {\r\n\t\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [atom.args[1].args[0], atom.args[0]], point ) ), point.substitution, point )] );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [new Term( atom.args[1].args[0].id, args ), atom.args[0]] ) ), point.substitution, point )] );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// copy_term/2\r\n\t\t\"copy_term/2\": function(thread, point, atom) {\r\n\t\t\tvar original_term = atom.args[0], renamed_term = atom.args[1];\r\n\t\t\tthread.session.renamed_variables = {};\r\n\t\t\tvar new_term = original_term.rename(thread);\r\n\t\t\tthread.session.renamed_variables = {};\r\n\t\t\tthread.prepend([\r\n\t\t\t\tnew State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\"=\", [renamed_term, new_term])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint)\r\n\t\t\t\t]\r\n\t\t\t);\r\n\t\t},\r\n\t\t\r\n\t\t// term_variables/2\r\n\t\t\"term_variables/2\": [\r\n\t\t\tnew pl.type.Rule(new pl.type.Term(\"term_variables\", [new pl.type.Var(\"Term\"),new pl.type.Var(\"Vars\")]), new pl.type.Term(\"term_variables\", [new pl.type.Var(\"Term\"),new pl.type.Var(\"Vars\"),new pl.type.Term(\"[]\", [])]))\r\n\t\t],\r\n\r\n\t\t// term_variables/3\r\n\t\t\"term_variables/3\": function(thread, point, atom) {\r\n\t\t\tvar term = atom.args[0], vars = atom.args[1], tail = atom.args[2];\r\n\t\t\tif( !pl.type.is_fully_list( vars ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", vars, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar list = arrayToList(map(nub(term.variables()), function(v) {\r\n\t\t\t\t\treturn new Var(v);\r\n\t\t\t\t}), tail);\r\n\t\t\t\tthread.prepend([new State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\"=\", [vars, list])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// numbervars/3\r\n\t\t\"numbervars/3\": function(thread, point, atom) {\r\n\t\t\tvar term = atom.args[0], start = atom.args[1], end = atom.args[2];\r\n\t\t\tif(pl.type.is_variable(start)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_integer(start)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"integer\", start, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(end) && !pl.type.is_integer(end)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"integer\", end, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar variables = nub(term.variables());\r\n\t\t\t\tvar value = start.value;\r\n\t\t\t\tvar unif_body = new Term(\"true\");\r\n\t\t\t\tfor(var i = 0; i < variables.length; i++) {\r\n\t\t\t\t\tunif_body = new Term(\",\", [\r\n\t\t\t\t\t\tnew Term(\"=\", [\r\n\t\t\t\t\t\t\tnew Var(variables[i]),\r\n\t\t\t\t\t\t\tnew Term(\"$VAR\", [new Num(value, false)])]),\r\n\t\t\t\t\t\t\tunif_body]);\r\n\t\t\t\t\tvalue++;\r\n\t\t\t\t}\r\n\t\t\t\tvar unif_end = new Term(\"=\", [end, new Num(value, false)]);\r\n\t\t\t\tif(pl.type.is_variable(end) || end.value === value) {\r\n\t\t\t\t\tthread.prepend([new State(\r\n\t\t\t\t\t\tpoint.goal.replace(new Term(\",\", [unif_body, unif_end])),\r\n\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\tpoint\r\n\t\t\t\t\t)]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// CLAUSE RETRIEVAL AND INFORMATION\r\n\t\t\r\n\t\t// clause/2\r\n\t\t\"clause/2\": function(thread, point, atom) {\r\n\t\t\tvar head = atom.args[0], body = atom.args[1];\r\n\t\t\tvar module_id = \"user\";\r\n\t\t\tif(pl.type.is_term(head) && head.indicator === \":/2\") {\r\n\t\t\t\tif(!pl.type.is_atom(head.args[0])) {\r\n\t\t\t\t\tthread.throw_error(pl.error.type(\"module\", head.args[0], atom.indicator));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tmodule_id = head.args[0].id;\r\n\t\t\t\thead = head.args[1];\r\n\t\t\t}\r\n\t\t\tvar get_module = thread.session.modules[module_id];\r\n\t\t\tif(pl.type.is_variable(head)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(head)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", head, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(body) && !pl.type.is_callable(body)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", body, atom.indicator));\r\n\t\t\t} else if(head.indicator === \",/2\" || thread.session.modules.system.rules.hasOwnProperty(head.indicator)) {\r\n\t\t\t\tthread.throw_error(pl.error.permission(\"access\", \"private_procedure\", str_indicator(head.indicator), atom.indicator));\r\n\t\t\t} else if(pl.type.is_module(get_module) && get_module.rules[head.indicator]) {\r\n\t\t\t\tif(get_module.is_public_predicate(head.indicator)) {\r\n\t\t\t\t\tvar states = [];\r\n\t\t\t\t\tif(typeof get_module.rules[head.indicator] === \"function\") {\r\n\t\t\t\t\t\tthread.throw_error(pl.error.permission(\"modify\", \"static_procedure\", str_indicator(head.indicator), atom.indicator));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(var i = 0; i < get_module.rules[head.indicator].length; i++) {\r\n\t\t\t\t\t\tvar rule = get_module.rules[head.indicator][i];\r\n\t\t\t\t\t\tthread.session.renamed_variables = {};\r\n\t\t\t\t\t\trule = rule.rename(thread);\r\n\t\t\t\t\t\tif(rule.body === null)\r\n\t\t\t\t\t\t\trule.body = new Term(\"true\");\r\n\t\t\t\t\t\tvar goal = new Term(\",\", [\r\n\t\t\t\t\t\t\tnew Term(\"=\", [rule.head, head]),\r\n\t\t\t\t\t\t\tnew Term(\"=\", [rule.body, body])\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t\tstates.push(new State(point.goal.replace(goal), point.substitution, point));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.prepend(states);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthread.throw_error(pl.error.permission(\"access\", \"private_procedure\", str_indicator(head.indicator), atom.indicator));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// current_predicate/1\r\n\t\t\"current_predicate/1\": function(thread, point, atom) {\r\n\t\t\tvar indicator = atom.args[0];\r\n\t\t\tvar module_id;\r\n\t\t\tif(pl.type.is_term(indicator) && indicator.indicator === \":/2\") {\r\n\t\t\t\tif(!pl.type.is_atom(indicator.args[0])) {\r\n\t\t\t\t\tthread.throw_error(pl.error.type(\"module\", indicator.args[0], atom.indicator));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tmodule_id = indicator.args[0].id;\r\n\t\t\t\tindicator = indicator.args[1];\r\n\t\t\t} else {\r\n\t\t\t\tmodule_id = \"user\";\r\n\t\t\t}\r\n\t\t\tif(!pl.type.is_variable(indicator) && (!pl.type.is_compound(indicator) || indicator.indicator !== \"//2\")) {\r\n\t\t\t\tthread.throw_error(pl.error.type( \"predicate_indicator\", indicator, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable( indicator ) && !pl.type.is_variable(indicator.args[0]) && !pl.type.is_atom(indicator.args[0])) {\r\n\t\t\t\tthread.throw_error(pl.error.type( \"atom\", indicator.args[0], atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(indicator) && !pl.type.is_variable(indicator.args[1]) && !pl.type.is_integer(indicator.args[1])) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"integer\", indicator.args[1], atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(indicator) && pl.type.is_integer(indicator.args[1]) && indicator.args[1].value < 0) {\r\n\t\t\t\tthread.throw_error(pl.error.domain(\"not_less_than_zero\", indicator.args[1], atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar states = [];\r\n\t\t\t\tvar get_module = thread.session.modules[module_id];\r\n\t\t\t\tif(pl.type.is_module(get_module)) {\r\n\t\t\t\t\tfor(var prop in get_module.rules) {\r\n\t\t\t\t\t\tif(!get_module.rules.hasOwnProperty(prop))\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tvar predicate = str_indicator(prop);\r\n\t\t\t\t\t\tvar goal = new Term(\"=\", [predicate, indicator]);\r\n\t\t\t\t\t\tstates.push(new State(point.goal.replace(goal), point.substitution, point));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.prepend(states);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// current_module/1\r\n\t\t\"current_module/1\": function(thread, point, atom) {\r\n\t\t\tvar module_id = atom.args[0];\r\n\t\t\tif(!pl.type.is_variable(module_id) && !pl.type.is_atom(module_id)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"atom\", module_id, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tif(pl.type.is_variable(module_id)) {\r\n\t\t\t\t\tvar states = [];\r\n\t\t\t\t\tfor(var prop in thread.session.modules) {\r\n\t\t\t\t\t\tif(!thread.session.modules.hasOwnProperty(prop))\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tstates.push(new State(\r\n\t\t\t\t\t\t\tpoint.goal.replace(new Term(\"=\", [module_id, new Term(prop)])),\r\n\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.prepend(states);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(thread.session.modules.hasOwnProperty(module_id.id))\r\n\t\t\t\t\t\tthread.success(point);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// predicate_property/2\r\n\t\t\"predicate_property/2\": function(thread, point, atom) {\r\n\t\t\tvar head = atom.args[0], property = atom.args[1];\r\n\t\t\tvar module_id;\r\n\t\t\tif(pl.type.is_term(head) && head.indicator === \":/2\") {\r\n\t\t\t\tif(!pl.type.is_atom(head.args[0])) {\r\n\t\t\t\t\tthread.throw_error(pl.error.type(\"module\", head.args[0], atom.indicator));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tmodule_id = head.args[0].id;\r\n\t\t\t\thead = head.args[1];\r\n\t\t\t}\r\n\t\t\tif(!pl.type.is_variable(head) && !pl.type.is_callable(head)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", head, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(property) && !pl.type.is_predicate_property(property)) {\r\n\t\t\t\tthread.throw_error(pl.error.domain(\"predicate_property\", property, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar get_module = module_id ? thread.session.modules[module_id] : thread.session.modules.user;\r\n\t\t\t\tvar points = [];\r\n\t\t\t\t// all predicates\r\n\t\t\t\tif(pl.type.is_variable(head)) {\r\n\t\t\t\t\t// built-in predicates (built_in + static + native_code + meta_predicate?)\r\n\t\t\t\t\tif(!module_id) {\r\n\t\t\t\t\t\tfor(var prop in pl.builtin.rules) {\r\n\t\t\t\t\t\t\tif(!pl.builtin.rules.hasOwnProperty(prop))\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tvar indicator = str_indicator(prop);\r\n\t\t\t\t\t\t\tvar args = [];\r\n\t\t\t\t\t\t\tfor(var i = 0; i < indicator.args[1].value; i++)\r\n\t\t\t\t\t\t\t\targs.push(thread.next_free_variable());\r\n\t\t\t\t\t\t\tvar unif_head = new Term(indicator.args[0].id, args);\r\n\t\t\t\t\t\t\tvar current_properties = [\r\n\t\t\t\t\t\t\t\tnew Term(\"static\"),\r\n\t\t\t\t\t\t\t\tnew Term(\"built_in\"),\r\n\t\t\t\t\t\t\t\tnew Term(\"native_code\")\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\tif(pl.builtin.meta_predicates.hasOwnProperty(prop))\r\n\t\t\t\t\t\t\t\tcurrent_properties.push(new Term(\"meta_predicate\", [\r\n\t\t\t\t\t\t\t\t\tpl.builtin.meta_predicates[prop]\r\n\t\t\t\t\t\t\t\t]));\r\n\t\t\t\t\t\t\t// all predicates, one property / all properties\r\n\t\t\t\t\t\t\tfor(var i = 0; i < current_properties.length; i++) {\r\n\t\t\t\t\t\t\t\tif(pl.type.is_variable(property) || current_properties[i].indicator === property.indicator) {\r\n\t\t\t\t\t\t\t\t\tpoints.push(new State(\r\n\t\t\t\t\t\t\t\t\t\tpoint.goal.replace(new Term(\",\", [\r\n\t\t\t\t\t\t\t\t\t\t\tnew Term(\"=\", [head, unif_head]),\r\n\t\t\t\t\t\t\t\t\t\t\tnew Term(\"=\", [property, current_properties[i]])\r\n\t\t\t\t\t\t\t\t\t\t])),\r\n\t\t\t\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t\t\t\t));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// user-defined predicates\r\n\t\t\t\t\tif(pl.type.is_module(get_module)) {\r\n\t\t\t\t\t\tfor(var prop in get_module.rules) {\r\n\t\t\t\t\t\t\tif(!get_module.rules.hasOwnProperty(prop))\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tvar indicator = str_indicator(prop);\r\n\t\t\t\t\t\t\tvar args = [];\r\n\t\t\t\t\t\t\tfor(var i = 0; i < indicator.args[1].value; i++)\r\n\t\t\t\t\t\t\t\targs.push(thread.next_free_variable());\r\n\t\t\t\t\t\t\tvar unif_head = new Term(indicator.args[0].id, args);\r\n\t\t\t\t\t\t\tvar current_properties = [];\r\n\t\t\t\t\t\t\tif(thread.is_public_predicate(prop, module_id))\r\n\t\t\t\t\t\t\t\tcurrent_properties.push(new Term(\"dynamic\"));\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcurrent_properties.push(new Term(\"static\"));\r\n\t\t\t\t\t\t\tif(get_module.rules[prop] instanceof Function)\r\n\t\t\t\t\t\t\t\tcurrent_properties.push(new Term(\"native_code\"));\r\n\t\t\t\t\t\t\tif(thread.is_multifile_predicate(prop, module_id))\r\n\t\t\t\t\t\t\t\tcurrent_properties.push(new Term(\"multifile\"));\r\n\t\t\t\t\t\t\tif(get_module.meta_predicates.hasOwnProperty(prop))\r\n\t\t\t\t\t\t\t\tcurrent_properties.push(new Term(\"meta_predicate\", [\r\n\t\t\t\t\t\t\t\t\tget_module.meta_predicates[prop]\r\n\t\t\t\t\t\t\t\t]));\r\n\t\t\t\t\t\t\t// all predicates, one property / all properties\r\n\t\t\t\t\t\t\tfor(var i = 0; i < current_properties.length; i++) {\r\n\t\t\t\t\t\t\t\tif(pl.type.is_variable(property) || current_properties[i].indicator === property.indicator) {\r\n\t\t\t\t\t\t\t\t\tpoints.push(new State(\r\n\t\t\t\t\t\t\t\t\t\tpoint.goal.replace(new Term(\",\", [\r\n\t\t\t\t\t\t\t\t\t\t\tnew Term(\"=\", [head, unif_head]),\r\n\t\t\t\t\t\t\t\t\t\t\tnew Term(\"=\", [property, current_properties[i]])\r\n\t\t\t\t\t\t\t\t\t\t])),\r\n\t\t\t\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t\t\t\t));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t// one predicate\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar builtin = !module_id && pl.type.is_builtin(head);\r\n\t\t\t\t\tvar predicate = builtin ? pl.builtin.rules[head.indicator] : get_module.rules[head.indicator];\r\n\t\t\t\t\tget_module = builtin ? pl.builtin : get_module;\r\n\t\t\t\t\tif(predicate) {\r\n\t\t\t\t\t\tvar current_properties;\r\n\t\t\t\t\t\tif(builtin) {\r\n\t\t\t\t\t\t\tcurrent_properties = [\r\n\t\t\t\t\t\t\t\tnew Term(\"static\"),\r\n\t\t\t\t\t\t\t\tnew Term(\"built_in\"),\r\n\t\t\t\t\t\t\t\tnew Term(\"native_code\")\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcurrent_properties = [];\r\n\t\t\t\t\t\t\tif(thread.is_public_predicate(head.indicator, module_id))\r\n\t\t\t\t\t\t\t\tcurrent_properties.push(new Term(\"dynamic\"));\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcurrent_properties.push(new Term(\"static\"));\r\n\t\t\t\t\t\t\tif(predicate instanceof Function)\r\n\t\t\t\t\t\t\t\tcurrent_properties.push(new Term(\"native_code\"));\r\n\t\t\t\t\t\t\tif(thread.is_multifile_predicate(head.indicator, module_id))\r\n\t\t\t\t\t\t\t\tcurrent_properties.push(new Term(\"multifile\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(get_module.meta_predicates.hasOwnProperty(head.indicator))\r\n\t\t\t\t\t\t\tcurrent_properties.push(new Term(\"meta_predicate\", [\r\n\t\t\t\t\t\t\t\tget_module.meta_predicates[head.indicator]\r\n\t\t\t\t\t\t\t]));\r\n\t\t\t\t\t\tvar args = [];\r\n\t\t\t\t\t\tfor(var i = 0; i < head.args.length; i++)\r\n\t\t\t\t\t\t\targs.push(thread.next_free_variable());\r\n\t\t\t\t\t\tvar unif_head = new Term(head.id, args);\r\n\t\t\t\t\t\t// one predicate, one property / all properties\r\n\t\t\t\t\t\tfor(var i = 0; i < current_properties.length; i++) {\r\n\t\t\t\t\t\t\tif(pl.type.is_variable(property) || current_properties[i].indicator === property.indicator) {\r\n\t\t\t\t\t\t\t\tpoints.push(new State(\r\n\t\t\t\t\t\t\t\t\tpoint.goal.replace(new Term(\",\", [\r\n\t\t\t\t\t\t\t\t\t\tnew Term(\"=\", [head, unif_head]),\r\n\t\t\t\t\t\t\t\t\t\tnew Term(\"=\", [property, current_properties[i]])\r\n\t\t\t\t\t\t\t\t\t])),\r\n\t\t\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t\t\t));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend(points);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// listing/0\r\n\t\t\"listing/0\": function( thread, point, atom ) {\r\n\t\t\tvar context_module = atom.context_module ? atom.context_module : \"user\";\r\n\t\t\tvar rules = {};\r\n\t\t\tif(pl.type.is_module(thread.session.modules[context_module])) {\r\n\t\t\t\trules = thread.session.modules[context_module].rules;\r\n\t\t\t}\r\n\t\t\tvar str = \"\";\r\n\t\t\tfor(var indicator in rules) {\r\n\t\t\t\tif(!rules.hasOwnProperty(indicator)) continue;\r\n\t\t\t\tvar predicate = rules[indicator];\r\n\t\t\t\tstr += \"% \" + indicator + \"\\n\";\r\n\t\t\t\tif(predicate instanceof Array) {\r\n\t\t\t\t\tfor(var i = 0; i < predicate.length; i++)\r\n\t\t\t\t\t\tstr += predicate[i].toString( {session: thread.session} ) + \"\\n\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstr += \"/*\\n\" + predicate.toString() + \"\\n*/\";\r\n\t\t\t\t}\r\n\t\t\t\tstr += \"\\n\";\r\n\t\t\t}\r\n\t\t\tthread.prepend( [new State(\r\n\t\t\t\tpoint.goal.replace(new Term(\"write\", [new Term(str, [])])),\r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)] );\r\n\t\t},\r\n\r\n\t\t// listing/1\r\n\t\t\"listing/1\": function( thread, point, atom ) {\r\n\t\t\tvar indicator = atom.args[0];\r\n\t\t\tvar context_module = \"user\";\r\n\t\t\tif(indicator.indicator === \":/2\") {\r\n\t\t\t\tcontext_module = indicator.args[0].id;\r\n\t\t\t\tindicator = indicator.args[1];\r\n\t\t\t}\r\n\t\t\tif(pl.type.is_variable(indicator)) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if(!pl.type.is_predicate_indicator(indicator)) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"predicate_indicator\", indicator, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar rules = {};\r\n\t\t\t\tif(pl.type.is_module(thread.session.modules[context_module])) {\r\n\t\t\t\t\trules = thread.session.modules[context_module].rules;\r\n\t\t\t\t}\r\n\t\t\t\tvar str = \"\";\r\n\t\t\t\tvar str_indicator = indicator.args[0].id + \"/\" + indicator.args[1].value;\r\n\t\t\t\tif(rules.hasOwnProperty(str_indicator)) {\r\n\t\t\t\t\tvar predicate = rules[str_indicator];\r\n\t\t\t\t\tif(predicate instanceof Array) {\r\n\t\t\t\t\t\tfor(var i = 0; i < predicate.length; i++)\r\n\t\t\t\t\t\t\tstr += predicate[i].toString( {session: thread.session} ) + \"\\n\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstr += \"/*\\n\" + predicate.toString() + \"\\n*/\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstr += \"\\n\";\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\"write\", [new Term(str, [])])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// LIST OPERATIONS\r\n\r\n\t\t// sort/2\r\n\t\t\"sort/2\": function( thread, point, atom ) {\r\n\t\t\tvar list = atom.args[0], expected = atom.args[1];\r\n\t\t\tif( pl.type.is_variable( list ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( expected ) && !pl.type.is_fully_list( expected ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", expected, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar arr = [];\r\n\t\t\t\tvar pointer = list;\r\n\t\t\t\twhile( pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\tarr.push( pointer.args[0] );\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif( pl.type.is_variable( pointer ) ) {\r\n\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_empty_list( pointer ) ) {\r\n\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", list, atom.indicator ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar sorted_arr = arr.sort( pl.compare );\r\n\t\t\t\t\tfor( var i = sorted_arr.length-1; i > 0; i-- ) {\r\n\t\t\t\t\t\tif( sorted_arr[i].equals(sorted_arr[i-1]) )\r\n\t\t\t\t\t\t\tsorted_arr.splice(i,1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar sorted_list = new Term( \"[]\" );\r\n\t\t\t\t\tfor( var i = sorted_arr.length-1; i >= 0; i-- ) {\r\n\t\t\t\t\t\tsorted_list = new Term( \".\", [sorted_arr[i], sorted_list] );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [sorted_list, expected] ) ), point.substitution, point )] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// keysort/2\r\n\t\t\"keysort/2\": function( thread, point, atom ) {\r\n\t\t\tvar list = atom.args[0], expected = atom.args[1];\r\n\t\t\tif( pl.type.is_variable( list ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( expected ) && !pl.type.is_fully_list( expected ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", expected, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar arr = [];\r\n\t\t\t\tvar elem;\r\n\t\t\t\tvar pointer = list;\r\n\t\t\t\twhile( pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\telem = pointer.args[0];\r\n\t\t\t\t\tif( pl.type.is_variable( elem ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( !pl.type.is_term( elem ) || elem.indicator !== \"-/2\" ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.type( \"pair\", elem, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telem.args[0].pair = elem.args[1];\r\n\t\t\t\t\tarr.push( elem.args[0] );\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif( pl.type.is_variable( pointer ) ) {\r\n\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_empty_list( pointer ) ) {\r\n\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", list, atom.indicator ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(!pl.type.is_variable(expected)) {\r\n\t\t\t\t\t\tvar pointer = expected;\r\n\t\t\t\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"./2\") {\r\n\t\t\t\t\t\t\tvar head = pointer.args[0];\r\n\t\t\t\t\t\t\tif(!pl.type.is_variable(head) && (!pl.type.is_term(head) || head.indicator !== \"-/2\")) {\r\n\t\t\t\t\t\t\t\tthread.throw_error( pl.error.type( \"pair\", head, atom.indicator ) );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!pl.type.is_variable(pointer) && !pl.type.is_empty_list(pointer)) {\r\n\t\t\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", expected, atom.indicator ) );\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar sorted_arr = arr.sort( pl.compare );\r\n\t\t\t\t\tvar sorted_list = new pl.type.Term( \"[]\" );\r\n\t\t\t\t\tfor( var i = sorted_arr.length - 1; i >= 0; i-- ) {\r\n\t\t\t\t\t\tsorted_list = new pl.type.Term( \".\", [new pl.type.Term( \"-\", [sorted_arr[i], sorted_arr[i].pair] ), sorted_list] );\r\n\t\t\t\t\t\tdelete sorted_arr[i].pair;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.prepend( [new pl.type.State( point.goal.replace( new pl.type.Term( \"=\", [sorted_list, expected] ) ), point.substitution, point )] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// keygroup\r\n\t\t\"keygroup/2\": function(thread, point, atom) {\r\n\t\t\tvar list = atom.args[0], expected = atom.args[1];\r\n\t\t\tif(pl.type.is_variable(list)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(expected) && !pl.type.is_fully_list(expected)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"list\", expected, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar keys = [];\r\n\t\t\t\tvar values = [];\r\n\t\t\t\tvar pointer = list\r\n\t\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"./2\") {\r\n\t\t\t\t\tvar elem = pointer.args[0];\r\n\t\t\t\t\tif(pl.type.is_variable(elem)) {\r\n\t\t\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if(!pl.type.is_term(elem) || elem.indicator !== \"-/2\") {\r\n\t\t\t\t\t\tthread.throw_error(pl.error.type(\"pair\", elem, atom.indicator));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar key = elem.args[0], value = elem.args[1];\r\n\t\t\t\t\tvar index = -1;\r\n\t\t\t\t\tfor(var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\t\tif(pl.compare(key, keys[i]) === 0) {\r\n\t\t\t\t\t\t\tindex = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(index === -1) {\r\n\t\t\t\t\t\tindex = keys.length;\r\n\t\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t\t\tvalues.push([]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvalues[index].push(value);\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif(pl.type.is_variable(pointer)) {\r\n\t\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t\t} else if(!pl.type.is_empty_list(pointer)) {\r\n\t\t\t\t\tthread.throw_error(pl.error.type(\"list\", list, atom.indicator));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(!pl.type.is_variable(expected)) {\r\n\t\t\t\t\t\tvar pointer = expected;\r\n\t\t\t\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"./2\") {\r\n\t\t\t\t\t\t\tvar head = pointer.args[0];\r\n\t\t\t\t\t\t\tif(!pl.type.is_variable(head) && (!pl.type.is_term(head) || head.indicator !== \"-/2\")) {\r\n\t\t\t\t\t\t\t\tthread.throw_error(pl.error.type(\"pair\", head, atom.indicator));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!pl.type.is_variable(pointer) && !pl.type.is_empty_list(pointer)) {\r\n\t\t\t\t\t\t\tthread.throw_error(pl.error.type(\"list\", expected, atom.indicator));\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgroup = new Term(\"[]\", []);\r\n\t\t\t\t\tfor(var i = keys.length-1; i >= 0; i--)\r\n\t\t\t\t\t\tgroup = new Term(\".\", [new Term(\"-\", [keys[i], arrayToList(values[i])]), group]);\r\n\t\t\t\t\tthread.prepend([\r\n\t\t\t\t\t\tnew State(\r\n\t\t\t\t\t\t\tpoint.goal.replace(new pl.type.Term(\"=\", [expected, group])),\r\n\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// CLAUSE CREATION AND DESTRUCTION\r\n\t\t\r\n\t\t// asserta/1\r\n\t\t\"asserta/1\": function(thread, point, atom) {\r\n\t\t\tvar clause = atom.args[0];\r\n\t\t\tvar module_id = \"user\";\r\n\t\t\tif(pl.type.is_term(clause) && clause.indicator === \":/2\") {\r\n\t\t\t\tmodule_id = clause.args[0].id;\r\n\t\t\t\tclause = clause.args[1];\r\n\t\t\t}\r\n\t\t\tif(pl.type.is_variable(clause)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(clause)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", clause, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar head, body, get_module;\r\n\t\t\t\tif(clause.indicator === \":-/2\") {\r\n\t\t\t\t\thead = clause.args[0];\r\n\t\t\t\t\tbody = body_conversion(clause.args[1]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\thead = clause;\r\n\t\t\t\t\tbody = null;\r\n\t\t\t\t}\r\n\t\t\t\tif(pl.type.is_variable(head)) {\r\n\t\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t\t} else if(!pl.type.is_callable(head)) {\r\n\t\t\t\t\tthread.throw_error(pl.error.type(\"callable\", head, atom.indicator));\r\n\t\t\t\t} else if(body !== null && !pl.type.is_callable(body)) {\r\n\t\t\t\t\tthread.throw_error( pl.error.type(\"callable\", body, atom.indicator));\r\n\t\t\t\t} else if((!pl.type.is_module(thread.session.modules[module_id])\r\n\t\t\t\t|| thread.is_public_predicate(head.indicator, module_id))\r\n\t\t\t\t&& head.indicator !== \",/2\"\r\n\t\t\t\t&& !thread.session.modules.system.rules.hasOwnProperty(head.indicator)) {\r\n\t\t\t\t\tif(!pl.type.is_module(thread.session.modules[module_id])) {\r\n\t\t\t\t\t\tget_module = new Module(module_id, {}, \"all\", {session: thread.session});\r\n\t\t\t\t\t\tthread.session.modules[module_id] = get_module;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tget_module = thread.session.modules[module_id];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(get_module.rules[head.indicator] === undefined)\r\n\t\t\t\t\t\tget_module.rules[head.indicator] = [];\r\n\t\t\t\t\tget_module.public_predicates[head.indicator] = true;\r\n\t\t\t\t\tget_module.rules[head.indicator] = [new Rule(head, body, true)].concat(get_module.rules[head.indicator]);\r\n\t\t\t\t\tget_module.update_indices_predicate(head.indicator);\r\n\t\t\t\t\tthread.success(point);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthread.throw_error(pl.error.permission(\"modify\", \"static_procedure\", str_indicator(head.indicator), atom.indicator));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// assertz/1\r\n\t\t\"assertz/1\": function(thread, point, atom) {\r\n\t\t\tvar clause = atom.args[0];\r\n\t\t\tvar module_id = \"user\";\r\n\t\t\tif(pl.type.is_term(clause) && clause.indicator === \":/2\") {\r\n\t\t\t\tmodule_id = clause.args[0].id;\r\n\t\t\t\tclause = clause.args[1];\r\n\t\t\t}\r\n\t\t\tif(pl.type.is_variable(clause)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(clause)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", clause, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar head, body, get_module;\r\n\t\t\t\tif(clause.indicator === \":-/2\") {\r\n\t\t\t\t\thead = clause.args[0];\r\n\t\t\t\t\tbody = body_conversion(clause.args[1]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\thead = clause;\r\n\t\t\t\t\tbody = null;\r\n\t\t\t\t}\r\n\t\t\t\tif(pl.type.is_variable(head)) {\r\n\t\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t\t} else if(!pl.type.is_callable(head)) {\r\n\t\t\t\t\tthread.throw_error(pl.error.type(\"callable\", head, atom.indicator));\r\n\t\t\t\t} else if(body !== null && !pl.type.is_callable(body)) {\r\n\t\t\t\t\tthread.throw_error( pl.error.type(\"callable\", body, atom.indicator));\r\n\t\t\t\t} else if((!pl.type.is_module(thread.session.modules[module_id])\r\n\t\t\t\t|| thread.is_public_predicate(head.indicator, module_id))\r\n\t\t\t\t&& head.indicator !== \",/2\"\r\n\t\t\t\t&& !thread.session.modules.system.rules.hasOwnProperty(head.indicator)) {\r\n\t\t\t\t\tif(!pl.type.is_module(thread.session.modules[module_id])) {\r\n\t\t\t\t\t\tget_module = new Module(module_id, {}, \"all\", {session: thread.session});\r\n\t\t\t\t\t\tthread.session.modules[module_id] = get_module;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tget_module = thread.session.modules[module_id];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(get_module.rules[head.indicator] === undefined)\r\n\t\t\t\t\t\tget_module.rules[head.indicator] = [];\r\n\t\t\t\t\tget_module.public_predicates[head.indicator] = true;\r\n\t\t\t\t\tget_module.rules[head.indicator].push(new Rule(head, body, true));\r\n\t\t\t\t\tget_module.update_indices_predicate(head.indicator);\r\n\t\t\t\t\tthread.success(point);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthread.throw_error(pl.error.permission(\"modify\", \"static_procedure\", str_indicator(head.indicator), atom.indicator));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// retract/1\r\n\t\t\"retract/1\": function(thread, point, atom) {\r\n\t\t\tvar clause = atom.args[0];\r\n\t\t\tif(pl.type.is_variable(clause)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(clause)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", clause, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar head, body, module_atom, module_id;\r\n\t\t\t\tif(clause.indicator === \":/2\") {\r\n\t\t\t\t\tmodule_atom = clause.args[0];\r\n\t\t\t\t\tclause = clause.args[1];\r\n\t\t\t\t\tif(!pl.type.is_atom(module_atom)) {\r\n\t\t\t\t\t\tthread.throw_error(pl.error.type(\"module\", module_atom, atom.indicator));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmodule_atom = new Term(\"user\");\r\n\t\t\t\t}\r\n\t\t\t\tif(clause.indicator === \":-/2\") {\r\n\t\t\t\t\thead = clause.args[0];\r\n\t\t\t\t\tbody = clause.args[1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\thead = clause;\r\n\t\t\t\t\tbody = new Term(\"true\");\r\n\t\t\t\t}\r\n\t\t\t\tif(pl.type.is_variable(head)) {\r\n\t\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if(!pl.type.is_callable(head)) {\r\n\t\t\t\t\tthread.throw_error(pl.error.type(\"callable\", head, atom.indicator));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tmodule_id = module_atom.id;\r\n\t\t\t\tvar get_module = thread.session.modules[module_id];\r\n\t\t\t\tif(!pl.type.is_module(get_module))\r\n\t\t\t\t\treturn;\r\n\t\t\t\tif(!point.retract) {\r\n\t\t\t\t\tif(thread.is_public_predicate(head.indicator, module_id)\r\n\t\t\t\t\t&& head.indicator !== \",/2\"\r\n\t\t\t\t\t&& !thread.session.modules.system.rules.hasOwnProperty(head.indicator)) {\r\n\t\t\t\t\t\tif(get_module.rules[head.indicator] !== undefined) {\r\n\t\t\t\t\t\t\tvar states = [];\r\n\t\t\t\t\t\t\tif(typeof get_module.rules[head.indicator] === \"function\") {\r\n\t\t\t\t\t\t\t\tthread.throw_error(pl.error.permission(\"modify\", \"static_procedure\", str_indicator(head.indicator), atom.indicator));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor(var i = 0; i < get_module.rules[head.indicator].length; i++) {\r\n\t\t\t\t\t\t\t\tthread.session.renamed_variables = {};\r\n\t\t\t\t\t\t\t\tvar orule = get_module.rules[head.indicator][i];\r\n\t\t\t\t\t\t\t\tvar rule = orule.rename(thread);\r\n\t\t\t\t\t\t\t\tif(rule.body === null)\r\n\t\t\t\t\t\t\t\t\trule.body = new Term(\"true\", []);\r\n\t\t\t\t\t\t\t\tvar occurs_check = thread.get_flag(\"occurs_check\").indicator === \"true/0\";\r\n\t\t\t\t\t\t\t\tvar mgu = pl.unify(new Term(\",\", [head, body]), new Term(\",\", [rule.head, rule.body]), occurs_check);\r\n\t\t\t\t\t\t\t\tif(mgu !== null) {\r\n\t\t\t\t\t\t\t\t\tvar state = new State(\r\n\t\t\t\t\t\t\t\t\t\tpoint.goal.replace(new Term(\",\", [\r\n\t\t\t\t\t\t\t\t\t\t\tnew Term(\":\", [\r\n\t\t\t\t\t\t\t\t\t\t\t\tmodule_atom,\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew Term(\"retract\", [new Term(\":-\", [head, body])]),\r\n\t\t\t\t\t\t\t\t\t\t\t]),\r\n\t\t\t\t\t\t\t\t\t\t\tnew Term(\",\", [\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew Term(\"=\", [head, rule.head]),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew Term(\"=\", [body, rule.body])\r\n\t\t\t\t\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t\t\t\t\t])), point.substitution, point);\r\n\t\t\t\t\t\t\t\t\tstate.retract = orule;\r\n\t\t\t\t\t\t\t\t\tstates.push(state);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthread.prepend(states);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthread.throw_error(pl.error.permission(\"modify\", \"static_procedure\", str_indicator(head.indicator), atom.indicator));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tretract(thread, point, head.indicator, point.retract, get_module);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// retractall/1\r\n\t\t\"retractall/1\": function(thread, point, atom) {\r\n\t\t\tvar head = atom.args[0];\r\n\t\t\tvar context_module = \"user\";\r\n\t\t\tif(pl.type.is_term(head) && head.indicator === \":/2\") {\r\n\t\t\t\tcontext_module = head.args[0].id;\r\n\t\t\t\thead = head.args[1];\r\n\t\t\t}\r\n\t\t\tif(pl.type.is_variable(head)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_callable(head)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"callable\", head, atom.indicator));\r\n\t\t\t} else if(!thread.is_public_predicate(head.indicator, context_module)\r\n\t\t\t|| head.indicator === \",/2\"\r\n\t\t\t|| thread.session.modules.system.rules.hasOwnProperty(head.indicator)) {\r\n\t\t\t\tthread.throw_error(pl.error.permission(\"modify\", \"static_procedure\", str_indicator(head.indicator), atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tthread.prepend([\r\n\t\t\t\t\tnew State(point.goal.replace(new Term(\",\", [\r\n\t\t\t\t\t\tnew Term(\":\", [\r\n\t\t\t\t\t\t\tnew Term(context_module),\r\n\t\t\t\t\t\t\tnew Term(\"retract\", [new pl.type.Term(\":-\", [head, new Var(\"_\")])])\r\n\t\t\t\t\t\t]),\r\n\t\t\t\t\t\tnew Term(\"fail\", [])\r\n\t\t\t\t\t])), point.substitution, point),\r\n\t\t\t\t\tnew State(point.goal.replace(null), point.substitution, point)\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// abolish/1\r\n\t\t\"abolish/1\": function(thread, point, atom) {\r\n\t\t\tvar predicate = atom.args[0];\r\n\t\t\tvar module_id;\r\n\t\t\tif(pl.type.is_term(predicate) && predicate.indicator === \":/2\") {\r\n\t\t\t\tif(!pl.type.is_atom(predicate.args[0])) {\r\n\t\t\t\t\tthread.throw_error(pl.error.type(\"module\", predicate.args[0], atom.indicator));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tmodule_id = predicate.args[0].id;\r\n\t\t\t\tpredicate = predicate.args[1];\r\n\t\t\t} else {\r\n\t\t\t\tmodule_id = \"user\";\r\n\t\t\t}\r\n\t\t\tif(pl.type.is_variable(predicate) || pl.type.is_term(predicate) && predicate.indicator === \"//2\"\r\n\t\t\t&& (pl.type.is_variable(predicate.args[0]) || pl.type.is_variable(predicate.args[1]))) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_term(predicate) || predicate.indicator !== \"//2\") {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"predicate_indicator\", predicate, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_atom(predicate.args[0])) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"atom\", predicate.args[0], atom.indicator));\r\n\t\t\t} else if(!pl.type.is_integer(predicate.args[1])) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"integer\", predicate.args[1], atom.indicator));\r\n\t\t\t} else if(predicate.args[1].value < 0) {\r\n\t\t\t\tthread.throw_error(pl.error.domain(\"not_less_than_zero\", predicate.args[1], atom.indicator));\r\n\t\t\t} else if(pl.type.is_number(thread.get_flag(\"max_arity\")) && predicate.args[1].value > thread.get_flag(\"max_arity\").value) {\r\n\t\t\t\tthread.throw_error(pl.error.representation(\"max_arity\", atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar get_module = thread.session.modules[module_id];\r\n\t\t\t\tif(pl.type.is_module(get_module)) {\r\n\t\t\t\t\tvar indicator = predicate.args[0].id + \"/\" + predicate.args[1].value;\r\n\t\t\t\t\tif(thread.is_public_predicate(indicator, module_id)\r\n\t\t\t\t\t&& indicator !== \",/2\"\r\n\t\t\t\t\t&& !thread.session.modules.system.rules.hasOwnProperty(indicator)) {\r\n\t\t\t\t\t\tdelete get_module.rules[indicator];\r\n\t\t\t\t\t\tdelete get_module.indexed_clauses[indicator];\r\n\t\t\t\t\t\tdelete get_module.non_indexable_clauses[indicator];\r\n\t\t\t\t\t\tdelete get_module.public_predicates[indicator];\r\n\t\t\t\t\t\tdelete get_module.multifile_predicates[indicator];\r\n\t\t\t\t\t\tthread.success(point);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthread.throw_error(pl.error.permission(\"modify\", \"static_procedure\", atom.args[0], atom.indicator));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthread.success(point);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// ATOM PROCESSING\r\n\t\t\r\n\t\t// atom_length/2\r\n\t\t\"atom_length/2\": function( thread, point, atom ) {\r\n\t\t\tif( pl.type.is_variable( atom.args[0] ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atom( atom.args[0] ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", atom.args[0], atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( atom.args[1] ) && !pl.type.is_integer( atom.args[1] ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", atom.args[1], atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_integer( atom.args[1] ) && atom.args[1].value < 0 ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"not_less_than_zero\", atom.args[1], atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar length = new Num( stringLength(atom.args[0].id), false );\r\n\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [length, atom.args[1]] ) ), point.substitution, point )] );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// atom_concat/3\r\n\t\t\"atom_concat/3\": function( thread, point, atom ) {\r\n\t\t\tvar str, goal, start = atom.args[0], end = atom.args[1], whole = atom.args[2];\r\n\t\t\tif( pl.type.is_variable( whole ) && (pl.type.is_variable( start ) || pl.type.is_variable( end )) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( start ) && !pl.type.is_atom( start ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", start, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( end ) && !pl.type.is_atom( end ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", end, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( whole ) && !pl.type.is_atom( whole ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", whole, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar v1 = pl.type.is_variable( start );\r\n\t\t\t\tvar v2 = pl.type.is_variable( end );\r\n\t\t\t\t//var v3 = pl.type.is_variable( whole );\r\n\t\t\t\tif( !v1 && !v2 ) {\r\n\t\t\t\t\tgoal = new Term( \"=\", [whole, new Term( start.id + end.id )] );\r\n\t\t\t\t\tthread.prepend( [new State( point.goal.replace( goal ), point.substitution, point )] );\r\n\t\t\t\t} else if( v1 && !v2 ) {\r\n\t\t\t\t\tstr = whole.id.substr( 0, whole.id.length - end.id.length );\r\n\t\t\t\t\tif( str + end.id === whole.id ) {\r\n\t\t\t\t\t\tgoal = new Term( \"=\", [start, new Term( str )] );\r\n\t\t\t\t\t\tthread.prepend( [new State( point.goal.replace( goal ), point.substitution, point )] );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if( v2 && !v1 ) {\r\n\t\t\t\t\tstr = whole.id.substr( start.id.length );\r\n\t\t\t\t\tif( start.id + str === whole.id ) {\r\n\t\t\t\t\t\tgoal = new Term( \"=\", [end, new Term( str )] );\r\n\t\t\t\t\t\tthread.prepend( [new State( point.goal.replace( goal ), point.substitution, point )] );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar states = [];\r\n\t\t\t\t\tfor( var i = 0; i <= whole.id.length; i++ ) {\r\n\t\t\t\t\t\tvar atom1 = new Term( whole.id.substr( 0, i ) );\r\n\t\t\t\t\t\tvar atom2 = new Term( whole.id.substr( i ) );\r\n\t\t\t\t\t\tgoal = new Term( \",\", [new Term( \"=\", [atom1, start] ), new Term( \"=\", [atom2, end] )] );\r\n\t\t\t\t\t\tstates.push( new State( point.goal.replace( goal ), point.substitution, point ) );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.prepend( states );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// sub_atom/5\r\n\t\t\"sub_atom/5\": function( thread, point, atom ) {\r\n\t\t\tvar i, atom1 = atom.args[0], before = atom.args[1], length = atom.args[2], after = atom.args[3], subatom = atom.args[4];\r\n\t\t\tif( pl.type.is_variable( atom1 ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atom( atom1 ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", atom1, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( before ) && !pl.type.is_integer( before ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", before, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( length ) && !pl.type.is_integer( length ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", length, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( after ) && !pl.type.is_integer( after ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", after, atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_integer( before ) && before.value < 0 ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"not_less_than_zero\", before, atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_integer( length ) && length.value < 0 ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"not_less_than_zero\", length, atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_integer( after ) && after.value < 0 ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"not_less_than_zero\", after, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( subatom ) && !pl.type.is_atom( subatom ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", subatom, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar bs = [], ls = [], as = [];\r\n\t\t\t\tif( pl.type.is_variable( before ) ) {\r\n\t\t\t\t\tfor( i = 0; i <= atom1.id.length; i++ ) {\r\n\t\t\t\t\t\tbs.push( i );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbs.push( before.value );\r\n\t\t\t\t}\r\n\t\t\t\tif( pl.type.is_variable( length ) ) {\r\n\t\t\t\t\tfor( i = 0; i <= atom1.id.length; i++ ) {\r\n\t\t\t\t\t\tls.push( i );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tls.push( length.value );\r\n\t\t\t\t}\r\n\t\t\t\tif( pl.type.is_variable( after ) ) {\r\n\t\t\t\t\tfor( i = 0; i <= atom1.id.length; i++ ) {\r\n\t\t\t\t\t\tas.push( i );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tas.push( after.value );\r\n\t\t\t\t}\r\n\t\t\t\tvar states = [];\r\n\t\t\t\tfor( var _i in bs ) {\r\n\t\t\t\t\tif(!bs.hasOwnProperty(_i)) continue;\r\n\t\t\t\t\ti = bs[_i];\r\n\t\t\t\t\tfor( var _j in ls ) {\r\n\t\t\t\t\t\tif(!ls.hasOwnProperty(_j)) continue;\r\n\t\t\t\t\t\tvar j = ls[_j];\r\n\t\t\t\t\t\tvar k = atom1.id.length - i - j;\r\n\t\t\t\t\t\tif( indexOf( as, k ) !== -1 ) {\r\n\t\t\t\t\t\tif( i+j+k === atom1.id.length ) {\r\n\t\t\t\t\t\t\t\tvar str = atom1.id.substr( i, j );\r\n\t\t\t\t\t\t\t\tif( atom1.id === atom1.id.substr( 0, i ) + str + atom1.id.substr( i+j, k ) ) {\r\n\t\t\t\t\t\t\t\t\tvar pl1 = new Term( \"=\", [new Term( str ), subatom] );\r\n\t\t\t\t\t\t\t\t\tvar pl2 = new Term( \"=\", [before, new Num( i )] );\r\n\t\t\t\t\t\t\t\t\tvar pl3 = new Term( \"=\", [length, new Num( j )] );\r\n\t\t\t\t\t\t\t\t\tvar pl4 = new Term( \"=\", [after, new Num( k )] );\r\n\t\t\t\t\t\t\t\t\tvar goal = new Term( \",\", [ new Term( \",\", [ new Term( \",\", [pl2, pl3] ), pl4] ), pl1] );\r\n\t\t\t\t\t\t\t\t\tstates.push( new State( point.goal.replace( goal ), point.substitution, point ) );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend( states );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// atom_chars/2\r\n\t\t\"atom_chars/2\": function( thread, point, atom ) {\r\n\t\t\tvar atom1 = atom.args[0], list = atom.args[1];\r\n\t\t\tif( pl.type.is_variable( atom1 ) && pl.type.is_variable( list ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( atom1 ) && !pl.type.is_atom( atom1 ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", atom1, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tif( !pl.type.is_variable( atom1 ) ) {\r\n\t\t\t\t\tif(!pl.type.is_variable(list)) {\r\n\t\t\t\t\t\tvar pointer = list;\r\n\t\t\t\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"./2\") {\r\n\t\t\t\t\t\t\tif(!pl.type.is_character(pointer.args[0]) && !pl.type.is_variable(pointer.args[0])) {\r\n\t\t\t\t\t\t\t\tthread.throw_error(pl.error.type(\"character\", pointer.args[0], atom.indicator));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar list1 = new Term( \"[]\" );\r\n\t\t\t\t\tvar unilen = stringLength(atom1.id);\r\n\t\t\t\t\tfor( var i = unilen-1; i >= 0; i-- ) {\r\n\t\t\t\t\t\tlist1 = new Term( \".\", [new Term( atom1.id.charAt( i ) ), list1] );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [list, list1] ) ), point.substitution, point )] );\r\n\t\t\t\t} else {\t\t\t\r\n\t\t\t\t\tvar pointer = list;\r\n\t\t\t\t\tvar v = pl.type.is_variable( atom1 );\r\n\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\twhile( pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\t\tif( !pl.type.is_character( pointer.args[0] ) ) {\r\n\t\t\t\t\t\t\tif( pl.type.is_variable( pointer.args[0] ) && v ) {\r\n\t\t\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t} else if( !pl.type.is_variable( pointer.args[0] ) ) {\r\n\t\t\t\t\t\t\t\tthread.throw_error( pl.error.type( \"character\", pointer.args[0], atom.indicator ) );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstr += pointer.args[0].id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( pl.type.is_variable( pointer ) && v ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t} else if( !pl.type.is_empty_list( pointer ) && !pl.type.is_variable( pointer ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", list, atom.indicator ) );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [new Term( str ), atom1] ) ), point.substitution, point )] );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// atom_codes/2\r\n\t\t\"atom_codes/2\": function( thread, point, atom ) {\r\n\t\t\tvar atom1 = atom.args[0], list = atom.args[1];\r\n\t\t\tif( pl.type.is_variable( atom1 ) && pl.type.is_variable( list ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( atom1 ) && !pl.type.is_atom( atom1 ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", atom1, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tif( !pl.type.is_variable( atom1 ) ) {\r\n\t\t\t\t\tif(!pl.type.is_variable(list)) {\r\n\t\t\t\t\t\tvar pointer = list;\r\n\t\t\t\t\t\twhile(pl.type.is_term(pointer) && pointer.indicator === \"./2\") {\r\n\t\t\t\t\t\t\tif(!pl.type.is_character_code(pointer.args[0]) && !pl.type.is_variable(pointer.args[0])) {\r\n\t\t\t\t\t\t\t\tthread.throw_error(pl.error.type(\"integer\", pointer.args[0], atom.indicator));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar list1 = new Term( \"[]\" );\r\n\t\t\t\t\tvar unilen = stringLength(atom1.id);\r\n\t\t\t\t\tfor( var i = unilen-1; i >= 0; i-- ) {\r\n\t\t\t\t\t\tlist1 = new Term( \".\", [new Num( codePointAt(atom1.id,i), false ), list1] );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [list, list1] ) ), point.substitution, point )] );\r\n\t\t\t\t} else {\t\t\t\r\n\t\t\t\t\tvar pointer = list;\r\n\t\t\t\t\tvar v = pl.type.is_variable( atom1 );\r\n\t\t\t\t\tvar str = \"\";\r\n\t\t\t\t\twhile( pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\t\tif( !pl.type.is_character_code( pointer.args[0] ) ) {\r\n\t\t\t\t\t\t\tif( pl.type.is_variable( pointer.args[0] ) && v ) {\r\n\t\t\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t} else if( !pl.type.is_variable( pointer.args[0] ) ) {\r\n\t\t\t\t\t\t\t\tthread.throw_error( pl.error.representation( \"character_code\", atom.indicator ) );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstr += fromCodePoint( pointer.args[0].value );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( pl.type.is_variable( pointer ) && v ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t} else if( !pl.type.is_empty_list( pointer ) && !pl.type.is_variable( pointer ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", list, atom.indicator ) );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [new Term( str ), atom1] ) ), point.substitution, point )] );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// char_code/2\r\n\t\t\"char_code/2\": function( thread, point, atom ) {\r\n\t\t\tvar char = atom.args[0], code = atom.args[1];\r\n\t\t\tif( pl.type.is_variable( char ) && pl.type.is_variable( code ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( char ) && !pl.type.is_character( char ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"character\", char, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( code ) && !pl.type.is_integer( code ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", code, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( code ) && !pl.type.is_character_code( code ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.representation( \"character_code\", atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tif( pl.type.is_variable( code ) ) {\r\n\t\t\t\t\tvar code1 = new Num( codePointAt(char.id,0 ), false );\r\n\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [code1, code] ) ), point.substitution, point )] );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar char1 = new Term( fromCodePoint( code.value ) );\r\n\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [char1, char] ) ), point.substitution, point )] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// number_chars/2\r\n\t\t\"number_chars/2\": function( thread, point, atom ) {\r\n\t\t\tvar str, num = atom.args[0], list = atom.args[1];\r\n\t\t\tif( pl.type.is_variable( num ) && pl.type.is_variable( list ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( num ) && !pl.type.is_number( num ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"number\", num, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( list ) && !pl.type.is_list( list ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", list, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar isvar = pl.type.is_variable( num );\r\n\t\t\t\tif( !pl.type.is_variable( list ) ) {\t\r\n\t\t\t\t\tvar pointer = list;\r\n\t\t\t\t\tvar total = true;\r\n\t\t\t\t\tstr = \"\";\r\n\t\t\t\t\twhile( pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\t\tif( !pl.type.is_character( pointer.args[0] ) ) {\r\n\t\t\t\t\t\t\tif( pl.type.is_variable( pointer.args[0] ) ) {\r\n\t\t\t\t\t\t\t\ttotal = false;\r\n\t\t\t\t\t\t\t} else if( !pl.type.is_variable( pointer.args[0] ) ) {\r\n\t\t\t\t\t\t\t\tthread.throw_error( pl.error.type( \"character\", pointer.args[0], atom.indicator ) );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstr += pointer.args[0].id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttotal = total && pl.type.is_empty_list( pointer );\r\n\t\t\t\t\tif( !pl.type.is_empty_list( pointer ) && !pl.type.is_variable( pointer ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", list, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( !total && isvar ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( total ) {\r\n\t\t\t\t\t\tif( pl.type.is_variable( pointer ) && isvar ) {\r\n\t\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar expr = thread.parse( str );\r\n\t\t\t\t\t\t\tvar num2 = expr.value;\r\n\t\t\t\t\t\t\tif( !pl.type.is_number( num2 ) || expr.tokens[expr.tokens.length-1].space ) {\r\n\t\t\t\t\t\t\t\tthread.throw_error( pl.error.syntax_by_predicate( \"parseable_number\", atom.indicator ) );\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [num, num2] ) ), point.substitution, point )] );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif( !isvar ) {\r\n\t\t\t\t\tstr = num.toString();\r\n\t\t\t\t\tvar list2 = new Term( \"[]\" );\r\n\t\t\t\t\tfor( var i = str.length - 1; i >= 0; i-- ) {\r\n\t\t\t\t\t\tlist2 = new Term( \".\", [ new Term( str.charAt( i ) ), list2 ] );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [list, list2] ) ), point.substitution, point )] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// number_codes/2\r\n\t\t\"number_codes/2\": function( thread, point, atom ) {\r\n\t\t\tvar str, num = atom.args[0], list = atom.args[1];\r\n\t\t\tif( pl.type.is_variable( num ) && pl.type.is_variable( list ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( num ) && !pl.type.is_number( num ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"number\", num, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( list ) && !pl.type.is_list( list ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", list, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar isvar = pl.type.is_variable( num );\r\n\t\t\t\tif( !pl.type.is_variable( list ) ) {\t\r\n\t\t\t\t\tvar pointer = list;\r\n\t\t\t\t\tvar total = true;\r\n\t\t\t\t\tstr = \"\";\r\n\t\t\t\t\twhile( pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\t\tif( !pl.type.is_character_code( pointer.args[0] ) ) {\r\n\t\t\t\t\t\t\tif( pl.type.is_variable( pointer.args[0] ) ) {\r\n\t\t\t\t\t\t\t\ttotal = false;\r\n\t\t\t\t\t\t\t} else if( !pl.type.is_variable( pointer.args[0] ) ) {\r\n\t\t\t\t\t\t\t\tthread.throw_error( pl.error.representation( \"character_code\", atom.indicator ) );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstr += fromCodePoint( pointer.args[0].value );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttotal = total && pl.type.is_empty_list( pointer );\r\n\t\t\t\t\tif( !pl.type.is_empty_list( pointer ) && !pl.type.is_variable( pointer ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", list, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( !total && isvar ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( total ) {\r\n\t\t\t\t\t\tif( pl.type.is_variable( pointer ) && isvar ) {\r\n\t\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar expr = thread.parse( str );\r\n\t\t\t\t\t\t\tvar num2 = expr.value;\r\n\t\t\t\t\t\t\tif( !pl.type.is_number( num2 ) || expr.tokens[expr.tokens.length-1].space ) {\r\n\t\t\t\t\t\t\t\tthread.throw_error( pl.error.syntax_by_predicate( \"parseable_number\", atom.indicator ) );\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [num, num2] ) ), point.substitution, point )] );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif( !isvar ) {\r\n\t\t\t\t\tstr = num.toString();\r\n\t\t\t\t\tvar list2 = new Term( \"[]\" );\r\n\t\t\t\t\tfor( var i = str.length - 1; i >= 0; i-- ) {\r\n\t\t\t\t\t\tlist2 = new Term( \".\", [ new Num( codePointAt(str,i), false ), list2 ] );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [list, list2] ) ), point.substitution, point )] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// upcase_atom/2\r\n\t\t\"upcase_atom/2\": function( thread, point, atom ) {\r\n\t\t\tvar original = atom.args[0], upcase = atom.args[1];\r\n\t\t\tif( pl.type.is_variable( original ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atom( original ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", original, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( upcase ) && !pl.type.is_atom( upcase ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", upcase, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [upcase, new Term( original.id.toUpperCase(), [] )] ) ), point.substitution, point )] );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// downcase_atom/2\r\n\t\t\"downcase_atom/2\": function( thread, point, atom ) {\r\n\t\t\tvar original = atom.args[0], downcase = atom.args[1];\r\n\t\t\tif( pl.type.is_variable( original ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atom( original ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", original, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( downcase ) && !pl.type.is_atom( downcase ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", downcase, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [downcase, new Term( original.id.toLowerCase(), [] )] ) ), point.substitution, point )] );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// atomic_concat/3\r\n\t\t\"atomic_concat/3\": function( thread, point, atom ) {\r\n\t\t\tvar atomic1 = atom.args[0], atomic2 = atom.args[1], concat = atom.args[2];\r\n\t\t\tif( pl.type.is_variable( atomic1 ) || pl.type.is_variable( atomic2 ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atomic( atomic1 ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atomic\", atomic1, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atomic( atomic2 ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atomic\", atomic2, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( concat ) && !pl.type.is_atom( concat ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", concat, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar id = \"\";\r\n\t\t\t\tif( pl.type.is_atom( atomic1 ) ) {\r\n\t\t\t\t\tid += atomic1.id;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tid += \"\" + atomic1.value;\r\n\t\t\t\t}\r\n\t\t\t\tif( pl.type.is_atom( atomic2 ) ) {\r\n\t\t\t\t\tid += atomic2.id;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tid += \"\" + atomic2.value;\r\n\t\t\t\t}\r\n\t\t\t\tvar atom = new Term(id, []);\r\n\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [atom, concat] ) ), point.substitution, point )] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// atomic_list_concat/2\r\n\t\t\"atomic_list_concat/2\": function( thread, point, atom ) {\r\n\t\t\tvar list = atom.args[0], concat = atom.args[1];\r\n\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"atomic_list_concat\", [list, new Term( \"\", [] ), concat] ) ), point.substitution, point )] );\r\n\t\t},\r\n\t\t\r\n\t\t// atomic_list_concat/3\r\n\t\t\"atomic_list_concat/3\": function( thread, point, atom ) {\r\n\t\t\tvar list = atom.args[0], separator = atom.args[1], concat = atom.args[2];\r\n\t\t\tif( pl.type.is_variable( separator ) || pl.type.is_variable( list ) && pl.type.is_variable( concat ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( list ) && !pl.type.is_list( list ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", list, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atom( separator ) && !pl.type.is_number( separator ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atomic\", separator, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( concat ) && !pl.type.is_atom( concat ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", concat, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar id = \"\";\r\n\t\t\t\tvar pointer = list;\r\n\t\t\t\twhile( pl.type.is_term( pointer ) && pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\tif( pl.type.is_variable( pointer.args[0] ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( !pl.type.is_atom( pointer.args[0] ) && !pl.type.is_number( pointer.args[0] ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.type( \"atomic\", pointer.args[0], atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( id !== \"\" )\r\n\t\t\t\t\t\tid += separator.id;\r\n\t\t\t\t\tif( pl.type.is_atom( pointer.args[0] ) )\r\n\t\t\t\t\t\tid += pointer.args[0].id;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tid += \"\" + pointer.args[0].value;\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tid = new Term( id, [] );\r\n\t\t\t\tif( pl.type.is_variable( pointer ) ) {\r\n\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t} else if( !pl.type.is_term( pointer ) || pointer.indicator !== \"[]/0\" ) {\r\n\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", list, atom.indicator ) );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [id, concat] ) ), point.substitution, point )] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// TERM COMPARISON\r\n\t\t\r\n\t\t\"@=</2\": function( thread, point, atom ) {\r\n\t\t\tif( pl.compare( atom.args[0], atom.args[1] ) <= 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t\"==/2\": function( thread, point, atom ) {\r\n\t\t\tif( pl.compare( atom.args[0], atom.args[1] ) === 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t\"\\\\==/2\": function( thread, point, atom ) {\r\n\t\t\tif( pl.compare( atom.args[0], atom.args[1] ) !== 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t\"@</2\": function( thread, point, atom ) {\r\n\t\t\tif( pl.compare( atom.args[0], atom.args[1] ) < 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t\"@>/2\": function( thread, point, atom ) {\r\n\t\t\tif( pl.compare( atom.args[0], atom.args[1] ) > 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t\"@>=/2\": function( thread, point, atom ) {\r\n\t\t\tif( pl.compare( atom.args[0], atom.args[1] ) >= 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t\"compare/3\": function( thread, point, atom ) {\r\n\t\t\tvar order = atom.args[0], left = atom.args[1], right = atom.args[2];\r\n\t\t\tif( !pl.type.is_variable( order ) && !pl.type.is_atom( order ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", order, atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_atom( order ) && [\"<\", \">\", \"=\"].indexOf( order.id ) === -1 ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"order\", order, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar compare = pl.compare( left, right );\r\n\t\t\t\tcompare = compare === 0 ? \"=\" : (compare === -1 ? \"<\" : \">\");\r\n\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [order, new Term( compare, [] )] ) ), point.substitution, point )] );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// EVALUATION\r\n\t\t\r\n\t\t// is/2\r\n\t\t\"is/2\": function( thread, point, atom ) {\r\n\t\t\tvar op = atom.args[1].interpret( thread );\r\n\t\t\tif( !pl.type.is_number( op ) ) {\r\n\t\t\t\tthread.throw_error( op );\r\n\t\t\t} else {\r\n\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [atom.args[0], op], atom.indicator ) ), point.substitution, point )] );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// between/3\r\n\t\t\"between/3\": function( thread, point, atom ) {\r\n\t\t\tvar lower = atom.args[0], upper = atom.args[1], bet = atom.args[2];\r\n\t\t\tif( pl.type.is_variable( lower ) || pl.type.is_variable( upper ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_integer( lower ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", lower, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_integer( upper ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", upper, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( bet ) && !pl.type.is_integer( bet ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", bet, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tif( pl.type.is_variable( bet ) ) {\r\n\t\t\t\t\tif( lower.value <= upper.value ) {\r\n\t\t\t\t\t\tvar states = [new State( point.goal.replace( new Term( \"=\", [bet, lower] ) ), point.substitution, point )];\r\n\t\t\t\t\t\tstates.push( new State( point.goal.replace( new Term( \"between\", [new Num( lower.value+1, false ), upper, bet] ) ), point.substitution, point ) );\r\n\t\t\t\t\t\tthread.prepend( states );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if( lower.value <= bet.value && upper.value >= bet.value ) {\r\n\t\t\t\t\tthread.success( point );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// succ/2\r\n\t\t\"succ/2\": function( thread, point, atom ) {\r\n\t\t\tvar n = atom.args[0], m = atom.args[1];\r\n\t\t\tif( pl.type.is_variable( n ) && pl.type.is_variable( m ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( n ) && !pl.type.is_integer( n ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", n, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( m ) && !pl.type.is_integer( m ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", m, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( n ) && n.value < 0 ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"not_less_than_zero\", n, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( m ) && m.value < 0 ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"not_less_than_zero\", m, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tif( pl.type.is_variable( m ) || m.value > 0 ) {\r\n\t\t\t\t\tif( pl.type.is_variable( n ) ) {\r\n\t\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [n, new Num( m.value-1, false )] ) ), point.substitution, point )] );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthread.prepend( [new State( point.goal.replace( new Term( \"=\", [m, new Num( n.value+1, false )] ) ), point.substitution, point )] );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// =:=/2\r\n\t\t\"=:=/2\": function( thread, point, atom ) {\r\n\t\t\tvar cmp = pl.arithmetic_compare( thread, atom.args[0], atom.args[1] );\r\n\t\t\tif( pl.type.is_term( cmp ) ) {\r\n\t\t\t\tthread.throw_error( cmp );\r\n\t\t\t} else if( cmp === 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// =\\=/2\r\n\t\t\"=\\\\=/2\": function( thread, point, atom ) {\r\n\t\t\tvar cmp = pl.arithmetic_compare( thread, atom.args[0], atom.args[1] );\r\n\t\t\tif( pl.type.is_term( cmp ) ) {\r\n\t\t\t\tthread.throw_error( cmp );\r\n\t\t\t} else if( cmp !== 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// </2\r\n\t\t\"</2\": function( thread, point, atom ) {\r\n\t\t\tvar cmp = pl.arithmetic_compare( thread, atom.args[0], atom.args[1] );\r\n\t\t\tif( pl.type.is_term( cmp ) ) {\r\n\t\t\t\tthread.throw_error( cmp );\r\n\t\t\t} else if( cmp < 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// =</2\r\n\t\t\"=</2\": function( thread, point, atom ) {\r\n\t\t\tvar cmp = pl.arithmetic_compare( thread, atom.args[0], atom.args[1] );\r\n\t\t\tif( pl.type.is_term( cmp ) ) {\r\n\t\t\t\tthread.throw_error( cmp );\r\n\t\t\t} else if( cmp <= 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// >/2\r\n\t\t\">/2\": function( thread, point, atom ) {\r\n\t\t\tvar cmp = pl.arithmetic_compare( thread, atom.args[0], atom.args[1] );\r\n\t\t\tif( pl.type.is_term( cmp ) ) {\r\n\t\t\t\tthread.throw_error( cmp );\r\n\t\t\t} else if( cmp > 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// >=/2\r\n\t\t\">=/2\": function( thread, point, atom ) {\r\n\t\t\tvar cmp = pl.arithmetic_compare( thread, atom.args[0], atom.args[1] );\r\n\t\t\tif( pl.type.is_term( cmp ) ) {\r\n\t\t\t\tthread.throw_error( cmp );\r\n\t\t\t} else if( cmp >= 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// TYPE TEST\r\n\t\t\r\n\t\t// var/1\r\n\t\t\"var/1\": function( thread, point, atom ) {\r\n\t\t\tif( pl.type.is_variable( atom.args[0] ) ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// atom/1\r\n\t\t\"atom/1\": function( thread, point, atom ) {\r\n\t\t\tif( pl.type.is_atom( atom.args[0] ) ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// atomic/1\r\n\t\t\"atomic/1\": function( thread, point, atom ) {\r\n\t\t\tif( pl.type.is_atomic( atom.args[0] ) ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// compound/1\r\n\t\t\"compound/1\": function( thread, point, atom ) {\r\n\t\t\tif( pl.type.is_compound( atom.args[0] ) ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// integer/1\r\n\t\t\"integer/1\": function( thread, point, atom ) {\r\n\t\t\tif( pl.type.is_integer( atom.args[0] ) ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// float/1\r\n\t\t\"float/1\": function( thread, point, atom ) {\r\n\t\t\tif( pl.type.is_float( atom.args[0] ) ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// number/1\r\n\t\t\"number/1\": function( thread, point, atom ) {\r\n\t\t\tif( pl.type.is_number( atom.args[0] ) ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// nonvar/1\r\n\t\t\"nonvar/1\": function( thread, point, atom ) {\r\n\t\t\tif( !pl.type.is_variable( atom.args[0] ) ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// ground/1\r\n\t\t\"ground/1\": function( thread, point, atom ) {\r\n\t\t\tif( atom.variables().length === 0 ) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// acyclic_term/1\r\n\t\t\"acyclic_term/1\": function( thread, point, atom ) {\r\n\t\t\tvar test = point.substitution.apply( point.substitution );\r\n\t\t\tvar variables = atom.args[0].variables();\r\n\t\t\tfor( var i = 0; i < variables.length; i++ )\r\n\t\t\t\tif( point.substitution.links[variables[i]] !== undefined && !point.substitution.links[variables[i]].equals( test.links[variables[i]] ) )\r\n\t\t\t\t\treturn;\r\n\t\t\tthread.success( point );\r\n\t\t},\r\n\t\t\r\n\t\t// callable/1\r\n\t\t\"callable/1\": function( thread, point, atom ) {\r\n\t\t\tvar callable = atom.args[0];\r\n\t\t\tif(pl.type.is_term(callable)) {\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// is_list/1\r\n\t\t\"is_list/1\": function( thread, point, atom ) {\r\n\t\t\tvar list = atom.args[0];\r\n\t\t\twhile( pl.type.is_term( list ) && list.indicator === \"./2\" )\r\n\t\t\t\tlist = list.args[1];\r\n\t\t\tif( pl.type.is_term( list ) && list.indicator === \"[]/0\" )\r\n\t\t\t\tthread.success( point );\r\n\t\t},\r\n\r\n\r\n\r\n\t\t// STREAM SELECTION AND CONTROL\r\n\r\n\t\t// current_input/1\r\n\t\t\"current_input/1\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0];\r\n\t\t\tif(!pl.type.is_variable(stream)\r\n\t\t\t&& (!pl.type.is_stream(stream) || !thread.get_stream_by_alias(stream.alias)\r\n\t\t\t\t\t\t\t\t\t\t   && !thread.get_stream_by_alias(stream.id))\r\n\t\t\t&& (!pl.type.is_atom(stream) || !thread.get_stream_by_alias(stream.id))) {\r\n\t\t\t\tthread.throw_error( pl.error.domain(\"stream\", stream, atom.indicator) );\r\n\t\t\t} else {\r\n\t\t\t\tif(pl.type.is_atom(stream))\r\n\t\t\t\t\tstream = thread.get_stream_by_alias(stream.id);\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\"=\", [stream, thread.get_current_input()])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint)\r\n\t\t\t\t] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// current_output/1\r\n\t\t\"current_output/1\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0];\r\n\t\t\tif(!pl.type.is_variable(stream)\r\n\t\t\t&& (!pl.type.is_stream(stream) || !thread.get_stream_by_alias(stream.alias)\r\n\t\t\t\t\t\t\t\t\t\t   && !thread.get_stream_by_alias(stream.id))\r\n\t\t\t&& (!pl.type.is_atom(stream) || !thread.get_stream_by_alias(stream.id))) {\r\n\t\t\t\tthread.throw_error( pl.error.domain(\"stream\", stream, atom.indicator) );\r\n\t\t\t} else {\r\n\t\t\t\tif(pl.type.is_atom(stream))\r\n\t\t\t\t\tstream = thread.get_stream_by_alias( stream.id );\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace(new Term(\"=\", [stream, thread.get_current_output()])),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint)\r\n\t\t\t\t] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// set_input/1\r\n\t\t\"set_input/1\": function( thread, point, atom ) {\r\n\t\t\tvar input = atom.args[0];\r\n\t\t\tvar stream = pl.type.is_stream( input ) ? input : thread.get_stream_by_alias( input.id );\r\n\t\t\tif( pl.type.is_variable( input ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( input ) && !pl.type.is_atom( input ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", input, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream ) || !thread.get_stream_by_alias(input.alias)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&& !thread.get_stream_by_alias(input.id) ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", input, atom.indicator ) );\r\n\t\t\t} else if( stream.output === true ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"stream\", input, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tthread.set_current_input( stream );\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// set_output/1\r\n\t\t\"set_output/1\": function( thread, point, atom ) {\r\n\t\t\tvar output = atom.args[0];\r\n\t\t\tvar stream = pl.type.is_stream( output ) ? output : thread.get_stream_by_alias( output.id );\r\n\t\t\tif( pl.type.is_variable( output ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( output ) && !pl.type.is_atom( output ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", output, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream ) || !thread.get_stream_by_alias(output.alias)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&& !thread.get_stream_by_alias(output.id) ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", output, atom.indicator ) );\r\n\t\t\t} else if( stream.input === true ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"output\", \"stream\", output, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tthread.set_current_output( stream );\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// open/3\r\n\t\t\"open/3\": function( thread, point, atom ) {\r\n\t\t\tvar dest = atom.args[0], mode = atom.args[1], stream = atom.args[2];\r\n\t\t\tthread.prepend( [new State(\r\n\t\t\t\tpoint.goal.replace(new Term(\"open\", [dest, mode, stream, new Term(\"[]\", [])])),\r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)] );\r\n\t\t},\r\n\r\n\t\t// open/4\r\n\t\t\"open/4\": function( thread, point, atom ) {\r\n\t\t\tvar dest = atom.args[0], mode = atom.args[1], stream = atom.args[2], options = atom.args[3];\r\n\t\t\tif( pl.type.is_variable( dest ) || pl.type.is_variable( mode ) || pl.type.is_variable( options ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( mode ) && !pl.type.is_atom( mode ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", mode, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_list( options ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", options, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.uninstantiation( stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atom( dest ) && !pl.type.is_streamable( dest ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"source_sink\", dest, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_io_mode( mode ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"io_mode\", mode, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar obj_options = {};\r\n\t\t\t\tvar pointer = options;\r\n\t\t\t\tvar property;\r\n\t\t\t\twhile( pl.type.is_term(pointer) && pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\tproperty = pointer.args[0];\r\n\t\t\t\t\tif( pl.type.is_variable( property ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( !pl.type.is_stream_option( property ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.domain( \"stream_option\", property, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tobj_options[property.id] = property.args[0].id;\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif( pointer.indicator !== \"[]/0\" ) {\r\n\t\t\t\t\tif( pl.type.is_variable( pointer ) )\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", options, atom.indicator ) );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar alias = obj_options[\"alias\"];\r\n\t\t\t\t\tif( alias && thread.get_stream_by_alias(alias) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.permission( \"open\", \"source_sink\", new Term(\"alias\", [new Term(alias, [])]), atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( !obj_options[\"type\"] )\r\n\t\t\t\t\t\tobj_options[\"type\"] = \"text\";\r\n\t\t\t\t\tvar file;\r\n\t\t\t\t\tif( pl.type.is_atom( dest ) )\r\n\t\t\t\t\t\tfile = thread.file_system_open( dest.id, obj_options[\"type\"], mode.id );\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tfile = dest.stream( obj_options[\"type\"], mode.id );\r\n\t\t\t\t\tif( file === false ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.permission( \"open\", \"source_sink\", dest, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( file === null ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.existence( \"source_sink\", dest, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar newstream = new Stream(\r\n\t\t\t\t\t\tfile, mode.id,\r\n\t\t\t\t\t\tobj_options[\"alias\"],\r\n\t\t\t\t\t\tobj_options[\"type\"],\r\n\t\t\t\t\t\tobj_options[\"reposition\"] === \"true\",\r\n\t\t\t\t\t\tobj_options[\"eof_action\"] );\r\n\t\t\t\t\tif( alias )\r\n\t\t\t\t\t\tthread.session.streams[alias] = newstream;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthread.session.streams[newstream.id] = newstream;\r\n\t\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\t\tpoint.goal.replace( new Term( \"=\", [stream, newstream] ) ),\r\n\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\tpoint\r\n\t\t\t\t\t)] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// close/1\r\n\t\t\"close/1\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0];\r\n\t\t\tthread.prepend( [new State(\r\n\t\t\t\tpoint.goal.replace(new Term(\"close\", [stream, new Term(\"[]\", [])])),\r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)] );\r\n\t\t},\r\n\r\n\t\t// close/2\r\n\t\t\"close/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], options = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) || pl.type.is_variable( options ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_list( options ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", options, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\t// Get options\r\n\t\t\t\tvar obj_options = {};\r\n\t\t\t\tvar pointer = options;\r\n\t\t\t\tvar property;\r\n\t\t\t\twhile( pl.type.is_term(pointer) && pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\tproperty = pointer.args[0];\r\n\t\t\t\t\tif( pl.type.is_variable( property ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( !pl.type.is_close_option( property ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.domain( \"close_option\", property, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tobj_options[property.id] = property.args[0].id === \"true\";\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif( pointer.indicator !== \"[]/0\" ) {\r\n\t\t\t\t\tif( pl.type.is_variable( pointer ) )\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", options, atom.indicator ) );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(stream2 === thread.session.standard_input || stream2 === thread.session.standard_output || stream2 === thread.session.standard_error) {\r\n\t\t\t\t\t\tthread.success( point );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( stream2 === thread.session.current_input ) {\r\n\t\t\t\t\t\tthread.session.current_input = thread.session.standard_input;\r\n\t\t\t\t\t} else if( stream2 === thread.session.current_output ) {\r\n\t\t\t\t\t\tthread.session.current_output = thread.session.standard_output;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( stream2.alias !== null && stream2.alias !== undefined )\r\n\t\t\t\t\t\tdelete thread.session.streams[stream2.alias];\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tdelete thread.session.streams[stream2.id];\r\n\t\t\t\t\tif( stream2.output )\r\n\t\t\t\t\t\tstream2.stream.flush();\r\n\t\t\t\t\tvar closed = stream2.stream.close();\r\n\t\t\t\t\tstream2.stream = null;\r\n\t\t\t\t\tif( obj_options.force === true || closed === true ) {\r\n\t\t\t\t\t\tthread.success( point );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// flush_output/0\r\n\t\t\"flush_output/0\": [\r\n\t\t\tnew Rule(new Term(\"flush_output\", []), new Term(\",\", [new Term(\"current_output\", [new Var(\"S\")]),new Term(\"flush_output\", [new Var(\"S\")])]))\r\n\t\t],\r\n\r\n\t\t// flush_output/1\r\n\t\t\"flush_output/1\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.input === true ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"output\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tstream2.stream.flush();\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// stream_property/2\r\n\t\t\"stream_property/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], property = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( !pl.type.is_variable( stream ) && !pl.type.is_stream( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( stream ) && (!pl.type.is_stream( stream2 ) || stream2.stream === null) ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( property ) && !pl.type.is_stream_property( property ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_property\", property, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar streams = [];\r\n\t\t\t\tvar states = [];\r\n\t\t\t\tvar propvar = pl.type.is_variable(property);\r\n\t\t\t\tif( !pl.type.is_variable( stream ) )\r\n\t\t\t\t\tstreams.push( stream2 );\r\n\t\t\t\telse\r\n\t\t\t\t\tfor( var key in thread.session.streams )\r\n\t\t\t\t\t\tstreams.push( thread.session.streams[key] );\r\n\t\t\t\tfor( var i = 0; i < streams.length; i++ ) {\r\n\t\t\t\t\tvar properties = [];\r\n\t\t\t\t\t// file_name/1\r\n\t\t\t\t\tif( (propvar || property.indicator === \"file_name/1\") && streams[i].filename )\r\n\t\t\t\t\t\tproperties.push( new Term( \"file_name\", [new Term(streams[i].file_name, [])] ) );\r\n\t\t\t\t\t// mode/1\r\n\t\t\t\t\tif(propvar || property.indicator === \"mode/1\")\r\n\t\t\t\t\t\tproperties.push( new Term( \"mode\", [new Term(streams[i].mode, [])] ) );\r\n\t\t\t\t\t// input/0 or output/0\r\n\t\t\t\t\tif(propvar || property.indicator === \"input/0\" || property.indicator === \"output/0\")\r\n\t\t\t\t\t\tproperties.push( new Term( streams[i].input ? \"input\" : \"output\", [] ) );\r\n\t\t\t\t\t// alias/1\r\n\t\t\t\t\tif( (propvar || property.indicator === \"alias/1\") && streams[i].alias )\r\n\t\t\t\t\t\tproperties.push( new Term( \"alias\", [new Term(streams[i].alias, [])] ) );\r\n\t\t\t\t\t// position/1\r\n\t\t\t\t\tif(propvar || property.indicator === \"position/1\")\r\n\t\t\t\t\t\tproperties.push( new Term( \"position\", [\r\n\t\t\t\t\t\t\tnew Term(\"position\", [\r\n\t\t\t\t\t\t\t\tnew Num(streams[i].char_count, false),\r\n\t\t\t\t\t\t\t\tnew Num(streams[i].line_count, false),\r\n\t\t\t\t\t\t\t\tnew Num(streams[i].line_position, false)\r\n\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t] ) );\r\n\t\t\t\t\t// end_of_stream/1\r\n\t\t\t\t\tif(propvar || property.indicator === \"end_of_stream/1\")\r\n\t\t\t\t\t\tproperties.push( new Term( \"end_of_stream\", [new Term(\r\n\t\t\t\t\t\t\tstreams[i].position === \"end_of_stream\" || streams[i].stream.eof && streams[i].stream.eof(streams[i].position) ? \"at\" :\r\n\t\t\t\t\t\t\tstreams[i].position === \"past_end_of_stream\" ? \"past\" :\r\n\t\t\t\t\t\t\t\"not\", [])] ) );\r\n\t\t\t\t\t// eof_action/1\r\n\t\t\t\t\tif(propvar || property.indicator === \"eof_action/1\")\t\r\n\t\t\t\t\t\tproperties.push( new Term( \"eof_action\", [new Term(streams[i].eof_action, [])] ) );\r\n\t\t\t\t\t// reposition/1\r\n\t\t\t\t\tif(propvar || property.indicator === \"reposition/1\")\r\n\t\t\t\t\t\tproperties.push( new Term( \"reposition\", [new Term(streams[i].reposition ? \"true\" : \"false\", [])] ) );\r\n\t\t\t\t\t// type/1\r\n\t\t\t\t\tif(propvar || property.indicator === \"type/1\")\r\n\t\t\t\t\t\tproperties.push( new Term( \"type\", [new Term(streams[i].type, [])] ) );\r\n\t\t\t\t\tfor( var j = 0; j < properties.length; j++ ) {\r\n\t\t\t\t\t\tstates.push( new State(\r\n\t\t\t\t\t\t\tpoint.goal.replace( new Term( \",\", [\r\n\t\t\t\t\t\t\t\tnew Term(\"=\", [pl.type.is_variable( stream ) ? stream : stream2, streams[i]]),\r\n\t\t\t\t\t\t\t\tnew Term(\"=\", [property, properties[j]])]) ),\r\n\t\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\t\tpoint\r\n\t\t\t\t\t\t) );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend( states );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// stream_position_data\r\n\t\t\"stream_position_data/3\": function(thread, point, atom) {\r\n\t\t\tvar field = atom.args[0], position = atom.args[1], value = atom.args[2];\r\n\t\t\tif(pl.type.is_variable(position)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_term(position) || position.indicator !== \"position/3\") {\r\n\t\t\t\tthread.throw_error(pl.error.domain(\"stream_position\", position, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(field) && !pl.type.is_atom(field)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"atom\", field, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(value) && !pl.type.is_integer(value)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"integer\", value, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar fields = [\"char_count\", \"line_count\", \"line_position\"];\r\n\t\t\t\tvar states = [];\r\n\t\t\t\tvar data_pos = {char_count: 0, line_count: 1, line_position: 2};\r\n\t\t\t\tif(pl.type.is_variable(field)) {\r\n\t\t\t\t\tfor(var i = 0; i < fields.length; i++) {\r\n\t\t\t\t\t\tstates.push(new State(point.goal.replace(\r\n\t\t\t\t\t\t\tnew Term(\",\", [\r\n\t\t\t\t\t\t\t\tnew Term(\"=\", [new Term(fields[i]), field]),\r\n\t\t\t\t\t\t\t\tnew Term(\"=\", [value, position.args[data_pos[fields[i]]]])\r\n\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t), point.substitution, point));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if(data_pos.hasOwnProperty(field.id)) {\r\n\t\t\t\t\tstates.push(new State(point.goal.replace(\r\n\t\t\t\t\t\tnew Term(\"=\", [value, position.args[data_pos[field.id]]])\r\n\t\t\t\t\t), point.substitution, point));\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend(states);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// at_end_of_stream/0\r\n\t\t\"at_end_of_stream/0\": [\r\n\t\t\tnew Rule(new Term(\"at_end_of_stream\", []), new pl.type.Term(\",\", [new Term(\"current_input\", [new Var(\"S\")]),new Term(\",\", [new Term(\"stream_property\", [new Var(\"S\"),new Term(\"end_of_stream\", [new Var(\"E\")])]),new Term(\",\", [new Term(\"!\", []),new Term(\";\", [new Term(\"=\", [new Var(\"E\"),new Term(\"at\", [])]),new Term(\"=\", [new Var(\"E\"),new Term(\"past\", [])])])])])]))\r\n\t\t],\r\n\r\n\t\t// at_end_of_stream/1\r\n\t\t\"at_end_of_stream/1\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar e = thread.next_free_variable();\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace(\r\n\t\t\t\t\t\tnew Term(\",\", [new Term(\"stream_property\", [stream2,new Term(\"end_of_stream\", [e])]),\r\n\t\t\t\t\t\tnew Term(\",\", [new Term(\"!\", []),new Term(\";\", [new Term(\"=\", [e,new Term(\"at\", [])]),\r\n\t\t\t\t\t\tnew Term(\"=\", [e,new Term(\"past\", [])])])])])\r\n\t\t\t\t\t),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// set_stream_position/2\r\n\t\t\"set_stream_position/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], position = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) || pl.type.is_variable( position ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream_position( position ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_position\", position, atom.indicator ) );\r\n\t\t\t} else if( stream2.reposition === false ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"reposition\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tif( position.indicator === \"position/3\" ) {\r\n\t\t\t\t\tstream2.position = position.args[0].value;\r\n\t\t\t\t\tstream2.char_count = position.args[0].value;\r\n\t\t\t\t\tstream2.line_count = position.args[1].value;\r\n\t\t\t\t\tstream2.line_position = position.args[2].value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstream2.position = position.id;\r\n\t\t\t\t}\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\r\n\t\t//  CHARACTER INPUT OUTPUT\r\n\t\t\r\n\t\t// get_char/1\r\n\t\t\"get_char/1\": [\r\n\t\t\tnew Rule(new Term(\"get_char\", [new Var(\"C\")]), new Term(\",\", [new Term(\"current_input\", [new Var(\"S\")]),new Term(\"get_char\", [new Var(\"S\"),new Var(\"C\")])]))\r\n\t\t],\r\n\r\n\t\t// get_char/2\r\n\t\t\"get_char/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], char = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( char ) && !pl.type.is_in_character( char ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"in_character\", char, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.output ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.type === \"binary\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"binary_stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.position === \"past_end_of_stream\" && stream2.eof_action === \"error\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"past_end_of_stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar stream_char;\r\n\t\t\t\tif( stream2.position === \"end_of_stream\" ) {\r\n\t\t\t\t\tstream_char = \"end_of_file\";\r\n\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t} else if( stream2.position === \"past_end_of_stream\" ) {\r\n\t\t\t\t\tstream_char = \"end_of_file\";\r\n\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstream_char = stream2.stream.get( 1, stream2.position );\r\n\t\t\t\t\tif( stream_char === null ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.representation( \"character\", atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if(stream_char === \"end_of_stream\") {\r\n\t\t\t\t\t\tstream_char = \"end_of_file\";\r\n\t\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstream2.position++;\r\n\t\t\t\t\t\tstream2.char_count++;\r\n\t\t\t\t\t\tstream2.line_position++;\r\n\t\t\t\t\t\tif(stream_char === \"\\n\") {\r\n\t\t\t\t\t\t\tstream2.line_count++;\r\n\t\t\t\t\t\t\tstream2.line_position = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace( new Term( \"=\", [new Term(stream_char,[]), char] ) ),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// get_code/1\r\n\t\t\"get_code/1\": [\r\n\t\t\tnew Rule(new Term(\"get_code\", [new Var(\"C\")]), new Term(\",\", [new Term(\"current_input\", [new Var(\"S\")]),new Term(\"get_code\", [new Var(\"S\"),new Var(\"C\")])]))\r\n\t\t],\r\n\r\n\t\t// get_code/2\r\n\t\t\"get_code/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], code = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( code ) && !pl.type.is_integer( code ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", code, atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_integer( code ) && !pl.type.is_in_character_code( code ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.representation( \"in_character_code\", atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( stream ) && !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.output ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.type === \"binary\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"binary_stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.position === \"past_end_of_stream\" && stream2.eof_action === \"error\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"past_end_of_stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar stream_code;\r\n\t\t\t\tif( stream2.position === \"end_of_stream\" ) {\r\n\t\t\t\t\tstream_code = -1;\r\n\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t} else if( stream2.position === \"past_end_of_stream\" ) {\r\n\t\t\t\t\tstream_code = -1;\r\n\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstream_code = stream2.stream.get( 1, stream2.position );\r\n\t\t\t\t\tif( stream_code === null ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.representation( \"character\", atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if(stream_code === \"end_of_stream\") {\r\n\t\t\t\t\t\tstream_code = -1;\r\n\t\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstream_code = codePointAt( stream_code, 0 );\r\n\t\t\t\t\t\tstream2.position++;\r\n\t\t\t\t\t\tstream2.char_count++;\r\n\t\t\t\t\t\tstream2.line_position++;\r\n\t\t\t\t\t\tif(stream_code === 10) {\r\n\t\t\t\t\t\t\tstream2.line_count++;\r\n\t\t\t\t\t\t\tstream2.line_position = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace( new Term( \"=\", [new Num(stream_code, false), code] ) ),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// peek_char/1\r\n\t\t\"peek_char/1\": [\r\n\t\t\tnew Rule(new Term(\"peek_char\", [new Var(\"C\")]), new Term(\",\", [new Term(\"current_input\", [new Var(\"S\")]),new Term(\"peek_char\", [new Var(\"S\"),new Var(\"C\")])]))\r\n\t\t],\r\n\r\n\t\t// peek_char/2\r\n\t\t\"peek_char/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], char = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( char ) && !pl.type.is_in_character( char ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"in_character\", char, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.output ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.type === \"binary\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"binary_stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.position === \"past_end_of_stream\" && stream2.eof_action === \"error\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"past_end_of_stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar stream_char;\r\n\t\t\t\tif( stream2.position === \"end_of_stream\" ) {\r\n\t\t\t\t\tstream_char = \"end_of_file\";\r\n\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t} else if( stream2.position === \"past_end_of_stream\" ) {\r\n\t\t\t\t\tstream_char = \"end_of_file\";\r\n\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstream_char = stream2.stream.get( 1, stream2.position );\r\n\t\t\t\t\tif( stream_char === null ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.representation( \"character\", atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if(stream_char === \"end_of_stream\") {\r\n\t\t\t\t\t\tstream_char = \"end_of_file\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace( new Term( \"=\", [new Term(stream_char,[]), char] ) ),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// peek_code/1\r\n\t\t\"peek_code/1\": [\r\n\t\t\tnew Rule(new Term(\"peek_code\", [new Var(\"C\")]), new Term(\",\", [new Term(\"current_input\", [new Var(\"S\")]),new Term(\"peek_code\", [new Var(\"S\"),new Var(\"C\")])]))\r\n\t\t],\r\n\r\n\t\t// peek_code/2\r\n\t\t\"peek_code/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], code = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( code ) && !pl.type.is_integer( code ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", code, atom.indicator ) );\r\n\t\t\t} else if( pl.type.is_integer( code ) && !pl.type.is_in_character_code( code ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.representation( \"in_character_code\", atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( stream ) && !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.output ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.type === \"binary\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"binary_stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.position === \"past_end_of_stream\" && stream2.eof_action === \"error\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"past_end_of_stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar stream_code;\r\n\t\t\t\tif( stream2.position === \"end_of_stream\" ) {\r\n\t\t\t\t\tstream_code = -1;\r\n\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstream_code = stream2.stream.get( 1, stream2.position );\r\n\t\t\t\t\tif( stream_code === null ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.representation( \"character\", atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if(stream_code === \"end_of_stream\") {\r\n\t\t\t\t\t\tstream_code = -1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstream_code = codePointAt( stream_code, 0 );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace( new Term( \"=\", [new Num(stream_code, false), code] ) ),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// put_char/1\r\n\t\t\"put_char/1\": [\r\n\t\t\tnew Rule(new Term(\"put_char\", [new Var(\"C\")]), new Term(\",\", [new Term(\"current_output\", [new Var(\"S\")]),new Term(\"put_char\", [new Var(\"S\"),new Var(\"C\")])]))\r\n\t\t],\r\n\r\n\t\t// put_char/2\r\n\t\t\"put_char/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], char = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) || pl.type.is_variable( char ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_character( char ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"character\", char, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( stream ) && !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.input ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"output\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.type === \"binary\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"output\", \"binary_stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tif( stream2.stream.put( char.id, stream2.position ) ) {\r\n\t\t\t\t\tif(typeof stream2.position === \"number\")\r\n\t\t\t\t\t\tstream2.position++;\r\n\t\t\t\t\tstream2.char_count++;\r\n\t\t\t\t\tstream2.line_position++;\r\n\t\t\t\t\tif(char.id === \"\\n\") {\r\n\t\t\t\t\t\tstream2.line_count++;\r\n\t\t\t\t\t\tstream2.line_position = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.success( point );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// put_code/1\r\n\t\t\"put_code/1\": [\r\n\t\t\tnew Rule(new Term(\"put_code\", [new Var(\"C\")]), new Term(\",\", [new Term(\"current_output\", [new Var(\"S\")]),new Term(\"put_code\", [new Var(\"S\"),new Var(\"C\")])]))\r\n\t\t],\r\n\r\n\t\t// put_code/2\r\n\t\t\"put_code/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], code = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) || pl.type.is_variable( code ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_integer( code ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", code, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_character_code( code ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.representation( \"character_code\", atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( stream ) && !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.input ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"output\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.type === \"binary\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"output\", \"binary_stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tif( stream2.stream.put( fromCodePoint( code.value ), stream2.position ) ) {\r\n\t\t\t\t\tif(typeof stream2.position === \"number\")\r\n\t\t\t\t\t\tstream2.position++;\r\n\t\t\t\t\tstream2.char_count++;\r\n\t\t\t\t\tstream2.line_position++;\r\n\t\t\t\t\tif(code.value === 10) {\r\n\t\t\t\t\t\tstream2.line_count++;\r\n\t\t\t\t\t\tstream2.line_position = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthread.success( point );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// nl/0\r\n\t\t\"nl/0\": [\r\n\t\t\tnew Rule(new Term(\"nl\"), new Term(\",\", [new Term(\"current_output\", [new Var(\"S\")]),new Term(\"put_char\", [new Var(\"S\"),new Term(\"\\n\")])]))\r\n\t\t],\r\n\r\n\t\t// nl/1\r\n\t\t\"nl/1\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0];\r\n\t\t\tthread.prepend( [new State( \r\n\t\t\t\tpoint.goal.replace( new Term(\"put_char\", [stream, new Term(\"\\n\", [])]) ),\r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)] );\r\n\t\t},\r\n\r\n\r\n\r\n\t\t// BYTE INPUT/OUTPUT\r\n\r\n\t\t// get_byte/1\r\n\t\t\"get_byte/1\": [\r\n\t\t\tnew Rule(new Term(\"get_byte\", [new Var(\"B\")]), new Term(\",\", [new Term(\"current_input\", [new Var(\"S\")]),new Term(\"get_byte\", [new Var(\"S\"),new Var(\"B\")])]))\r\n\t\t],\r\n\r\n\t\t// get_byte/2\r\n\t\t\"get_byte/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], byte = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( byte ) && !pl.type.is_in_byte( byte ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"in_byte\", byte, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.output ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.type === \"text\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"text_stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.position === \"past_end_of_stream\" && stream2.eof_action === \"error\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"past_end_of_stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar stream_byte;\r\n\t\t\t\tif( stream2.position === \"end_of_stream\" ) {\r\n\t\t\t\t\tstream_byte = -1;\r\n\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstream_byte = stream2.stream.get_byte( stream2.position );\r\n\t\t\t\t\tif( stream_byte === null ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.representation( \"byte\", atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if(stream_byte === \"end_of_stream\") {\r\n\t\t\t\t\t\tstream_byte = -1;\r\n\t\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstream2.position++;\r\n\t\t\t\t\t\tstream2.char_count++;\r\n\t\t\t\t\t\tstream2.line_position++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace( new Term( \"=\", [new Num(stream_byte,false), byte] ) ),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)] );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// peek_byte/1\r\n\t\t\"peek_byte/1\": [\r\n\t\t\tnew Rule(new Term(\"peek_byte\", [new Var(\"B\")]), new Term(\",\", [new Term(\"current_input\", [new Var(\"S\")]),new Term(\"peek_byte\", [new Var(\"S\"),new Var(\"B\")])]))\r\n\t\t],\r\n\r\n\t\t// peek_byte/2\r\n\t\t\"peek_byte/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], byte = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( byte ) && !pl.type.is_in_byte( byte ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"in_byte\", byte, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.output ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.type === \"text\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"text_stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.position === \"past_end_of_stream\" && stream2.eof_action === \"error\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"past_end_of_stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar stream_byte;\r\n\t\t\t\tif( stream2.position === \"end_of_stream\" ) {\r\n\t\t\t\t\tstream_byte = -1;\r\n\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstream_byte = stream2.stream.get_byte( stream2.position );\r\n\t\t\t\t\tif( stream_byte === null ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.representation( \"byte\", atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if(stream_byte === \"end_of_stream\") {\r\n\t\t\t\t\t\tstream_byte = -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace( new Term( \"=\", [new Num(stream_byte,false), byte] ) ),\r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// put_byte/1\r\n\t\t\"put_byte/1\": [\r\n\t\t\tnew Rule(new Term(\"put_byte\", [new Var(\"B\")]), new Term(\",\", [new Term(\"current_output\", [new Var(\"S\")]),new Term(\"put_byte\", [new Var(\"S\"),new Var(\"B\")])]))\r\n\t\t],\r\n\r\n\t\t// put_byte/2\r\n\t\t\"put_byte/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], byte = atom.args[1];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) || pl.type.is_variable( byte ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_byte( byte ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"byte\", byte, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( stream ) && !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.input ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"output\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.type === \"text\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"output\", \"text_stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tif( stream2.stream.put_byte( byte.value, stream2.position ) ) {\r\n\t\t\t\t\tif(typeof stream2.position === \"number\")\r\n\t\t\t\t\t\tstream2.position++;\r\n\t\t\t\t\tstream2.char_count++;\r\n\t\t\t\t\tstream2.line_position++;\r\n\t\t\t\t\tthread.success( point );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\r\n\t\t// TERM INPUT/OUTPUT\r\n\r\n\t\t// read/1\r\n\t\t\"read/1\": [\r\n\t\t\tnew Rule(new Term(\"read\", [new Var(\"T\")]), new Term(\",\", [new Term(\"current_input\", [new Var(\"S\")]),new Term(\"read_term\", [new Var(\"S\"),new Var(\"T\"),new Term(\"[]\")])]))\r\n\t\t],\r\n\r\n\t\t// read/2\r\n\t\t\"read/2\": [\r\n\t\t\tnew Rule(new Term(\"read\", [new Var(\"S\"), new Var(\"T\")]), new Term(\"read_term\", [new Var(\"S\"),new Var(\"T\"),new Term(\"[]\")]))\r\n\t\t],\r\n\r\n\t\t// read_term/2\r\n\t\t\"read_term/2\": [\r\n\t\t\tnew Rule(new Term(\"read_term\", [new Var(\"T\"),new Var(\"O\")]), new Term(\",\", [new Term(\"current_input\", [new Var(\"S\")]),new Term(\"read_term\", [new Var(\"S\"),new Var(\"T\"),new Var(\"O\")])]))\r\n\t\t],\r\n\r\n\t\t// read_term/3\r\n\t\t\"read_term/3\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], term = atom.args[1], options = atom.args[2];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) || pl.type.is_variable( options ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_list( options ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", options, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.output ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.type === \"binary\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"binary_stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.position === \"past_end_of_stream\" && stream2.eof_action === \"error\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"input\", \"past_end_of_stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.position === \"past_end_of_stream\" && stream2.eof_action === \"eof_code\" ) {\r\n\t\t\t\texpr = {\r\n\t\t\t\t\tvalue: new Term(\"end_of_file\", []),\r\n\t\t\t\t\ttype: SUCCESS,\r\n\t\t\t\t\tlen: -1\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\t// Get options\r\n\t\t\t\tvar obj_options = {};\r\n\t\t\t\tvar pointer = options;\r\n\t\t\t\tvar property;\r\n\t\t\t\twhile( pl.type.is_term(pointer) && pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\tproperty = pointer.args[0];\r\n\t\t\t\t\tif( pl.type.is_variable( property ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( !pl.type.is_read_option( property ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.domain( \"read_option\", property, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tobj_options[property.id] = property.args[0];\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif( pointer.indicator !== \"[]/0\" ) {\r\n\t\t\t\t\tif( pl.type.is_variable( pointer ) )\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", options, atom.indicator ) );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar char, tokenizer, expr;\r\n\t\t\t\t\tvar text = \"\";\r\n\t\t\t\t\tvar tokens = [];\r\n\t\t\t\t\tvar last_token = null;\r\n\t\t\t\t\tvar lexical_error = false;\r\n\t\t\t\t\t// Get term\r\n\t\t\t\t\twhile( last_token === null || lexical_error || last_token.name !== \"atom\" || last_token.value !== \".\" || tokens.length > 0 && expr.type === ERROR ) {\r\n\t\t\t\t\t\tchar = stream2.stream.get( 1, stream2.position );\r\n\t\t\t\t\t\twhile(char !== null && char !== \".\" && char !== \"end_of_stream\" && char !== \"past_end_of_stream\") {\r\n\t\t\t\t\t\t\tstream2.position++;\r\n\t\t\t\t\t\t\ttext += char;\r\n\t\t\t\t\t\t\tchar = stream2.stream.get( 1, stream2.position );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif( char === null ) {\r\n\t\t\t\t\t\t\tthread.throw_error( pl.error.representation( \"character\", atom.indicator ) );\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else if( char === \"end_of_stream\" || char === \"past_end_of_stream\" ) {\r\n\t\t\t\t\t\t\tif(tokens === null || tokens.length === 0) {\r\n\t\t\t\t\t\t\t\tstream2.position = \"past_end_of_stream\";\r\n\t\t\t\t\t\t\t\texpr = {\r\n\t\t\t\t\t\t\t\t\tvalue: new Term(\"end_of_file\", []),\r\n\t\t\t\t\t\t\t\t\ttype: SUCCESS,\r\n\t\t\t\t\t\t\t\t\tlen: -1\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t} else if(expr) {\r\n\t\t\t\t\t\t\t\tthread.throw_error( pl.error.syntax( last_token, \"unexpected end of file\", false ) );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthread.throw_error( pl.error.syntax( last_token, \"token not found\", true ) );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if(char === \".\") {\r\n\t\t\t\t\t\t\tstream2.position++;\r\n\t\t\t\t\t\t\ttext += char;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttokenizer = new Tokenizer( thread );\r\n\t\t\t\t\t\ttokenizer.new_text( text );\r\n\t\t\t\t\t\ttokens = tokenizer.get_tokens();\r\n\t\t\t\t\t\tnum_token = tokens !== null && tokens.length > 1 ? tokens[tokens.length-2] : null;\r\n\t\t\t\t\t\tlast_token = tokens !== null && tokens.length > 0 ? tokens[tokens.length-1] : null;\r\n\t\t\t\t\t\tif(tokens === null)\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tlexical_error = false;\r\n\t\t\t\t\t\tfor(var i = 0; i < tokens.length && !lexical_error; i++)\r\n\t\t\t\t\t\t\tlexical_error = tokens[i].name === \"lexical\";\r\n\t\t\t\t\t\tif(lexical_error)\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\texpr = parseExpr(thread, tokens, 0, thread.__get_max_priority(), false);\r\n\t\t\t\t\t\tif(num_token && num_token.name === \"number\" && !num_token.float && !num_token.blank && last_token.value === \".\") {\r\n\t\t\t\t\t\t\tvar next_char = stream2.stream.get(1, stream2.position);\r\n\t\t\t\t\t\t\tif(next_char >= '0' && next_char <= '9') {\r\n\t\t\t\t\t\t\t\tstream2.position++;\r\n\t\t\t\t\t\t\t\ttext += next_char;\r\n\t\t\t\t\t\t\t\tlast_token = null;\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(last_token) {\r\n\t\t\t\t\t\tif(last_token.line_position === last_token.len)\r\n\t\t\t\t\t\t\tstream2.line_position += last_token.line_position;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tstream2.line_position = last_token.line_position;\r\n\t\t\t\t\t\tstream2.line_count += last_token.line_count;\r\n\t\t\t\t\t\tstream2.char_count += last_token.len;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Succeed analyzing term\r\n\t\t\t\t\tif( expr.type === SUCCESS && (expr.len === -1 || expr.len === tokens.length-1 && last_token.value === \".\" )) {\r\n\t\t\t\t\t\tthread.session.renamed_variables = {};\r\n\t\t\t\t\t\texpr = expr.value.rename( thread );\r\n\t\t\t\t\t\tvar eq = new Term( \"=\", [term, expr] );\r\n\t\t\t\t\t\t// Variables\r\n\t\t\t\t\t\tif( obj_options.variables ) {\r\n\t\t\t\t\t\t\tvar vars = arrayToList( map( nub( expr.variables() ), function(v) { return new Var(v); } ) );\r\n\t\t\t\t\t\t\teq = new Term( \",\", [eq, new Term( \"=\", [obj_options.variables, vars] )] )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Variable names\r\n\t\t\t\t\t\tif( obj_options.variable_names ) {\r\n\t\t\t\t\t\t\tvar vars = nub(expr.variables());\r\n\t\t\t\t\t\t\tvar plvars = [];\r\n\t\t\t\t\t\t\tfor(var i = 0; i < vars.length; i++) {\r\n\t\t\t\t\t\t\t\tvar v = vars[i];\r\n\t\t\t\t\t\t\t\tfor( var prop in thread.session.renamed_variables ) {\r\n\t\t\t\t\t\t\t\t\tif( thread.session.renamed_variables.hasOwnProperty( prop ) ) {\r\n\t\t\t\t\t\t\t\t\t\tif( thread.session.renamed_variables[ prop ] === v ) {\r\n\t\t\t\t\t\t\t\t\t\t\tplvars.push(new Term( \"=\", [new Term( prop, []), new Var(v)] ));\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplvars = arrayToList(plvars);\r\n\t\t\t\t\t\t\teq = new Term( \",\", [eq, new Term( \"=\", [obj_options.variable_names, plvars] )] );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Singletons\r\n\t\t\t\t\t\tif( obj_options.singletons ) {\r\n\t\t\t\t\t\t\tvar vars = nub(new Rule(expr, null).singleton_variables(true));\r\n\t\t\t\t\t\t\tvar plvars = [];\r\n\t\t\t\t\t\t\tfor(var i = 0; i < vars.length; i++) {\r\n\t\t\t\t\t\t\t\tvar v = vars[i];\r\n\t\t\t\t\t\t\t\tfor( var prop in thread.session.renamed_variables ) {\r\n\t\t\t\t\t\t\t\t\tif( thread.session.renamed_variables.hasOwnProperty( prop ) ) {\r\n\t\t\t\t\t\t\t\t\t\tif( thread.session.renamed_variables[ prop ] === v ) {\r\n\t\t\t\t\t\t\t\t\t\t\tplvars.push(new Term( \"=\", [new Term( prop, []), new Var(v)] ));\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplvars = arrayToList(plvars);\r\n\t\t\t\t\t\t\teq = new Term( \",\", [eq, new Term( \"=\", [obj_options.singletons, plvars] )] );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthread.prepend( [new State( point.goal.replace( eq ), point.substitution, point )] );\r\n\t\t\t\t\t// Failed analyzing term\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif( expr.type === SUCCESS )\r\n\t\t\t\t\t\t\tthread.throw_error( pl.error.syntax( tokens[expr.len], \"unexpected token\", false ) );\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthread.throw_error( expr.value );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// write/1\r\n\t\t\"write/1\": [\r\n\t\t\tnew Rule(new Term(\"write\", [new Var(\"T\")]), new Term(\",\", [new Term(\"current_output\", [new Var(\"S\")]),new Term(\"write\", [new Var(\"S\"),new Var(\"T\")])]))\r\n\t\t],\r\n\t\t\r\n\t\t// write/2\r\n\t\t\"write/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], term = atom.args[1];\r\n\t\t\tthread.prepend( [new State( \r\n\t\t\t\tpoint.goal.replace( new Term(\"write_term\", [stream, term,\r\n\t\t\t\t\tnew Term(\".\", [new Term(\"quoted\", [new Term(\"false\", [])]),\r\n\t\t\t\t\t\tnew Term(\".\", [new Term(\"ignore_ops\", [new Term(\"false\")]),\r\n\t\t\t\t\t\t\tnew Term(\".\", [new Term(\"numbervars\", [new Term(\"true\")]), new Term(\"[]\",[])])])])]) ),\r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)] );\r\n\t\t},\r\n\t\t\r\n\t\t// writeq/1\r\n\t\t\"writeq/1\": [\r\n\t\t\tnew Rule(new Term(\"writeq\", [new Var(\"T\")]), new Term(\",\", [new Term(\"current_output\", [new Var(\"S\")]),new Term(\"writeq\", [new Var(\"S\"),new Var(\"T\")])]))\r\n\t\t],\r\n\t\t\r\n\t\t// writeq/2\r\n\t\t\"writeq/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], term = atom.args[1];\r\n\t\t\tthread.prepend( [new State( \r\n\t\t\t\tpoint.goal.replace( new Term(\"write_term\", [stream, term,\r\n\t\t\t\t\tnew Term(\".\", [new Term(\"quoted\", [new Term(\"true\", [])]),\r\n\t\t\t\t\t\tnew Term(\".\", [new Term(\"ignore_ops\", [new Term(\"false\")]),\r\n\t\t\t\t\t\t\tnew Term(\".\", [new Term(\"numbervars\", [new Term(\"true\")]), new Term(\"[]\",[])])])])]) ),\r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)] );\r\n\t\t},\r\n\t\t\r\n\t\t// write_canonical/1\r\n\t\t\"write_canonical/1\": [\r\n\t\t\tnew Rule(new Term(\"write_canonical\", [new Var(\"T\")]), new Term(\",\", [new Term(\"current_output\", [new Var(\"S\")]),new Term(\"write_canonical\", [new Var(\"S\"),new Var(\"T\")])]))\r\n\t\t],\r\n\t\t\r\n\t\t// write_canonical/2\r\n\t\t\"write_canonical/2\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], term = atom.args[1];\r\n\t\t\tthread.prepend( [new State( \r\n\t\t\t\tpoint.goal.replace( new Term(\"write_term\", [stream, term,\r\n\t\t\t\t\tnew Term(\".\", [new Term(\"quoted\", [new Term(\"true\", [])]),\r\n\t\t\t\t\t\tnew Term(\".\", [new Term(\"ignore_ops\", [new Term(\"true\")]),\r\n\t\t\t\t\t\t\tnew Term(\".\", [new Term(\"numbervars\", [new Term(\"false\")]), new Term(\"[]\",[])])])])]) ),\r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)] );\r\n\t\t},\r\n\r\n\t\t// write_term/2\r\n\t\t\"write_term/2\": [\r\n\t\t\tnew Rule(new Term(\"write_term\", [new Var(\"T\"),new Var(\"O\")]), new Term(\",\", [new Term(\"current_output\", [new Var(\"S\")]),new Term(\"write_term\", [new Var(\"S\"),new Var(\"T\"),new Var(\"O\")])]))\r\n\t\t],\r\n\t\t\r\n\t\t// write_term/3\r\n\t\t\"write_term/3\": function( thread, point, atom ) {\r\n\t\t\tvar stream = atom.args[0], term = atom.args[1], options = atom.args[2];\r\n\t\t\tvar stream2 = pl.type.is_stream( stream ) ? stream : thread.get_stream_by_alias( stream.id );\r\n\t\t\tif( pl.type.is_variable( stream ) || pl.type.is_variable( options ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_list( options ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"list\", options, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream ) && !pl.type.is_atom( stream ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"stream_or_alias\", stream, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_stream( stream2 ) || stream2.stream === null ) {\r\n\t\t\t\tthread.throw_error( pl.error.existence( \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.input ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"output\", \"stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.type === \"binary\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"output\", \"binary_stream\", stream, atom.indicator ) );\r\n\t\t\t} else if( stream2.position === \"past_end_of_stream\" && stream2.eof_action === \"error\" ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"output\", \"past_end_of_stream\", stream, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\t// Get options\r\n\t\t\t\tvar obj_options = {};\r\n\t\t\t\tvar pointer = options;\r\n\t\t\t\tvar property;\r\n\t\t\t\twhile( pl.type.is_term(pointer) && pointer.indicator === \"./2\" ) {\r\n\t\t\t\t\tproperty = pointer.args[0];\r\n\t\t\t\t\tif( pl.type.is_variable( property ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if( !pl.type.is_write_option( property ) ) {\r\n\t\t\t\t\t\tthread.throw_error( pl.error.domain( \"write_option\", property, atom.indicator ) );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(property.indicator === \"variable_names/1\")\r\n\t\t\t\t\t\tobj_options[property.id] = property.args[0];\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tobj_options[property.id] = property.args[0].id === \"true\";\r\n\t\t\t\t\tpointer = pointer.args[1];\r\n\t\t\t\t}\r\n\t\t\t\tif( pointer.indicator !== \"[]/0\" ) {\r\n\t\t\t\t\tif( pl.type.is_variable( pointer ) )\r\n\t\t\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthread.throw_error( pl.error.type( \"list\", options, atom.indicator ) );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj_options.session = thread.session;\r\n\t\t\t\t\tvar text = term.toString( obj_options );\r\n\t\t\t\t\tstream2.stream.put( text, stream2.position );\r\n\t\t\t\t\tif( typeof stream2.position === \"number\" )\r\n\t\t\t\t\t\tstream2.position += text.length;\r\n\t\t\t\t\tvar nl = (text.match(/\\n/g) || []).length;\r\n\t\t\t\t\tstream2.line_count += nl;\r\n\t\t\t\t\tif(nl > 0)\r\n\t\t\t\t\t\tstream2.line_position = text.length - text.lastIndexOf(\"\\n\") - 1;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tstream2.line_position += text.length;\r\n\t\t\t\t\tstream2.char_count += text.length;\r\n\t\t\t\t\tthread.success( point );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// IMPLEMENTATION DEFINED HOOKS\r\n\t\t\r\n\t\t// halt/0\r\n\t\t\"halt/0\": function( thread, point, _ ) {\r\n\t\t\tif( thread.get_flag(\"nodejs\").indicator === \"true/0\" )\r\n\t\t\t\tprocess.exit();\r\n\t\t\tthread.points = [];\r\n\t\t},\r\n\t\t\r\n\t\t// halt/1\r\n\t\t\"halt/1\": function( thread, point, atom ) {\r\n\t\t\tvar int = atom.args[0];\r\n\t\t\tif( pl.type.is_variable( int ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_integer( int ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", int, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tif( thread.get_flag(\"nodejs\").indicator === \"true/0\" )\r\n\t\t\t\t\tprocess.exit(int.value);\r\n\t\t\t\tthread.points = [];\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// current_prolog_flag/2\r\n\t\t\"current_prolog_flag/2\": function( thread, point, atom ) {\r\n\t\t\tvar flag = atom.args[0], value = atom.args[1];\r\n\t\t\tif( !pl.type.is_variable( flag ) && !pl.type.is_atom( flag ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", flag, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_variable( flag ) && !pl.type.is_flag( flag ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"prolog_flag\", flag, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar states = [];\r\n\t\t\t\tfor( var name in pl.flag ) {\r\n\t\t\t\t\tif(!pl.flag.hasOwnProperty(name)) continue;\r\n\t\t\t\t\tvar goal = new Term( \",\", [new Term( \"=\", [new Term( name ), flag] ), new Term( \"=\", [thread.get_flag(name), value] )] );\r\n\t\t\t\t\tstates.push( new State( point.goal.replace( goal ), point.substitution, point ) );\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend( states );\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// set_prolog_flag/2\r\n\t\t\"set_prolog_flag/2\": function( thread, point, atom ) {\r\n\t\t\tvar flag = atom.args[0], value = atom.args[1];\r\n\t\t\tif( pl.type.is_variable( flag ) || pl.type.is_variable( value ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_atom( flag ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", flag, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_flag( flag ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"prolog_flag\", flag, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_modifiable_flag( flag ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.permission( \"modify\", \"flag\", flag, atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_value_flag( flag, value ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.domain( \"flag_value\", new Term( \"+\", [flag, value] ), atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tthread.session.flag[flag.id] = value;\r\n\t\t\t\tthread.success( point );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\r\n\t\t// LOAD PROLOG SOURCE FILES\r\n\r\n\t\t// consult/1\r\n\t\t\"consult/1\": function(thread, point, atom) {\r\n\t\t\tvar src = atom.args[0];\r\n\t\t\tvar context_module = \"user\";\r\n\t\t\tif(src.indicator === \":/2\") {\r\n\t\t\t\tcontext_module = src.args[0].id;\r\n\t\t\t\tsrc = src.args[1];\r\n\t\t\t}\r\n\t\t\tif(pl.type.is_variable(src)) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if(!pl.type.is_atom(src)) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"atom\", src, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tif(thread.consult(src.id, {\r\n\t\t\t\t\tcontext_module: context_module,\r\n\t\t\t\t\ttext: false,\r\n\t\t\t\t\thtml: false,\r\n\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\tthread.success(point);\r\n\t\t\t\t\t\tthread.again();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(err) {\r\n\t\t\t\t\t\tthread.throw_error(err);\r\n\t\t\t\t\t\tthread.again();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\r\n\t\t// TIME AND DATES\r\n\r\n\t\t// get_time/1\r\n\t\t\"get_time/1\": function( thread, point, atom ) {\r\n\t\t\tvar time = atom.args[0];\r\n\t\t\tif(!pl.type.is_variable(time) && !pl.type.is_number(time)) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"number\", time, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar current = new Num(Date.now(), true);\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace( new Term( \"=\", [time, current] ) ), \r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// time_property\r\n\t\t\"time_property/2\": function(thread, point, atom) {\r\n\t\t\tvar time = atom.args[0], property = atom.args[1];\r\n\t\t\tif(pl.type.is_variable(time)) {\r\n\t\t\t\tthread.throw_error(pl.error.instantiation(atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(time) && !pl.type.is_number(time)) {\r\n\t\t\t\tthread.throw_error(pl.error.type(\"number\", time, atom.indicator));\r\n\t\t\t} else if(!pl.type.is_variable(property) && !pl.type.is_time_property(property)) {\r\n\t\t\t\tthread.throw_error(pl.error.domain(\"time_property\", property, atom.indicator));\r\n\t\t\t} else {\r\n\t\t\t\tvar props;\r\n\t\t\t\tif(pl.type.is_variable(property)) {\r\n\t\t\t\t\tprops = [\"year\", \"month\", \"day\", \"hours\", \"minutes\", \"seconds\", \"milliseconds\", \"weekday\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprops = [property.id];\r\n\t\t\t\t}\r\n\t\t\t\tvar date = new Date(time.value);\r\n\t\t\t\tvar value;\r\n\t\t\t\tvar states = [];\r\n\t\t\t\tfor(var i = 0; i < props.length; i++) {\r\n\t\t\t\t\tswitch(props[i]) {\r\n\t\t\t\t\t\tcase \"year\":\r\n\t\t\t\t\t\t\tvalue = new Term(\"year\", [new Num(date.getFullYear(), false)]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"month\":\r\n\t\t\t\t\t\t\tvalue = new Term(\"month\", [new Num(date.getMonth(), false)]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"day\":\r\n\t\t\t\t\t\t\tvalue = new Term(\"day\", [new Num(date.getDate(), false)]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"hours\":\r\n\t\t\t\t\t\t\tvalue = new Term(\"hours\", [new Num(date.getHours(), false)]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"minutes\":\r\n\t\t\t\t\t\t\tvalue = new Term(\"minutes\", [new Num(date.getMinutes(), false)]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"seconds\":\r\n\t\t\t\t\t\t\tvalue = new Term(\"seconds\", [new Num(date.getSeconds(), false)]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"milliseconds\":\r\n\t\t\t\t\t\t\tvalue = new Term(\"milliseconds\", [new Num(date.getMilliseconds(), false)]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"weekday\":\r\n\t\t\t\t\t\t\tvalue = new Term(\"weekday\", [new Num(date.getDay(), false)]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstates.push(new State(\r\n\t\t\t\t\t\tpoint.goal.replace( new Term( \"=\", [property, value] ) ), \r\n\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\tpoint\r\n\t\t\t\t\t));\r\n\t\t\t\t}\r\n\t\t\t\tthread.prepend(states);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// time_year/2\r\n\t\t\"time_year/2\": function( thread, point, atom ) {\r\n\t\t\tvar time = atom.args[0], year = atom.args[1];\r\n\t\t\tif(pl.type.is_variable(time)) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if(!pl.type.is_number(time)) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"number\", time, atom.indicator ) );\r\n\t\t\t} else if(!pl.type.is_variable(year) && !pl.type.is_integer(year)) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", year, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar value = new Num(new Date(time.value).getFullYear(), false);\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace( new Term( \"=\", [year, value] ) ), \r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// time_month/2\r\n\t\t\"time_month/2\": function( thread, point, atom ) {\r\n\t\t\tvar time = atom.args[0], month = atom.args[1];\r\n\t\t\tif(pl.type.is_variable(time)) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if(!pl.type.is_number(time)) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"number\", time, atom.indicator ) );\r\n\t\t\t} else if(!pl.type.is_variable(month) && !pl.type.is_integer(month)) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"integer\", month, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar value = new Num(new Date(time.value).getMonth(), false);\r\n\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\tpoint.goal.replace( new Term( \"=\", [month, value] ) ), \r\n\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\tpoint\r\n\t\t\t\t)] );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\r\n\t\t// GRAMMARS\r\n\r\n\t\t// phrase/3\r\n\t\t\"phrase/3\": function( thread, point, atom ) {\r\n\t\t\tvar grbody = atom.args[0], s0 = atom.args[1], s = atom.args[2];\r\n\t\t\tvar context_module = \"user\";\r\n\t\t\tif(grbody.indicator === \":/2\") {\r\n\t\t\t\tcontext_module = grbody.args[0].id;\r\n\t\t\t\tgrbody = grbody.args[1];\r\n\t\t\t}\r\n\t\t\tif( pl.type.is_variable( grbody ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.instantiation( atom.indicator ) );\r\n\t\t\t} else if( !pl.type.is_callable( grbody ) ) {\r\n\t\t\t\tthread.throw_error( pl.error.type( \"callable\", grbody, atom.indicator ) );\r\n\t\t\t} else {\r\n\t\t\t\tvar goal = body_to_dcg( grbody.clone(), s0, thread );\r\n\t\t\t\tgoal.value = new Term(\":\", [new Term(context_module), new Term(\"call\", [goal.value])]);\r\n\t\t\t\tif(goal !== null) {\r\n\t\t\t\t\tthread.prepend( [new State(\r\n\t\t\t\t\t\tpoint.goal.replace( new Term( \",\", [goal.value, new Term(\"=\", [goal.variable, s])] ) ), \r\n\t\t\t\t\t\tpoint.substitution,\r\n\t\t\t\t\t\tpoint\r\n\t\t\t\t\t)] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// phrase/2\r\n\t\t\"phrase/2\": function( thread, point, atom ) {\r\n\t\t\tvar grbody = atom.args[0], s0 = atom.args[1];\r\n\t\t\tthread.prepend( [new State(\r\n\t\t\t\tpoint.goal.replace( new Term( \"phrase\", [grbody, s0, new Term(\"[]\", [])] ) ), \r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)] );\r\n\t\t},\r\n\r\n\r\n\r\n\t\t// TAU PROLOG INFORMATION\r\n\r\n\t\t// version/0\r\n\t\t\"version/0\": function( thread, point, atom ) {\r\n\t\t\tvar msg = \"Welcome to Tau Prolog version \" + version.major + \".\" + version.minor + \".\" + version.patch + \"\\n\";\r\n\t\t\tmsg += \"Tau Prolog comes with ABSOLUTELY NO WARRANTY. This is free software.\\n\";\r\n\t\t\tmsg += \"Please run ?- license. for legal details.\\n\";\r\n\t\t\tmsg += \"For online help and background, visit http:/tau-prolog.org\";\r\n\t\t\tthread.prepend( [new State(\r\n\t\t\t\tpoint.goal.replace( new Term( \"write\", [new Term( msg, [] )] ) ), \r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)] );\r\n\t\t},\r\n\r\n\t\t// license/0\r\n\t\t\"license/0\": function( thread, point, atom ) {\r\n\t\t\tvar msg = \"Tau Prolog. A Prolog interpreter in JavaScript.\\n\";\r\n\t\t\tmsg += \"Copyright (C) 2017 - 2022 Jos Antonio Riaza Valverde\\n\\n\";\r\n\t\t\tmsg += \"Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\\n\";\r\n\t\t\tmsg += \"1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\\n\";\r\n\t\t\tmsg += \"2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\\n\";\r\n\t\t\tmsg += \"3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\\n\\n\";\r\n\t\t\tmsg += \"THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \\\"AS IS\\\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\\n\\n\";\r\n\t\t\tmsg += \"You should have received a copy of the BSD 3-Clause License along with this program. If not, see https://opensource.org/licenses/BSD-3-Clause\";\r\n\t\t\tthread.prepend( [new State(\r\n\t\t\t\tpoint.goal.replace( new Term( \"write\", [new Term( msg, [] )] ) ), \r\n\t\t\t\tpoint.substitution,\r\n\t\t\t\tpoint\r\n\t\t\t)] );\r\n\t\t}\r\n\r\n\t}, \"all\", {\r\n\t\tmeta_predicates: {\r\n\t\t\t// '$findall'(?, 0, -, ?)\r\n\t\t\t\"$findall/4\": new Term(\"$findall\", [new Term(\"?\"), new Num(0, false), new Term(\"-\"), new Term(\"?\")]),\r\n\t\t\t// '$bagof'(?, ^, -)\r\n\t\t\t\"$bagof/3\": new Term(\"$bagof\", [new Term(\"?\"), new Term(\"^\"), new Term(\"-\")]),\r\n\t\t\t// '$setof'(?, ^, -)\r\n\t\t\t\"$setof/3\": new Term(\"$setof\", [new Term(\"?\"), new Term(\"^\"), new Term(\"-\")]),\r\n\t\t\t// '$if'(0, 0, 0)\r\n\t\t\t\"$if/3\": new Term(\"$if\", [new Num(0, false), new Num(0, false), new Num(0, false)]),\r\n\t\t\t// (0;0)\r\n\t\t\t\";/2\": new Term(\";\", [new Num(0, false), new Num(0, false)]),\r\n\t\t\t// (0->0)\r\n\t\t\t\"->/2\": new Term(\"->\", [new Num(0, false), new Num(0, false)]),\r\n\t\t\t// (0->0)\r\n\t\t\t\"*->/2\": new Term(\"*->\", [new Num(0, false), new Num(0, false)]),\r\n\t\t\t// (\\+0)\r\n\t\t\t\"\\\\+/1\": new Term(\"\\\\+\", [new Num(0, false)]),\r\n\t\t\t// abolish(:)\r\n\t\t\t\"abolish/1\": new Term(\"abolish\", [new Term(\":\")]),\r\n\t\t\t// asserta(:)\r\n\t\t\t\"asserta/1\": new Term(\"asserta\", [new Term(\":\")]),\r\n\t\t\t// assertz(:)\r\n\t\t\t\"assertz/1\": new Term(\"assertz\", [new Term(\":\")]),\r\n\t\t\t// bagof(?, ^, -)\r\n\t\t\t\"bagof/3\": new Term(\"bagof\", [new Term(\"?\"), new Term(\"^\"), new Term(\"-\")]),\r\n\t\t\t// call(0)\r\n\t\t\t\"call/1\": new Term(\"call\", [new Num(0, false)]),\r\n\t\t\t// call(1, ?)\r\n\t\t\t\"call/2\": new Term(\"call\", [new Num(1, false), new Term(\"?\")]),\r\n\t\t\t// call(2, ?, ?)\r\n\t\t\t\"call/3\": new Term(\"call\", [new Num(2, false), new Term(\"?\"), new Term(\"?\")]),\r\n\t\t\t// call(3, ?, ?, ?)\r\n\t\t\t\"call/4\": new Term(\"call\", [new Num(3, false), new Term(\"?\"), new Term(\"?\"), new Term(\"?\")]),\r\n\t\t\t// call(4, ?, ?, ?, ?)\r\n\t\t\t\"call/5\": new Term(\"call\", [new Num(4, false), new Term(\"?\"), new Term(\"?\"), new Term(\"?\"), new Term(\"?\")]),\r\n\t\t\t// call(5, ?, ?, ?, ?, ?)\r\n\t\t\t\"call/6\": new Term(\"call\", [new Num(5, false), new Term(\"?\"), new Term(\"?\"), new Term(\"?\"), new Term(\"?\"), new Term(\"?\")]),\r\n\t\t\t// call(6, ?, ?, ?, ?, ?, ?)\r\n\t\t\t\"call/7\": new Term(\"call\", [new Num(6, false), new Term(\"?\"), new Term(\"?\"), new Term(\"?\"), new Term(\"?\"), new Term(\"?\"), new Term(\"?\")]),\r\n\t\t\t// call(7, ?, ?, ?, ?, ?, ?, ?)\r\n\t\t\t\"call/8\": new Term(\"call\", [new Num(6, false), new Term(\"?\"), new Term(\"?\"), new Term(\"?\"), new Term(\"?\"), new Term(\"?\"), new Term(\"?\"), new Term(\"?\")]),\r\n\t\t\t// call_cleanup(0, 0)\r\n\t\t\t\"call_cleanup/2\": new Term(\"call_cleanup\", [new Num(0, false), new Num(0, false)]),\r\n\t\t\t// catch(0, ?, 0)\r\n\t\t\t\"catch/3\": new Term(\"catch\", [new Num(0, false), new Term(\"?\"), new Num(0, false)]),\r\n\t\t\t// consult(:)\r\n\t\t\t\"consult/1\": new Term(\"consult\", [new Term(\":\")]),\r\n\t\t\t// clause(:, ?)\r\n\t\t\t\"clause/2\": new Term(\"clause\", [new Term(\":\"), new Term(\"?\")]),\r\n\t\t\t// current_predicate(?, :)\r\n\t\t\t\"current_predicate/2\": new Term(\"current_predicate\", [new Term(\"?\"), new Term(\":\")]),\r\n\t\t\t// findall(?, 0, -)\r\n\t\t\t\"findall/3\": new Term(\"findall\", [new Term(\"?\"), new Num(0, false), new Term(\"-\")]),\r\n\t\t\t// findall(?, 0, -, ?)\r\n\t\t\t\"findall/4\": new Term(\"findall\", [new Term(\"?\"), new Num(0, false), new Term(\"-\"), new Term(\"?\")]),\r\n\t\t\t// forall(0, 0)\r\n\t\t\t\"forall/2\": new Term(\"forall\", [new Num(0, false), new Num(0, false)]),\r\n\t\t\t// listing(:)\r\n\t\t\t\"listing/1\": new Term(\"listing\", [new Term(\":\")]),\r\n\t\t\t// once(0)\r\n\t\t\t\"once/1\": new Term(\"once\", [new Num(0, false)]),\r\n\t\t\t// phrase(:, ?)\r\n\t\t\t\"phrase/2\": new Term(\"phrase\", [new Term(\":\"),new Term(\"?\")]),\r\n\t\t\t// phrase(:, ?, ?)\r\n\t\t\t\"phrase/3\": new Term(\"phrase\", [new Term(\":\"),new Term(\"?\"), new Term(\"?\")]),\r\n\t\t\t// retract(:)\r\n\t\t\t\"retract/1\": new Term(\"retract\", [new Term(\":\")]),\r\n\t\t\t// retractall(:)\r\n\t\t\t\"retractall/1\": new Term(\"retractall\", [new Term(\":\")]),\r\n\t\t\t// setup_call_cleanup(0, 0, 0)\r\n\t\t\t\"setup_call_cleanup/3\": new Term(\"setup_call_cleanup\", [new Num(0, false), new Num(0, false), new Num(0, false)]),\r\n\t\t\t// setof(?, ^, -)\r\n\t\t\t\"setof/3\": new Term(\"setof\", [new Term(\"?\"), new Term(\"^\"), new Term(\"-\")])\r\n\t\t}\r\n\t});\r\n\r\n\tif( typeof module !== 'undefined' ) {\r\n\t\tmodule.exports = pl;\r\n\t} else {\r\n\t\twindow.pl = pl;\r\n\t}\r\n\t\r\n})();\r\n"],
  "mappings": "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,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UACtc,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UACtc,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,MAAM,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,MAAM,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UACxc,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,SAAS,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,SAAS,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UACxe,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,UAAU,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UACrN,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,UAAU,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UACvN,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,WAAW,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,WAAW,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;AAAA,UAC7N,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,SAAS,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,WAAW,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;AAAA,UAC3N,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,SAAS,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,WAAW,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;AAAA,UAC3N,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,UAAU,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UACvN,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UAClT,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UAC/V,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UAC5Y,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UACzb,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UACte,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,UACnhB,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,GAAE,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QACjkB;AAAA;AAAA;AAAA,QAOA,wBAAwB,SAAS,QAAQ,OAAO,MAAM;AACrD,cAAI,QAAQ,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AAC7C,cAAG,CAAC,GAAG,KAAK,YAAY,KAAK,GAAG;AAC/B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,OAAO;AACN,mBAAO,kBAAkB,MAAM,IAAI,KAAK;AACxC,mBAAO,QAAQ,KAAK;AAAA,UACrB;AAAA,QACD;AAAA;AAAA,QAGA,yBAAyB,SAAS,QAAQ,OAAO,MAAM;AACtD,cAAI,QAAQ,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AACjE,cAAG,CAAC,GAAG,KAAK,YAAY,KAAK,GAAG;AAC/B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,OAAO;AACN,gBAAI,SAAS,OAAO,mBAAmB,MAAM,IAAI,IAAI;AACrD,mBAAO,QAAQ,CAAC,IAAI;AAAA,cACnB,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK,CAAC,MAAM,MAAM,CAAC,CAAC;AAAA,cAChD,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAC;AAAA,UACH;AAAA,QACD;AAAA;AAAA,QAGA,wBAAwB,SAAS,QAAQ,OAAO,MAAM;AACrD,cAAI,UAAU,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AACvE,cAAI,KAAK,CAAC;AACV,cAAI,UAAU;AACd,iBAAM,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,OAAO;AAC9D,iBAAK,GAAG,OAAO,QAAQ,KAAK,CAAC,EAAE,UAAU,CAAC;AAC1C,sBAAU,QAAQ,KAAK,CAAC;AAAA,UACzB;AACA,cAAI,KAAK,QAAQ,UAAU;AAC3B,cAAI,KAAK,YAAY,IAAI,WAAW,IAAI,EAAE,GAAG,SAAS,GAAG;AACxD,mBAAO,IAAI,IAAI,CAAC;AAAA,UACjB,CAAC,CAAC;AACF,iBAAO,QAAQ;AAAA,YACd,IAAI;AAAA,cACH,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK;AAAA,gBAChC,IAAI,KAAK,KAAK,CAAC,UAAU,OAAO,CAAC;AAAA,gBACjC,IAAI,KAAK,KAAK,CAAC,MAAM,EAAE,CAAC;AAAA,cACzB,CAAC,CAAC;AAAA,cACF,MAAM;AAAA,cACN;AAAA,YACD;AAAA,UACD,CAAC;AAAA,QACF;AAAA;AAAA,QAGA,aAAa;AAAA,UACZ,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,KAAK,WAAW,CAAC,IAAI,GAAG,KAAK,IAAI,GAAG,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,IAAI,GAAG,GAAE,IAAI,GAAG,KAAK,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;AAAA,UAC7I,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,KAAK,WAAW,CAAC,IAAI,GAAG,KAAK,IAAI,GAAG,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,IAAI,GAAG,GAAE,IAAI,GAAG,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,KAAK,WAAW,CAAC,IAAI,GAAG,KAAK,IAAI,GAAG,GAAE,IAAI,GAAG,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC;AAAA,QACpN;AAAA;AAAA,QAGA,sBAAsB;AAAA,UACrB,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,KAAK,oBAAoB,CAAC,IAAI,GAAG,KAAK,KAAK,MAAM,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI;AAAA,UAC9G,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,KAAK,oBAAoB,CAAC,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,IAAI,KAAK,GAAE,IAAI,GAAG,KAAK,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,IAAI,KAAK,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,kBAAkB,CAAC,IAAI,GAAG,KAAK,IAAI,KAAK,GAAE,IAAI,GAAG,KAAK,IAAI,MAAM,GAAE,IAAI,GAAG,KAAK,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,oBAAoB,CAAC,IAAI,GAAG,KAAK,IAAI,KAAK,GAAE,IAAI,GAAG,KAAK,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QACja;AAAA;AAAA,QAGA,cAAc;AAAA,UACb,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,KAAK,YAAY,CAAC,IAAI,GAAG,KAAK,IAAI,WAAW,GAAE,IAAI,GAAG,KAAK,IAAI,OAAO,GAAE,IAAI,GAAG,KAAK,IAAI,WAAW,GAAE,IAAI,GAAG,KAAK,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,aAAa,CAAC,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,IAAI,WAAW,GAAE,IAAI,GAAG,KAAK,IAAI,OAAO,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,IAAI,WAAW,GAAE,IAAI,GAAG,KAAK,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,QAAQ,CAAC,IAAI,GAAG,KAAK,IAAI,OAAO,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,aAAa,CAAC,IAAI,GAAG,KAAK,IAAI,WAAW,GAAE,IAAI,GAAG,KAAK,IAAI,WAAW,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,sBAAsB,CAAC,IAAI,GAAG,KAAK,IAAI,KAAK,GAAE,IAAI,GAAG,KAAK,IAAI,WAAW,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,uBAAuB,CAAC,IAAI,GAAG,KAAK,IAAI,KAAK,GAAE,IAAI,GAAG,KAAK,IAAI,WAAW,GAAE,IAAI,GAAG,KAAK,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC51B;AAAA;AAAA,QAGA,YAAY;AAAA,UACX,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,KAAK,UAAU,CAAC,IAAI,GAAG,KAAK,IAAI,UAAU,GAAE,IAAI,GAAG,KAAK,IAAI,OAAO,GAAE,IAAI,GAAG,KAAK,IAAI,QAAQ,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,sBAAsB,CAAC,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,IAAI,UAAU,GAAE,IAAI,GAAG,KAAK,IAAI,OAAO,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,IAAI,OAAO,GAAE,IAAI,GAAG,KAAK,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,WAAW,CAAC,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,IAAI,IAAI,GAAE,IAAI,GAAG,KAAK,IAAI,UAAU,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,IAAI,OAAO,GAAE,IAAI,GAAG,KAAK,IAAI,SAAS,GAAE,IAAI,GAAG,KAAK,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,oBAAoB,CAAC,IAAI,GAAG,KAAK,IAAI,SAAS,GAAE,IAAI,GAAG,KAAK,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,YAAY,CAAC,IAAI,GAAG,KAAK,IAAI,SAAS,GAAE,IAAI,GAAG,KAAK,IAAI,WAAW,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,WAAW,CAAC,IAAI,GAAG,KAAK,IAAI,WAAW,GAAE,IAAI,GAAG,KAAK,IAAI,WAAW,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,WAAW,CAAC,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,IAAI,IAAI,GAAE,IAAI,GAAG,KAAK,IAAI,QAAQ,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC1+B;AAAA;AAAA,QAGA,YAAY;AAAA,UACX,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,KAAK,UAAU,CAAC,IAAI,GAAG,KAAK,IAAI,UAAU,GAAE,IAAI,GAAG,KAAK,IAAI,OAAO,GAAE,IAAI,GAAG,KAAK,IAAI,QAAQ,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,sBAAsB,CAAC,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,IAAI,UAAU,GAAE,IAAI,GAAG,KAAK,IAAI,OAAO,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,IAAI,OAAO,GAAE,IAAI,GAAG,KAAK,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,WAAW,CAAC,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,IAAI,IAAI,GAAE,IAAI,GAAG,KAAK,IAAI,UAAU,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,IAAI,OAAO,GAAE,IAAI,GAAG,KAAK,IAAI,SAAS,GAAE,IAAI,GAAG,KAAK,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,oBAAoB,CAAC,IAAI,GAAG,KAAK,IAAI,SAAS,GAAE,IAAI,GAAG,KAAK,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,YAAY,CAAC,IAAI,GAAG,KAAK,IAAI,SAAS,GAAE,IAAI,GAAG,KAAK,IAAI,WAAW,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,WAAW,CAAC,IAAI,GAAG,KAAK,IAAI,WAAW,GAAE,IAAI,GAAG,KAAK,IAAI,WAAW,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,WAAW,CAAC,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,IAAI,IAAI,GAAE,IAAI,GAAG,KAAK,IAAI,UAAU,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,IAAI,WAAW,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,QAAQ,CAAC,IAAI,GAAG,KAAK,IAAI,UAAU,GAAE,IAAI,GAAG,KAAK,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QACvlC;AAAA;AAAA,QAGA,SAAS;AAAA,UACR,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,KAAK,OAAO,CAAC,IAAI,GAAG,KAAK,IAAI,IAAI,GAAE,IAAI,GAAG,KAAK,IAAI,MAAM,GAAE,IAAI,GAAG,KAAK,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,QAAQ,CAAC,IAAI,GAAG,KAAK,IAAI,IAAI,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,sBAAsB,CAAC,IAAI,GAAG,KAAK,IAAI,OAAO,GAAE,IAAI,GAAG,KAAK,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,QAAQ,CAAC,IAAI,GAAG,KAAK,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,KAAK,uBAAuB,CAAC,IAAI,GAAG,KAAK,IAAI,OAAO,GAAE,IAAI,GAAG,KAAK,KAAK,MAAM,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,GAAG,KAAK,KAAK,QAAQ,CAAC,IAAI,GAAG,KAAK,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QACnkB;AAAA;AAAA;AAAA,QAMA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAI,WAAW,KAAK,KAAK,CAAC,GAAGc,UAAS,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AACvE,cAAI,CAAC,GAAG,KAAK,YAAY,QAAQ,GAAI;AACpC,mBAAO,YAAa,GAAG,MAAM,KAAM,YAAY,UAAU,KAAK,SAAU,CAAE;AAAA,UAC3E,WAAW,CAAC,GAAG,KAAK,QAAQA,OAAM,GAAI;AACrC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQA,SAAQ,KAAK,SAAU,CAAE;AAAA,UACrE,OAAO;AACN,gBAAI,OAAO,MAAM,aAAa,cAAe,SAAS,IAAIA,SAAQ,KAAM;AACxE,mBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAQ,IAAI,GAAG,MAAM,KAAM,CAAC,CAAE;AAAA,UACtE;AAAA,QACD;AAAA;AAAA,QAGA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAI,WAAW,KAAK,KAAK,CAAC,GAAGA,UAAS,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AACvE,cAAI,CAAC,GAAG,KAAK,YAAY,QAAQ,GAAI;AACpC,mBAAO,YAAa,GAAG,MAAM,KAAM,YAAY,UAAU,KAAK,SAAU,CAAE;AAAA,UAC3E,WAAW,CAAC,GAAG,KAAK,QAAQA,OAAM,GAAI;AACrC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQA,SAAQ,KAAK,SAAU,CAAE;AAAA,UACrE,OAAO;AACN,gBAAI,OAAO,MAAM,aAAa,cAAe,SAAS,IAAIA,OAAO;AACjE,gBAAI,MAAO;AACV,qBAAO,QAAS,CAAC,IAAI;AAAA,gBACpB,MAAM,KAAK,QAAS,IAAI,KAAK,KAAK,CAAC,OAAO,IAAI,CAAC,CAAE;AAAA,gBACjD,MAAM;AAAA,gBACN;AAAA,cACD,CAAC,CAAE;AAAA,YACJ;AAAA,UACD;AAAA,QACD;AAAA;AAAA;AAAA,QAOA,QAAQ,SAAU,QAAQ,OAAO,MAAO;AACvC,cAAI,WAAW,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,YAAY,KAAK,KAAK,CAAC;AACzE,cAAG,GAAG,KAAK,QAAQ,SAAS;AAC3B,wBAAY,IAAI,KAAK,KAAK,CAAC,WAAW,IAAI,KAAK,IAAI,CAAC,CAAC;AACtD,cAAI,GAAG,KAAK,YAAa,QAAS,KAAK,GAAG,KAAK,YAAa,IAAK,KAAK,GAAG,KAAK,YAAa,SAAU,GAAI;AACxG,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,WAAY,QAAS,GAAI;AAC5C,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,UAAU,KAAK,SAAU,CAAE;AAAA,UAC1E,WAAW,CAAC,GAAG,KAAK,QAAS,IAAK,GAAI;AACrC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,UACnE,WAAW,CAAC,GAAG,KAAK,QAAS,SAAU,GAAI;AAC1C,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,WAAW,KAAK,SAAU,CAAE;AAAA,UACxE,WAAW,GAAG,KAAK,cAAe,SAAU,GAAI;AAC/C,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,YAAY,WAAW,KAAK,SAAU,CAAE;AAAA,UAC5F,OAAO;AACN,gBAAI,UAAU;AACd,mBAAM,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,OAAO;AAC9D,kBAAI,WAAW,QAAQ,KAAK,CAAC;AAC7B,wBAAU,QAAQ,KAAK,CAAC;AACxB,kBAAI,GAAG,KAAK,YAAa,QAAS,GAAI;AACrC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,cACD,WAAW,CAAC,GAAG,KAAK,QAAS,QAAS,GAAI;AACzC,uBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,UAAU,KAAK,SAAU,CAAE;AACtE;AAAA,cACD,WAAW,SAAS,QAAQ,KAAK,SAAS,QAAQ,MAAO;AACxD,uBAAO,YAAa,GAAG,MAAM,OAAQ,qBAAqB,UAAU,KAAK,SAAU,CAAE;AACrF;AAAA,cACD,WAAW,SAAS,OAAO,KAAM;AAChC,uBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,YAAY,UAAU,KAAK,SAAU,CAAE;AAC1F;AAAA,cACD,WAAW,SAAS,OAAO,MAAO;AACjC,uBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,YAAY,UAAU,KAAK,SAAU,CAAE;AAC1F;AAAA,cACD,WAAW,SAAS,OAAO,MAAO;AACjC,uBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,YAAY,UAAU,KAAK,SAAU,CAAE;AAC1F;AAAA,cACD,WAAW,SAAS,OAAO,OAAO,SAAS,UAAU,MAAM,SAAS,QAAQ,QAAQ,KAAK,GAAG,WAAW,IAAM;AAC5G,uBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,YAAY,UAAU,KAAK,SAAU,CAAE;AAC1F;AAAA,cACD,WAAW,CAAC,MAAM,MAAM,MAAM,MAAM,OAAO,OAAO,KAAK,EAAE,QAAS,KAAK,EAAG,MAAM,IAAK;AACpF,uBAAO,YAAa,GAAG,MAAM,OAAQ,sBAAsB,MAAM,KAAK,SAAU,CAAE;AAClF;AAAA,cACD,OAAO;AACN,oBAAI,MAAM,EAAE,QAAQ,MAAM,OAAO,MAAM,SAAS,KAAK;AACrD,yBAAS,KAAK,OAAO,QAAQ,aAAc;AAC1C,sBAAG,CAAC,OAAO,QAAQ,YAAY,eAAe,CAAC,EAAG;AAClD,sBAAI,UAAU,OAAO,QAAQ,YAAY,CAAC,EAAE,SAAS,EAAE;AACvD,sBAAI,SAAU;AACb,wBAAI,QAAS,SAAS,IAAK,MAAM,IAAK;AAAE,0BAAI,SAAS,EAAE,UAAU,GAAG,MAAM,KAAK;AAAA,oBAAG;AAClF,wBAAI,QAAS,SAAS,IAAK,MAAM,IAAK;AAAE,0BAAI,SAAS,EAAE,UAAU,GAAG,MAAM,KAAK;AAAA,oBAAG;AAClF,wBAAI,QAAS,SAAS,IAAK,MAAM,IAAK;AAAE,0BAAI,UAAU,EAAE,UAAU,GAAG,MAAM,KAAK;AAAA,oBAAG;AACnF,wBAAI,QAAS,SAAS,IAAK,MAAM,IAAK;AAAE,0BAAI,UAAU,EAAE,UAAU,GAAG,MAAM,KAAK;AAAA,oBAAG;AACnF,wBAAI,QAAS,SAAS,KAAM,MAAM,IAAK;AAAE,0BAAI,QAAQ,EAAE,UAAU,GAAG,MAAM,MAAM;AAAA,oBAAG;AACnF,wBAAI,QAAS,SAAS,KAAM,MAAM,IAAK;AAAE,0BAAI,QAAQ,EAAE,UAAU,GAAG,MAAM,MAAM;AAAA,oBAAG;AACnF,wBAAI,QAAS,SAAS,KAAM,MAAM,IAAK;AAAE,0BAAI,QAAQ,EAAE,UAAU,GAAG,MAAM,MAAM;AAAA,oBAAG;AAAA,kBACpF;AAAA,gBACD;AACA,oBAAI;AACJ,wBAAQ,KAAK,IAAK;AAAA,kBACjB,KAAK;AAAA,kBAAM,KAAK;AAAM,oCAAgB;AAAU;AAAA,kBAChD,KAAK;AAAA,kBAAM,KAAK;AAAM,oCAAgB;AAAW;AAAA,kBACjD;AAAS,oCAAgB;AAAS;AAAA,gBACnC;AACA,oBAAG,IAAI,SAAS,kBAAkB,aAAa,IAAI,WAAW,kBAAkB,SAAS;AACxF,yBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,YAAY,UAAU,KAAK,SAAU,CAAE;AAC1F;AAAA,gBACD,OAAO;AACN,sBAAI,IAAI,aAAa,GAAI;AACxB,2BAAQ,OAAO,QAAQ,YAAY,IAAI,aAAa,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,IAAI,aAAa,EAAE,IAAK;AACtG,wBAAI,OAAO,QAAQ,YAAY,IAAI,aAAa,EAAE,QAAQ,EAAE,SAAS,EAAE,EAAE,WAAW,GAAI;AACvF,6BAAO,OAAO,QAAQ,YAAY,IAAI,aAAa,EAAE,QAAQ,EAAE,SAAS,EAAE;AAAA,oBAC3E;AAAA,kBACD;AACA,sBAAI,SAAS,QAAQ,GAAI;AACxB,wBAAI,CAAC,OAAO,QAAQ,YAAY,SAAS,KAAK,EAAI,QAAO,QAAQ,YAAY,SAAS,MAAM,SAAS,CAAC,IAAI,CAAC;AAC3G,wBAAI,CAAC,OAAO,QAAQ,YAAY,SAAS,KAAK,EAAE,SAAS,EAAE,EAAI,QAAO,QAAQ,YAAY,SAAS,KAAK,EAAE,SAAS,EAAE,IAAI,CAAC;AAC1H,2BAAO,QAAQ,YAAY,SAAS,KAAK,EAAE,SAAS,EAAE,EAAE,KAAM,KAAK,EAAG;AAAA,kBACvE;AAAA,gBACD;AAAA,cACD;AAAA,YACD;AACA,gBAAG,GAAG,KAAK,YAAY,OAAO,GAAG;AAChC,qBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,YACD,WAAU,CAAC,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,QAAQ;AACpE,qBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,WAAW,KAAK,SAAU,CAAE;AACvE;AAAA,YACD,OAAO;AACN,qBAAO,QAAQ,KAAK;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,gBAAgB,SAAU,QAAQ,OAAO,MAAO;AAC/C,cAAI,WAAW,KAAK,KAAK,CAAC,GAAG,YAAY,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC;AAC7E,cAAI,SAAS,CAAC;AACd,cAAI,CAAC,GAAG,KAAK,YAAa,QAAS,KAAK,CAAC,GAAG,KAAK,WAAY,QAAS,GAAI;AACzE,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,UAAU,KAAK,SAAU,CAAE;AAAA,UAC1E,WAAW,GAAG,KAAK,WAAY,QAAS,MAAO,SAAS,QAAQ,KAAK,SAAS,QAAQ,OAAS;AAC9F,mBAAO,YAAa,GAAG,MAAM,OAAQ,qBAAqB,UAAU,KAAK,SAAU,CAAE;AAAA,UACtF,WAAW,CAAC,GAAG,KAAK,YAAa,SAAU,KAAK,CAAC,GAAG,KAAK,QAAS,SAAU,GAAI;AAC/E,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,WAAW,KAAK,SAAU,CAAE;AAAA,UACxE,WAAW,GAAG,KAAK,QAAS,SAAU,KAAK,QAAS,CAAC,MAAM,MAAM,MAAM,MAAM,OAAO,OAAO,KAAK,GAAG,UAAU,EAAG,MAAM,IAAK;AAC1H,mBAAO,YAAa,GAAG,MAAM,OAAQ,sBAAsB,WAAW,KAAK,SAAU,CAAE;AAAA,UACxF,WAAW,CAAC,GAAG,KAAK,YAAa,QAAS,KAAK,CAAC,GAAG,KAAK,QAAS,QAAS,GAAI;AAC7E,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,UAAU,KAAK,SAAU,CAAE;AAAA,UACvE,OAAO;AACN,qBAAS,KAAK,OAAO,QAAQ;AAC5B,uBAAS,KAAK,OAAO,QAAQ,YAAY,CAAC;AACzC,yBAASd,KAAI,GAAGA,KAAI,OAAO,QAAQ,YAAY,CAAC,EAAE,CAAC,EAAE,QAAQA;AAC5D,yBAAO,KAAM,IAAI;AAAA,oBAChB,MAAM,KAAK;AAAA,sBACV,IAAI,KAAM,KAAK;AAAA,wBACd,IAAI,KAAM,KAAK,CAAC,IAAI,IAAK,GAAG,KAAM,GAAG,QAAQ,CAAE;AAAA,wBAC/C,IAAI,KAAM,KAAK;AAAA,0BACd,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,OAAO,QAAQ,YAAY,CAAC,EAAE,CAAC,EAAEA,EAAC,GAAG,CAAC,CAAE,GAAG,SAAS,CAAE;AAAA,0BAChF,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,GAAG,CAAC,CAAE,GAAG,QAAQ,CAAE;AAAA,wBAC9C,CAAE;AAAA,sBACH,CAAE;AAAA,oBACH;AAAA,oBACA,MAAM;AAAA,oBACN;AAAA,kBACD,CAAE;AACL,mBAAO,QAAS,MAAO;AAAA,UACxB;AAAA,QACD;AAAA;AAAA;AAAA,QAOA,OAAO,SAAS,QAAQ,OAAO,MAAM;AACpC,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AAC5C,cAAI,eAAe,KAAK,KAAK,CAAC;AAC9B,cAAI,YAAY,KAAK,cAAc,QAAQ,KAAK,KAAK,CAAC,IAAI;AAE1D,cAAG,GAAG,KAAK,QAAQ,SAAS,KAAK,UAAU,cAAc,QAAQ;AAChE,gBAAI,OAAO,KAAK,cAAc,QAAQ,IAAI,KAAK,KAAK,CAAC,cAAc,IAAI,KAAK,QAAQ,CAAC,UAAU,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,UAAU,KAAK,CAAC;AAC7H,gBAAI,OAAO,KAAK,cAAc,QAAQ,IAAI,KAAK,KAAK,CAAC,cAAc,UAAU,KAAK,CAAC,CAAC,CAAC,IAAI,UAAU,KAAK,CAAC;AACzG,gBAAI,YAAY;AAChB,gBAAI,WAAW,MAAM,KAAK,QAAQ,IAAI,KAAM,KAAK,CAAC,MAAM,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,GAAG,GAAG,IAAI,CAAC,CAAC,CAAE,CAAE;AAChG,gBAAI,WAAW,MAAM,KAAK,QAAQ,IAAI,KAAM,KAAK,CAAC,IAAI,KAAK,GAAG,GAAG,SAAS,CAAC,CAAC;AAC5E,mBAAO,QAAQ;AAAA,cACd,IAAI,MAAM,UAAU,MAAM,cAAc,KAAK;AAAA,cAC7C,IAAI,MAAM,UAAU,MAAM,cAAc,KAAK;AAAA,YAC9C,CAAC;AAAA,UAEF,WAAU,GAAG,KAAK,QAAQ,SAAS,KAAK,UAAU,cAAc,SAAS;AACxE,gBAAI,OAAO,KAAK,cAAc,QAAQ,IAAI,KAAK,KAAK,CAAC,cAAc,UAAU,KAAK,CAAC,CAAC,CAAC,IAAI,UAAU,KAAK,CAAC;AACzG,gBAAI,OAAO,KAAK,cAAc,QAAQ,IAAI,KAAK,KAAK,CAAC,cAAc,UAAU,KAAK,CAAC,CAAC,CAAC,IAAI,UAAU,KAAK,CAAC;AACzG,gBAAI,YAAY;AAChB,mBAAO,QAAQ,CAAC,IAAI;AAAA,cACnB,MAAM,KAAK,QAAQ,IAAI,KAAK,OAAO,CAAC,MAAM,MAAM,SAAS,CAAC,CAAC;AAAA,cAC3D,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAC;AAAA,UAEH,OAAO;AACN,mBAAO,QAAQ;AAAA,cACd,IAAI,MAAM,MAAM,KAAK,QAAQ,IAAI,GAAG,MAAM,cAAc,KAAK;AAAA,cAC7D,IAAI,MAAM,MAAM,KAAK,QAAQ,KAAK,GAAG,MAAM,cAAc,KAAK;AAAA,YAC/D,CAAC;AAAA,UACF;AAAA,QACD;AAAA;AAAA,QAGA,OAAO,SAAU,QAAQ,OAAO,MAAO;AACtC,cAAI,YAAY,UAAU,SAAS,CAAC;AACpC,uBAAa;AACb,qBAAW;AACX,iBAAO,WAAW,WAAW,QAAQ,WAAW,OAAO,KAAK,OAAQ,IAAK,GAAI;AAC5E,uBAAW;AACX,yBAAa,WAAW;AACxB,gBAAG,WAAW,SAAS,MAAM;AAC5B,kBAAI,WAAW,WAAW,KAAK,OAAO;AACtC,kBAAG,YAAY,SAAS,cAAc;AACrC,2BAAW,SAAS,KAAK,CAAC;AAC3B,kBAAI,YAAY,SAAS,OAAO,UAAU,SAAS,OAAO,IAAI,GAAI;AACjE,6BAAa;AACb;AAAA,cACD;AAAA,YACD;AAAA,UACD;AACA,cAAI,qBAAqB;AACzB,mBAASA,KAAI,OAAO,OAAO,SAAO,GAAGA,MAAK,GAAGA,MAAM;AAClD,gBAAI,QAAQ,OAAO,OAAOA,EAAC;AAC3B,gBAAI,OAAO,MAAM;AACjB,mBAAO,SAAS,QAAQ,SAAS,WAAW,QAAS;AACpD,qBAAO,KAAK;AAAA,YACb;AACA,gBAAI,SAAS,QAAQ,SAAS,WAAW;AACxC,qBAAO,KAAM,KAAM;AAAA,qBACZ,MAAM;AACb,mCAAqB,MAAM;AAAA,UAC7B;AACA,iBAAO,SAAS,OAAO,QAAQ;AAC/B,iBAAO,QAAQ,CAAC,IAAI;AAAA,YACnB,MAAM,KAAK,QAAQ,kBAAkB;AAAA,YACrC,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAC;AAAA,QACH;AAAA;AAAA,QAGA,SAAS,SAAU,QAAQ,OAAO,MAAO;AACxC,cAAI,OAAO,KAAK,KAAK,CAAC;AACtB,cAAI,GAAG,KAAK,YAAa,IAAK,GAAI;AACjC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,GAAI;AACzC,mBAAO,YAAa,GAAG,MAAM,KAAM,YAAY,MAAM,KAAK,SAAU,CAAE;AAAA,UACvE,OAAO;AAyBN,mBAAO,QAAS;AAAA,cACf,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,KAAK,CAAE,IAAI,KAAM,QAAQ,CAAC,IAAI,CAAE,GAAG,IAAI,KAAM,KAAK,CAAC,CAAE,CAAE,CAAE,GAAG,IAAI,KAAM,QAAQ,CAAC,CAAE,CAAE,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM;AAAA,cAC7K,IAAI,MAAO,MAAM,KAAK,QAAS,IAAK,GAAG,MAAM,cAAc,KAAM;AAAA,YAClE,CAAE;AAAA,UACH;AAAA,QACD;AAAA;AAAA,QAGA,QAAQ,SAAU,QAAQ,OAAO,MAAO;AACvC,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC3C,cAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK;AAAA,YAC3C,IAAI,KAAK,QAAQ,CAAC,IAAI,CAAC;AAAA,YACvB,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,GAAG,GAAG,IAAI,CAAC;AAAA,UACpC,CAAC,CAAC;AACF,iBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,QAChE;AAAA;AAAA,QAGA,SAAS,SAAS,QAAQ,OAAO,MAAM;AACtC,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC3C,cAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK;AAAA,YAC3C,IAAI,KAAK,QAAQ,CAAC,IAAI,CAAC;AAAA,YAAG;AAAA,UAAI,CAAC,CAAC;AACjC,iBAAO,QAAQ,CAAC,IAAI,MAAM,MAAM,MAAM,cAAc,KAAK,CAAC,CAAC;AAAA,QAC5D;AAAA;AAAA,QAGA,UAAU,SAAU,IAAI,IAAI,IAAK;AAAA,QAAC;AAAA;AAAA,QAGlC,WAAW,SAAU,IAAI,IAAI,IAAK;AAAA,QAAC;AAAA;AAAA,QAGnC,UAAU,SAAU,QAAQ,OAAO,GAAI;AACtC,iBAAO,QAAS,KAAM;AAAA,QACvB;AAAA;AAAA,QAGA,UAAU,MAAM,CAAC;AAAA,QACjB,UAAU,MAAM,CAAC;AAAA,QACjB,UAAU,MAAM,CAAC;AAAA,QACjB,UAAU,MAAM,CAAC;AAAA,QACjB,UAAU,MAAM,CAAC;AAAA,QACjB,UAAU,MAAM,CAAC;AAAA,QACjB,UAAU,MAAM,CAAC;AAAA,QACjB,UAAU,MAAM,CAAC;AAAA;AAAA,QAGjB,UAAU,SAAU,QAAQ,OAAO,MAAO;AACzC,cAAI,OAAO,KAAK,KAAK,CAAC;AACtB,iBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,QAAQ,CAAC,IAAI,CAAE,GAAG,IAAI,KAAM,KAAK,CAAC,CAAE,CAAC,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,QACpJ;AAAA;AAAA,QAGA,YAAY,SAAU,QAAQ,OAAO,MAAO;AAC3C,cAAI,WAAW,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC/C,iBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,OAAO,CAAC,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,QAAQ,CAAC,QAAQ,CAAE,GAAG,IAAI,KAAM,OAAO,CAAC,IAAI,KAAM,QAAQ,CAAC,IAAI,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,QACzM;AAAA;AAAA,QAGA,YAAY,SAAU,QAAQ,OAAO,GAAI;AACxC,iBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAK,GAAG,MAAM,cAAc,KAAM,GAAG,KAAK,CAAE;AAAA,QAC7F;AAAA;AAAA;AAAA,QAKA,WAAW,SAAU,QAAQ,OAAO,MAAO;AAC1C,cAAI,QAAQ,KAAK,KAAK,CAAC;AACvB,cAAG,GAAG,KAAK,YAAY,KAAK,GAAG;AAC9B,mBAAO,YAAY,GAAG,MAAM,cAAc,OAAO,MAAM,SAAS,CAAC;AAAA,UAClE,OAAO;AACN,qBAAQA,KAAI,GAAGA,KAAI,OAAO,OAAO,QAAQA,MAAK;AAC7C,kBAAI,QAAQ,OAAO,OAAOA,EAAC;AAC3B,kBAAG,MAAM,0BAA0B;AAClC,uBAAO,SAAS,CAAC,IAAI;AAAA,kBACpB,IAAI,KAAK,KAAK;AAAA,oBACb,IAAI,KAAK,SAAS;AAAA,sBACjB,MAAM;AAAA,sBACN,IAAI,IAAI,GAAG;AAAA,sBACX,IAAI,KAAK,SAAS,CAAC,KAAK,CAAC;AAAA,oBAC1B,CAAC;AAAA,oBACD,IAAI,KAAK,SAAS,CAAC,KAAK,CAAC;AAAA,kBAC1B,CAAC;AAAA,kBACD,MAAM;AAAA,kBACN;AAAA,gBACD,CAAC;AACD;AAAA,cACD;AAAA,YAED;AACA,mBAAO,YAAY,KAAK;AAAA,UACzB;AAAA,QACD;AAAA;AAAA,QAGA,WAAW,SAAS,QAAQ,OAAO,MAAM;AACxC,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,UAAU,KAAK,KAAK,CAAC,GAAG,UAAU,KAAK,KAAK,CAAC;AACtE,cAAI;AACJ,cAAG,CAAC,MAAM,OAAO;AAChB,sBAAU,IAAI,OAAO,OAAO,OAAO;AACnC,oBAAQ,WAAW,OAAO;AAC1B,oBAAQ,iBAAiB,SAAS,OAAO;AAAE,qBAAO,MAAM;AAAA,YAAc;AACtE,oBAAQ,eAAe,SAAS,OAAO;AAAE,qBAAO,MAAM;AAAA,YAAM;AAC5D,oBAAQ,SAAS,MAAM,MAAM,KAAK;AAClC,kBAAM,QAAQ;AAAA,UACf,OAAO;AACN,sBAAU,MAAM;AAAA,UACjB;AACA,cAAI,WAAW,SAAS,QAAQ;AAC/B,gBAAG,GAAG,KAAK,SAAS,MAAM,GAAG;AAC5B,kBAAI,eAAe,OAAO,SAAS,cAAc,EAAE,cAAc;AACjE,kBAAI,QAAQ,IAAI,MAAM;AACtB,kBAAI,MAAM,GAAG,MAAM,OAAO,KAAK,CAAC,GAAG,SAAS,YAAY;AACxD,kBAAG,QAAQ,MAAM;AAChB,sBAAM,eAAe,MAAM,aAAa,MAAM,GAAG;AACjD,sBAAM,OAAO,MAAM,KAAK,QAAQ,OAAO,EAAE,MAAM,GAAG;AAClD,sBAAM,SAAS;AACf,uBAAO,QAAQ,CAAC,KAAK,CAAC;AAAA,cACvB,OAAO;AACN,uBAAO,YAAY,OAAO,KAAK,CAAC,CAAC;AAAA,cAClC;AAAA,YACD,WAAU,WAAW,SAAS,WAAW,MAAM;AAC9C,kBAAI,QAAQ,WAAW,OAAO,CAAC,IAAI,IAAI;AAAA,gBACtC,MAAM,KAAK,MAAM,MAAM,EAAE,QAAQ,IAAI;AAAA,gBACrC,MAAM,aAAa,MAAM,MAAM;AAAA,gBAC/B;AAAA,cACD;AACA,qBAAO,QAAQ,CAAC,OAAO,KAAK,CAAC;AAAA,YAC9B,WAAU,WAAW,MAAM;AAC1B,qBAAO,QAAQ,CAAC,KAAK,CAAC;AACtB,kBAAG,OAAO;AACT,uBAAO,gBAAgB;AAAA,YACzB;AACA,mBAAO,MAAM,WAAW,IAAI;AAAA,UAC7B;AACA,kBAAQ,OAAO,QAAQ;AACvB,iBAAO;AAAA,QACR;AAAA;AAAA,QAGA,kBAAkB,SAAS,QAAQ,OAAO,MAAM;AAC/C,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,UAAU,KAAK,KAAK,CAAC;AAC9C,cAAG,GAAG,KAAK,YAAY,IAAI,KAAK,GAAG,KAAK,YAAY,OAAO,GAAG;AAC7D,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACrC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,UACnE,WAAU,CAAC,GAAG,KAAK,YAAY,OAAO,GAAG;AACxC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,SAAS,KAAK,SAAS,CAAC;AAAA,UACtE,OAAO;AACN,gBAAI,SAAS;AACb,gBAAG,MAAM,eAAe,2BAA2B,GAAG;AACrD,wBAAU,MAAM;AAChB,yBAAW,MAAM;AAAA,YAClB,OAAO;AACN,kBAAI,OAAO,IAAI,KAAK,QAAQ,CAAC,IAAI,CAAC;AAClC,wBAAU,IAAI,OAAO,OAAO,OAAO;AACnC,sBAAQ,SAAS,MAAM,MAAM,KAAK;AAClC,yBAAW,SAAS,QAAQ;AAC3B,oBAAG,WAAW,MAAM;AACnB,sBAAI,QAAQ,IAAI;AAAA,oBACf,MAAM;AAAA,oBACN,MAAM;AAAA,oBACN;AAAA,kBACD;AACA,wBAAM,4BAA4B;AAClC,wBAAM,8BAA8B;AACpC,yBAAO,QAAQ,CAAC,KAAK,CAAC;AAAA,gBACvB,WAAU,WAAW,OAAO;AAC3B,sBAAI,mBAAmB,IAAI,KAAK,KAAK;AAAA,oBACpC,IAAI,KAAK,QAAQ,CAAC,OAAO,CAAC;AAAA,oBAC1B,IAAI,KAAK,MAAM;AAAA,kBAChB,CAAC;AACD,sBAAI,QAAQ,IAAI;AAAA,oBACf,MAAM,KAAK,QAAQ,gBAAgB;AAAA,oBACnC,MAAM;AAAA,oBACN;AAAA,kBACD;AACA,yBAAO,QAAQ,CAAC,KAAK,CAAC;AAAA,gBACvB,WAAU,GAAG,KAAK,SAAS,MAAM,GAAG;AACnC,sBAAI,oBAAoB,IAAI,KAAK,KAAK;AAAA,oBACrC,IAAI,KAAK,QAAQ,CAAC,OAAO,CAAC;AAAA,oBAC1B;AAAA,kBACD,CAAC;AACD,sBAAI,QAAQ,IAAI;AAAA,oBACf,MAAM,KAAK,QAAQ,iBAAiB;AAAA,oBACpC,MAAM;AAAA,oBACN;AAAA,kBACD;AACA,yBAAO,QAAQ,CAAC,KAAK,CAAC;AAAA,gBACvB,OAAO;AACN,sBAAG,QAAQ,OAAO,WAAW,GAAG;AAC/B,wBAAI,QAAQ,IAAI;AAAA,sBACf,MAAM,KAAK;AAAA,wBACV,IAAI,KAAK,QAAQ,CAAC,OAAO,CAAC;AAAA,sBAC3B,EAAE,MAAM,MAAM;AAAA,sBACd,MAAM,aAAa,MAAM,MAAM;AAAA,sBAC/B;AAAA,oBACD;AACA,2BAAO,QAAQ,CAAC,KAAK,CAAC;AAAA,kBACvB,OAAO;AACN,wBAAI,SAAS,IAAI;AAAA,sBAChB,MAAM,KAAK,MAAM,MAAM,EAAE,QAAQ,IAAI;AAAA,sBACrC,MAAM,aAAa,MAAM,MAAM;AAAA,sBAC/B;AAAA,oBACD;AACA,wBAAI,SAAS,IAAI;AAAA,sBAChB,MAAM;AAAA,sBACN,MAAM;AAAA,sBACN;AAAA,oBACD;AACA,2BAAO,4BAA4B;AACnC,2BAAO,8BAA8B;AACrC,2BAAO,0BAA0B,QAAQ,MAAM,MAAM;AACrD,2BAAO,2BAA2B;AAClC,2BAAO,QAAQ,CAAC,QAAQ,MAAM,CAAC;AAAA,kBAChC;AAAA,gBACD;AACA,uBAAO,MAAM;AAAA,cACd;AAAA,YACD;AACA,oBAAQ,OAAO,QAAQ;AACvB,mBAAO;AAAA,UACR;AAAA,QACD;AAAA;AAAA,QAGA,wBAAwB,SAAS,QAAQ,OAAO,MAAM;AACrD,cAAI,QAAQ,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,UAAU,KAAK,KAAK,CAAC;AACpE,cAAG,GAAG,KAAK,YAAY,KAAK,KAAK,GAAG,KAAK,YAAY,IAAI,KAAK,GAAG,KAAK,YAAY,OAAO,GAAG;AAC3F,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,KAAK,GAAG;AACtC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,OAAO,KAAK,SAAS,CAAC;AAAA,UACpE,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACrC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,UACnE,WAAU,CAAC,GAAG,KAAK,YAAY,OAAO,GAAG;AACxC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,SAAS,KAAK,SAAS,CAAC;AAAA,UACtE,OAAO;AACN,mBAAO,QAAQ,CAAC,IAAI;AAAA,cACnB,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK;AAAA,gBAChC,IAAI,KAAK,QAAQ,CAAC,KAAK,CAAC;AAAA,gBACxB,IAAI,KAAK,gBAAgB,CAAC,MAAM,OAAO,CAAC;AAAA,cACzC,CAAC,CAAC;AAAA,cACF,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAC;AAAA,UACH;AAAA,QACD;AAAA;AAAA;AAAA,QAKA,OAAO,SAAU,QAAQ,OAAO,MAAO;AACtC,cAAI,eAAe,OAAO,SAAU,cAAe,EAAE,cAAc;AACnE,cAAI,QAAQ,IAAI,MAAM;AACtB,cAAI,MAAM,GAAG,MAAO,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,GAAG,YAAa;AAC7D,cAAI,QAAQ,MAAO;AAClB,kBAAM,OAAO,MAAM,KAAK,MAAO,GAAI,EAAE,QAAS,IAAK;AACnD,kBAAM,eAAe,MAAM,aAAa,MAAO,GAAI;AACnD,kBAAM,SAAS;AACf,mBAAO,QAAS,CAAC,KAAK,CAAE;AAAA,UACzB;AAAA,QACD;AAAA;AAAA,QAGA,6BAA6B,SAAU,QAAQ,OAAO,MAAO;AAC5D,cAAI,QAAQ,IAAI,MAAM;AACtB,cAAI,MAAM,GAAG,MAAO,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,GAAG,IAAK;AACrD,cAAI,QAAQ,MAAO;AAClB,kBAAM,OAAO,MAAM,KAAK,MAAO,GAAI,EAAE,QAAS,IAAK;AACnD,kBAAM,eAAe,MAAM,aAAa,MAAO,GAAI;AACnD,kBAAM,SAAS;AACf,mBAAO,QAAS,CAAC,KAAK,CAAE;AAAA,UACzB;AAAA,QACD;AAAA;AAAA,QAGA,SAAS,SAAU,QAAQ,OAAO,MAAO;AACxC,cAAI,eAAe,OAAO,SAAU,cAAe,EAAE,cAAc;AACnE,cAAI,MAAM,GAAG,MAAO,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,GAAG,YAAa;AAC7D,cAAI,QAAQ,MAAO;AAClB,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAYA,mBAAmB,SAAU,QAAQ,OAAO,MAAO;AAClD,cAAI,UAAU,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC;AAClD,cAAI,QAAQ,OAAO,mBAAmB;AACtC,cAAI,QAAQ,OAAO,mBAAmB;AACtC,iBAAO,QAAQ,CAAC,IAAI;AAAA,YACnB,MAAM,KAAK,QAAQ,IAAI,KAAK,OAAO;AAAA,cAClC,IAAI,KAAK,OAAO;AAAA,gBACf,IAAI,KAAK,KAAK;AAAA,kBACb,IAAI,KAAK,kBAAkB,CAAC,UAAU,KAAK,CAAC;AAAA,kBAC5C,IAAI,KAAK,KAAK;AAAA,oBACb,IAAI,KAAK,2BAA2B,CAAC,SAAS,QAAQ,CAAC;AAAA,oBACvD,IAAI,KAAK,KAAK;AAAA,sBACb,IAAI,KAAK,kBAAkB,CAAC,OAAO,KAAK,CAAC;AAAA,sBACzC,IAAI,KAAK,MAAM,CAAC,OAAO,KAAK,CAAC;AAAA,oBAC9B,CAAC;AAAA,kBACF,CAAC;AAAA,gBACF,CAAC;AAAA,cACF,CAAC;AAAA,YACF,CAAC,CAAC;AAAA,YACF,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAC;AAAA,QACH;AAAA;AAAA;AAAA,QAKA,aAAa,SAAS,QAAQ,OAAO,MAAM;AAC1C,cAAI,WAAW,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,YAAY,KAAK,KAAK,CAAC;AACzE,cAAI,OAAO,IAAI,KAAK,MAAM,CAAC,CAAC;AAC5B,iBAAO,QAAQ,CAAC,IAAI;AAAA,YACnB,MAAM,KAAK,QAAQ,IAAI,KAAK,WAAW,CAAC,UAAU,MAAM,WAAW,IAAI,CAAC,CAAC;AAAA,YACzE,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAC;AAAA,QACH;AAAA;AAAA,QAGA,aAAa,SAAS,QAAQ,OAAO,MAAM;AAC1C,cAAI,WAAW,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,YAAY,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC9F,cAAI,cAAc;AAClB,cAAG,GAAG,KAAK,QAAQ,IAAI,KAAK,KAAK,cAAc;AAC9C,0BAAc,KAAK,KAAK,CAAC;AAC1B,cAAG,GAAG,KAAK,YAAY,WAAW,GAAG;AACpC,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,WAAW,GAAG;AAC5C,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,UACnE,WAAU,CAAC,GAAG,KAAK,YAAY,SAAS,KAAK,CAAC,GAAG,KAAK,QAAQ,SAAS,GAAG;AACzE,mBAAO,YAAY,GAAG,MAAM,KAAK,QAAQ,WAAW,KAAK,SAAS,CAAC;AAAA,UACpE,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,IAAI,GAAG;AAC/D,mBAAO,YAAY,GAAG,MAAM,KAAK,QAAQ,MAAM,KAAK,SAAS,CAAC;AAAA,UAC/D,OAAO;AACN,mBAAO,QAAQ,CAAC,IAAI;AAAA,cACnB,MAAM,KAAK,QAAQ,IAAI,KAAK,YAAY,CAAC,UAAU,MAAM,WAAW,IAAI,CAAC,CAAC;AAAA,cAC1E,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAC;AAAA,UACH;AAAA,QACD;AAAA;AAAA,QAGA,WAAW,SAAS,QAAQ,OAAO,MAAM;AACxC,cAAI,WAAW,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,YAAY,KAAK,KAAK,CAAC;AACzE,cAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACrC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,UACnE,WAAU,CAAC,GAAG,KAAK,YAAY,SAAS,KAAK,CAAC,GAAG,KAAK,QAAQ,SAAS,GAAG;AACzE,mBAAO,YAAa,GAAG,MAAM,KAAK,QAAQ,WAAW,KAAK,SAAS,CAAC;AAAA,UACrE,OAAO;AACN,mBAAO,QAAQ,CAAC,IAAI;AAAA,cACnB,MAAM,KAAK,QAAQ,IAAI,KAAK,UAAU,CAAC,UAAU,MAAM,SAAS,CAAC,CAAC;AAAA,cAClE,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAC;AAAA,UACH;AAAA,QACD;AAAA;AAAA,QAGA,WAAW,SAAS,QAAQ,OAAO,MAAM;AACxC,cAAI,WAAW,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,YAAY,KAAK,KAAK,CAAC;AACzE,cAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACrC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,UACnE,WAAU,CAAC,GAAG,KAAK,YAAY,SAAS,KAAK,CAAC,GAAG,KAAK,QAAQ,SAAS,GAAG;AACzE,mBAAO,YAAa,GAAG,MAAM,KAAK,QAAQ,WAAW,KAAK,SAAS,CAAC;AAAA,UACrE,OAAO;AACN,mBAAO,QAAQ,CAAC,IAAI;AAAA,cACnB,MAAM,KAAK,QAAQ,IAAI,KAAK,UAAU,CAAC,UAAU,MAAM,SAAS,CAAC,CAAC;AAAA,cAClE,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAC;AAAA,UACH;AAAA,QACD;AAAA;AAAA;AAAA,QAKA,aAAa,SAAU,QAAQ,OAAO,MAAO;AAC5C,cAAI;AACJ,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AACjE,cAAI,GAAG,KAAK,YAAa,IAAK,MAAM,GAAG,KAAK,YAAa,IAAK,KAAK,GAAG,KAAK,YAAa,KAAM,IAAK;AAClG,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,KAAM,KAAK,CAAC,GAAG,KAAK,WAAY,KAAM,GAAI;AAC1E,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UAC9E,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,UAAW,IAAK,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,KAAM,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UAC7E,WAAW,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,QAAS,IAAK,KAAK,GAAG,KAAK,WAAY,KAAM,KAAK,MAAM,QAAQ,GAAI;AACtH,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UAC3E,WAAW,GAAG,KAAK,YAAa,IAAK,KAAK,GAAG,KAAK,WAAY,KAAM,KAAK,MAAM,QAAQ,GAAI;AAC1F,mBAAO,YAAa,GAAG,MAAM,OAAQ,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UAC3F,WAAW,GAAG,KAAK,YAAa,IAAK,GAAI;AACxC,gBAAI,KAAK,KAAK,CAAC,EAAE,SAAS,GAAI;AAC7B,kBAAI,OAAO,CAAC;AACZ,uBAASA,KAAI,GAAGA,KAAI,MAAM,OAAOA;AAChC,qBAAK,KAAM,OAAO,mBAAmB,CAAE;AACxC,kBAAI,UAAU,GAAG,KAAK,UAAW,IAAK,IAAI,OAAO,IAAI,KAAM,KAAK,IAAI,IAAK;AACzE,qBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,MAAM,OAAO,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YAClH;AAAA,UACD,OAAO;AACN,gBAAI,KAAK,GAAG,KAAK,UAAW,IAAK,IAAI,OAAO,IAAI,KAAM,KAAK,IAAI,CAAC,CAAE;AAClE,gBAAI,SAAS,GAAG,KAAK,UAAW,IAAK,IAAI,IAAI,IAAK,GAAG,KAAM,IAAI,IAAI,IAAK,KAAK,KAAK,QAAQ,KAAM;AAChG,gBAAI,OAAO,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,KAAK,CAAC,IAAI,IAAI,CAAE,GAAG,IAAI,KAAM,KAAK,CAAC,QAAQ,KAAK,CAAE,CAAC,CAAE;AAC1F,mBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAK,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,UACtF;AAAA,QACD;AAAA;AAAA,QAGA,SAAS,SAAU,QAAQ,OAAO,MAAO;AACxC,cAAI,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,KAAK,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,GAAI;AAChF,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,WAAY,KAAK,KAAK,CAAC,CAAE,GAAI;AAChD,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UAC9E,WAAW,KAAK,KAAK,CAAC,EAAE,QAAQ,GAAI;AACnC,mBAAO,YAAa,GAAG,MAAM,OAAQ,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UAC3F,WAAW,CAAC,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,GAAI;AACjD,mBAAO,YAAa,GAAG,MAAM,KAAM,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UAC/E,OAAO;AACN,gBAAI,IAAI,KAAK,KAAK,CAAC,EAAE;AACrB,gBAAI,IAAI,KAAK,KAAK,KAAK,KAAK,CAAC,EAAE,KAAK,QAAS;AAC5C,kBAAI,OAAO,IAAI,KAAM,KAAK,CAAC,KAAK,KAAK,CAAC,EAAE,KAAK,IAAE,CAAC,GAAG,KAAK,KAAK,CAAC,CAAC,CAAE;AACjE,qBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAK,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YACtF;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,SAAS,SAAU,QAAQ,OAAO,MAAO;AACxC,cAAI;AACJ,cAAI,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,MAAM,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,KAC3E,GAAG,KAAK,kBAAmB,KAAK,KAAK,CAAC,CAAE,KAAK,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,EAAE,KAAK,CAAC,CAAE,IAAK;AAC9F,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,cAAe,KAAK,KAAK,CAAC,CAAE,GAAI;AACnD,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UAC3E,WAAW,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,KAAK,GAAG,KAAK,cAAe,KAAK,KAAK,CAAC,CAAE,GAAI;AACzF,mBAAO,YAAa,GAAG,MAAM,OAAQ,kBAAkB,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UACvF,WAAW,CAAC,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,GAAI;AACjD,gBAAI,GAAG,KAAK,QAAS,KAAK,KAAK,CAAC,CAAE,KAAK,KAAK,KAAK,CAAC,EAAE,KAAK,SAAS,GAAI;AACrE,qBAAO,IAAI,KAAM,IAAK;AACtB,uBAASA,KAAI,KAAK,KAAK,CAAC,EAAE,KAAK,SAAS,GAAGA,MAAK,GAAGA,MAAM;AACxD,uBAAO,IAAI,KAAM,KAAK,CAAC,KAAK,KAAK,CAAC,EAAE,KAAKA,EAAC,GAAG,IAAI,CAAE;AAAA,cACpD;AACA,qBAAO,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,KAAK,KAAK,CAAC,EAAE,EAAG,GAAG,IAAI,CAAE;AAAA,YAC3D,OAAO;AACN,qBAAO,IAAI,KAAM,KAAK,CAAC,KAAK,KAAK,CAAC,GAAG,IAAI,KAAM,IAAK,CAAC,CAAE;AAAA,YACxD;AACA,mBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,MAAM,KAAK,KAAK,CAAC,CAAC,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,UACvH,WAAW,CAAC,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,GAAI;AACjD,gBAAI,OAAO,CAAC;AACZ,mBAAO,KAAK,KAAK,CAAC,EAAE,KAAK,CAAC;AAC1B,mBAAO,KAAK,cAAc,OAAQ;AACjC,mBAAK,KAAM,KAAK,KAAK,CAAC,CAAE;AACxB,qBAAO,KAAK,KAAK,CAAC;AAAA,YACnB;AACA,gBAAI,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,KAAK,GAAG,KAAK,YAAa,IAAK,GAAI;AACxE,qBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,YAC9D,WAAW,KAAK,WAAW,KAAK,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,EAAE,KAAK,CAAC,CAAE,GAAI;AAC7E,qBAAO,YAAa,GAAG,MAAM,KAAM,UAAU,KAAK,KAAK,CAAC,EAAE,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,YACrF,WAAW,KAAK,SAAS,MAAM,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,EAAE,KAAK,CAAC,CAAE,KAAK,GAAG,KAAK,UAAW,KAAK,KAAK,CAAC,EAAE,KAAK,CAAC,CAAE,IAAK;AAC1H,qBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,KAAK,KAAK,CAAC,EAAE,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,YACnF,OAAO;AACN,kBAAI,KAAK,WAAW,GAAI;AACvB,uBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,KAAK,KAAK,CAAC,EAAE,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAC,GAAG,KAAM,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,cAC9I,OAAO;AACN,uBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,KAAK,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,IAAI,IAAK,GAAG,KAAK,KAAK,CAAC,CAAC,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,cAC5J;AAAA,YACD;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,eAAe,SAAS,QAAQ,OAAO,MAAM;AAC5C,cAAI,gBAAgB,KAAK,KAAK,CAAC,GAAG,eAAe,KAAK,KAAK,CAAC;AAC5D,iBAAO,QAAQ,oBAAoB,CAAC;AACpC,cAAI,WAAW,cAAc,OAAO,MAAM;AAC1C,iBAAO,QAAQ,oBAAoB,CAAC;AACpC,iBAAO;AAAA,YAAQ;AAAA,cACd,IAAI;AAAA,gBACH,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK,CAAC,cAAc,QAAQ,CAAC,CAAC;AAAA,gBAC1D,MAAM;AAAA,gBACN;AAAA,cAAK;AAAA,YACN;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,oBAAoB;AAAA,UACnB,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,KAAK,kBAAkB,CAAC,IAAI,GAAG,KAAK,IAAI,MAAM,GAAE,IAAI,GAAG,KAAK,IAAI,MAAM,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,KAAK,kBAAkB,CAAC,IAAI,GAAG,KAAK,IAAI,MAAM,GAAE,IAAI,GAAG,KAAK,IAAI,MAAM,GAAE,IAAI,GAAG,KAAK,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QACzN;AAAA;AAAA,QAGA,oBAAoB,SAAS,QAAQ,OAAO,MAAM;AACjD,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAChE,cAAI,CAAC,GAAG,KAAK,cAAe,IAAK,GAAI;AACpC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,UACnE,OAAO;AACN,gBAAI,OAAO,YAAY,IAAI,IAAI,KAAK,UAAU,CAAC,GAAG,SAAS,GAAG;AAC7D,qBAAO,IAAI,IAAI,CAAC;AAAA,YACjB,CAAC,GAAG,IAAI;AACR,mBAAO,QAAQ,CAAC,IAAI;AAAA,cACnB,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC;AAAA,cAC9C,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAC;AAAA,UACH;AAAA,QACD;AAAA;AAAA,QAGA,gBAAgB,SAAS,QAAQ,OAAO,MAAM;AAC7C,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC,GAAG,MAAM,KAAK,KAAK,CAAC;AAChE,cAAG,GAAG,KAAK,YAAY,KAAK,GAAG;AAC9B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,WAAW,KAAK,GAAG;AACrC,mBAAO,YAAY,GAAG,MAAM,KAAK,WAAW,OAAO,KAAK,SAAS,CAAC;AAAA,UACnE,WAAU,CAAC,GAAG,KAAK,YAAY,GAAG,KAAK,CAAC,GAAG,KAAK,WAAW,GAAG,GAAG;AAChE,mBAAO,YAAY,GAAG,MAAM,KAAK,WAAW,KAAK,KAAK,SAAS,CAAC;AAAA,UACjE,OAAO;AACN,gBAAI,YAAY,IAAI,KAAK,UAAU,CAAC;AACpC,gBAAI,QAAQ,MAAM;AAClB,gBAAI,YAAY,IAAI,KAAK,MAAM;AAC/B,qBAAQA,KAAI,GAAGA,KAAI,UAAU,QAAQA,MAAK;AACzC,0BAAY,IAAI,KAAK,KAAK;AAAA,gBACzB,IAAI,KAAK,KAAK;AAAA,kBACb,IAAI,IAAI,UAAUA,EAAC,CAAC;AAAA,kBACpB,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,OAAO,KAAK,CAAC,CAAC;AAAA,gBAAC,CAAC;AAAA,gBAC1C;AAAA,cAAS,CAAC;AACZ;AAAA,YACD;AACA,gBAAI,WAAW,IAAI,KAAK,KAAK,CAAC,KAAK,IAAI,IAAI,OAAO,KAAK,CAAC,CAAC;AACzD,gBAAG,GAAG,KAAK,YAAY,GAAG,KAAK,IAAI,UAAU,OAAO;AACnD,qBAAO,QAAQ,CAAC,IAAI;AAAA,gBACnB,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK,CAAC,WAAW,QAAQ,CAAC,CAAC;AAAA,gBACvD,MAAM;AAAA,gBACN;AAAA,cACD,CAAC,CAAC;AAAA,YACH;AAAA,UACD;AAAA,QACD;AAAA;AAAA;AAAA,QAKA,YAAY,SAAS,QAAQ,OAAO,MAAM;AACzC,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC3C,cAAI,YAAY;AAChB,cAAG,GAAG,KAAK,QAAQ,IAAI,KAAK,KAAK,cAAc,OAAO;AACrD,gBAAG,CAAC,GAAG,KAAK,QAAQ,KAAK,KAAK,CAAC,CAAC,GAAG;AAClC,qBAAO,YAAY,GAAG,MAAM,KAAK,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AACxE;AAAA,YACD;AACA,wBAAY,KAAK,KAAK,CAAC,EAAE;AACzB,mBAAO,KAAK,KAAK,CAAC;AAAA,UACnB;AACA,cAAI,aAAa,OAAO,QAAQ,QAAQ,SAAS;AACjD,cAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACrC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,UACnE,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,KAAK,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACnE,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,UACnE,WAAU,KAAK,cAAc,SAAS,OAAO,QAAQ,QAAQ,OAAO,MAAM,eAAe,KAAK,SAAS,GAAG;AACzG,mBAAO,YAAY,GAAG,MAAM,WAAW,UAAU,qBAAqB,cAAc,KAAK,SAAS,GAAG,KAAK,SAAS,CAAC;AAAA,UACrH,WAAU,GAAG,KAAK,UAAU,UAAU,KAAK,WAAW,MAAM,KAAK,SAAS,GAAG;AAC5E,gBAAG,WAAW,oBAAoB,KAAK,SAAS,GAAG;AAClD,kBAAI,SAAS,CAAC;AACd,kBAAG,OAAO,WAAW,MAAM,KAAK,SAAS,MAAM,YAAY;AAC1D,uBAAO,YAAY,GAAG,MAAM,WAAW,UAAU,oBAAoB,cAAc,KAAK,SAAS,GAAG,KAAK,SAAS,CAAC;AACnH;AAAA,cACD;AACA,uBAAQA,KAAI,GAAGA,KAAI,WAAW,MAAM,KAAK,SAAS,EAAE,QAAQA,MAAK;AAChE,oBAAI,OAAO,WAAW,MAAM,KAAK,SAAS,EAAEA,EAAC;AAC7C,uBAAO,QAAQ,oBAAoB,CAAC;AACpC,uBAAO,KAAK,OAAO,MAAM;AACzB,oBAAG,KAAK,SAAS;AAChB,uBAAK,OAAO,IAAI,KAAK,MAAM;AAC5B,oBAAI,OAAO,IAAI,KAAK,KAAK;AAAA,kBACxB,IAAI,KAAK,KAAK,CAAC,KAAK,MAAM,IAAI,CAAC;AAAA,kBAC/B,IAAI,KAAK,KAAK,CAAC,KAAK,MAAM,IAAI,CAAC;AAAA,gBAChC,CAAC;AACD,uBAAO,KAAK,IAAI,MAAM,MAAM,KAAK,QAAQ,IAAI,GAAG,MAAM,cAAc,KAAK,CAAC;AAAA,cAC3E;AACA,qBAAO,QAAQ,MAAM;AAAA,YACtB,OAAO;AACN,qBAAO,YAAY,GAAG,MAAM,WAAW,UAAU,qBAAqB,cAAc,KAAK,SAAS,GAAG,KAAK,SAAS,CAAC;AAAA,YACrH;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,uBAAuB,SAAS,QAAQ,OAAO,MAAM;AACpD,cAAIO,aAAY,KAAK,KAAK,CAAC;AAC3B,cAAI;AACJ,cAAG,GAAG,KAAK,QAAQA,UAAS,KAAKA,WAAU,cAAc,OAAO;AAC/D,gBAAG,CAAC,GAAG,KAAK,QAAQA,WAAU,KAAK,CAAC,CAAC,GAAG;AACvC,qBAAO,YAAY,GAAG,MAAM,KAAK,UAAUA,WAAU,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AAC7E;AAAA,YACD;AACA,wBAAYA,WAAU,KAAK,CAAC,EAAE;AAC9B,YAAAA,aAAYA,WAAU,KAAK,CAAC;AAAA,UAC7B,OAAO;AACN,wBAAY;AAAA,UACb;AACA,cAAG,CAAC,GAAG,KAAK,YAAYA,UAAS,MAAM,CAAC,GAAG,KAAK,YAAYA,UAAS,KAAKA,WAAU,cAAc,QAAQ;AACzG,mBAAO,YAAY,GAAG,MAAM,KAAM,uBAAuBA,YAAW,KAAK,SAAS,CAAC;AAAA,UACpF,WAAU,CAAC,GAAG,KAAK,YAAaA,UAAU,KAAK,CAAC,GAAG,KAAK,YAAYA,WAAU,KAAK,CAAC,CAAC,KAAK,CAAC,GAAG,KAAK,QAAQA,WAAU,KAAK,CAAC,CAAC,GAAG;AAC9H,mBAAO,YAAY,GAAG,MAAM,KAAM,QAAQA,WAAU,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AAAA,UAC7E,WAAU,CAAC,GAAG,KAAK,YAAYA,UAAS,KAAK,CAAC,GAAG,KAAK,YAAYA,WAAU,KAAK,CAAC,CAAC,KAAK,CAAC,GAAG,KAAK,WAAWA,WAAU,KAAK,CAAC,CAAC,GAAG;AAC/H,mBAAO,YAAY,GAAG,MAAM,KAAK,WAAWA,WAAU,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AAAA,UAC/E,WAAU,CAAC,GAAG,KAAK,YAAYA,UAAS,KAAK,GAAG,KAAK,WAAWA,WAAU,KAAK,CAAC,CAAC,KAAKA,WAAU,KAAK,CAAC,EAAE,QAAQ,GAAG;AAClH,mBAAO,YAAY,GAAG,MAAM,OAAO,sBAAsBA,WAAU,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AAAA,UAC5F,OAAO;AACN,gBAAI,SAAS,CAAC;AACd,gBAAI,aAAa,OAAO,QAAQ,QAAQ,SAAS;AACjD,gBAAG,GAAG,KAAK,UAAU,UAAU,GAAG;AACjC,uBAAQ,QAAQ,WAAW,OAAO;AACjC,oBAAG,CAAC,WAAW,MAAM,eAAe,IAAI;AACvC;AACD,oBAAI,YAAY,cAAc,IAAI;AAClC,oBAAI,OAAO,IAAI,KAAK,KAAK,CAAC,WAAWA,UAAS,CAAC;AAC/C,uBAAO,KAAK,IAAI,MAAM,MAAM,KAAK,QAAQ,IAAI,GAAG,MAAM,cAAc,KAAK,CAAC;AAAA,cAC3E;AACA,qBAAO,QAAQ,MAAM;AAAA,YACtB;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,oBAAoB,SAAS,QAAQ,OAAO,MAAM;AACjD,cAAI,YAAY,KAAK,KAAK,CAAC;AAC3B,cAAG,CAAC,GAAG,KAAK,YAAY,SAAS,KAAK,CAAC,GAAG,KAAK,QAAQ,SAAS,GAAG;AAClE,mBAAO,YAAY,GAAG,MAAM,KAAK,QAAQ,WAAW,KAAK,SAAS,CAAC;AAAA,UACpE,OAAO;AACN,gBAAG,GAAG,KAAK,YAAY,SAAS,GAAG;AAClC,kBAAI,SAAS,CAAC;AACd,uBAAQ,QAAQ,OAAO,QAAQ,SAAS;AACvC,oBAAG,CAAC,OAAO,QAAQ,QAAQ,eAAe,IAAI;AAC7C;AACD,uBAAO,KAAK,IAAI;AAAA,kBACf,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK,CAAC,WAAW,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC;AAAA,kBAC7D,MAAM;AAAA,kBACN;AAAA,gBACD,CAAC;AAAA,cACF;AACA,qBAAO,QAAQ,MAAM;AAAA,YACtB,OAAO;AACN,kBAAG,OAAO,QAAQ,QAAQ,eAAe,UAAU,EAAE;AACpD,uBAAO,QAAQ,KAAK;AAAA,YACtB;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,wBAAwB,SAAS,QAAQ,OAAO,MAAM;AACrD,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC;AAC/C,cAAI;AACJ,cAAG,GAAG,KAAK,QAAQ,IAAI,KAAK,KAAK,cAAc,OAAO;AACrD,gBAAG,CAAC,GAAG,KAAK,QAAQ,KAAK,KAAK,CAAC,CAAC,GAAG;AAClC,qBAAO,YAAY,GAAG,MAAM,KAAK,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AACxE;AAAA,YACD;AACA,wBAAY,KAAK,KAAK,CAAC,EAAE;AACzB,mBAAO,KAAK,KAAK,CAAC;AAAA,UACnB;AACA,cAAG,CAAC,GAAG,KAAK,YAAY,IAAI,KAAK,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AAC5D,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,UACnE,WAAU,CAAC,GAAG,KAAK,YAAY,QAAQ,KAAK,CAAC,GAAG,KAAK,sBAAsB,QAAQ,GAAG;AACrF,mBAAO,YAAY,GAAG,MAAM,OAAO,sBAAsB,UAAU,KAAK,SAAS,CAAC;AAAA,UACnF,OAAO;AACN,gBAAI,aAAa,YAAY,OAAO,QAAQ,QAAQ,SAAS,IAAI,OAAO,QAAQ,QAAQ;AACxF,gBAAI,SAAS,CAAC;AAEd,gBAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAE7B,kBAAG,CAAC,WAAW;AACd,yBAAQ,QAAQ,GAAG,QAAQ,OAAO;AACjC,sBAAG,CAAC,GAAG,QAAQ,MAAM,eAAe,IAAI;AACvC;AACD,sBAAIA,aAAY,cAAc,IAAI;AAClC,sBAAI,OAAO,CAAC;AACZ,2BAAQP,KAAI,GAAGA,KAAIO,WAAU,KAAK,CAAC,EAAE,OAAOP;AAC3C,yBAAK,KAAK,OAAO,mBAAmB,CAAC;AACtC,sBAAI,YAAY,IAAI,KAAKO,WAAU,KAAK,CAAC,EAAE,IAAI,IAAI;AACnD,sBAAI,qBAAqB;AAAA,oBACxB,IAAI,KAAK,QAAQ;AAAA,oBACjB,IAAI,KAAK,UAAU;AAAA,oBACnB,IAAI,KAAK,aAAa;AAAA,kBACvB;AACA,sBAAG,GAAG,QAAQ,gBAAgB,eAAe,IAAI;AAChD,uCAAmB,KAAK,IAAI,KAAK,kBAAkB;AAAA,sBAClD,GAAG,QAAQ,gBAAgB,IAAI;AAAA,oBAChC,CAAC,CAAC;AAEH,2BAAQP,KAAI,GAAGA,KAAI,mBAAmB,QAAQA,MAAK;AAClD,wBAAG,GAAG,KAAK,YAAY,QAAQ,KAAK,mBAAmBA,EAAC,EAAE,cAAc,SAAS,WAAW;AAC3F,6BAAO,KAAK,IAAI;AAAA,wBACf,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK;AAAA,0BAChC,IAAI,KAAK,KAAK,CAAC,MAAM,SAAS,CAAC;AAAA,0BAC/B,IAAI,KAAK,KAAK,CAAC,UAAU,mBAAmBA,EAAC,CAAC,CAAC;AAAA,wBAChD,CAAC,CAAC;AAAA,wBACF,MAAM;AAAA,wBACN;AAAA,sBACD,CAAC;AAAA,oBACF;AAAA,kBACD;AAAA,gBACD;AAAA,cACD;AAEA,kBAAG,GAAG,KAAK,UAAU,UAAU,GAAG;AACjC,yBAAQ,QAAQ,WAAW,OAAO;AACjC,sBAAG,CAAC,WAAW,MAAM,eAAe,IAAI;AACvC;AACD,sBAAIO,aAAY,cAAc,IAAI;AAClC,sBAAI,OAAO,CAAC;AACZ,2BAAQP,KAAI,GAAGA,KAAIO,WAAU,KAAK,CAAC,EAAE,OAAOP;AAC3C,yBAAK,KAAK,OAAO,mBAAmB,CAAC;AACtC,sBAAI,YAAY,IAAI,KAAKO,WAAU,KAAK,CAAC,EAAE,IAAI,IAAI;AACnD,sBAAI,qBAAqB,CAAC;AAC1B,sBAAG,OAAO,oBAAoB,MAAM,SAAS;AAC5C,uCAAmB,KAAK,IAAI,KAAK,SAAS,CAAC;AAAA;AAE3C,uCAAmB,KAAK,IAAI,KAAK,QAAQ,CAAC;AAC3C,sBAAG,WAAW,MAAM,IAAI,aAAa;AACpC,uCAAmB,KAAK,IAAI,KAAK,aAAa,CAAC;AAChD,sBAAG,OAAO,uBAAuB,MAAM,SAAS;AAC/C,uCAAmB,KAAK,IAAI,KAAK,WAAW,CAAC;AAC9C,sBAAG,WAAW,gBAAgB,eAAe,IAAI;AAChD,uCAAmB,KAAK,IAAI,KAAK,kBAAkB;AAAA,sBAClD,WAAW,gBAAgB,IAAI;AAAA,oBAChC,CAAC,CAAC;AAEH,2BAAQP,KAAI,GAAGA,KAAI,mBAAmB,QAAQA,MAAK;AAClD,wBAAG,GAAG,KAAK,YAAY,QAAQ,KAAK,mBAAmBA,EAAC,EAAE,cAAc,SAAS,WAAW;AAC3F,6BAAO,KAAK,IAAI;AAAA,wBACf,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK;AAAA,0BAChC,IAAI,KAAK,KAAK,CAAC,MAAM,SAAS,CAAC;AAAA,0BAC/B,IAAI,KAAK,KAAK,CAAC,UAAU,mBAAmBA,EAAC,CAAC,CAAC;AAAA,wBAChD,CAAC,CAAC;AAAA,wBACF,MAAM;AAAA,wBACN;AAAA,sBACD,CAAC;AAAA,oBACF;AAAA,kBACD;AAAA,gBACD;AAAA,cACD;AAAA,YAED,OAAO;AACN,kBAAI,UAAU,CAAC,aAAa,GAAG,KAAK,WAAW,IAAI;AACnD,kBAAI,YAAY,UAAU,GAAG,QAAQ,MAAM,KAAK,SAAS,IAAI,WAAW,MAAM,KAAK,SAAS;AAC5F,2BAAa,UAAU,GAAG,UAAU;AACpC,kBAAG,WAAW;AACb,oBAAI;AACJ,oBAAG,SAAS;AACX,uCAAqB;AAAA,oBACpB,IAAI,KAAK,QAAQ;AAAA,oBACjB,IAAI,KAAK,UAAU;AAAA,oBACnB,IAAI,KAAK,aAAa;AAAA,kBACvB;AAAA,gBACD,OAAO;AACN,uCAAqB,CAAC;AACtB,sBAAG,OAAO,oBAAoB,KAAK,WAAW,SAAS;AACtD,uCAAmB,KAAK,IAAI,KAAK,SAAS,CAAC;AAAA;AAE3C,uCAAmB,KAAK,IAAI,KAAK,QAAQ,CAAC;AAC3C,sBAAG,qBAAqB;AACvB,uCAAmB,KAAK,IAAI,KAAK,aAAa,CAAC;AAChD,sBAAG,OAAO,uBAAuB,KAAK,WAAW,SAAS;AACzD,uCAAmB,KAAK,IAAI,KAAK,WAAW,CAAC;AAAA,gBAC/C;AACA,oBAAG,WAAW,gBAAgB,eAAe,KAAK,SAAS;AAC1D,qCAAmB,KAAK,IAAI,KAAK,kBAAkB;AAAA,oBAClD,WAAW,gBAAgB,KAAK,SAAS;AAAA,kBAC1C,CAAC,CAAC;AACH,oBAAI,OAAO,CAAC;AACZ,yBAAQA,KAAI,GAAGA,KAAI,KAAK,KAAK,QAAQA;AACpC,uBAAK,KAAK,OAAO,mBAAmB,CAAC;AACtC,oBAAI,YAAY,IAAI,KAAK,KAAK,IAAI,IAAI;AAEtC,yBAAQA,KAAI,GAAGA,KAAI,mBAAmB,QAAQA,MAAK;AAClD,sBAAG,GAAG,KAAK,YAAY,QAAQ,KAAK,mBAAmBA,EAAC,EAAE,cAAc,SAAS,WAAW;AAC3F,2BAAO,KAAK,IAAI;AAAA,sBACf,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK;AAAA,wBAChC,IAAI,KAAK,KAAK,CAAC,MAAM,SAAS,CAAC;AAAA,wBAC/B,IAAI,KAAK,KAAK,CAAC,UAAU,mBAAmBA,EAAC,CAAC,CAAC;AAAA,sBAChD,CAAC,CAAC;AAAA,sBACF,MAAM;AAAA,sBACN;AAAA,oBACD,CAAC;AAAA,kBACF;AAAA,gBACD;AAAA,cACD;AAAA,YACD;AACA,mBAAO,QAAQ,MAAM;AAAA,UACtB;AAAA,QACD;AAAA;AAAA,QAGA,aAAa,SAAU,QAAQ,OAAO,MAAO;AAC5C,cAAI,iBAAiB,KAAK,iBAAiB,KAAK,iBAAiB;AACjE,cAAIQ,SAAQ,CAAC;AACb,cAAG,GAAG,KAAK,UAAU,OAAO,QAAQ,QAAQ,cAAc,CAAC,GAAG;AAC7D,YAAAA,SAAQ,OAAO,QAAQ,QAAQ,cAAc,EAAE;AAAA,UAChD;AACA,cAAI,MAAM;AACV,mBAAQD,cAAaC,QAAO;AAC3B,gBAAG,CAACA,OAAM,eAAeD,UAAS,EAAG;AACrC,gBAAI,YAAYC,OAAMD,UAAS;AAC/B,mBAAO,OAAOA,aAAY;AAC1B,gBAAG,qBAAqB,OAAO;AAC9B,uBAAQP,KAAI,GAAGA,KAAI,UAAU,QAAQA;AACpC,uBAAO,UAAUA,EAAC,EAAE,SAAU,EAAC,SAAS,OAAO,QAAO,CAAE,IAAI;AAAA,YAC9D,OAAO;AACN,qBAAO,SAAS,UAAU,SAAS,IAAI;AAAA,YACxC;AACA,mBAAO;AAAA,UACR;AACA,iBAAO,QAAS,CAAC,IAAI;AAAA,YACpB,MAAM,KAAK,QAAQ,IAAI,KAAK,SAAS,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,YACzD,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAE;AAAA,QACJ;AAAA;AAAA,QAGA,aAAa,SAAU,QAAQ,OAAO,MAAO;AAC5C,cAAIO,aAAY,KAAK,KAAK,CAAC;AAC3B,cAAI,iBAAiB;AACrB,cAAGA,WAAU,cAAc,OAAO;AACjC,6BAAiBA,WAAU,KAAK,CAAC,EAAE;AACnC,YAAAA,aAAYA,WAAU,KAAK,CAAC;AAAA,UAC7B;AACA,cAAG,GAAG,KAAK,YAAYA,UAAS,GAAG;AAClC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAU,CAAC,GAAG,KAAK,uBAAuBA,UAAS,GAAG;AACrD,mBAAO,YAAa,GAAG,MAAM,KAAM,uBAAuBA,YAAW,KAAK,SAAU,CAAE;AAAA,UACvF,OAAO;AACN,gBAAIC,SAAQ,CAAC;AACb,gBAAG,GAAG,KAAK,UAAU,OAAO,QAAQ,QAAQ,cAAc,CAAC,GAAG;AAC7D,cAAAA,SAAQ,OAAO,QAAQ,QAAQ,cAAc,EAAE;AAAA,YAChD;AACA,gBAAI,MAAM;AACV,gBAAIO,iBAAgBR,WAAU,KAAK,CAAC,EAAE,KAAK,MAAMA,WAAU,KAAK,CAAC,EAAE;AACnE,gBAAGC,OAAM,eAAeO,cAAa,GAAG;AACvC,kBAAI,YAAYP,OAAMO,cAAa;AACnC,kBAAG,qBAAqB,OAAO;AAC9B,yBAAQf,KAAI,GAAGA,KAAI,UAAU,QAAQA;AACpC,yBAAO,UAAUA,EAAC,EAAE,SAAU,EAAC,SAAS,OAAO,QAAO,CAAE,IAAI;AAAA,cAC9D,OAAO;AACN,uBAAO,SAAS,UAAU,SAAS,IAAI;AAAA,cACxC;AACA,qBAAO;AAAA,YACR;AACA,mBAAO,QAAS,CAAC,IAAI;AAAA,cACpB,MAAM,KAAK,QAAQ,IAAI,KAAK,SAAS,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,cACzD,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAE;AAAA,UACJ;AAAA,QACD;AAAA;AAAA;AAAA,QAKA,UAAU,SAAU,QAAQ,OAAO,MAAO;AACzC,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC;AAC/C,cAAI,GAAG,KAAK,YAAa,IAAK,GAAI;AACjC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,QAAS,KAAK,CAAC,GAAG,KAAK,cAAe,QAAS,GAAI;AACnF,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,UAAU,KAAK,SAAU,CAAE;AAAA,UACvE,OAAO;AACN,gBAAI,MAAM,CAAC;AACX,gBAAI,UAAU;AACd,mBAAO,QAAQ,cAAc,OAAQ;AACpC,kBAAI,KAAM,QAAQ,KAAK,CAAC,CAAE;AAC1B,wBAAU,QAAQ,KAAK,CAAC;AAAA,YACzB;AACA,gBAAI,GAAG,KAAK,YAAa,OAAQ,GAAI;AACpC,qBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,YAC9D,WAAW,CAAC,GAAG,KAAK,cAAe,OAAQ,GAAI;AAC9C,qBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,YACnE,OAAO;AACN,kBAAI,aAAa,IAAI,KAAM,GAAG,OAAQ;AACtC,uBAASA,KAAI,WAAW,SAAO,GAAGA,KAAI,GAAGA,MAAM;AAC9C,oBAAI,WAAWA,EAAC,EAAE,OAAO,WAAWA,KAAE,CAAC,CAAC;AACvC,6BAAW,OAAOA,IAAE,CAAC;AAAA,cACvB;AACA,kBAAI,cAAc,IAAI,KAAM,IAAK;AACjC,uBAASA,KAAI,WAAW,SAAO,GAAGA,MAAK,GAAGA,MAAM;AAC/C,8BAAc,IAAI,KAAM,KAAK,CAAC,WAAWA,EAAC,GAAG,WAAW,CAAE;AAAA,cAC3D;AACA,qBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,aAAa,QAAQ,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YAC1H;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,aAAa,SAAU,QAAQ,OAAO,MAAO;AAC5C,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC;AAC/C,cAAI,GAAG,KAAK,YAAa,IAAK,GAAI;AACjC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,QAAS,KAAK,CAAC,GAAG,KAAK,cAAe,QAAS,GAAI;AACnF,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,UAAU,KAAK,SAAU,CAAE;AAAA,UACvE,OAAO;AACN,gBAAI,MAAM,CAAC;AACX,gBAAI;AACJ,gBAAI,UAAU;AACd,mBAAO,QAAQ,cAAc,OAAQ;AACpC,qBAAO,QAAQ,KAAK,CAAC;AACrB,kBAAI,GAAG,KAAK,YAAa,IAAK,GAAI;AACjC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,cACD,WAAW,CAAC,GAAG,KAAK,QAAS,IAAK,KAAK,KAAK,cAAc,OAAQ;AACjE,uBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAClE;AAAA,cACD;AACA,mBAAK,KAAK,CAAC,EAAE,OAAO,KAAK,KAAK,CAAC;AAC/B,kBAAI,KAAM,KAAK,KAAK,CAAC,CAAE;AACvB,wBAAU,QAAQ,KAAK,CAAC;AAAA,YACzB;AACA,gBAAI,GAAG,KAAK,YAAa,OAAQ,GAAI;AACpC,qBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,YAC9D,WAAW,CAAC,GAAG,KAAK,cAAe,OAAQ,GAAI;AAC9C,qBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,YACnE,OAAO;AACN,kBAAG,CAAC,GAAG,KAAK,YAAY,QAAQ,GAAG;AAClC,oBAAI,UAAU;AACd,uBAAM,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,OAAO;AAC9D,sBAAI,OAAO,QAAQ,KAAK,CAAC;AACzB,sBAAG,CAAC,GAAG,KAAK,YAAY,IAAI,MAAM,CAAC,GAAG,KAAK,QAAQ,IAAI,KAAK,KAAK,cAAc,QAAQ;AACtF,2BAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAClE;AAAA,kBACD;AACA,4BAAU,QAAQ,KAAK,CAAC;AAAA,gBACzB;AACA,oBAAG,CAAC,GAAG,KAAK,YAAY,OAAO,KAAK,CAAC,GAAG,KAAK,cAAc,OAAO,GAAG;AACpE,yBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,UAAU,KAAK,SAAU,CAAE;AACtE;AAAA,gBACD;AAAA,cACD;AACA,kBAAI,aAAa,IAAI,KAAM,GAAG,OAAQ;AACtC,kBAAI,cAAc,IAAI,GAAG,KAAK,KAAM,IAAK;AACzC,uBAASA,KAAI,WAAW,SAAS,GAAGA,MAAK,GAAGA,MAAM;AACjD,8BAAc,IAAI,GAAG,KAAK,KAAM,KAAK,CAAC,IAAI,GAAG,KAAK,KAAM,KAAK,CAAC,WAAWA,EAAC,GAAG,WAAWA,EAAC,EAAE,IAAI,CAAE,GAAG,WAAW,CAAE;AACjH,uBAAO,WAAWA,EAAC,EAAE;AAAA,cACtB;AACA,qBAAO,QAAS,CAAC,IAAI,GAAG,KAAK,MAAO,MAAM,KAAK,QAAS,IAAI,GAAG,KAAK,KAAM,KAAK,CAAC,aAAa,QAAQ,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YAC1I;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,cAAc,SAAS,QAAQ,OAAO,MAAM;AAC3C,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC;AAC/C,cAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,QAAQ,KAAK,CAAC,GAAG,KAAK,cAAc,QAAQ,GAAG;AAC7E,mBAAO,YAAY,GAAG,MAAM,KAAK,QAAQ,UAAU,KAAK,SAAS,CAAC;AAAA,UACnE,OAAO;AACN,gBAAI,OAAO,CAAC;AACZ,gBAAI,SAAS,CAAC;AACd,gBAAI,UAAU;AACd,mBAAM,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,OAAO;AAC9D,kBAAI,OAAO,QAAQ,KAAK,CAAC;AACzB,kBAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,uBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AACzD;AAAA,cACD,WAAU,CAAC,GAAG,KAAK,QAAQ,IAAI,KAAK,KAAK,cAAc,OAAO;AAC7D,uBAAO,YAAY,GAAG,MAAM,KAAK,QAAQ,MAAM,KAAK,SAAS,CAAC;AAC9D;AAAA,cACD;AACA,kBAAI,MAAM,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AAC3C,kBAAI,QAAQ;AACZ,uBAAQA,KAAI,GAAGA,KAAI,KAAK,QAAQA,MAAK;AACpC,oBAAG,GAAG,QAAQ,KAAK,KAAKA,EAAC,CAAC,MAAM,GAAG;AAClC,0BAAQA;AACR;AAAA,gBACD;AAAA,cACD;AACA,kBAAG,UAAU,IAAI;AAChB,wBAAQ,KAAK;AACb,qBAAK,KAAK,GAAG;AACb,uBAAO,KAAK,CAAC,CAAC;AAAA,cACf;AACA,qBAAO,KAAK,EAAE,KAAK,KAAK;AACxB,wBAAU,QAAQ,KAAK,CAAC;AAAA,YACzB;AACA,gBAAG,GAAG,KAAK,YAAY,OAAO,GAAG;AAChC,qBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,YAC1D,WAAU,CAAC,GAAG,KAAK,cAAc,OAAO,GAAG;AAC1C,qBAAO,YAAY,GAAG,MAAM,KAAK,QAAQ,MAAM,KAAK,SAAS,CAAC;AAAA,YAC/D,OAAO;AACN,kBAAG,CAAC,GAAG,KAAK,YAAY,QAAQ,GAAG;AAClC,oBAAI,UAAU;AACd,uBAAM,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,OAAO;AAC9D,sBAAI,OAAO,QAAQ,KAAK,CAAC;AACzB,sBAAG,CAAC,GAAG,KAAK,YAAY,IAAI,MAAM,CAAC,GAAG,KAAK,QAAQ,IAAI,KAAK,KAAK,cAAc,QAAQ;AACtF,2BAAO,YAAY,GAAG,MAAM,KAAK,QAAQ,MAAM,KAAK,SAAS,CAAC;AAC9D;AAAA,kBACD;AACA,4BAAU,QAAQ,KAAK,CAAC;AAAA,gBACzB;AACA,oBAAG,CAAC,GAAG,KAAK,YAAY,OAAO,KAAK,CAAC,GAAG,KAAK,cAAc,OAAO,GAAG;AACpE,yBAAO,YAAY,GAAG,MAAM,KAAK,QAAQ,UAAU,KAAK,SAAS,CAAC;AAClE;AAAA,gBACD;AAAA,cACD;AACA,sBAAQ,IAAI,KAAK,MAAM,CAAC,CAAC;AACzB,uBAAQA,KAAI,KAAK,SAAO,GAAGA,MAAK,GAAGA;AAClC,wBAAQ,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,KAAKA,EAAC,GAAG,YAAY,OAAOA,EAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;AAChF,qBAAO,QAAQ;AAAA,gBACd,IAAI;AAAA,kBACH,MAAM,KAAK,QAAQ,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,UAAU,KAAK,CAAC,CAAC;AAAA,kBAC3D,MAAM;AAAA,kBACN;AAAA,gBACD;AAAA,cACD,CAAC;AAAA,YACF;AAAA,UACD;AAAA,QACD;AAAA;AAAA;AAAA,QAKA,aAAa,SAAS,QAAQ,OAAO,MAAM;AAC1C,cAAI,SAAS,KAAK,KAAK,CAAC;AACxB,cAAI,YAAY;AAChB,cAAG,GAAG,KAAK,QAAQ,MAAM,KAAK,OAAO,cAAc,OAAO;AACzD,wBAAY,OAAO,KAAK,CAAC,EAAE;AAC3B,qBAAS,OAAO,KAAK,CAAC;AAAA,UACvB;AACA,cAAG,GAAG,KAAK,YAAY,MAAM,GAAG;AAC/B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,MAAM,GAAG;AACvC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,QAAQ,KAAK,SAAS,CAAC;AAAA,UACrE,OAAO;AACN,gBAAI,MAAM,MAAM;AAChB,gBAAG,OAAO,cAAc,QAAQ;AAC/B,qBAAO,OAAO,KAAK,CAAC;AACpB,qBAAO,gBAAgB,OAAO,KAAK,CAAC,CAAC;AAAA,YACtC,OAAO;AACN,qBAAO;AACP,qBAAO;AAAA,YACR;AACA,gBAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,qBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,YAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACrC,qBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,YACnE,WAAU,SAAS,QAAQ,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACtD,qBAAO,YAAa,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,YACpE,YAAW,CAAC,GAAG,KAAK,UAAU,OAAO,QAAQ,QAAQ,SAAS,CAAC,KAC5D,OAAO,oBAAoB,KAAK,WAAW,SAAS,MACpD,KAAK,cAAc,SACnB,CAAC,OAAO,QAAQ,QAAQ,OAAO,MAAM,eAAe,KAAK,SAAS,GAAG;AACvE,kBAAG,CAAC,GAAG,KAAK,UAAU,OAAO,QAAQ,QAAQ,SAAS,CAAC,GAAG;AACzD,6BAAa,IAAI,OAAO,WAAW,CAAC,GAAG,OAAO,EAAC,SAAS,OAAO,QAAO,CAAC;AACvE,uBAAO,QAAQ,QAAQ,SAAS,IAAI;AAAA,cACrC,OAAO;AACN,6BAAa,OAAO,QAAQ,QAAQ,SAAS;AAAA,cAC9C;AACA,kBAAG,WAAW,MAAM,KAAK,SAAS,MAAM;AACvC,2BAAW,MAAM,KAAK,SAAS,IAAI,CAAC;AACrC,yBAAW,kBAAkB,KAAK,SAAS,IAAI;AAC/C,yBAAW,MAAM,KAAK,SAAS,IAAI,CAAC,IAAI,KAAK,MAAM,MAAM,IAAI,CAAC,EAAE,OAAO,WAAW,MAAM,KAAK,SAAS,CAAC;AACvG,yBAAW,yBAAyB,KAAK,SAAS;AAClD,qBAAO,QAAQ,KAAK;AAAA,YACrB,OAAO;AACN,qBAAO,YAAY,GAAG,MAAM,WAAW,UAAU,oBAAoB,cAAc,KAAK,SAAS,GAAG,KAAK,SAAS,CAAC;AAAA,YACpH;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,aAAa,SAAS,QAAQ,OAAO,MAAM;AAC1C,cAAI,SAAS,KAAK,KAAK,CAAC;AACxB,cAAI,YAAY;AAChB,cAAG,GAAG,KAAK,QAAQ,MAAM,KAAK,OAAO,cAAc,OAAO;AACzD,wBAAY,OAAO,KAAK,CAAC,EAAE;AAC3B,qBAAS,OAAO,KAAK,CAAC;AAAA,UACvB;AACA,cAAG,GAAG,KAAK,YAAY,MAAM,GAAG;AAC/B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,MAAM,GAAG;AACvC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,QAAQ,KAAK,SAAS,CAAC;AAAA,UACrE,OAAO;AACN,gBAAI,MAAM,MAAM;AAChB,gBAAG,OAAO,cAAc,QAAQ;AAC/B,qBAAO,OAAO,KAAK,CAAC;AACpB,qBAAO,gBAAgB,OAAO,KAAK,CAAC,CAAC;AAAA,YACtC,OAAO;AACN,qBAAO;AACP,qBAAO;AAAA,YACR;AACA,gBAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,qBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,YAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACrC,qBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,YACnE,WAAU,SAAS,QAAQ,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACtD,qBAAO,YAAa,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,YACpE,YAAW,CAAC,GAAG,KAAK,UAAU,OAAO,QAAQ,QAAQ,SAAS,CAAC,KAC5D,OAAO,oBAAoB,KAAK,WAAW,SAAS,MACpD,KAAK,cAAc,SACnB,CAAC,OAAO,QAAQ,QAAQ,OAAO,MAAM,eAAe,KAAK,SAAS,GAAG;AACvE,kBAAG,CAAC,GAAG,KAAK,UAAU,OAAO,QAAQ,QAAQ,SAAS,CAAC,GAAG;AACzD,6BAAa,IAAI,OAAO,WAAW,CAAC,GAAG,OAAO,EAAC,SAAS,OAAO,QAAO,CAAC;AACvE,uBAAO,QAAQ,QAAQ,SAAS,IAAI;AAAA,cACrC,OAAO;AACN,6BAAa,OAAO,QAAQ,QAAQ,SAAS;AAAA,cAC9C;AACA,kBAAG,WAAW,MAAM,KAAK,SAAS,MAAM;AACvC,2BAAW,MAAM,KAAK,SAAS,IAAI,CAAC;AACrC,yBAAW,kBAAkB,KAAK,SAAS,IAAI;AAC/C,yBAAW,MAAM,KAAK,SAAS,EAAE,KAAK,IAAI,KAAK,MAAM,MAAM,IAAI,CAAC;AAChE,yBAAW,yBAAyB,KAAK,SAAS;AAClD,qBAAO,QAAQ,KAAK;AAAA,YACrB,OAAO;AACN,qBAAO,YAAY,GAAG,MAAM,WAAW,UAAU,oBAAoB,cAAc,KAAK,SAAS,GAAG,KAAK,SAAS,CAAC;AAAA,YACpH;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,aAAa,SAAS,QAAQ,OAAO,MAAM;AAC1C,cAAI,SAAS,KAAK,KAAK,CAAC;AACxB,cAAG,GAAG,KAAK,YAAY,MAAM,GAAG;AAC/B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,MAAM,GAAG;AACvC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,QAAQ,KAAK,SAAS,CAAC;AAAA,UACrE,OAAO;AACN,gBAAI,MAAM,MAAM,aAAa;AAC7B,gBAAG,OAAO,cAAc,OAAO;AAC9B,4BAAc,OAAO,KAAK,CAAC;AAC3B,uBAAS,OAAO,KAAK,CAAC;AACtB,kBAAG,CAAC,GAAG,KAAK,QAAQ,WAAW,GAAG;AACjC,uBAAO,YAAY,GAAG,MAAM,KAAK,UAAU,aAAa,KAAK,SAAS,CAAC;AACvE;AAAA,cACD;AAAA,YACD,OAAO;AACN,4BAAc,IAAI,KAAK,MAAM;AAAA,YAC9B;AACA,gBAAG,OAAO,cAAc,QAAQ;AAC/B,qBAAO,OAAO,KAAK,CAAC;AACpB,qBAAO,OAAO,KAAK,CAAC;AAAA,YACrB,OAAO;AACN,qBAAO;AACP,qBAAO,IAAI,KAAK,MAAM;AAAA,YACvB;AACA,gBAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,qBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AACzD;AAAA,YACD,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACrC,qBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAClE;AAAA,YACD;AACA,wBAAY,YAAY;AACxB,gBAAI,aAAa,OAAO,QAAQ,QAAQ,SAAS;AACjD,gBAAG,CAAC,GAAG,KAAK,UAAU,UAAU;AAC/B;AACD,gBAAG,CAAC,MAAM,SAAS;AAClB,kBAAG,OAAO,oBAAoB,KAAK,WAAW,SAAS,KACpD,KAAK,cAAc,SACnB,CAAC,OAAO,QAAQ,QAAQ,OAAO,MAAM,eAAe,KAAK,SAAS,GAAG;AACvE,oBAAG,WAAW,MAAM,KAAK,SAAS,MAAM,QAAW;AAClD,sBAAI,SAAS,CAAC;AACd,sBAAG,OAAO,WAAW,MAAM,KAAK,SAAS,MAAM,YAAY;AAC1D,2BAAO,YAAY,GAAG,MAAM,WAAW,UAAU,oBAAoB,cAAc,KAAK,SAAS,GAAG,KAAK,SAAS,CAAC;AACnH;AAAA,kBACD;AACA,2BAAQA,KAAI,GAAGA,KAAI,WAAW,MAAM,KAAK,SAAS,EAAE,QAAQA,MAAK;AAChE,2BAAO,QAAQ,oBAAoB,CAAC;AACpC,wBAAI,QAAQ,WAAW,MAAM,KAAK,SAAS,EAAEA,EAAC;AAC9C,wBAAI,OAAO,MAAM,OAAO,MAAM;AAC9B,wBAAG,KAAK,SAAS;AAChB,2BAAK,OAAO,IAAI,KAAK,QAAQ,CAAC,CAAC;AAChC,wBAAI,eAAe,OAAO,SAAS,cAAc,EAAE,cAAc;AACjE,wBAAI,MAAM,GAAG,MAAM,IAAI,KAAK,KAAK,CAAC,MAAM,IAAI,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,IAAI,CAAC,GAAG,YAAY;AACnG,wBAAG,QAAQ,MAAM;AAChB,0BAAI,QAAQ,IAAI;AAAA,wBACf,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK;AAAA,0BAChC,IAAI,KAAK,KAAK;AAAA,4BACb;AAAA,4BACA,IAAI,KAAK,WAAW,CAAC,IAAI,KAAK,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;AAAA,0BACnD,CAAC;AAAA,0BACD,IAAI,KAAK,KAAK;AAAA,4BACb,IAAI,KAAK,KAAK,CAAC,MAAM,KAAK,IAAI,CAAC;AAAA,4BAC/B,IAAI,KAAK,KAAK,CAAC,MAAM,KAAK,IAAI,CAAC;AAAA,0BAChC,CAAC;AAAA,wBACF,CAAC,CAAC;AAAA,wBAAG,MAAM;AAAA,wBAAc;AAAA,sBAAK;AAC/B,4BAAM,UAAU;AAChB,6BAAO,KAAK,KAAK;AAAA,oBAClB;AAAA,kBACD;AACA,yBAAO,QAAQ,MAAM;AAAA,gBACtB;AAAA,cACD,OAAO;AACN,uBAAO,YAAY,GAAG,MAAM,WAAW,UAAU,oBAAoB,cAAc,KAAK,SAAS,GAAG,KAAK,SAAS,CAAC;AAAA,cACpH;AAAA,YACD,OAAO;AACN,sBAAQ,QAAQ,OAAO,KAAK,WAAW,MAAM,SAAS,UAAU;AAAA,YACjE;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,gBAAgB,SAAS,QAAQ,OAAO,MAAM;AAC7C,cAAI,OAAO,KAAK,KAAK,CAAC;AACtB,cAAI,iBAAiB;AACrB,cAAG,GAAG,KAAK,QAAQ,IAAI,KAAK,KAAK,cAAc,OAAO;AACrD,6BAAiB,KAAK,KAAK,CAAC,EAAE;AAC9B,mBAAO,KAAK,KAAK,CAAC;AAAA,UACnB;AACA,cAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AACrC,mBAAO,YAAY,GAAG,MAAM,KAAK,YAAY,MAAM,KAAK,SAAS,CAAC;AAAA,UACnE,WAAU,CAAC,OAAO,oBAAoB,KAAK,WAAW,cAAc,KACjE,KAAK,cAAc,SACnB,OAAO,QAAQ,QAAQ,OAAO,MAAM,eAAe,KAAK,SAAS,GAAG;AACtE,mBAAO,YAAY,GAAG,MAAM,WAAW,UAAU,oBAAoB,cAAc,KAAK,SAAS,GAAG,KAAK,SAAS,CAAC;AAAA,UACpH,OAAO;AACN,mBAAO,QAAQ;AAAA,cACd,IAAI,MAAM,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK;AAAA,gBAC1C,IAAI,KAAK,KAAK;AAAA,kBACb,IAAI,KAAK,cAAc;AAAA,kBACvB,IAAI,KAAK,WAAW,CAAC,IAAI,GAAG,KAAK,KAAK,MAAM,CAAC,MAAM,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC;AAAA,gBACnE,CAAC;AAAA,gBACD,IAAI,KAAK,QAAQ,CAAC,CAAC;AAAA,cACpB,CAAC,CAAC,GAAG,MAAM,cAAc,KAAK;AAAA,cAC9B,IAAI,MAAM,MAAM,KAAK,QAAQ,IAAI,GAAG,MAAM,cAAc,KAAK;AAAA,YAC9D,CAAC;AAAA,UACF;AAAA,QACD;AAAA;AAAA,QAGA,aAAa,SAAS,QAAQ,OAAO,MAAM;AAC1C,cAAI,YAAY,KAAK,KAAK,CAAC;AAC3B,cAAI;AACJ,cAAG,GAAG,KAAK,QAAQ,SAAS,KAAK,UAAU,cAAc,OAAO;AAC/D,gBAAG,CAAC,GAAG,KAAK,QAAQ,UAAU,KAAK,CAAC,CAAC,GAAG;AACvC,qBAAO,YAAY,GAAG,MAAM,KAAK,UAAU,UAAU,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AAC7E;AAAA,YACD;AACA,wBAAY,UAAU,KAAK,CAAC,EAAE;AAC9B,wBAAY,UAAU,KAAK,CAAC;AAAA,UAC7B,OAAO;AACN,wBAAY;AAAA,UACb;AACA,cAAG,GAAG,KAAK,YAAY,SAAS,KAAK,GAAG,KAAK,QAAQ,SAAS,KAAK,UAAU,cAAc,UACvF,GAAG,KAAK,YAAY,UAAU,KAAK,CAAC,CAAC,KAAK,GAAG,KAAK,YAAY,UAAU,KAAK,CAAC,CAAC,IAAI;AACtF,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,QAAQ,SAAS,KAAK,UAAU,cAAc,OAAO;AACvE,mBAAO,YAAY,GAAG,MAAM,KAAK,uBAAuB,WAAW,KAAK,SAAS,CAAC;AAAA,UACnF,WAAU,CAAC,GAAG,KAAK,QAAQ,UAAU,KAAK,CAAC,CAAC,GAAG;AAC9C,mBAAO,YAAY,GAAG,MAAM,KAAK,QAAQ,UAAU,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AAAA,UAC5E,WAAU,CAAC,GAAG,KAAK,WAAW,UAAU,KAAK,CAAC,CAAC,GAAG;AACjD,mBAAO,YAAY,GAAG,MAAM,KAAK,WAAW,UAAU,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AAAA,UAC/E,WAAU,UAAU,KAAK,CAAC,EAAE,QAAQ,GAAG;AACtC,mBAAO,YAAY,GAAG,MAAM,OAAO,sBAAsB,UAAU,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AAAA,UAC5F,WAAU,GAAG,KAAK,UAAU,OAAO,SAAS,WAAW,CAAC,KAAK,UAAU,KAAK,CAAC,EAAE,QAAQ,OAAO,SAAS,WAAW,EAAE,OAAO;AAC1H,mBAAO,YAAY,GAAG,MAAM,eAAe,aAAa,KAAK,SAAS,CAAC;AAAA,UACxE,OAAO;AACN,gBAAI,aAAa,OAAO,QAAQ,QAAQ,SAAS;AACjD,gBAAG,GAAG,KAAK,UAAU,UAAU,GAAG;AACjC,kBAAIO,aAAY,UAAU,KAAK,CAAC,EAAE,KAAK,MAAM,UAAU,KAAK,CAAC,EAAE;AAC/D,kBAAG,OAAO,oBAAoBA,YAAW,SAAS,KAC/CA,eAAc,SACd,CAAC,OAAO,QAAQ,QAAQ,OAAO,MAAM,eAAeA,UAAS,GAAG;AAClE,uBAAO,WAAW,MAAMA,UAAS;AACjC,uBAAO,WAAW,gBAAgBA,UAAS;AAC3C,uBAAO,WAAW,sBAAsBA,UAAS;AACjD,uBAAO,WAAW,kBAAkBA,UAAS;AAC7C,uBAAO,WAAW,qBAAqBA,UAAS;AAChD,uBAAO,QAAQ,KAAK;AAAA,cACrB,OAAO;AACN,uBAAO,YAAY,GAAG,MAAM,WAAW,UAAU,oBAAoB,KAAK,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AAAA,cACnG;AAAA,YACD,OAAO;AACN,qBAAO,QAAQ,KAAK;AAAA,YACrB;AAAA,UACD;AAAA,QACD;AAAA;AAAA;AAAA,QAKA,iBAAiB,SAAU,QAAQ,OAAO,MAAO;AAChD,cAAI,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,GAAI;AACzC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,QAAS,KAAK,KAAK,CAAC,CAAE,GAAI;AAC7C,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UAC3E,WAAW,CAAC,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,KAAK,CAAC,GAAG,KAAK,WAAY,KAAK,KAAK,CAAC,CAAE,GAAI;AACxF,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UAC9E,WAAW,GAAG,KAAK,WAAY,KAAK,KAAK,CAAC,CAAE,KAAK,KAAK,KAAK,CAAC,EAAE,QAAQ,GAAI;AACzE,mBAAO,YAAa,GAAG,MAAM,OAAQ,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAAA,UAC3F,OAAO;AACN,gBAAI,SAAS,IAAI,IAAK,aAAa,KAAK,KAAK,CAAC,EAAE,EAAE,GAAG,KAAM;AAC3D,mBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,UACzH;AAAA,QACD;AAAA;AAAA,QAGA,iBAAiB,SAAU,QAAQ,OAAO,MAAO;AAChD,cAAI,KAAK,MAAM,QAAQ,KAAK,KAAK,CAAC,GAAG,MAAM,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AAC5E,cAAI,GAAG,KAAK,YAAa,KAAM,MAAM,GAAG,KAAK,YAAa,KAAM,KAAK,GAAG,KAAK,YAAa,GAAI,IAAK;AAClG,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,KAAM,KAAK,CAAC,GAAG,KAAK,QAAS,KAAM,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,OAAO,KAAK,SAAU,CAAE;AAAA,UACpE,WAAW,CAAC,GAAG,KAAK,YAAa,GAAI,KAAK,CAAC,GAAG,KAAK,QAAS,GAAI,GAAI;AACnE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,KAAK,KAAK,SAAU,CAAE;AAAA,UAClE,WAAW,CAAC,GAAG,KAAK,YAAa,KAAM,KAAK,CAAC,GAAG,KAAK,QAAS,KAAM,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,OAAO,KAAK,SAAU,CAAE;AAAA,UACpE,OAAO;AACN,gBAAI,KAAK,GAAG,KAAK,YAAa,KAAM;AACpC,gBAAI,KAAK,GAAG,KAAK,YAAa,GAAI;AAElC,gBAAI,CAAC,MAAM,CAAC,IAAK;AAChB,qBAAO,IAAI,KAAM,KAAK,CAAC,OAAO,IAAI,KAAM,MAAM,KAAK,IAAI,EAAG,CAAC,CAAE;AAC7D,qBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAK,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YACtF,WAAW,MAAM,CAAC,IAAK;AACtB,oBAAM,MAAM,GAAG,OAAQ,GAAG,MAAM,GAAG,SAAS,IAAI,GAAG,MAAO;AAC1D,kBAAI,MAAM,IAAI,OAAO,MAAM,IAAK;AAC/B,uBAAO,IAAI,KAAM,KAAK,CAAC,OAAO,IAAI,KAAM,GAAI,CAAC,CAAE;AAC/C,uBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAK,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,cACtF;AAAA,YACD,WAAW,MAAM,CAAC,IAAK;AACtB,oBAAM,MAAM,GAAG,OAAQ,MAAM,GAAG,MAAO;AACvC,kBAAI,MAAM,KAAK,QAAQ,MAAM,IAAK;AACjC,uBAAO,IAAI,KAAM,KAAK,CAAC,KAAK,IAAI,KAAM,GAAI,CAAC,CAAE;AAC7C,uBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAK,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,cACtF;AAAA,YACD,OAAO;AACN,kBAAI,SAAS,CAAC;AACd,uBAASP,KAAI,GAAGA,MAAK,MAAM,GAAG,QAAQA,MAAM;AAC3C,oBAAI,QAAQ,IAAI,KAAM,MAAM,GAAG,OAAQ,GAAGA,EAAE,CAAE;AAC9C,oBAAI,QAAQ,IAAI,KAAM,MAAM,GAAG,OAAQA,EAAE,CAAE;AAC3C,uBAAO,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,KAAK,CAAC,OAAO,KAAK,CAAE,GAAG,IAAI,KAAM,KAAK,CAAC,OAAO,GAAG,CAAE,CAAC,CAAE;AACvF,uBAAO,KAAM,IAAI,MAAO,MAAM,KAAK,QAAS,IAAK,GAAG,MAAM,cAAc,KAAM,CAAE;AAAA,cACjF;AACA,qBAAO,QAAS,MAAO;AAAA,YACxB;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAIA,IAAG,QAAQ,KAAK,KAAK,CAAC,GAAG,SAAS,KAAK,KAAK,CAAC,GAAG,SAAS,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC,GAAG,UAAU,KAAK,KAAK,CAAC;AACtH,cAAI,GAAG,KAAK,YAAa,KAAM,GAAI;AAClC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,QAAS,KAAM,GAAI;AACtC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,OAAO,KAAK,SAAU,CAAE;AAAA,UACpE,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,KAAK,CAAC,GAAG,KAAK,WAAY,MAAO,GAAI;AAC5E,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,QAAQ,KAAK,SAAU,CAAE;AAAA,UACxE,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,KAAK,CAAC,GAAG,KAAK,WAAY,MAAO,GAAI;AAC5E,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,QAAQ,KAAK,SAAU,CAAE;AAAA,UACxE,WAAW,CAAC,GAAG,KAAK,YAAa,KAAM,KAAK,CAAC,GAAG,KAAK,WAAY,KAAM,GAAI;AAC1E,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,OAAO,KAAK,SAAU,CAAE;AAAA,UACvE,WAAW,GAAG,KAAK,WAAY,MAAO,KAAK,OAAO,QAAQ,GAAI;AAC7D,mBAAO,YAAa,GAAG,MAAM,OAAQ,sBAAsB,QAAQ,KAAK,SAAU,CAAE;AAAA,UACrF,WAAW,GAAG,KAAK,WAAY,MAAO,KAAK,OAAO,QAAQ,GAAI;AAC7D,mBAAO,YAAa,GAAG,MAAM,OAAQ,sBAAsB,QAAQ,KAAK,SAAU,CAAE;AAAA,UACrF,WAAW,GAAG,KAAK,WAAY,KAAM,KAAK,MAAM,QAAQ,GAAI;AAC3D,mBAAO,YAAa,GAAG,MAAM,OAAQ,sBAAsB,OAAO,KAAK,SAAU,CAAE;AAAA,UACpF,WAAW,CAAC,GAAG,KAAK,YAAa,OAAQ,KAAK,CAAC,GAAG,KAAK,QAAS,OAAQ,GAAI;AAC3E,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,SAAS,KAAK,SAAU,CAAE;AAAA,UACtE,OAAO;AACN,gBAAI,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC;AAC5B,gBAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAKA,KAAI,GAAGA,MAAK,MAAM,GAAG,QAAQA,MAAM;AACvC,mBAAG,KAAMA,EAAE;AAAA,cACZ;AAAA,YACD,OAAO;AACN,iBAAG,KAAM,OAAO,KAAM;AAAA,YACvB;AACA,gBAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAKA,KAAI,GAAGA,MAAK,MAAM,GAAG,QAAQA,MAAM;AACvC,mBAAG,KAAMA,EAAE;AAAA,cACZ;AAAA,YACD,OAAO;AACN,iBAAG,KAAM,OAAO,KAAM;AAAA,YACvB;AACA,gBAAI,GAAG,KAAK,YAAa,KAAM,GAAI;AAClC,mBAAKA,KAAI,GAAGA,MAAK,MAAM,GAAG,QAAQA,MAAM;AACvC,mBAAG,KAAMA,EAAE;AAAA,cACZ;AAAA,YACD,OAAO;AACN,iBAAG,KAAM,MAAM,KAAM;AAAA,YACtB;AACA,gBAAI,SAAS,CAAC;AACd,qBAAS,MAAM,IAAK;AACnB,kBAAG,CAAC,GAAG,eAAe,EAAE,EAAG;AAC3B,cAAAA,KAAI,GAAG,EAAE;AACT,uBAAS,MAAM,IAAK;AACnB,oBAAG,CAAC,GAAG,eAAe,EAAE,EAAG;AAC3B,oBAAI,IAAI,GAAG,EAAE;AACb,oBAAI,IAAI,MAAM,GAAG,SAASA,KAAI;AAC9B,oBAAI,QAAS,IAAI,CAAE,MAAM,IAAK;AAC9B,sBAAIA,KAAE,IAAE,MAAM,MAAM,GAAG,QAAS;AAC9B,wBAAI,MAAM,MAAM,GAAG,OAAQA,IAAG,CAAE;AAChC,wBAAI,MAAM,OAAO,MAAM,GAAG,OAAQ,GAAGA,EAAE,IAAI,MAAM,MAAM,GAAG,OAAQA,KAAE,GAAG,CAAE,GAAI;AAC5E,0BAAI,MAAM,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,GAAI,GAAG,OAAO,CAAE;AACpD,0BAAI,MAAM,IAAI,KAAM,KAAK,CAAC,QAAQ,IAAI,IAAKA,EAAE,CAAC,CAAE;AAChD,0BAAI,MAAM,IAAI,KAAM,KAAK,CAAC,QAAQ,IAAI,IAAK,CAAE,CAAC,CAAE;AAChD,0BAAI,MAAM,IAAI,KAAM,KAAK,CAAC,OAAO,IAAI,IAAK,CAAE,CAAC,CAAE;AAC/C,0BAAI,OAAO,IAAI,KAAM,KAAK,CAAE,IAAI,KAAM,KAAK,CAAE,IAAI,KAAM,KAAK,CAAC,KAAK,GAAG,CAAE,GAAG,GAAG,CAAE,GAAG,GAAG,CAAE;AACvF,6BAAO,KAAM,IAAI,MAAO,MAAM,KAAK,QAAS,IAAK,GAAG,MAAM,cAAc,KAAM,CAAE;AAAA,oBACjF;AAAA,kBACD;AAAA,gBACD;AAAA,cACD;AAAA,YACD;AACA,mBAAO,QAAS,MAAO;AAAA,UACxB;AAAA,QACD;AAAA;AAAA,QAGA,gBAAgB,SAAU,QAAQ,OAAO,MAAO;AAC/C,cAAI,QAAQ,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC5C,cAAI,GAAG,KAAK,YAAa,KAAM,KAAK,GAAG,KAAK,YAAa,IAAK,GAAI;AACjE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,KAAM,KAAK,CAAC,GAAG,KAAK,QAAS,KAAM,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,OAAO,KAAK,SAAU,CAAE;AAAA,UACpE,OAAO;AACN,gBAAI,CAAC,GAAG,KAAK,YAAa,KAAM,GAAI;AACnC,kBAAG,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AAC9B,oBAAI,UAAU;AACd,uBAAM,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,OAAO;AAC9D,sBAAG,CAAC,GAAG,KAAK,aAAa,QAAQ,KAAK,CAAC,CAAC,KAAK,CAAC,GAAG,KAAK,YAAY,QAAQ,KAAK,CAAC,CAAC,GAAG;AACnF,2BAAO,YAAY,GAAG,MAAM,KAAK,aAAa,QAAQ,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AAC9E;AAAA,kBACD;AACA,4BAAU,QAAQ,KAAK,CAAC;AAAA,gBACzB;AAAA,cACD;AACA,kBAAI,QAAQ,IAAI,KAAM,IAAK;AAC3B,kBAAI,SAAS,aAAa,MAAM,EAAE;AAClC,uBAASA,KAAI,SAAO,GAAGA,MAAK,GAAGA,MAAM;AACpC,wBAAQ,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,MAAM,GAAG,OAAQA,EAAE,CAAE,GAAG,KAAK,CAAE;AAAA,cAClE;AACA,qBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,MAAM,KAAK,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YAChH,OAAO;AACN,kBAAI,UAAU;AACd,kBAAI,IAAI,GAAG,KAAK,YAAa,KAAM;AACnC,kBAAI,MAAM;AACV,qBAAO,QAAQ,cAAc,OAAQ;AACpC,oBAAI,CAAC,GAAG,KAAK,aAAc,QAAQ,KAAK,CAAC,CAAE,GAAI;AAC9C,sBAAI,GAAG,KAAK,YAAa,QAAQ,KAAK,CAAC,CAAE,KAAK,GAAI;AACjD,2BAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,kBACD,WAAW,CAAC,GAAG,KAAK,YAAa,QAAQ,KAAK,CAAC,CAAE,GAAI;AACpD,2BAAO,YAAa,GAAG,MAAM,KAAM,aAAa,QAAQ,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAClF;AAAA,kBACD;AAAA,gBACD,OAAO;AACN,yBAAO,QAAQ,KAAK,CAAC,EAAE;AAAA,gBACxB;AACA,0BAAU,QAAQ,KAAK,CAAC;AAAA,cACzB;AACA,kBAAI,GAAG,KAAK,YAAa,OAAQ,KAAK,GAAI;AACzC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,cAC9D,WAAW,CAAC,GAAG,KAAK,cAAe,OAAQ,KAAK,CAAC,GAAG,KAAK,YAAa,OAAQ,GAAI;AACjF,uBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,cACnE,OAAO;AACN,uBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,GAAI,GAAG,KAAK,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,cAC3H;AAAA,YACD;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,gBAAgB,SAAU,QAAQ,OAAO,MAAO;AAC/C,cAAI,QAAQ,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC5C,cAAI,GAAG,KAAK,YAAa,KAAM,KAAK,GAAG,KAAK,YAAa,IAAK,GAAI;AACjE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,KAAM,KAAK,CAAC,GAAG,KAAK,QAAS,KAAM,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,OAAO,KAAK,SAAU,CAAE;AAAA,UACpE,OAAO;AACN,gBAAI,CAAC,GAAG,KAAK,YAAa,KAAM,GAAI;AACnC,kBAAG,CAAC,GAAG,KAAK,YAAY,IAAI,GAAG;AAC9B,oBAAI,UAAU;AACd,uBAAM,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,OAAO;AAC9D,sBAAG,CAAC,GAAG,KAAK,kBAAkB,QAAQ,KAAK,CAAC,CAAC,KAAK,CAAC,GAAG,KAAK,YAAY,QAAQ,KAAK,CAAC,CAAC,GAAG;AACxF,2BAAO,YAAY,GAAG,MAAM,KAAK,WAAW,QAAQ,KAAK,CAAC,GAAG,KAAK,SAAS,CAAC;AAC5E;AAAA,kBACD;AACA,4BAAU,QAAQ,KAAK,CAAC;AAAA,gBACzB;AAAA,cACD;AACA,kBAAI,QAAQ,IAAI,KAAM,IAAK;AAC3B,kBAAI,SAAS,aAAa,MAAM,EAAE;AAClC,uBAASA,KAAI,SAAO,GAAGA,MAAK,GAAGA,MAAM;AACpC,wBAAQ,IAAI,KAAM,KAAK,CAAC,IAAI,IAAK,YAAY,MAAM,IAAGA,EAAC,GAAG,KAAM,GAAG,KAAK,CAAE;AAAA,cAC3E;AACA,qBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,MAAM,KAAK,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YAChH,OAAO;AACN,kBAAI,UAAU;AACd,kBAAI,IAAI,GAAG,KAAK,YAAa,KAAM;AACnC,kBAAI,MAAM;AACV,qBAAO,QAAQ,cAAc,OAAQ;AACpC,oBAAI,CAAC,GAAG,KAAK,kBAAmB,QAAQ,KAAK,CAAC,CAAE,GAAI;AACnD,sBAAI,GAAG,KAAK,YAAa,QAAQ,KAAK,CAAC,CAAE,KAAK,GAAI;AACjD,2BAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,kBACD,WAAW,CAAC,GAAG,KAAK,YAAa,QAAQ,KAAK,CAAC,CAAE,GAAI;AACpD,2BAAO,YAAa,GAAG,MAAM,eAAgB,kBAAkB,KAAK,SAAU,CAAE;AAChF;AAAA,kBACD;AAAA,gBACD,OAAO;AACN,yBAAO,cAAe,QAAQ,KAAK,CAAC,EAAE,KAAM;AAAA,gBAC7C;AACA,0BAAU,QAAQ,KAAK,CAAC;AAAA,cACzB;AACA,kBAAI,GAAG,KAAK,YAAa,OAAQ,KAAK,GAAI;AACzC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,cAC9D,WAAW,CAAC,GAAG,KAAK,cAAe,OAAQ,KAAK,CAAC,GAAG,KAAK,YAAa,OAAQ,GAAI;AACjF,uBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,cACnE,OAAO;AACN,uBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,GAAI,GAAG,KAAK,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,cAC3H;AAAA,YACD;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,eAAe,SAAU,QAAQ,OAAO,MAAO;AAC9C,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC3C,cAAI,GAAG,KAAK,YAAa,IAAK,KAAK,GAAG,KAAK,YAAa,IAAK,GAAI;AAChE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,aAAc,IAAK,GAAI;AAC1E,mBAAO,YAAa,GAAG,MAAM,KAAM,aAAa,MAAM,KAAK,SAAU,CAAE;AAAA,UACxE,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,WAAY,IAAK,GAAI;AACxE,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,MAAM,KAAK,SAAU,CAAE;AAAA,UACtE,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,kBAAmB,IAAK,GAAI;AAC/E,mBAAO,YAAa,GAAG,MAAM,eAAgB,kBAAkB,KAAK,SAAU,CAAE;AAAA,UACjF,OAAO;AACN,gBAAI,GAAG,KAAK,YAAa,IAAK,GAAI;AACjC,kBAAI,QAAQ,IAAI,IAAK,YAAY,KAAK,IAAG,CAAE,GAAG,KAAM;AACpD,qBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,OAAO,IAAI,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YAChH,OAAO;AACN,kBAAI,QAAQ,IAAI,KAAM,cAAe,KAAK,KAAM,CAAE;AAClD,qBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,OAAO,IAAI,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YAChH;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,kBAAkB,SAAU,QAAQ,OAAO,MAAO;AACjD,cAAI,KAAK,MAAM,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC/C,cAAI,GAAG,KAAK,YAAa,GAAI,KAAK,GAAG,KAAK,YAAa,IAAK,GAAI;AAC/D,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,GAAI,KAAK,CAAC,GAAG,KAAK,UAAW,GAAI,GAAI;AACrE,mBAAO,YAAa,GAAG,MAAM,KAAM,UAAU,KAAK,KAAK,SAAU,CAAE;AAAA,UACpE,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,QAAS,IAAK,GAAI;AACrE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,UACnE,OAAO;AACN,gBAAI,QAAQ,GAAG,KAAK,YAAa,GAAI;AACrC,gBAAI,CAAC,GAAG,KAAK,YAAa,IAAK,GAAI;AAClC,kBAAI,UAAU;AACd,kBAAI,QAAQ;AACZ,oBAAM;AACN,qBAAO,QAAQ,cAAc,OAAQ;AACpC,oBAAI,CAAC,GAAG,KAAK,aAAc,QAAQ,KAAK,CAAC,CAAE,GAAI;AAC9C,sBAAI,GAAG,KAAK,YAAa,QAAQ,KAAK,CAAC,CAAE,GAAI;AAC5C,4BAAQ;AAAA,kBACT,WAAW,CAAC,GAAG,KAAK,YAAa,QAAQ,KAAK,CAAC,CAAE,GAAI;AACpD,2BAAO,YAAa,GAAG,MAAM,KAAM,aAAa,QAAQ,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAClF;AAAA,kBACD;AAAA,gBACD,OAAO;AACN,yBAAO,QAAQ,KAAK,CAAC,EAAE;AAAA,gBACxB;AACA,0BAAU,QAAQ,KAAK,CAAC;AAAA,cACzB;AACA,sBAAQ,SAAS,GAAG,KAAK,cAAe,OAAQ;AAChD,kBAAI,CAAC,GAAG,KAAK,cAAe,OAAQ,KAAK,CAAC,GAAG,KAAK,YAAa,OAAQ,GAAI;AAC1E,uBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAClE;AAAA,cACD;AACA,kBAAI,CAAC,SAAS,OAAQ;AACrB,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,cACD,WAAW,OAAQ;AAClB,oBAAI,GAAG,KAAK,YAAa,OAAQ,KAAK,OAAQ;AAC7C,yBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,gBACD,OAAO;AACN,sBAAI,OAAO,OAAO,MAAO,GAAI;AAC7B,sBAAI,OAAO,KAAK;AAChB,sBAAI,CAAC,GAAG,KAAK,UAAW,IAAK,KAAK,KAAK,OAAO,KAAK,OAAO,SAAO,CAAC,EAAE,OAAQ;AAC3E,2BAAO,YAAa,GAAG,MAAM,oBAAqB,oBAAoB,KAAK,SAAU,CAAE;AAAA,kBACxF,OAAO;AACN,2BAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,KAAK,IAAI,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,kBAC9G;AACA;AAAA,gBACD;AAAA,cACD;AAAA,YACD;AACA,gBAAI,CAAC,OAAQ;AACZ,oBAAM,IAAI,SAAS;AACnB,kBAAI,QAAQ,IAAI,KAAM,IAAK;AAC3B,uBAASA,KAAI,IAAI,SAAS,GAAGA,MAAK,GAAGA,MAAM;AAC1C,wBAAQ,IAAI,KAAM,KAAK,CAAE,IAAI,KAAM,IAAI,OAAQA,EAAE,CAAE,GAAG,KAAM,CAAE;AAAA,cAC/D;AACA,qBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,MAAM,KAAK,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YAChH;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,kBAAkB,SAAU,QAAQ,OAAO,MAAO;AACjD,cAAI,KAAK,MAAM,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC/C,cAAI,GAAG,KAAK,YAAa,GAAI,KAAK,GAAG,KAAK,YAAa,IAAK,GAAI;AAC/D,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,GAAI,KAAK,CAAC,GAAG,KAAK,UAAW,GAAI,GAAI;AACrE,mBAAO,YAAa,GAAG,MAAM,KAAM,UAAU,KAAK,KAAK,SAAU,CAAE;AAAA,UACpE,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,QAAS,IAAK,GAAI;AACrE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,UACnE,OAAO;AACN,gBAAI,QAAQ,GAAG,KAAK,YAAa,GAAI;AACrC,gBAAI,CAAC,GAAG,KAAK,YAAa,IAAK,GAAI;AAClC,kBAAI,UAAU;AACd,kBAAI,QAAQ;AACZ,oBAAM;AACN,qBAAO,QAAQ,cAAc,OAAQ;AACpC,oBAAI,CAAC,GAAG,KAAK,kBAAmB,QAAQ,KAAK,CAAC,CAAE,GAAI;AACnD,sBAAI,GAAG,KAAK,YAAa,QAAQ,KAAK,CAAC,CAAE,GAAI;AAC5C,4BAAQ;AAAA,kBACT,WAAW,CAAC,GAAG,KAAK,YAAa,QAAQ,KAAK,CAAC,CAAE,GAAI;AACpD,2BAAO,YAAa,GAAG,MAAM,eAAgB,kBAAkB,KAAK,SAAU,CAAE;AAChF;AAAA,kBACD;AAAA,gBACD,OAAO;AACN,yBAAO,cAAe,QAAQ,KAAK,CAAC,EAAE,KAAM;AAAA,gBAC7C;AACA,0BAAU,QAAQ,KAAK,CAAC;AAAA,cACzB;AACA,sBAAQ,SAAS,GAAG,KAAK,cAAe,OAAQ;AAChD,kBAAI,CAAC,GAAG,KAAK,cAAe,OAAQ,KAAK,CAAC,GAAG,KAAK,YAAa,OAAQ,GAAI;AAC1E,uBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAClE;AAAA,cACD;AACA,kBAAI,CAAC,SAAS,OAAQ;AACrB,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,cACD,WAAW,OAAQ;AAClB,oBAAI,GAAG,KAAK,YAAa,OAAQ,KAAK,OAAQ;AAC7C,yBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,gBACD,OAAO;AACN,sBAAI,OAAO,OAAO,MAAO,GAAI;AAC7B,sBAAI,OAAO,KAAK;AAChB,sBAAI,CAAC,GAAG,KAAK,UAAW,IAAK,KAAK,KAAK,OAAO,KAAK,OAAO,SAAO,CAAC,EAAE,OAAQ;AAC3E,2BAAO,YAAa,GAAG,MAAM,oBAAqB,oBAAoB,KAAK,SAAU,CAAE;AAAA,kBACxF,OAAO;AACN,2BAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,KAAK,IAAI,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,kBAC9G;AACA;AAAA,gBACD;AAAA,cACD;AAAA,YACD;AACA,gBAAI,CAAC,OAAQ;AACZ,oBAAM,IAAI,SAAS;AACnB,kBAAI,QAAQ,IAAI,KAAM,IAAK;AAC3B,uBAASA,KAAI,IAAI,SAAS,GAAGA,MAAK,GAAGA,MAAM;AAC1C,wBAAQ,IAAI,KAAM,KAAK,CAAE,IAAI,IAAK,YAAY,KAAIA,EAAC,GAAG,KAAM,GAAG,KAAM,CAAE;AAAA,cACxE;AACA,qBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,MAAM,KAAK,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YAChH;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,iBAAiB,SAAU,QAAQ,OAAO,MAAO;AAChD,cAAI,WAAW,KAAK,KAAK,CAAC,GAAG,SAAS,KAAK,KAAK,CAAC;AACjD,cAAI,GAAG,KAAK,YAAa,QAAS,GAAI;AACrC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,QAAS,QAAS,GAAI;AACzC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,UAAU,KAAK,SAAU,CAAE;AAAA,UACvE,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACzE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,QAAQ,KAAK,SAAU,CAAE;AAAA,UACrE,OAAO;AACN,mBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,QAAQ,IAAI,KAAM,SAAS,GAAG,YAAY,GAAG,CAAC,CAAE,CAAC,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,UACtJ;AAAA,QACD;AAAA;AAAA,QAGA,mBAAmB,SAAU,QAAQ,OAAO,MAAO;AAClD,cAAI,WAAW,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC;AACnD,cAAI,GAAG,KAAK,YAAa,QAAS,GAAI;AACrC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,QAAS,QAAS,GAAI;AACzC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,UAAU,KAAK,SAAU,CAAE;AAAA,UACvE,WAAW,CAAC,GAAG,KAAK,YAAa,QAAS,KAAK,CAAC,GAAG,KAAK,QAAS,QAAS,GAAI;AAC7E,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,UAAU,KAAK,SAAU,CAAE;AAAA,UACvE,OAAO;AACN,mBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,UAAU,IAAI,KAAM,SAAS,GAAG,YAAY,GAAG,CAAC,CAAE,CAAC,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,UACxJ;AAAA,QACD;AAAA;AAAA,QAGA,mBAAmB,SAAU,QAAQ,OAAO,MAAO;AAClD,cAAI,UAAU,KAAK,KAAK,CAAC,GAAG,UAAU,KAAK,KAAK,CAAC,GAAG,SAAS,KAAK,KAAK,CAAC;AACxE,cAAI,GAAG,KAAK,YAAa,OAAQ,KAAK,GAAG,KAAK,YAAa,OAAQ,GAAI;AACtE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,GAAI;AAC1C,mBAAO,YAAa,GAAG,MAAM,KAAM,UAAU,SAAS,KAAK,SAAU,CAAE;AAAA,UACxE,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,GAAI;AAC1C,mBAAO,YAAa,GAAG,MAAM,KAAM,UAAU,SAAS,KAAK,SAAU,CAAE;AAAA,UACxE,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACzE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,QAAQ,KAAK,SAAU,CAAE;AAAA,UACrE,OAAO;AACN,gBAAI,KAAK;AACT,gBAAI,GAAG,KAAK,QAAS,OAAQ,GAAI;AAChC,oBAAM,QAAQ;AAAA,YACf,OAAO;AACN,oBAAM,KAAK,QAAQ;AAAA,YACpB;AACA,gBAAI,GAAG,KAAK,QAAS,OAAQ,GAAI;AAChC,oBAAM,QAAQ;AAAA,YACf,OAAO;AACN,oBAAM,KAAK,QAAQ;AAAA,YACpB;AACA,gBAAI,OAAO,IAAI,KAAK,IAAI,CAAC,CAAC;AAC1B,mBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,MAAM,MAAM,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,UACjH;AAAA,QACD;AAAA;AAAA,QAGA,wBAAwB,SAAU,QAAQ,OAAO,MAAO;AACvD,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,SAAS,KAAK,KAAK,CAAC;AAC7C,iBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,sBAAsB,CAAC,MAAM,IAAI,KAAM,IAAI,CAAC,CAAE,GAAG,MAAM,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,QACtJ;AAAA;AAAA,QAGA,wBAAwB,SAAU,QAAQ,OAAO,MAAO;AACvD,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,YAAY,KAAK,KAAK,CAAC,GAAG,SAAS,KAAK,KAAK,CAAC;AACvE,cAAI,GAAG,KAAK,YAAa,SAAU,KAAK,GAAG,KAAK,YAAa,IAAK,KAAK,GAAG,KAAK,YAAa,MAAO,GAAI;AACtG,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,QAAS,IAAK,GAAI;AACrE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,UACnE,WAAW,CAAC,GAAG,KAAK,QAAS,SAAU,KAAK,CAAC,GAAG,KAAK,UAAW,SAAU,GAAI;AAC7E,mBAAO,YAAa,GAAG,MAAM,KAAM,UAAU,WAAW,KAAK,SAAU,CAAE;AAAA,UAC1E,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACzE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,QAAQ,KAAK,SAAU,CAAE;AAAA,UACrE,OAAO;AACN,gBAAI,KAAK;AACT,gBAAI,UAAU;AACd,mBAAO,GAAG,KAAK,QAAS,OAAQ,KAAK,QAAQ,cAAc,OAAQ;AAClE,kBAAI,GAAG,KAAK,YAAa,QAAQ,KAAK,CAAC,CAAE,GAAI;AAC5C,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,cACD,WAAW,CAAC,GAAG,KAAK,QAAS,QAAQ,KAAK,CAAC,CAAE,KAAK,CAAC,GAAG,KAAK,UAAW,QAAQ,KAAK,CAAC,CAAE,GAAI;AACzF,uBAAO,YAAa,GAAG,MAAM,KAAM,UAAU,QAAQ,KAAK,CAAC,GAAG,KAAK,SAAU,CAAE;AAC/E;AAAA,cACD;AACA,kBAAI,OAAO;AACV,sBAAM,UAAU;AACjB,kBAAI,GAAG,KAAK,QAAS,QAAQ,KAAK,CAAC,CAAE;AACpC,sBAAM,QAAQ,KAAK,CAAC,EAAE;AAAA;AAEtB,sBAAM,KAAK,QAAQ,KAAK,CAAC,EAAE;AAC5B,wBAAU,QAAQ,KAAK,CAAC;AAAA,YACzB;AACA,iBAAK,IAAI,KAAM,IAAI,CAAC,CAAE;AACtB,gBAAI,GAAG,KAAK,YAAa,OAAQ,GAAI;AACpC,qBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,YAC9D,WAAW,CAAC,GAAG,KAAK,QAAS,OAAQ,KAAK,QAAQ,cAAc,QAAS;AACxE,qBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,YACnE,OAAO;AACN,qBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,MAAM,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,YAC/G;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAIA,SAAS,SAAU,QAAQ,OAAO,MAAO;AACxC,cAAI,GAAG,QAAS,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE,KAAK,GAAI;AACnD,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA,QAEA,QAAQ,SAAU,QAAQ,OAAO,MAAO;AACvC,cAAI,GAAG,QAAS,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE,MAAM,GAAI;AACpD,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA,QAEA,UAAU,SAAU,QAAQ,OAAO,MAAO;AACzC,cAAI,GAAG,QAAS,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE,MAAM,GAAI;AACpD,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA,QAEA,QAAQ,SAAU,QAAQ,OAAO,MAAO;AACvC,cAAI,GAAG,QAAS,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE,IAAI,GAAI;AAClD,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA,QAEA,QAAQ,SAAU,QAAQ,OAAO,MAAO;AACvC,cAAI,GAAG,QAAS,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE,IAAI,GAAI;AAClD,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA,QAEA,SAAS,SAAU,QAAQ,OAAO,MAAO;AACxC,cAAI,GAAG,QAAS,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE,KAAK,GAAI;AACnD,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA,QAEA,aAAa,SAAU,QAAQ,OAAO,MAAO;AAC5C,cAAI,QAAQ,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AAClE,cAAI,CAAC,GAAG,KAAK,YAAa,KAAM,KAAK,CAAC,GAAG,KAAK,QAAS,KAAM,GAAI;AAChE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,OAAO,KAAK,SAAU,CAAE;AAAA,UACpE,WAAW,GAAG,KAAK,QAAS,KAAM,KAAK,CAAC,KAAK,KAAK,GAAG,EAAE,QAAS,MAAM,EAAG,MAAM,IAAK;AACnF,mBAAO,YAAa,GAAG,MAAM,OAAQ,SAAS,OAAO,KAAK,SAAU,CAAE;AAAA,UACvE,OAAO;AACN,gBAAI,UAAU,GAAG,QAAS,MAAM,KAAM;AACtC,sBAAU,YAAY,IAAI,MAAO,YAAY,KAAK,MAAM;AACxD,mBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,OAAO,IAAI,KAAM,SAAS,CAAC,CAAE,CAAC,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,UACnI;AAAA,QACD;AAAA;AAAA;AAAA,QAKA,QAAQ,SAAU,QAAQ,OAAO,MAAO;AACvC,cAAI,KAAK,KAAK,KAAK,CAAC,EAAE,UAAW,MAAO;AACxC,cAAI,CAAC,GAAG,KAAK,UAAW,EAAG,GAAI;AAC9B,mBAAO,YAAa,EAAG;AAAA,UACxB,OAAO;AACN,mBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,KAAK,KAAK,CAAC,GAAG,EAAE,GAAG,KAAK,SAAU,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,UACrI;AAAA,QACD;AAAA;AAAA,QAGA,aAAa,SAAU,QAAQ,OAAO,MAAO;AAC5C,cAAI,QAAQ,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC,GAAG,MAAM,KAAK,KAAK,CAAC;AACjE,cAAI,GAAG,KAAK,YAAa,KAAM,KAAK,GAAG,KAAK,YAAa,KAAM,GAAI;AAClE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,WAAY,KAAM,GAAI;AACzC,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,OAAO,KAAK,SAAU,CAAE;AAAA,UACvE,WAAW,CAAC,GAAG,KAAK,WAAY,KAAM,GAAI;AACzC,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,OAAO,KAAK,SAAU,CAAE;AAAA,UACvE,WAAW,CAAC,GAAG,KAAK,YAAa,GAAI,KAAK,CAAC,GAAG,KAAK,WAAY,GAAI,GAAI;AACtE,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,KAAK,KAAK,SAAU,CAAE;AAAA,UACrE,OAAO;AACN,gBAAI,GAAG,KAAK,YAAa,GAAI,GAAI;AAChC,kBAAI,MAAM,SAAS,MAAM,OAAQ;AAChC,oBAAI,SAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,KAAK,KAAK,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC;AACzG,uBAAO,KAAM,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,WAAW,CAAC,IAAI,IAAK,MAAM,QAAM,GAAG,KAAM,GAAG,OAAO,GAAG,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAE;AAChJ,uBAAO,QAAS,MAAO;AAAA,cACxB;AAAA,YACD,WAAW,MAAM,SAAS,IAAI,SAAS,MAAM,SAAS,IAAI,OAAQ;AACjE,qBAAO,QAAS,KAAM;AAAA,YACvB;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,UAAU,SAAU,QAAQ,OAAO,MAAO;AACzC,cAAI,IAAI,KAAK,KAAK,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC;AACrC,cAAI,GAAG,KAAK,YAAa,CAAE,KAAK,GAAG,KAAK,YAAa,CAAE,GAAI;AAC1D,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,CAAE,KAAK,CAAC,GAAG,KAAK,WAAY,CAAE,GAAI;AAClE,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,GAAG,KAAK,SAAU,CAAE;AAAA,UACnE,WAAW,CAAC,GAAG,KAAK,YAAa,CAAE,KAAK,CAAC,GAAG,KAAK,WAAY,CAAE,GAAI;AAClE,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,GAAG,KAAK,SAAU,CAAE;AAAA,UACnE,WAAW,CAAC,GAAG,KAAK,YAAa,CAAE,KAAK,EAAE,QAAQ,GAAI;AACrD,mBAAO,YAAa,GAAG,MAAM,OAAQ,sBAAsB,GAAG,KAAK,SAAU,CAAE;AAAA,UAChF,WAAW,CAAC,GAAG,KAAK,YAAa,CAAE,KAAK,EAAE,QAAQ,GAAI;AACrD,mBAAO,YAAa,GAAG,MAAM,OAAQ,sBAAsB,GAAG,KAAK,SAAU,CAAE;AAAA,UAChF,OAAO;AACN,gBAAI,GAAG,KAAK,YAAa,CAAE,KAAK,EAAE,QAAQ,GAAI;AAC7C,kBAAI,GAAG,KAAK,YAAa,CAAE,GAAI;AAC9B,uBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,GAAG,IAAI,IAAK,EAAE,QAAM,GAAG,KAAM,CAAC,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,cACnI,OAAO;AACN,uBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,GAAG,IAAI,IAAK,EAAE,QAAM,GAAG,KAAM,CAAC,CAAE,CAAE,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,cACnI;AAAA,YACD;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,SAAS,SAAU,QAAQ,OAAO,MAAO;AACxC,cAAI,MAAM,GAAG,mBAAoB,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE;AACpE,cAAI,GAAG,KAAK,QAAS,GAAI,GAAI;AAC5B,mBAAO,YAAa,GAAI;AAAA,UACzB,WAAW,QAAQ,GAAI;AACtB,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,UAAU,SAAU,QAAQ,OAAO,MAAO;AACzC,cAAI,MAAM,GAAG,mBAAoB,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE;AACpE,cAAI,GAAG,KAAK,QAAS,GAAI,GAAI;AAC5B,mBAAO,YAAa,GAAI;AAAA,UACzB,WAAW,QAAQ,GAAI;AACtB,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,OAAO,SAAU,QAAQ,OAAO,MAAO;AACtC,cAAI,MAAM,GAAG,mBAAoB,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE;AACpE,cAAI,GAAG,KAAK,QAAS,GAAI,GAAI;AAC5B,mBAAO,YAAa,GAAI;AAAA,UACzB,WAAW,MAAM,GAAI;AACpB,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,QAAQ,SAAU,QAAQ,OAAO,MAAO;AACvC,cAAI,MAAM,GAAG,mBAAoB,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE;AACpE,cAAI,GAAG,KAAK,QAAS,GAAI,GAAI;AAC5B,mBAAO,YAAa,GAAI;AAAA,UACzB,WAAW,OAAO,GAAI;AACrB,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,OAAO,SAAU,QAAQ,OAAO,MAAO;AACtC,cAAI,MAAM,GAAG,mBAAoB,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE;AACpE,cAAI,GAAG,KAAK,QAAS,GAAI,GAAI;AAC5B,mBAAO,YAAa,GAAI;AAAA,UACzB,WAAW,MAAM,GAAI;AACpB,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,QAAQ,SAAU,QAAQ,OAAO,MAAO;AACvC,cAAI,MAAM,GAAG,mBAAoB,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAE;AACpE,cAAI,GAAG,KAAK,QAAS,GAAI,GAAI;AAC5B,mBAAO,YAAa,GAAI;AAAA,UACzB,WAAW,OAAO,GAAI;AACrB,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA;AAAA,QAKA,SAAS,SAAU,QAAQ,OAAO,MAAO;AACxC,cAAI,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,GAAI;AACzC,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,UAAU,SAAU,QAAQ,OAAO,MAAO;AACzC,cAAI,GAAG,KAAK,QAAS,KAAK,KAAK,CAAC,CAAE,GAAI;AACrC,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,YAAY,SAAU,QAAQ,OAAO,MAAO;AAC3C,cAAI,GAAG,KAAK,UAAW,KAAK,KAAK,CAAC,CAAE,GAAI;AACvC,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAI,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,GAAI;AACzC,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,aAAa,SAAU,QAAQ,OAAO,MAAO;AAC5C,cAAI,GAAG,KAAK,WAAY,KAAK,KAAK,CAAC,CAAE,GAAI;AACxC,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,WAAW,SAAU,QAAQ,OAAO,MAAO;AAC1C,cAAI,GAAG,KAAK,SAAU,KAAK,KAAK,CAAC,CAAE,GAAI;AACtC,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,YAAY,SAAU,QAAQ,OAAO,MAAO;AAC3C,cAAI,GAAG,KAAK,UAAW,KAAK,KAAK,CAAC,CAAE,GAAI;AACvC,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,YAAY,SAAU,QAAQ,OAAO,MAAO;AAC3C,cAAI,CAAC,GAAG,KAAK,YAAa,KAAK,KAAK,CAAC,CAAE,GAAI;AAC1C,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,YAAY,SAAU,QAAQ,OAAO,MAAO;AAC3C,cAAI,KAAK,UAAU,EAAE,WAAW,GAAI;AACnC,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,kBAAkB,SAAU,QAAQ,OAAO,MAAO;AACjD,cAAI,OAAO,MAAM,aAAa,MAAO,MAAM,YAAa;AACxD,cAAI,YAAY,KAAK,KAAK,CAAC,EAAE,UAAU;AACvC,mBAASA,KAAI,GAAGA,KAAI,UAAU,QAAQA;AACrC,gBAAI,MAAM,aAAa,MAAM,UAAUA,EAAC,CAAC,MAAM,UAAa,CAAC,MAAM,aAAa,MAAM,UAAUA,EAAC,CAAC,EAAE,OAAQ,KAAK,MAAM,UAAUA,EAAC,CAAC,CAAE;AACpI;AACF,iBAAO,QAAS,KAAM;AAAA,QACvB;AAAA;AAAA,QAGA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAI,WAAW,KAAK,KAAK,CAAC;AAC1B,cAAG,GAAG,KAAK,QAAQ,QAAQ,GAAG;AAC7B,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,aAAa,SAAU,QAAQ,OAAO,MAAO;AAC5C,cAAI,OAAO,KAAK,KAAK,CAAC;AACtB,iBAAO,GAAG,KAAK,QAAS,IAAK,KAAK,KAAK,cAAc;AACpD,mBAAO,KAAK,KAAK,CAAC;AACnB,cAAI,GAAG,KAAK,QAAS,IAAK,KAAK,KAAK,cAAc;AACjD,mBAAO,QAAS,KAAM;AAAA,QACxB;AAAA;AAAA;AAAA,QAOA,mBAAmB,SAAU,QAAQ,OAAO,MAAO;AAClD,cAAI,SAAS,KAAK,KAAK,CAAC;AACxB,cAAG,CAAC,GAAG,KAAK,YAAY,MAAM,MAC1B,CAAC,GAAG,KAAK,UAAU,MAAM,KAAK,CAAC,OAAO,oBAAoB,OAAO,KAAK,KAC7D,CAAC,OAAO,oBAAoB,OAAO,EAAE,OAC9C,CAAC,GAAG,KAAK,QAAQ,MAAM,KAAK,CAAC,OAAO,oBAAoB,OAAO,EAAE,IAAI;AACxE,mBAAO,YAAa,GAAG,MAAM,OAAO,UAAU,QAAQ,KAAK,SAAS,CAAE;AAAA,UACvE,OAAO;AACN,gBAAG,GAAG,KAAK,QAAQ,MAAM;AACxB,uBAAS,OAAO,oBAAoB,OAAO,EAAE;AAC9C,mBAAO,QAAS;AAAA,cAAC,IAAI;AAAA,gBACpB,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK,CAAC,QAAQ,OAAO,kBAAkB,CAAC,CAAC,CAAC;AAAA,gBACtE,MAAM;AAAA,gBACN;AAAA,cAAK;AAAA,YACN,CAAE;AAAA,UACH;AAAA,QACD;AAAA;AAAA,QAGA,oBAAoB,SAAU,QAAQ,OAAO,MAAO;AACnD,cAAI,SAAS,KAAK,KAAK,CAAC;AACxB,cAAG,CAAC,GAAG,KAAK,YAAY,MAAM,MAC1B,CAAC,GAAG,KAAK,UAAU,MAAM,KAAK,CAAC,OAAO,oBAAoB,OAAO,KAAK,KAC7D,CAAC,OAAO,oBAAoB,OAAO,EAAE,OAC9C,CAAC,GAAG,KAAK,QAAQ,MAAM,KAAK,CAAC,OAAO,oBAAoB,OAAO,EAAE,IAAI;AACxE,mBAAO,YAAa,GAAG,MAAM,OAAO,UAAU,QAAQ,KAAK,SAAS,CAAE;AAAA,UACvE,OAAO;AACN,gBAAG,GAAG,KAAK,QAAQ,MAAM;AACxB,uBAAS,OAAO,oBAAqB,OAAO,EAAG;AAChD,mBAAO,QAAS;AAAA,cAAC,IAAI;AAAA,gBACpB,MAAM,KAAK,QAAQ,IAAI,KAAK,KAAK,CAAC,QAAQ,OAAO,mBAAmB,CAAC,CAAC,CAAC;AAAA,gBACvE,MAAM;AAAA,gBACN;AAAA,cAAK;AAAA,YACN,CAAE;AAAA,UACH;AAAA,QACD;AAAA;AAAA,QAGA,eAAe,SAAU,QAAQ,OAAO,MAAO;AAC9C,cAAI,QAAQ,KAAK,KAAK,CAAC;AACvB,cAAI,SAAS,GAAG,KAAK,UAAW,KAAM,IAAI,QAAQ,OAAO,oBAAqB,MAAM,EAAG;AACvF,cAAI,GAAG,KAAK,YAAa,KAAM,GAAI;AAClC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,UAAW,KAAM,KAAK,CAAC,GAAG,KAAK,QAAS,KAAM,GAAI;AACrE,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,OAAO,KAAK,SAAU,CAAE;AAAA,UACjF,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,OAAO,oBAAoB,MAAM,KAAK,KACrE,CAAC,OAAO,oBAAoB,MAAM,EAAE,GAAI;AACpD,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,OAAO,KAAK,SAAU,CAAE;AAAA,UAC3E,WAAW,OAAO,WAAW,MAAO;AACnC,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,UAAU,OAAO,KAAK,SAAU,CAAE;AAAA,UACrF,OAAO;AACN,mBAAO,kBAAmB,MAAO;AACjC,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,gBAAgB,SAAU,QAAQ,OAAO,MAAO;AAC/C,cAAI,SAAS,KAAK,KAAK,CAAC;AACxB,cAAI,SAAS,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC1F,cAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,OAAO,oBAAoB,OAAO,KAAK,KACtE,CAAC,OAAO,oBAAoB,OAAO,EAAE,GAAI;AACrD,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,OAAO,UAAU,MAAO;AAClC,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACvF,OAAO;AACN,mBAAO,mBAAoB,MAAO;AAClC,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,UAAU,SAAU,QAAQ,OAAO,MAAO;AACzC,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,SAAS,KAAK,KAAK,CAAC;AAClE,iBAAO,QAAS,CAAC,IAAI;AAAA,YACpB,MAAM,KAAK,QAAQ,IAAI,KAAK,QAAQ,CAAC,MAAM,MAAM,QAAQ,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,YAC7E,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAE;AAAA,QACJ;AAAA;AAAA,QAGA,UAAU,SAAU,QAAQ,OAAO,MAAO;AACzC,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,SAAS,KAAK,KAAK,CAAC,GAAG,UAAU,KAAK,KAAK,CAAC;AAC1F,cAAI,GAAG,KAAK,YAAa,IAAK,KAAK,GAAG,KAAK,YAAa,IAAK,KAAK,GAAG,KAAK,YAAa,OAAQ,GAAI;AAClG,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,QAAS,IAAK,GAAI;AACrE,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,UACnE,WAAW,CAAC,GAAG,KAAK,QAAS,OAAQ,GAAI;AACxC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,SAAS,KAAK,SAAU,CAAE;AAAA,UACtE,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,GAAI;AAC3C,mBAAO,YAAa,GAAG,MAAM,gBAAiB,QAAQ,KAAK,SAAU,CAAE;AAAA,UACxE,WAAW,CAAC,GAAG,KAAK,QAAS,IAAK,KAAK,CAAC,GAAG,KAAK,cAAe,IAAK,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,OAAQ,eAAe,MAAM,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,CAAC,GAAG,KAAK,WAAY,IAAK,GAAI;AACxC,mBAAO,YAAa,GAAG,MAAM,OAAQ,WAAW,MAAM,KAAK,SAAU,CAAE;AAAA,UACxE,OAAO;AACN,gBAAI,cAAc,CAAC;AACnB,gBAAI,UAAU;AACd,gBAAI;AACJ,mBAAO,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,OAAQ;AAChE,yBAAW,QAAQ,KAAK,CAAC;AACzB,kBAAI,GAAG,KAAK,YAAa,QAAS,GAAI;AACrC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,cACD,WAAW,CAAC,GAAG,KAAK,iBAAkB,QAAS,GAAI;AAClD,uBAAO,YAAa,GAAG,MAAM,OAAQ,iBAAiB,UAAU,KAAK,SAAU,CAAE;AACjF;AAAA,cACD;AACA,0BAAY,SAAS,EAAE,IAAI,SAAS,KAAK,CAAC,EAAE;AAC5C,wBAAU,QAAQ,KAAK,CAAC;AAAA,YACzB;AACA,gBAAI,QAAQ,cAAc,QAAS;AAClC,kBAAI,GAAG,KAAK,YAAa,OAAQ;AAChC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA;AAE7D,uBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,SAAS,KAAK,SAAU,CAAE;AACtE;AAAA,YACD,OAAO;AACN,kBAAI,QAAQ,YAAY,OAAO;AAC/B,kBAAI,SAAS,OAAO,oBAAoB,KAAK,GAAI;AAChD,uBAAO,YAAa,GAAG,MAAM,WAAY,QAAQ,eAAe,IAAI,KAAK,SAAS,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,SAAU,CAAE;AAC3H;AAAA,cACD;AACA,kBAAI,CAAC,YAAY,MAAM;AACtB,4BAAY,MAAM,IAAI;AACvB,kBAAI;AACJ,kBAAI,GAAG,KAAK,QAAS,IAAK;AACzB,uBAAO,OAAO,iBAAkB,KAAK,IAAI,YAAY,MAAM,GAAG,KAAK,EAAG;AAAA;AAEtE,uBAAO,KAAK,OAAQ,YAAY,MAAM,GAAG,KAAK,EAAG;AAClD,kBAAI,SAAS,OAAQ;AACpB,uBAAO,YAAa,GAAG,MAAM,WAAY,QAAQ,eAAe,MAAM,KAAK,SAAU,CAAE;AACvF;AAAA,cACD,WAAW,SAAS,MAAO;AAC1B,uBAAO,YAAa,GAAG,MAAM,UAAW,eAAe,MAAM,KAAK,SAAU,CAAE;AAC9E;AAAA,cACD;AACA,kBAAI,YAAY,IAAI;AAAA,gBACnB;AAAA,gBAAM,KAAK;AAAA,gBACX,YAAY,OAAO;AAAA,gBACnB,YAAY,MAAM;AAAA,gBAClB,YAAY,YAAY,MAAM;AAAA,gBAC9B,YAAY,YAAY;AAAA,cAAE;AAC3B,kBAAI;AACH,uBAAO,QAAQ,QAAQ,KAAK,IAAI;AAAA;AAEhC,uBAAO,QAAQ,QAAQ,UAAU,EAAE,IAAI;AACxC,qBAAO,QAAS,CAAC,IAAI;AAAA,gBACpB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,QAAQ,SAAS,CAAE,CAAE;AAAA,gBACzD,MAAM;AAAA,gBACN;AAAA,cACD,CAAC,CAAE;AAAA,YACJ;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,WAAW,SAAU,QAAQ,OAAO,MAAO;AAC1C,cAAI,SAAS,KAAK,KAAK,CAAC;AACxB,iBAAO,QAAS,CAAC,IAAI;AAAA,YACpB,MAAM,KAAK,QAAQ,IAAI,KAAK,SAAS,CAAC,QAAQ,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,YAClE,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAE;AAAA,QACJ;AAAA;AAAA,QAGA,WAAW,SAAU,QAAQ,OAAO,MAAO;AAC1C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,UAAU,KAAK,KAAK,CAAC;AAChD,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,KAAK,GAAG,KAAK,YAAa,OAAQ,GAAI;AACrE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,QAAS,OAAQ,GAAI;AACxC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,SAAS,KAAK,SAAU,CAAE;AAAA,UACtE,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,OAAO;AAEN,gBAAI,cAAc,CAAC;AACnB,gBAAI,UAAU;AACd,gBAAI;AACJ,mBAAO,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,OAAQ;AAChE,yBAAW,QAAQ,KAAK,CAAC;AACzB,kBAAI,GAAG,KAAK,YAAa,QAAS,GAAI;AACrC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,cACD,WAAW,CAAC,GAAG,KAAK,gBAAiB,QAAS,GAAI;AACjD,uBAAO,YAAa,GAAG,MAAM,OAAQ,gBAAgB,UAAU,KAAK,SAAU,CAAE;AAChF;AAAA,cACD;AACA,0BAAY,SAAS,EAAE,IAAI,SAAS,KAAK,CAAC,EAAE,OAAO;AACnD,wBAAU,QAAQ,KAAK,CAAC;AAAA,YACzB;AACA,gBAAI,QAAQ,cAAc,QAAS;AAClC,kBAAI,GAAG,KAAK,YAAa,OAAQ;AAChC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA;AAE7D,uBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,SAAS,KAAK,SAAU,CAAE;AACtE;AAAA,YACD,OAAO;AACN,kBAAG,YAAY,OAAO,QAAQ,kBAAkB,YAAY,OAAO,QAAQ,mBAAmB,YAAY,OAAO,QAAQ,gBAAgB;AACxI,uBAAO,QAAS,KAAM;AACtB;AAAA,cACD,WAAW,YAAY,OAAO,QAAQ,eAAgB;AACrD,uBAAO,QAAQ,gBAAgB,OAAO,QAAQ;AAAA,cAC/C,WAAW,YAAY,OAAO,QAAQ,gBAAiB;AACtD,uBAAO,QAAQ,iBAAiB,OAAO,QAAQ;AAAA,cAChD;AACA,kBAAI,QAAQ,UAAU,QAAQ,QAAQ,UAAU;AAC/C,uBAAO,OAAO,QAAQ,QAAQ,QAAQ,KAAK;AAAA;AAE3C,uBAAO,OAAO,QAAQ,QAAQ,QAAQ,EAAE;AACzC,kBAAI,QAAQ;AACX,wBAAQ,OAAO,MAAM;AACtB,kBAAI,SAAS,QAAQ,OAAO,MAAM;AAClC,sBAAQ,SAAS;AACjB,kBAAI,YAAY,UAAU,QAAQ,WAAW,MAAO;AACnD,uBAAO,QAAS,KAAM;AAAA,cACvB;AAAA,YACD;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,kBAAkB;AAAA,UACjB,IAAI,KAAK,IAAI,KAAK,gBAAgB,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,gBAAgB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC5I;AAAA;AAAA,QAGA,kBAAkB,SAAU,QAAQ,OAAO,MAAO;AACjD,cAAI,SAAS,KAAK,KAAK,CAAC;AACxB,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,UAAU,MAAO;AACnC,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACvF,OAAO;AACN,oBAAQ,OAAO,MAAM;AACrB,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA,QAGA,qBAAqB,SAAU,QAAQ,OAAO,MAAO;AACpD,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC;AACjD,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,CAAC,GAAG,KAAK,YAAa,MAAO,KAAK,CAAC,GAAG,KAAK,UAAW,MAAO,GAAI;AACpE,mBAAO,YAAa,GAAG,MAAM,OAAQ,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACzE,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,MAAM,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,OAAQ;AACzG,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,CAAC,GAAG,KAAK,YAAa,QAAS,KAAK,CAAC,GAAG,KAAK,mBAAoB,QAAS,GAAI;AACxF,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,UAAU,KAAK,SAAU,CAAE;AAAA,UACpF,OAAO;AACN,gBAAI,UAAU,CAAC;AACf,gBAAI,SAAS,CAAC;AACd,gBAAI,UAAU,GAAG,KAAK,YAAY,QAAQ;AAC1C,gBAAI,CAAC,GAAG,KAAK,YAAa,MAAO;AAChC,sBAAQ,KAAM,OAAQ;AAAA;AAEtB,uBAAS,OAAO,OAAO,QAAQ;AAC9B,wBAAQ,KAAM,OAAO,QAAQ,QAAQ,GAAG,CAAE;AAC5C,qBAASA,KAAI,GAAGA,KAAI,QAAQ,QAAQA,MAAM;AACzC,kBAAI,aAAa,CAAC;AAElB,mBAAK,WAAW,SAAS,cAAc,kBAAkB,QAAQA,EAAC,EAAE;AACnE,2BAAW,KAAM,IAAI,KAAM,aAAa,CAAC,IAAI,KAAK,QAAQA,EAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAE,CAAE;AAEhF,kBAAG,WAAW,SAAS,cAAc;AACpC,2BAAW,KAAM,IAAI,KAAM,QAAQ,CAAC,IAAI,KAAK,QAAQA,EAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAE,CAAE;AAEtE,kBAAG,WAAW,SAAS,cAAc,aAAa,SAAS,cAAc;AACxE,2BAAW,KAAM,IAAI,KAAM,QAAQA,EAAC,EAAE,QAAQ,UAAU,UAAU,CAAC,CAAE,CAAE;AAExE,mBAAK,WAAW,SAAS,cAAc,cAAc,QAAQA,EAAC,EAAE;AAC/D,2BAAW,KAAM,IAAI,KAAM,SAAS,CAAC,IAAI,KAAK,QAAQA,EAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAE,CAAE;AAExE,kBAAG,WAAW,SAAS,cAAc;AACpC,2BAAW,KAAM,IAAI,KAAM,YAAY;AAAA,kBACtC,IAAI,KAAK,YAAY;AAAA,oBACpB,IAAI,IAAI,QAAQA,EAAC,EAAE,YAAY,KAAK;AAAA,oBACpC,IAAI,IAAI,QAAQA,EAAC,EAAE,YAAY,KAAK;AAAA,oBACpC,IAAI,IAAI,QAAQA,EAAC,EAAE,eAAe,KAAK;AAAA,kBACxC,CAAC;AAAA,gBACF,CAAE,CAAE;AAEL,kBAAG,WAAW,SAAS,cAAc;AACpC,2BAAW,KAAM,IAAI,KAAM,iBAAiB,CAAC,IAAI;AAAA,kBAChD,QAAQA,EAAC,EAAE,aAAa,mBAAmB,QAAQA,EAAC,EAAE,OAAO,OAAO,QAAQA,EAAC,EAAE,OAAO,IAAI,QAAQA,EAAC,EAAE,QAAQ,IAAI,OACjH,QAAQA,EAAC,EAAE,aAAa,uBAAuB,SAC/C;AAAA,kBAAO,CAAC;AAAA,gBAAC,CAAC,CAAE,CAAE;AAEhB,kBAAG,WAAW,SAAS,cAAc;AACpC,2BAAW,KAAM,IAAI,KAAM,cAAc,CAAC,IAAI,KAAK,QAAQA,EAAC,EAAE,YAAY,CAAC,CAAC,CAAC,CAAE,CAAE;AAElF,kBAAG,WAAW,SAAS,cAAc;AACpC,2BAAW,KAAM,IAAI,KAAM,cAAc,CAAC,IAAI,KAAK,QAAQA,EAAC,EAAE,aAAa,SAAS,SAAS,CAAC,CAAC,CAAC,CAAE,CAAE;AAErG,kBAAG,WAAW,SAAS,cAAc;AACpC,2BAAW,KAAM,IAAI,KAAM,QAAQ,CAAC,IAAI,KAAK,QAAQA,EAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAE,CAAE;AACtE,uBAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAM;AAC5C,uBAAO,KAAM,IAAI;AAAA,kBAChB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK;AAAA,oBAClC,IAAI,KAAK,KAAK,CAAC,GAAG,KAAK,YAAa,MAAO,IAAI,SAAS,SAAS,QAAQA,EAAC,CAAC,CAAC;AAAA,oBAC5E,IAAI,KAAK,KAAK,CAAC,UAAU,WAAW,CAAC,CAAC,CAAC;AAAA,kBAAC,CAAC,CAAE;AAAA,kBAC5C,MAAM;AAAA,kBACN;AAAA,gBACD,CAAE;AAAA,cACH;AAAA,YACD;AACA,mBAAO,QAAS,MAAO;AAAA,UACxB;AAAA,QACD;AAAA;AAAA,QAGA,0BAA0B,SAAS,QAAQ,OAAO,MAAM;AACvD,cAAI,QAAQ,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AACtE,cAAG,GAAG,KAAK,YAAY,QAAQ,GAAG;AACjC,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,QAAQ,QAAQ,KAAK,SAAS,cAAc,cAAc;AAC5E,mBAAO,YAAY,GAAG,MAAM,OAAO,mBAAmB,UAAU,KAAK,SAAS,CAAC;AAAA,UAChF,WAAU,CAAC,GAAG,KAAK,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,QAAQ,KAAK,GAAG;AACjE,mBAAO,YAAY,GAAG,MAAM,KAAK,QAAQ,OAAO,KAAK,SAAS,CAAC;AAAA,UAChE,WAAU,CAAC,GAAG,KAAK,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,WAAW,KAAK,GAAG;AACpE,mBAAO,YAAY,GAAG,MAAM,KAAK,WAAW,OAAO,KAAK,SAAS,CAAC;AAAA,UACnE,OAAO;AACN,gBAAI,SAAS,CAAC,cAAc,cAAc,eAAe;AACzD,gBAAI,SAAS,CAAC;AACd,gBAAI,WAAW,EAAC,YAAY,GAAG,YAAY,GAAG,eAAe,EAAC;AAC9D,gBAAG,GAAG,KAAK,YAAY,KAAK,GAAG;AAC9B,uBAAQA,KAAI,GAAGA,KAAI,OAAO,QAAQA,MAAK;AACtC,uBAAO,KAAK,IAAI,MAAM,MAAM,KAAK;AAAA,kBAChC,IAAI,KAAK,KAAK;AAAA,oBACb,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,OAAOA,EAAC,CAAC,GAAG,KAAK,CAAC;AAAA,oBAC1C,IAAI,KAAK,KAAK,CAAC,OAAO,SAAS,KAAK,SAAS,OAAOA,EAAC,CAAC,CAAC,CAAC,CAAC;AAAA,kBAC1D,CAAC;AAAA,gBACF,GAAG,MAAM,cAAc,KAAK,CAAC;AAAA,cAC9B;AAAA,YACD,WAAU,SAAS,eAAe,MAAM,EAAE,GAAG;AAC5C,qBAAO,KAAK,IAAI,MAAM,MAAM,KAAK;AAAA,gBAChC,IAAI,KAAK,KAAK,CAAC,OAAO,SAAS,KAAK,SAAS,MAAM,EAAE,CAAC,CAAC,CAAC;AAAA,cACzD,GAAG,MAAM,cAAc,KAAK,CAAC;AAAA,YAC9B;AACA,mBAAO,QAAQ,MAAM;AAAA,UACtB;AAAA,QACD;AAAA;AAAA,QAGA,sBAAsB;AAAA,UACrB,IAAI,KAAK,IAAI,KAAK,oBAAoB,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,iBAAiB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,mBAAmB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,iBAAiB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC7W;AAAA;AAAA,QAGA,sBAAsB,SAAU,QAAQ,OAAO,MAAO;AACrD,cAAI,SAAS,KAAK,KAAK,CAAC;AACxB,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,OAAO;AACN,gBAAI,IAAI,OAAO,mBAAmB;AAClC,mBAAO,QAAS,CAAC,IAAI;AAAA,cACpB,MAAM,KAAK;AAAA,gBACV,IAAI,KAAK,KAAK;AAAA,kBAAC,IAAI,KAAK,mBAAmB,CAAC,SAAQ,IAAI,KAAK,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,kBACnF,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC,GAAE,IAAI,KAAK,KAAK;AAAA,oBAAC,IAAI,KAAK,KAAK,CAAC,GAAE,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC;AAAA,oBACpF,IAAI,KAAK,KAAK,CAAC,GAAE,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC;AAAA,kBAAC,CAAC,CAAC,CAAC;AAAA,gBAAC,CAAC;AAAA,cAC7C;AAAA,cACA,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAE;AAAA,UACJ;AAAA,QACD;AAAA;AAAA,QAGA,yBAAyB,SAAU,QAAQ,OAAO,MAAO;AACxD,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC;AACjD,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,KAAK,GAAG,KAAK,YAAa,QAAS,GAAI;AACtE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,CAAC,GAAG,KAAK,mBAAoB,QAAS,GAAI;AACpD,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,UAAU,KAAK,SAAU,CAAE;AAAA,UACpF,WAAW,QAAQ,eAAe,OAAQ;AACzC,mBAAO,YAAa,GAAG,MAAM,WAAY,cAAc,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC3F,OAAO;AACN,gBAAI,SAAS,cAAc,cAAe;AACzC,sBAAQ,WAAW,SAAS,KAAK,CAAC,EAAE;AACpC,sBAAQ,aAAa,SAAS,KAAK,CAAC,EAAE;AACtC,sBAAQ,aAAa,SAAS,KAAK,CAAC,EAAE;AACtC,sBAAQ,gBAAgB,SAAS,KAAK,CAAC,EAAE;AAAA,YAC1C,OAAO;AACN,sBAAQ,WAAW,SAAS;AAAA,YAC7B;AACA,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA;AAAA,QAOA,cAAc;AAAA,UACb,IAAI,KAAK,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,iBAAiB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC5J;AAAA;AAAA,QAGA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,gBAAiB,IAAK,GAAI;AAC7E,mBAAO,YAAa,GAAG,MAAM,KAAM,gBAAgB,MAAM,KAAK,SAAU,CAAE;AAAA,UAC3E,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,QAAS;AAC3B,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACtF,WAAW,QAAQ,SAAS,UAAW;AACtC,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,iBAAiB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC7F,WAAW,QAAQ,aAAa,wBAAwB,QAAQ,eAAe,SAAU;AACxF,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,sBAAsB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClG,OAAO;AACN,gBAAI;AACJ,gBAAI,QAAQ,aAAa,iBAAkB;AAC1C,4BAAc;AACd,sBAAQ,WAAW;AAAA,YACpB,WAAW,QAAQ,aAAa,sBAAuB;AACtD,4BAAc;AACd,sBAAQ,WAAW;AAAA,YACpB,OAAO;AACN,4BAAc,QAAQ,OAAO,IAAK,GAAG,QAAQ,QAAS;AACtD,kBAAI,gBAAgB,MAAO;AAC1B,uBAAO,YAAa,GAAG,MAAM,eAAgB,aAAa,KAAK,SAAU,CAAE;AAC3E;AAAA,cACD,WAAU,gBAAgB,iBAAiB;AAC1C,8BAAc;AACd,wBAAQ,WAAW;AAAA,cACpB,OAAO;AACN,wBAAQ;AACR,wBAAQ;AACR,wBAAQ;AACR,oBAAG,gBAAgB,MAAM;AACxB,0BAAQ;AACR,0BAAQ,gBAAgB;AAAA,gBACzB;AAAA,cACD;AAAA,YACD;AACA,mBAAO,QAAS,CAAC,IAAI;AAAA,cACpB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,KAAK,aAAY,CAAC,CAAC,GAAG,IAAI,CAAE,CAAE;AAAA,cACtE,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAE;AAAA,UACJ;AAAA,QACD;AAAA;AAAA,QAGA,cAAc;AAAA,UACb,IAAI,KAAK,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,iBAAiB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC5J;AAAA;AAAA,QAGA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,WAAY,IAAK,GAAI;AACxE,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,MAAM,KAAK,SAAU,CAAE;AAAA,UACtE,WAAW,GAAG,KAAK,WAAY,IAAK,KAAK,CAAC,GAAG,KAAK,qBAAsB,IAAK,GAAI;AAChF,mBAAO,YAAa,GAAG,MAAM,eAAgB,qBAAqB,KAAK,SAAU,CAAE;AAAA,UACpF,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,KAAK,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACzG,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,QAAS;AAC3B,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACtF,WAAW,QAAQ,SAAS,UAAW;AACtC,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,iBAAiB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC7F,WAAW,QAAQ,aAAa,wBAAwB,QAAQ,eAAe,SAAU;AACxF,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,sBAAsB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClG,OAAO;AACN,gBAAI;AACJ,gBAAI,QAAQ,aAAa,iBAAkB;AAC1C,4BAAc;AACd,sBAAQ,WAAW;AAAA,YACpB,WAAW,QAAQ,aAAa,sBAAuB;AACtD,4BAAc;AACd,sBAAQ,WAAW;AAAA,YACpB,OAAO;AACN,4BAAc,QAAQ,OAAO,IAAK,GAAG,QAAQ,QAAS;AACtD,kBAAI,gBAAgB,MAAO;AAC1B,uBAAO,YAAa,GAAG,MAAM,eAAgB,aAAa,KAAK,SAAU,CAAE;AAC3E;AAAA,cACD,WAAU,gBAAgB,iBAAiB;AAC1C,8BAAc;AACd,wBAAQ,WAAW;AAAA,cACpB,OAAO;AACN,8BAAc,YAAa,aAAa,CAAE;AAC1C,wBAAQ;AACR,wBAAQ;AACR,wBAAQ;AACR,oBAAG,gBAAgB,IAAI;AACtB,0BAAQ;AACR,0BAAQ,gBAAgB;AAAA,gBACzB;AAAA,cACD;AAAA,YACD;AACA,mBAAO,QAAS,CAAC,IAAI;AAAA,cACpB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,IAAI,aAAa,KAAK,GAAG,IAAI,CAAE,CAAE;AAAA,cACzE,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAE;AAAA,UACJ;AAAA,QACD;AAAA;AAAA,QAGA,eAAe;AAAA,UACd,IAAI,KAAK,IAAI,KAAK,aAAa,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,iBAAiB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,aAAa,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC9J;AAAA;AAAA,QAGA,eAAe,SAAU,QAAQ,OAAO,MAAO;AAC9C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,gBAAiB,IAAK,GAAI;AAC7E,mBAAO,YAAa,GAAG,MAAM,KAAM,gBAAgB,MAAM,KAAK,SAAU,CAAE;AAAA,UAC3E,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,QAAS;AAC3B,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACtF,WAAW,QAAQ,SAAS,UAAW;AACtC,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,iBAAiB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC7F,WAAW,QAAQ,aAAa,wBAAwB,QAAQ,eAAe,SAAU;AACxF,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,sBAAsB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClG,OAAO;AACN,gBAAI;AACJ,gBAAI,QAAQ,aAAa,iBAAkB;AAC1C,4BAAc;AACd,sBAAQ,WAAW;AAAA,YACpB,WAAW,QAAQ,aAAa,sBAAuB;AACtD,4BAAc;AACd,sBAAQ,WAAW;AAAA,YACpB,OAAO;AACN,4BAAc,QAAQ,OAAO,IAAK,GAAG,QAAQ,QAAS;AACtD,kBAAI,gBAAgB,MAAO;AAC1B,uBAAO,YAAa,GAAG,MAAM,eAAgB,aAAa,KAAK,SAAU,CAAE;AAC3E;AAAA,cACD,WAAU,gBAAgB,iBAAiB;AAC1C,8BAAc;AAAA,cACf;AAAA,YACD;AACA,mBAAO,QAAS,CAAC,IAAI;AAAA,cACpB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,KAAK,aAAY,CAAC,CAAC,GAAG,IAAI,CAAE,CAAE;AAAA,cACtE,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAE;AAAA,UACJ;AAAA,QACD;AAAA;AAAA,QAGA,eAAe;AAAA,UACd,IAAI,KAAK,IAAI,KAAK,aAAa,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,iBAAiB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,aAAa,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC9J;AAAA;AAAA,QAGA,eAAe,SAAU,QAAQ,OAAO,MAAO;AAC9C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,WAAY,IAAK,GAAI;AACxE,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,MAAM,KAAK,SAAU,CAAE;AAAA,UACtE,WAAW,GAAG,KAAK,WAAY,IAAK,KAAK,CAAC,GAAG,KAAK,qBAAsB,IAAK,GAAI;AAChF,mBAAO,YAAa,GAAG,MAAM,eAAgB,qBAAqB,KAAK,SAAU,CAAE;AAAA,UACpF,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,KAAK,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACzG,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,QAAS;AAC3B,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACtF,WAAW,QAAQ,SAAS,UAAW;AACtC,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,iBAAiB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC7F,WAAW,QAAQ,aAAa,wBAAwB,QAAQ,eAAe,SAAU;AACxF,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,sBAAsB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClG,OAAO;AACN,gBAAI;AACJ,gBAAI,QAAQ,aAAa,iBAAkB;AAC1C,4BAAc;AACd,sBAAQ,WAAW;AAAA,YACpB,OAAO;AACN,4BAAc,QAAQ,OAAO,IAAK,GAAG,QAAQ,QAAS;AACtD,kBAAI,gBAAgB,MAAO;AAC1B,uBAAO,YAAa,GAAG,MAAM,eAAgB,aAAa,KAAK,SAAU,CAAE;AAC3E;AAAA,cACD,WAAU,gBAAgB,iBAAiB;AAC1C,8BAAc;AAAA,cACf,OAAO;AACN,8BAAc,YAAa,aAAa,CAAE;AAAA,cAC3C;AAAA,YACD;AACA,mBAAO,QAAS,CAAC,IAAI;AAAA,cACpB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,IAAI,aAAa,KAAK,GAAG,IAAI,CAAE,CAAE;AAAA,cACzE,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAE;AAAA,UACJ;AAAA,QACD;AAAA;AAAA,QAGA,cAAc;AAAA,UACb,IAAI,KAAK,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC7J;AAAA;AAAA,QAGA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,KAAK,GAAG,KAAK,YAAa,IAAK,GAAI;AAClE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,aAAc,IAAK,GAAI;AAC1C,mBAAO,YAAa,GAAG,MAAM,KAAM,aAAa,MAAM,KAAK,SAAU,CAAE;AAAA,UACxE,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,KAAK,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACzG,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,OAAQ;AAC1B,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACvF,WAAW,QAAQ,SAAS,UAAW;AACtC,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,iBAAiB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC9F,OAAO;AACN,gBAAI,QAAQ,OAAO,IAAK,KAAK,IAAI,QAAQ,QAAS,GAAI;AACrD,kBAAG,OAAO,QAAQ,aAAa;AAC9B,wBAAQ;AACT,sBAAQ;AACR,sBAAQ;AACR,kBAAG,KAAK,OAAO,MAAM;AACpB,wBAAQ;AACR,wBAAQ,gBAAgB;AAAA,cACzB;AACA,qBAAO,QAAS,KAAM;AAAA,YACvB;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,cAAc;AAAA,UACb,IAAI,KAAK,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC7J;AAAA;AAAA,QAGA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,KAAK,GAAG,KAAK,YAAa,IAAK,GAAI;AAClE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,WAAY,IAAK,GAAI;AACxC,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,MAAM,KAAK,SAAU,CAAE;AAAA,UACtE,WAAW,CAAC,GAAG,KAAK,kBAAmB,IAAK,GAAI;AAC/C,mBAAO,YAAa,GAAG,MAAM,eAAgB,kBAAkB,KAAK,SAAU,CAAE;AAAA,UACjF,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,KAAK,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACzG,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,OAAQ;AAC1B,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACvF,WAAW,QAAQ,SAAS,UAAW;AACtC,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,iBAAiB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC9F,OAAO;AACN,gBAAI,QAAQ,OAAO,IAAK,cAAe,KAAK,KAAM,GAAG,QAAQ,QAAS,GAAI;AACzE,kBAAG,OAAO,QAAQ,aAAa;AAC9B,wBAAQ;AACT,sBAAQ;AACR,sBAAQ;AACR,kBAAG,KAAK,UAAU,IAAI;AACrB,wBAAQ;AACR,wBAAQ,gBAAgB;AAAA,cACzB;AACA,qBAAO,QAAS,KAAM;AAAA,YACvB;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,QAAQ;AAAA,UACP,IAAI,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QACzI;AAAA;AAAA,QAGA,QAAQ,SAAU,QAAQ,OAAO,MAAO;AACvC,cAAI,SAAS,KAAK,KAAK,CAAC;AACxB,iBAAO,QAAS,CAAC,IAAI;AAAA,YACpB,MAAM,KAAK,QAAS,IAAI,KAAK,YAAY,CAAC,QAAQ,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAE;AAAA,YACvE,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAE;AAAA,QACJ;AAAA;AAAA;AAAA,QAOA,cAAc;AAAA,UACb,IAAI,KAAK,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,iBAAiB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC5J;AAAA;AAAA,QAGA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,WAAY,IAAK,GAAI;AACxE,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,MAAM,KAAK,SAAU,CAAE;AAAA,UACtE,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,QAAS;AAC3B,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACtF,WAAW,QAAQ,SAAS,QAAS;AACpC,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,eAAe,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC3F,WAAW,QAAQ,aAAa,wBAAwB,QAAQ,eAAe,SAAU;AACxF,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,sBAAsB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClG,OAAO;AACN,gBAAI;AACJ,gBAAI,QAAQ,aAAa,iBAAkB;AAC1C,4BAAc;AACd,sBAAQ,WAAW;AAAA,YACpB,OAAO;AACN,4BAAc,QAAQ,OAAO,SAAU,QAAQ,QAAS;AACxD,kBAAI,gBAAgB,MAAO;AAC1B,uBAAO,YAAa,GAAG,MAAM,eAAgB,QAAQ,KAAK,SAAU,CAAE;AACtE;AAAA,cACD,WAAU,gBAAgB,iBAAiB;AAC1C,8BAAc;AACd,wBAAQ,WAAW;AAAA,cACpB,OAAO;AACN,wBAAQ;AACR,wBAAQ;AACR,wBAAQ;AAAA,cACT;AAAA,YACD;AACA,mBAAO,QAAS,CAAC,IAAI;AAAA,cACpB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,IAAI,aAAY,KAAK,GAAG,IAAI,CAAE,CAAE;AAAA,cACxE,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAE;AAAA,UACJ;AAAA,QACD;AAAA;AAAA,QAGA,eAAe;AAAA,UACd,IAAI,KAAK,IAAI,KAAK,aAAa,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,iBAAiB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,aAAa,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC9J;AAAA;AAAA,QAGA,eAAe,SAAU,QAAQ,OAAO,MAAO;AAC9C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,WAAY,IAAK,GAAI;AACxE,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,MAAM,KAAK,SAAU,CAAE;AAAA,UACtE,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,QAAS;AAC3B,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACtF,WAAW,QAAQ,SAAS,QAAS;AACpC,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,eAAe,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC3F,WAAW,QAAQ,aAAa,wBAAwB,QAAQ,eAAe,SAAU;AACxF,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,sBAAsB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClG,OAAO;AACN,gBAAI;AACJ,gBAAI,QAAQ,aAAa,iBAAkB;AAC1C,4BAAc;AACd,sBAAQ,WAAW;AAAA,YACpB,OAAO;AACN,4BAAc,QAAQ,OAAO,SAAU,QAAQ,QAAS;AACxD,kBAAI,gBAAgB,MAAO;AAC1B,uBAAO,YAAa,GAAG,MAAM,eAAgB,QAAQ,KAAK,SAAU,CAAE;AACtE;AAAA,cACD,WAAU,gBAAgB,iBAAiB;AAC1C,8BAAc;AAAA,cACf;AAAA,YACD;AACA,mBAAO,QAAS,CAAC,IAAI;AAAA,cACpB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,IAAI,IAAI,aAAY,KAAK,GAAG,IAAI,CAAE,CAAE;AAAA,cACxE,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAE;AAAA,UACJ;AAAA,QACD;AAAA;AAAA,QAGA,cAAc;AAAA,UACb,IAAI,KAAK,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,YAAY,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC7J;AAAA;AAAA,QAGA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,KAAK,GAAG,KAAK,YAAa,IAAK,GAAI;AAClE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,QAAS,IAAK,GAAI;AACrC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,UACnE,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,KAAK,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACzG,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,OAAQ;AAC1B,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACvF,WAAW,QAAQ,SAAS,QAAS;AACpC,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,eAAe,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5F,OAAO;AACN,gBAAI,QAAQ,OAAO,SAAU,KAAK,OAAO,QAAQ,QAAS,GAAI;AAC7D,kBAAG,OAAO,QAAQ,aAAa;AAC9B,wBAAQ;AACT,sBAAQ;AACR,sBAAQ;AACR,qBAAO,QAAS,KAAM;AAAA,YACvB;AAAA,UACD;AAAA,QACD;AAAA;AAAA;AAAA,QAOA,UAAU;AAAA,UACT,IAAI,KAAK,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,iBAAiB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,aAAa,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QACxK;AAAA;AAAA,QAGA,UAAU;AAAA,UACT,IAAI,KAAK,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,aAAa,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,GAAE,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC;AAAA,QAC3H;AAAA;AAAA,QAGA,eAAe;AAAA,UACd,IAAI,KAAK,IAAI,KAAK,aAAa,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,iBAAiB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,aAAa,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QACxL;AAAA;AAAA,QAGA,eAAe,SAAU,QAAQ,OAAO,MAAO;AAC9C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,UAAU,KAAK,KAAK,CAAC;AACrE,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,KAAK,GAAG,KAAK,YAAa,OAAQ,GAAI;AACrE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,QAAS,OAAQ,GAAI;AACxC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,SAAS,KAAK,SAAU,CAAE;AAAA,UACtE,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,QAAS;AAC3B,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACtF,WAAW,QAAQ,SAAS,UAAW;AACtC,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,iBAAiB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC7F,WAAW,QAAQ,aAAa,wBAAwB,QAAQ,eAAe,SAAU;AACxF,mBAAO,YAAa,GAAG,MAAM,WAAY,SAAS,sBAAsB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClG,WAAW,QAAQ,aAAa,wBAAwB,QAAQ,eAAe,YAAa;AAC3F,mBAAO;AAAA,cACN,OAAO,IAAI,KAAK,eAAe,CAAC,CAAC;AAAA,cACjC,MAAM;AAAA,cACN,KAAK;AAAA,YACN;AAAA,UACD,OAAO;AAEN,gBAAI,cAAc,CAAC;AACnB,gBAAI,UAAU;AACd,gBAAI;AACJ,mBAAO,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,OAAQ;AAChE,yBAAW,QAAQ,KAAK,CAAC;AACzB,kBAAI,GAAG,KAAK,YAAa,QAAS,GAAI;AACrC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,cACD,WAAW,CAAC,GAAG,KAAK,eAAgB,QAAS,GAAI;AAChD,uBAAO,YAAa,GAAG,MAAM,OAAQ,eAAe,UAAU,KAAK,SAAU,CAAE;AAC/E;AAAA,cACD;AACA,0BAAY,SAAS,EAAE,IAAI,SAAS,KAAK,CAAC;AAC1C,wBAAU,QAAQ,KAAK,CAAC;AAAA,YACzB;AACA,gBAAI,QAAQ,cAAc,QAAS;AAClC,kBAAI,GAAG,KAAK,YAAa,OAAQ;AAChC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA;AAE7D,uBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,SAAS,KAAK,SAAU,CAAE;AACtE;AAAA,YACD,OAAO;AACN,kBAAI,MAAM,WAAW;AACrB,kBAAI,OAAO;AACX,kBAAI,SAAS,CAAC;AACd,kBAAI,aAAa;AACjB,kBAAI,gBAAgB;AAEpB,qBAAO,eAAe,QAAQ,iBAAiB,WAAW,SAAS,UAAU,WAAW,UAAU,OAAO,OAAO,SAAS,KAAK,KAAK,SAAS,OAAQ;AACnJ,uBAAO,QAAQ,OAAO,IAAK,GAAG,QAAQ,QAAS;AAC/C,uBAAM,SAAS,QAAQ,SAAS,OAAO,SAAS,mBAAmB,SAAS,sBAAsB;AACjG,0BAAQ;AACR,0BAAQ;AACR,yBAAO,QAAQ,OAAO,IAAK,GAAG,QAAQ,QAAS;AAAA,gBAChD;AACA,oBAAI,SAAS,MAAO;AACnB,yBAAO,YAAa,GAAG,MAAM,eAAgB,aAAa,KAAK,SAAU,CAAE;AAC3E;AAAA,gBACD,WAAW,SAAS,mBAAmB,SAAS,sBAAuB;AACtE,sBAAG,WAAW,QAAQ,OAAO,WAAW,GAAG;AAC1C,4BAAQ,WAAW;AACnB,2BAAO;AAAA,sBACN,OAAO,IAAI,KAAK,eAAe,CAAC,CAAC;AAAA,sBACjC,MAAM;AAAA,sBACN,KAAK;AAAA,oBACN;AACA;AAAA,kBACD,WAAU,MAAM;AACf,2BAAO,YAAa,GAAG,MAAM,OAAQ,YAAY,0BAA0B,KAAM,CAAE;AACnF;AAAA,kBACD,OAAO;AACN,2BAAO,YAAa,GAAG,MAAM,OAAQ,YAAY,mBAAmB,IAAK,CAAE;AAC3E;AAAA,kBACD;AAAA,gBACD,WAAU,SAAS,KAAK;AACvB,0BAAQ;AACR,0BAAQ;AAAA,gBACT;AACA,4BAAY,IAAI,UAAW,MAAO;AAClC,0BAAU,SAAU,IAAK;AACzB,yBAAS,UAAU,WAAW;AAC9B,4BAAY,WAAW,QAAQ,OAAO,SAAS,IAAI,OAAO,OAAO,SAAO,CAAC,IAAI;AAC7E,6BAAa,WAAW,QAAQ,OAAO,SAAS,IAAI,OAAO,OAAO,SAAO,CAAC,IAAI;AAC9E,oBAAG,WAAW;AACb;AACD,gCAAgB;AAChB,yBAAQA,KAAI,GAAGA,KAAI,OAAO,UAAU,CAAC,eAAeA;AACnD,kCAAgB,OAAOA,EAAC,EAAE,SAAS;AACpC,oBAAG;AACF;AACD,uBAAO,UAAU,QAAQ,QAAQ,GAAG,OAAO,mBAAmB,GAAG,KAAK;AACtE,oBAAG,aAAa,UAAU,SAAS,YAAY,CAAC,UAAU,SAAS,CAAC,UAAU,SAAS,WAAW,UAAU,KAAK;AAChH,sBAAI,YAAY,QAAQ,OAAO,IAAI,GAAG,QAAQ,QAAQ;AACtD,sBAAG,aAAa,OAAO,aAAa,KAAK;AACxC,4BAAQ;AACR,4BAAQ;AACR,iCAAa;AACb;AAAA,kBACD;AAAA,gBACD;AAAA,cACD;AACA,kBAAG,YAAY;AACd,oBAAG,WAAW,kBAAkB,WAAW;AAC1C,0BAAQ,iBAAiB,WAAW;AAAA;AAEpC,0BAAQ,gBAAgB,WAAW;AACpC,wBAAQ,cAAc,WAAW;AACjC,wBAAQ,cAAc,WAAW;AAAA,cAClC;AAEA,kBAAI,KAAK,SAAS,YAAY,KAAK,QAAQ,MAAM,KAAK,QAAQ,OAAO,SAAO,KAAK,WAAW,UAAU,MAAO;AAC5G,uBAAO,QAAQ,oBAAoB,CAAC;AACpC,uBAAO,KAAK,MAAM,OAAQ,MAAO;AACjC,oBAAI,KAAK,IAAI,KAAM,KAAK,CAAC,MAAM,IAAI,CAAE;AAErC,oBAAI,YAAY,WAAY;AAC3B,sBAAI,OAAO,YAAa,IAAK,IAAK,KAAK,UAAU,CAAE,GAAG,SAASgB,IAAG;AAAE,2BAAO,IAAI,IAAIA,EAAC;AAAA,kBAAG,CAAE,CAAE;AAC3F,uBAAK,IAAI,KAAM,KAAK,CAAC,IAAI,IAAI,KAAM,KAAK,CAAC,YAAY,WAAW,IAAI,CAAE,CAAC,CAAE;AAAA,gBAC1E;AAEA,oBAAI,YAAY,gBAAiB;AAChC,sBAAI,OAAO,IAAI,KAAK,UAAU,CAAC;AAC/B,sBAAI,SAAS,CAAC;AACd,2BAAQhB,KAAI,GAAGA,KAAI,KAAK,QAAQA,MAAK;AACpC,wBAAI,IAAI,KAAKA,EAAC;AACd,6BAAS,QAAQ,OAAO,QAAQ,mBAAoB;AACnD,0BAAI,OAAO,QAAQ,kBAAkB,eAAgB,IAAK,GAAI;AAC7D,4BAAI,OAAO,QAAQ,kBAAmB,IAAK,MAAM,GAAI;AACpD,iCAAO,KAAK,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,MAAM,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAE,CAAC;AAC9D;AAAA,wBACD;AAAA,sBACD;AAAA,oBACD;AAAA,kBACD;AACA,2BAAS,YAAY,MAAM;AAC3B,uBAAK,IAAI,KAAM,KAAK,CAAC,IAAI,IAAI,KAAM,KAAK,CAAC,YAAY,gBAAgB,MAAM,CAAE,CAAC,CAAE;AAAA,gBACjF;AAEA,oBAAI,YAAY,YAAa;AAC5B,sBAAI,OAAO,IAAI,IAAI,KAAK,MAAM,IAAI,EAAE,oBAAoB,IAAI,CAAC;AAC7D,sBAAI,SAAS,CAAC;AACd,2BAAQA,KAAI,GAAGA,KAAI,KAAK,QAAQA,MAAK;AACpC,wBAAI,IAAI,KAAKA,EAAC;AACd,6BAAS,QAAQ,OAAO,QAAQ,mBAAoB;AACnD,0BAAI,OAAO,QAAQ,kBAAkB,eAAgB,IAAK,GAAI;AAC7D,4BAAI,OAAO,QAAQ,kBAAmB,IAAK,MAAM,GAAI;AACpD,iCAAO,KAAK,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,MAAM,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAE,CAAC;AAC9D;AAAA,wBACD;AAAA,sBACD;AAAA,oBACD;AAAA,kBACD;AACA,2BAAS,YAAY,MAAM;AAC3B,uBAAK,IAAI,KAAM,KAAK,CAAC,IAAI,IAAI,KAAM,KAAK,CAAC,YAAY,YAAY,MAAM,CAAE,CAAC,CAAE;AAAA,gBAC7E;AACA,uBAAO,QAAS,CAAC,IAAI,MAAO,MAAM,KAAK,QAAS,EAAG,GAAG,MAAM,cAAc,KAAM,CAAC,CAAE;AAAA,cAEpF,OAAO;AACN,oBAAI,KAAK,SAAS;AACjB,yBAAO,YAAa,GAAG,MAAM,OAAQ,OAAO,KAAK,GAAG,GAAG,oBAAoB,KAAM,CAAE;AAAA;AAEnF,yBAAO,YAAa,KAAK,KAAM;AAAA,cACjC;AAAA,YACD;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,WAAW;AAAA,UACV,IAAI,KAAK,IAAI,KAAK,SAAS,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,SAAS,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QACvJ;AAAA;AAAA,QAGA,WAAW,SAAU,QAAQ,OAAO,MAAO;AAC1C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,iBAAO,QAAS,CAAC,IAAI;AAAA,YACpB,MAAM,KAAK,QAAS,IAAI,KAAK,cAAc;AAAA,cAAC;AAAA,cAAQ;AAAA,cACnD,IAAI,KAAK,KAAK;AAAA,gBAAC,IAAI,KAAK,UAAU,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC;AAAA,gBACxD,IAAI,KAAK,KAAK;AAAA,kBAAC,IAAI,KAAK,cAAc,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC;AAAA,kBACxD,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,GAAG,IAAI,KAAK,MAAK,CAAC,CAAC,CAAC,CAAC;AAAA,gBAAC,CAAC;AAAA,cAAC,CAAC;AAAA,YAAC,CAAC,CAAE;AAAA,YACxF,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAE;AAAA,QACJ;AAAA;AAAA,QAGA,YAAY;AAAA,UACX,IAAI,KAAK,IAAI,KAAK,UAAU,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,UAAU,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QACzJ;AAAA;AAAA,QAGA,YAAY,SAAU,QAAQ,OAAO,MAAO;AAC3C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,iBAAO,QAAS,CAAC,IAAI;AAAA,YACpB,MAAM,KAAK,QAAS,IAAI,KAAK,cAAc;AAAA,cAAC;AAAA,cAAQ;AAAA,cACnD,IAAI,KAAK,KAAK;AAAA,gBAAC,IAAI,KAAK,UAAU,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC;AAAA,gBACvD,IAAI,KAAK,KAAK;AAAA,kBAAC,IAAI,KAAK,cAAc,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC;AAAA,kBACxD,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,GAAG,IAAI,KAAK,MAAK,CAAC,CAAC,CAAC,CAAC;AAAA,gBAAC,CAAC;AAAA,cAAC,CAAC;AAAA,YAAC,CAAC,CAAE;AAAA,YACxF,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAE;AAAA,QACJ;AAAA;AAAA,QAGA,qBAAqB;AAAA,UACpB,IAAI,KAAK,IAAI,KAAK,mBAAmB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,mBAAmB,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC3K;AAAA;AAAA,QAGA,qBAAqB,SAAU,QAAQ,OAAO,MAAO;AACpD,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC7C,iBAAO,QAAS,CAAC,IAAI;AAAA,YACpB,MAAM,KAAK,QAAS,IAAI,KAAK,cAAc;AAAA,cAAC;AAAA,cAAQ;AAAA,cACnD,IAAI,KAAK,KAAK;AAAA,gBAAC,IAAI,KAAK,UAAU,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC;AAAA,gBACvD,IAAI,KAAK,KAAK;AAAA,kBAAC,IAAI,KAAK,cAAc,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC;AAAA,kBACvD,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,GAAG,IAAI,KAAK,MAAK,CAAC,CAAC,CAAC,CAAC;AAAA,gBAAC,CAAC;AAAA,cAAC,CAAC;AAAA,YAAC,CAAC,CAAE;AAAA,YACzF,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAE;AAAA,QACJ;AAAA;AAAA,QAGA,gBAAgB;AAAA,UACf,IAAI,KAAK,IAAI,KAAK,cAAc,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,kBAAkB,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,GAAE,IAAI,KAAK,cAAc,CAAC,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,GAAE,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,QAC3L;AAAA;AAAA,QAGA,gBAAgB,SAAU,QAAQ,OAAO,MAAO;AAC/C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC,GAAG,UAAU,KAAK,KAAK,CAAC;AACrE,cAAI,UAAU,GAAG,KAAK,UAAW,MAAO,IAAI,SAAS,OAAO,oBAAqB,OAAO,EAAG;AAC3F,cAAI,GAAG,KAAK,YAAa,MAAO,KAAK,GAAG,KAAK,YAAa,OAAQ,GAAI;AACrE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,QAAS,OAAQ,GAAI;AACxC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,SAAS,KAAK,SAAU,CAAE;AAAA,UACtE,WAAW,CAAC,GAAG,KAAK,UAAW,MAAO,KAAK,CAAC,GAAG,KAAK,QAAS,MAAO,GAAI;AACvE,mBAAO,YAAa,GAAG,MAAM,OAAQ,mBAAmB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAClF,WAAW,CAAC,GAAG,KAAK,UAAW,OAAQ,KAAK,QAAQ,WAAW,MAAO;AACrE,mBAAO,YAAa,GAAG,MAAM,UAAW,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,QAAQ,OAAQ;AAC1B,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,UAAU,QAAQ,KAAK,SAAU,CAAE;AAAA,UACvF,WAAW,QAAQ,SAAS,UAAW;AACtC,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,iBAAiB,QAAQ,KAAK,SAAU,CAAE;AAAA,UAC9F,WAAW,QAAQ,aAAa,wBAAwB,QAAQ,eAAe,SAAU;AACxF,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,sBAAsB,QAAQ,KAAK,SAAU,CAAE;AAAA,UACnG,OAAO;AAEN,gBAAI,cAAc,CAAC;AACnB,gBAAI,UAAU;AACd,gBAAI;AACJ,mBAAO,GAAG,KAAK,QAAQ,OAAO,KAAK,QAAQ,cAAc,OAAQ;AAChE,yBAAW,QAAQ,KAAK,CAAC;AACzB,kBAAI,GAAG,KAAK,YAAa,QAAS,GAAI;AACrC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAC7D;AAAA,cACD,WAAW,CAAC,GAAG,KAAK,gBAAiB,QAAS,GAAI;AACjD,uBAAO,YAAa,GAAG,MAAM,OAAQ,gBAAgB,UAAU,KAAK,SAAU,CAAE;AAChF;AAAA,cACD;AACA,kBAAG,SAAS,cAAc;AACzB,4BAAY,SAAS,EAAE,IAAI,SAAS,KAAK,CAAC;AAAA;AAE1C,4BAAY,SAAS,EAAE,IAAI,SAAS,KAAK,CAAC,EAAE,OAAO;AACpD,wBAAU,QAAQ,KAAK,CAAC;AAAA,YACzB;AACA,gBAAI,QAAQ,cAAc,QAAS;AAClC,kBAAI,GAAG,KAAK,YAAa,OAAQ;AAChC,uBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA;AAE7D,uBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,SAAS,KAAK,SAAU,CAAE;AACtE;AAAA,YACD,OAAO;AACN,0BAAY,UAAU,OAAO;AAC7B,kBAAI,OAAO,KAAK,SAAU,WAAY;AACtC,sBAAQ,OAAO,IAAK,MAAM,QAAQ,QAAS;AAC3C,kBAAI,OAAO,QAAQ,aAAa;AAC/B,wBAAQ,YAAY,KAAK;AAC1B,kBAAI,MAAM,KAAK,MAAM,KAAK,KAAK,CAAC,GAAG;AACnC,sBAAQ,cAAc;AACtB,kBAAG,KAAK;AACP,wBAAQ,gBAAgB,KAAK,SAAS,KAAK,YAAY,IAAI,IAAI;AAAA;AAE/D,wBAAQ,iBAAiB,KAAK;AAC/B,sBAAQ,cAAc,KAAK;AAC3B,qBAAO,QAAS,KAAM;AAAA,YACvB;AAAA,UACD;AAAA,QACD;AAAA;AAAA;AAAA,QAKA,UAAU,SAAU,QAAQ,OAAO,GAAI;AACtC,cAAI,OAAO,SAAS,QAAQ,EAAE,cAAc;AAC3C,oBAAQ,KAAK;AACd,iBAAO,SAAS,CAAC;AAAA,QAClB;AAAA;AAAA,QAGA,UAAU,SAAU,QAAQ,OAAO,MAAO;AACzC,cAAI,MAAM,KAAK,KAAK,CAAC;AACrB,cAAI,GAAG,KAAK,YAAa,GAAI,GAAI;AAChC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,WAAY,GAAI,GAAI;AACvC,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,KAAK,KAAK,SAAU,CAAE;AAAA,UACrE,OAAO;AACN,gBAAI,OAAO,SAAS,QAAQ,EAAE,cAAc;AAC3C,sBAAQ,KAAK,IAAI,KAAK;AACvB,mBAAO,SAAS,CAAC;AAAA,UAClB;AAAA,QACD;AAAA;AAAA,QAGA,yBAAyB,SAAU,QAAQ,OAAO,MAAO;AACxD,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AAC5C,cAAI,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,QAAS,IAAK,GAAI;AAC9D,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,UACnE,WAAW,CAAC,GAAG,KAAK,YAAa,IAAK,KAAK,CAAC,GAAG,KAAK,QAAS,IAAK,GAAI;AACrE,mBAAO,YAAa,GAAG,MAAM,OAAQ,eAAe,MAAM,KAAK,SAAU,CAAE;AAAA,UAC5E,OAAO;AACN,gBAAI,SAAS,CAAC;AACd,qBAAS,QAAQ,GAAG,MAAO;AAC1B,kBAAG,CAAC,GAAG,KAAK,eAAe,IAAI,EAAG;AAClC,kBAAI,OAAO,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,KAAK,CAAC,IAAI,KAAM,IAAK,GAAG,IAAI,CAAE,GAAG,IAAI,KAAM,KAAK,CAAC,OAAO,SAAS,IAAI,GAAG,KAAK,CAAE,CAAC,CAAE;AACvH,qBAAO,KAAM,IAAI,MAAO,MAAM,KAAK,QAAS,IAAK,GAAG,MAAM,cAAc,KAAM,CAAE;AAAA,YACjF;AACA,mBAAO,QAAS,MAAO;AAAA,UACxB;AAAA,QACD;AAAA;AAAA,QAGA,qBAAqB,SAAU,QAAQ,OAAO,MAAO;AACpD,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AAC5C,cAAI,GAAG,KAAK,YAAa,IAAK,KAAK,GAAG,KAAK,YAAa,KAAM,GAAI;AACjE,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,QAAS,IAAK,GAAI;AACrC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,UACnE,WAAW,CAAC,GAAG,KAAK,QAAS,IAAK,GAAI;AACrC,mBAAO,YAAa,GAAG,MAAM,OAAQ,eAAe,MAAM,KAAK,SAAU,CAAE;AAAA,UAC5E,WAAW,CAAC,GAAG,KAAK,mBAAoB,IAAK,GAAI;AAChD,mBAAO,YAAa,GAAG,MAAM,WAAY,UAAU,QAAQ,MAAM,KAAK,SAAU,CAAE;AAAA,UACnF,WAAW,CAAC,GAAG,KAAK,cAAe,MAAM,KAAM,GAAI;AAClD,mBAAO,YAAa,GAAG,MAAM,OAAQ,cAAc,IAAI,KAAM,KAAK,CAAC,MAAM,KAAK,CAAE,GAAG,KAAK,SAAU,CAAE;AAAA,UACrG,OAAO;AACN,mBAAO,QAAQ,KAAK,KAAK,EAAE,IAAI;AAC/B,mBAAO,QAAS,KAAM;AAAA,UACvB;AAAA,QACD;AAAA;AAAA;AAAA,QAOA,aAAa,SAAS,QAAQ,OAAO,MAAM;AAC1C,cAAI,MAAM,KAAK,KAAK,CAAC;AACrB,cAAI,iBAAiB;AACrB,cAAG,IAAI,cAAc,OAAO;AAC3B,6BAAiB,IAAI,KAAK,CAAC,EAAE;AAC7B,kBAAM,IAAI,KAAK,CAAC;AAAA,UACjB;AACA,cAAG,GAAG,KAAK,YAAY,GAAG,GAAG;AAC5B,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAU,CAAC,GAAG,KAAK,QAAQ,GAAG,GAAG;AAChC,mBAAO,YAAa,GAAG,MAAM,KAAM,QAAQ,KAAK,KAAK,SAAU,CAAE;AAAA,UAClE,OAAO;AACN,gBAAG,OAAO,QAAQ,IAAI,IAAI;AAAA,cACzB;AAAA,cACA,MAAM;AAAA,cACN,MAAM;AAAA,cACN,SAAS,WAAW;AACnB,uBAAO,QAAQ,KAAK;AACpB,uBAAO,MAAM;AAAA,cACd;AAAA,cACA,OAAO,SAAS,KAAK;AACpB,uBAAO,YAAY,GAAG;AACtB,uBAAO,MAAM;AAAA,cACd;AAAA,YACD,CAAC,EAAE;AACH,mBAAO;AAAA,UACR;AAAA,QACD;AAAA;AAAA;AAAA,QAOA,cAAc,SAAU,QAAQ,OAAO,MAAO;AAC7C,cAAI,OAAO,KAAK,KAAK,CAAC;AACtB,cAAG,CAAC,GAAG,KAAK,YAAY,IAAI,KAAK,CAAC,GAAG,KAAK,UAAU,IAAI,GAAG;AAC1D,mBAAO,YAAa,GAAG,MAAM,KAAM,UAAU,MAAM,KAAK,SAAU,CAAE;AAAA,UACrE,OAAO;AACN,gBAAI,UAAU,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI;AACtC,mBAAO,QAAS,CAAC,IAAI;AAAA,cACpB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,MAAM,OAAO,CAAE,CAAE;AAAA,cACrD,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAE;AAAA,UACJ;AAAA,QACD;AAAA;AAAA,QAGA,mBAAmB,SAAS,QAAQ,OAAO,MAAM;AAChD,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,WAAW,KAAK,KAAK,CAAC;AAC/C,cAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,mBAAO,YAAY,GAAG,MAAM,cAAc,KAAK,SAAS,CAAC;AAAA,UAC1D,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,KAAK,CAAC,GAAG,KAAK,UAAU,IAAI,GAAG;AACjE,mBAAO,YAAY,GAAG,MAAM,KAAK,UAAU,MAAM,KAAK,SAAS,CAAC;AAAA,UACjE,WAAU,CAAC,GAAG,KAAK,YAAY,QAAQ,KAAK,CAAC,GAAG,KAAK,iBAAiB,QAAQ,GAAG;AAChF,mBAAO,YAAY,GAAG,MAAM,OAAO,iBAAiB,UAAU,KAAK,SAAS,CAAC;AAAA,UAC9E,OAAO;AACN,gBAAI;AACJ,gBAAG,GAAG,KAAK,YAAY,QAAQ,GAAG;AACjC,sBAAQ,CAAC,QAAQ,SAAS,OAAO,SAAS,WAAW,WAAW,gBAAgB,SAAS;AAAA,YAC1F,OAAO;AACN,sBAAQ,CAAC,SAAS,EAAE;AAAA,YACrB;AACA,gBAAI,OAAO,IAAI,KAAK,KAAK,KAAK;AAC9B,gBAAI;AACJ,gBAAI,SAAS,CAAC;AACd,qBAAQA,KAAI,GAAGA,KAAI,MAAM,QAAQA,MAAK;AACrC,sBAAO,MAAMA,EAAC,GAAG;AAAA,gBAChB,KAAK;AACJ,0BAAQ,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,KAAK,YAAY,GAAG,KAAK,CAAC,CAAC;AAC7D;AAAA,gBACD,KAAK;AACJ,0BAAQ,IAAI,KAAK,SAAS,CAAC,IAAI,IAAI,KAAK,SAAS,GAAG,KAAK,CAAC,CAAC;AAC3D;AAAA,gBACD,KAAK;AACJ,0BAAQ,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG,KAAK,CAAC,CAAC;AACxD;AAAA,gBACD,KAAK;AACJ,0BAAQ,IAAI,KAAK,SAAS,CAAC,IAAI,IAAI,KAAK,SAAS,GAAG,KAAK,CAAC,CAAC;AAC3D;AAAA,gBACD,KAAK;AACJ,0BAAQ,IAAI,KAAK,WAAW,CAAC,IAAI,IAAI,KAAK,WAAW,GAAG,KAAK,CAAC,CAAC;AAC/D;AAAA,gBACD,KAAK;AACJ,0BAAQ,IAAI,KAAK,WAAW,CAAC,IAAI,IAAI,KAAK,WAAW,GAAG,KAAK,CAAC,CAAC;AAC/D;AAAA,gBACD,KAAK;AACJ,0BAAQ,IAAI,KAAK,gBAAgB,CAAC,IAAI,IAAI,KAAK,gBAAgB,GAAG,KAAK,CAAC,CAAC;AACzE;AAAA,gBACD,KAAK;AACJ,0BAAQ,IAAI,KAAK,WAAW,CAAC,IAAI,IAAI,KAAK,OAAO,GAAG,KAAK,CAAC,CAAC;AAC3D;AAAA,cACF;AACA,qBAAO,KAAK,IAAI;AAAA,gBACf,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,UAAU,KAAK,CAAE,CAAE;AAAA,gBACvD,MAAM;AAAA,gBACN;AAAA,cACD,CAAC;AAAA,YACF;AACA,mBAAO,QAAQ,MAAM;AAAA,UACtB;AAAA,QACD;AAAA;AAAA,QAGA,eAAe,SAAU,QAAQ,OAAO,MAAO;AAC9C,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,OAAO,KAAK,KAAK,CAAC;AAC3C,cAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAU,CAAC,GAAG,KAAK,UAAU,IAAI,GAAG;AACnC,mBAAO,YAAa,GAAG,MAAM,KAAM,UAAU,MAAM,KAAK,SAAU,CAAE;AAAA,UACrE,WAAU,CAAC,GAAG,KAAK,YAAY,IAAI,KAAK,CAAC,GAAG,KAAK,WAAW,IAAI,GAAG;AAClE,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,MAAM,KAAK,SAAU,CAAE;AAAA,UACtE,OAAO;AACN,gBAAI,QAAQ,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,EAAE,YAAY,GAAG,KAAK;AAC7D,mBAAO,QAAS,CAAC,IAAI;AAAA,cACpB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,MAAM,KAAK,CAAE,CAAE;AAAA,cACnD,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAE;AAAA,UACJ;AAAA,QACD;AAAA;AAAA,QAGA,gBAAgB,SAAU,QAAQ,OAAO,MAAO;AAC/C,cAAI,OAAO,KAAK,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC;AAC5C,cAAG,GAAG,KAAK,YAAY,IAAI,GAAG;AAC7B,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAU,CAAC,GAAG,KAAK,UAAU,IAAI,GAAG;AACnC,mBAAO,YAAa,GAAG,MAAM,KAAM,UAAU,MAAM,KAAK,SAAU,CAAE;AAAA,UACrE,WAAU,CAAC,GAAG,KAAK,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,WAAW,KAAK,GAAG;AACpE,mBAAO,YAAa,GAAG,MAAM,KAAM,WAAW,OAAO,KAAK,SAAU,CAAE;AAAA,UACvE,OAAO;AACN,gBAAI,QAAQ,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,EAAE,SAAS,GAAG,KAAK;AAC1D,mBAAO,QAAS,CAAC,IAAI;AAAA,cACpB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,OAAO,KAAK,CAAE,CAAE;AAAA,cACpD,MAAM;AAAA,cACN;AAAA,YACD,CAAC,CAAE;AAAA,UACJ;AAAA,QACD;AAAA;AAAA;AAAA,QAOA,YAAY,SAAU,QAAQ,OAAO,MAAO;AAC3C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,KAAK,CAAC,GAAG,IAAI,KAAK,KAAK,CAAC;AAC7D,cAAI,iBAAiB;AACrB,cAAG,OAAO,cAAc,OAAO;AAC9B,6BAAiB,OAAO,KAAK,CAAC,EAAE;AAChC,qBAAS,OAAO,KAAK,CAAC;AAAA,UACvB;AACA,cAAI,GAAG,KAAK,YAAa,MAAO,GAAI;AACnC,mBAAO,YAAa,GAAG,MAAM,cAAe,KAAK,SAAU,CAAE;AAAA,UAC9D,WAAW,CAAC,GAAG,KAAK,YAAa,MAAO,GAAI;AAC3C,mBAAO,YAAa,GAAG,MAAM,KAAM,YAAY,QAAQ,KAAK,SAAU,CAAE;AAAA,UACzE,OAAO;AACN,gBAAI,OAAO,YAAa,OAAO,MAAM,GAAG,IAAI,MAAO;AACnD,iBAAK,QAAQ,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,cAAc,GAAG,IAAI,KAAK,QAAQ,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC;AACrF,gBAAG,SAAS,MAAM;AACjB,qBAAO,QAAS,CAAC,IAAI;AAAA,gBACpB,MAAM,KAAK,QAAS,IAAI,KAAM,KAAK,CAAC,KAAK,OAAO,IAAI,KAAK,KAAK,CAAC,KAAK,UAAU,CAAC,CAAC,CAAC,CAAE,CAAE;AAAA,gBACrF,MAAM;AAAA,gBACN;AAAA,cACD,CAAC,CAAE;AAAA,YACJ;AAAA,UACD;AAAA,QACD;AAAA;AAAA,QAGA,YAAY,SAAU,QAAQ,OAAO,MAAO;AAC3C,cAAI,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,KAAK,CAAC;AAC3C,iBAAO,QAAS,CAAC,IAAI;AAAA,YACpB,MAAM,KAAK,QAAS,IAAI,KAAM,UAAU,CAAC,QAAQ,IAAI,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,CAAE,CAAE;AAAA,YAC3E,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAE;AAAA,QACJ;AAAA;AAAA;AAAA,QAOA,aAAa,SAAU,QAAQ,OAAO,MAAO;AAC5C,cAAI,MAAM,mCAAmC,QAAQ,QAAQ,MAAM,QAAQ,QAAQ,MAAM,QAAQ,QAAQ;AACzG,iBAAO;AACP,iBAAO;AACP,iBAAO;AACP,iBAAO,QAAS,CAAC,IAAI;AAAA,YACpB,MAAM,KAAK,QAAS,IAAI,KAAM,SAAS,CAAC,IAAI,KAAM,KAAK,CAAC,CAAE,CAAC,CAAE,CAAE;AAAA,YAC/D,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAE;AAAA,QACJ;AAAA;AAAA,QAGA,aAAa,SAAU,QAAQ,OAAO,MAAO;AAC5C,cAAI,MAAM;AACV,iBAAO;AACP,iBAAO;AACP,iBAAO;AACP,iBAAO;AACP,iBAAO;AACP,iBAAO;AACP,iBAAO;AACP,iBAAO,QAAS,CAAC,IAAI;AAAA,YACpB,MAAM,KAAK,QAAS,IAAI,KAAM,SAAS,CAAC,IAAI,KAAM,KAAK,CAAC,CAAE,CAAC,CAAE,CAAE;AAAA,YAC/D,MAAM;AAAA,YACN;AAAA,UACD,CAAC,CAAE;AAAA,QACJ;AAAA,MAED,GAAG,OAAO;AAAA,QACT,iBAAiB;AAAA;AAAA,UAEhB,cAAc,IAAI,KAAK,YAAY,CAAC,IAAI,KAAK,GAAG,GAAG,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEnG,YAAY,IAAI,KAAK,UAAU,CAAC,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAE5E,YAAY,IAAI,KAAK,UAAU,CAAC,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAE5E,SAAS,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAAA;AAAA,UAElF,OAAO,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAAA;AAAA,UAE3D,QAAQ,IAAI,KAAK,MAAM,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAAA;AAAA,UAE7D,SAAS,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAAA;AAAA,UAE/D,SAAS,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAAA;AAAA,UAE5C,aAAa,IAAI,KAAK,WAAW,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEhD,aAAa,IAAI,KAAK,WAAW,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEhD,aAAa,IAAI,KAAK,WAAW,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEhD,WAAW,IAAI,KAAK,SAAS,CAAC,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAE1E,UAAU,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAAA;AAAA,UAE9C,UAAU,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAE7D,UAAU,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAE5E,UAAU,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAE3F,UAAU,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAE1G,UAAU,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEzH,UAAU,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAExI,UAAU,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEvJ,kBAAkB,IAAI,KAAK,gBAAgB,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAAA;AAAA,UAEjF,WAAW,IAAI,KAAK,SAAS,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAAA;AAAA,UAElF,aAAa,IAAI,KAAK,WAAW,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEhD,YAAY,IAAI,KAAK,UAAU,CAAC,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAE7D,uBAAuB,IAAI,KAAK,qBAAqB,CAAC,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEnF,aAAa,IAAI,KAAK,WAAW,CAAC,IAAI,KAAK,GAAG,GAAG,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAElF,aAAa,IAAI,KAAK,WAAW,CAAC,IAAI,KAAK,GAAG,GAAG,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEjG,YAAY,IAAI,KAAK,UAAU,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAAA;AAAA,UAErE,aAAa,IAAI,KAAK,WAAW,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEhD,UAAU,IAAI,KAAK,QAAQ,CAAC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAAA;AAAA,UAE9C,YAAY,IAAI,KAAK,UAAU,CAAC,IAAI,KAAK,GAAG,GAAE,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAE5D,YAAY,IAAI,KAAK,UAAU,CAAC,IAAI,KAAK,GAAG,GAAE,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAE3E,aAAa,IAAI,KAAK,WAAW,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEhD,gBAAgB,IAAI,KAAK,cAAc,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA;AAAA,UAEtD,wBAAwB,IAAI,KAAK,sBAAsB,CAAC,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAAA;AAAA,UAEhH,WAAW,IAAI,KAAK,SAAS,CAAC,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC;AAAA,QAC3E;AAAA,MACD,CAAC;AAED,UAAI,OAAO,WAAW,aAAc;AACnC,eAAO,UAAU;AAAA,MAClB,OAAO;AACN,eAAO,KAAK;AAAA,MACb;AAAA,IAED,GAAG;AAAA;AAAA;",
  "names": ["verNum", "array", "value", "text", "group", "i", "i", "thread", "opts", "reconsulted", "expr", "term", "callback", "indicator", "rules", "exports", "call", "error", "answer", "x", "module", "str_indicator", "v"]
}
